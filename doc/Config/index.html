<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Configuration Guide: Introduction</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen_manual.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Configuration Guide
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('index.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title"></div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p> 
<img src="infa_logo.png" width="400" height="138" alt="Informatica"/><br/><br/>
<big><b>Ultra Messaging</b></big> <small>(Version 6.12.1)</small><br/>
<br/><br/><br/>
<center class="mytitle">Configuration Guide</center>
<br/><br/><br/>
[&nbsp;<a href="html1/index.html">Single-page HTML</a>&nbsp;]&nbsp;&nbsp;|&nbsp;&nbsp;[&nbsp;<a href="Configuration_Guide=en.pdf">PDF</a>&nbsp;]
<br/><br/>
<h1>Introduction&nbsp;&nbsp;<small><a href="#resolverwildcardreceivermaptableszcontext">&lt;-</a></small></h1>
</p>
<p><b>&copy; Copyright Informatica LLC 2004-2019.</b></p>
<p>This document describes how Ultra Messaging-based user applications are configured.</p>
<p>For information on configuring other UM components, see: </p><ul>
<li>
<a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.12.1_RC1/doc/Config/design.tag:../Design/" href="../Design/lbmrdconfigurationfile.html">Lbmrd (Unicast Resolver Daemon) Configuration</a> </li>
<li>
<a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.12.1_RC1/doc/Config/design.tag:../Design/" href="../Design/srsconfigurationfile.html">SRS (TCP-based Resolver Service) Configuration</a> </li>
<li>
<a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.12.1_RC1/doc/Config/gateway.tag:../Gateway/" href="../Gateway/xmlconfigurationreference.html">UM Router Configuration</a> </li>
<li>
<a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.12.1_RC1/doc/Config/ume.tag:../UME/" href="../UME/configurationreferenceforumestored.html">Persistent Store Configuration</a> </li>
</ul>
<p>This software and documentation are provided only under a separate license agreement containing restrictions on use and disclosure. No part of this document may be reproduced or transmitted in any form, by any means (electronic, photocopying, recording or otherwise) without prior consent of Informatica LLC.</p>
<p>A current list of Informatica trademarks is available on the web at <a href="https://www.informatica.com/trademarks.html">https://www.informatica.com/trademarks.html</a>.</p>
<p>Portions of this software and/or documentation are subject to copyright held by third parties. Required third party notices are included with the product.</p>
<p>This software is protected by patents as detailed at <a href="https://www.informatica.com/legal/patents.html">https://www.informatica.com/legal/patents.html</a>.</p>
<p>The information in this documentation is subject to change without notice. If you find any problems in this documentation, please report them to us in writing at Informatica LLC 2100 Seaport Blvd. Redwood City, CA 94063.</p>
<p>Informatica products are warranted according to the terms and conditions of the agreements under which they are provided. <br />
INFORMATICA LLC PROVIDES THE INFORMATION IN THIS DOCUMENT "AS IS" WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING WITHOUT ANY WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND ANY WARRANTY OR CONDITION OF NON-INFRINGEMENT.</p>
<p>This document assumes familiarity with the <a href="../Design/index.html">UM Concepts Guide</a>.</p>
<p>See <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.12.1_RC1/doc/Config/design.tag:../Design/" href="../Design/umglossary.html">UM Glossary</a> for Ultra Messaging terminology, abbreviations, and acronyms.</p>
<p><br />
 </p>
<h1><a class="anchor" id="configurationoverview"></a>
Configuration Overview&nbsp;&nbsp;<small><a href="#configurationoverview">&lt;-</a></small></h1>
<p>For Ultra Messaging applications, you can set a variety of operational options to customize the application's behavior or performance. You assign values to these options in configuration files or by using API calls. You can assign option values to objects upon or after object creation. Within an object, the implemented option values are referred to as attributes.</p>
<p>Ultra Messaging uses intelligent default values for configuration options, enabling applications to run "out of the box." However, expect to customize Ultra Messaging options to optimize your operating environment. You can use different ways to configure option default and customized value assignments.</p>
<p><br />
 </p>
<h2><a class="anchor" id="assignmentmethods"></a>
Assignment Methods&nbsp;&nbsp;<small><a href="#assignmentmethods">&lt;-</a></small></h2>
<p>You can use the following ways to set attributes with configuration options:</p>
<dl class="section user"><dt><b>plain</b> <b>text</b> <b>configuration</b> <b>file</b> </dt><dd>The simplest way to configure an application, a plain text configuration file (sometimes called a "flat" file) allows you to re-define UM's default berhaviors. These new defaults are read into a process-global configuration buffer, and are used as UM objects are created. Note that after reading a plain text configuration file, an application can still override the defaults on a per-object basis using UM's API.</dd></dl>
<dl class="section user"><dt><b>XML</b> <b>configuration</b> <b>file</b> </dt><dd>An XML configuration file provides a more sophisticated way to set UM's default behavior, allowing users to customize UM's default behavior on a per-application and/or per-object basis. And while an application can still override the defaults, restrictions can be imposed, constraining applications to only certain options and certain values of those options.</dd></dl>
<dl class="section user"><dt><b>attributes</b> <b>objects</b> <b>API</b> </dt><dd>The application program can call API functions to create UM attributes objects and set configuration options in those objects. The attributes objects are then used to create other UM messaging objects to set those options. </dd></dl>
<dl class="section user"><dt></dt><dd>Alternatively, there are API functions which allow you to modify a subset of configurable options on already-created UM messaging objects.</dd></dl>
<p>The following image shows the different ways Ultra Messaging stores and assigns option values before, during, and after primitive object creation. Primitive objects are sources, receivers, wildcard receivers, event queues, contexts, or HFX objects. The ultimate result is a primitive object with the assigned values residing in current attributes.</p>
<div class="image">
<img src="Attr_Config_and_XML.png" alt="Attr_Config_and_XML.png"/>
</div>
 <p>The <em>initial default attributes</em> is the set of factory defaults in Ultra Messaging. At process initialization time, these factory defaults are copied into a set of internal process-global attribute structures (<em>current default attributes</em>).</p>
<p>An application can modify desired options by reading a <em>plaintext configuration file</em>. UM will store these values in <em>current default attributes</em>, overwriting the factory defaults.</p>
<p>An instantiated primitive object uses values from current default attributes, the <em>XML config table</em>, and the <em>custom attributes object</em>, and then holds the results in <em>current attributes</em>.</p>
<p>An <em>XML configuration file</em> can pass its setting to an object being created either by directly populating the XML config table, or by creating a custom attributes object.</p>
<p><br />
 </p>
<h2><a class="anchor" id="assignmentflow"></a>
Assignment Flow&nbsp;&nbsp;<small><a href="#assignmentflow">&lt;-</a></small></h2>
<p>The above diagram implies, but does not fully explain, the flow of attribute value assignment that UM performs when an application creates a primitive object. This flow is described below, and is important in understanding how and when default values are overridden:</p>
<ol>
<li>
If applicable, copy plain text configuration file values to current process-global default attributes. </li>
<li>
Start creating object. </li>
<li>
Custom attributes object(s) created/populated (if applicable). </li>
<li>
If lbm_*_create() has a NULL attr, copy current default attributes into current attributes. Otherwise, copy custom attributes object values into current attributes. </li>
<li>
Read applicable options from the XML config table into the current attributes. Do not overwrite options set with <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.12.1_RC1/doc/Config/api.tag:../API/" href="../API/lbm_8h.html#aecac05969bba0d6057589ca03dfe60a2">lbm_config()</a>, or lbm_*_attr_setopt(), which were tagged when modified. </li>
<li>
Finish object creation. </li>
<li>
current attributes can be changed further (only certain options) via lbm_*_setopt(). </li>
</ol>
<p><br />
 </p>
<h2><a class="anchor" id="definitions"></a>
Definitions&nbsp;&nbsp;<small><a href="#definitions">&lt;-</a></small></h2>
<p>Before discussing how UM options can be set, some terminology is in order.</p>
<dl class="section user"><dt><b>Option</b> </dt><dd>A single configuration item that controls some aspect of UM operation. An option typically resides in a configuration file, but can also be assigned a value via API call. We use options to assign values to an object's attributes.</dd></dl>
<dl class="section user"><dt><b>Attribute</b> </dt><dd>An operational characteristic of an object. An attribute's value is set by an option, hence, there is a one-to-one correspondence between options and attributes. (Note: This use of the term "attribute" is unrelated to, and not to be confused with, "attribute" in XML syntax. In this document, we refer to the latter as "XML attribute".)</dd></dl>
<dl class="section user"><dt><b>XML</b> <b>attribute</b> </dt><dd>See above. In XML syntax, XML attributes are parameters for XML elements.</dd></dl>
<dl class="section user"><dt><b>Custom</b> <b>attributes</b> <b>object</b> </dt><dd>A UM object that contains custom attribute values (set by options) for a specific UM object. Separate (and multiple) sets of attributes can exist for each application, though only one can be used when creating a primitive object.</dd></dl>
<dl class="section user"><dt><b>Initial</b> <b>default</b> <b>attributes</b> </dt><dd>The default attributes values built into UM. UM and your applications use these if you have not set any options for the attributes.</dd></dl>
<dl class="section user"><dt><b>Primitive</b> <b>object</b> </dt><dd>Specifically, an object that is a source, receiver, wildcard receiver, event queue, context, or HFX object.</dd></dl>
<dl class="section user"><dt><b>Configuration</b> <b>file</b> </dt><dd>This comes in two types: XML and plain text. Configuration files contain assigned values for options, but the different types are read/copied at different times during the creation of an object.</dd></dl>
<dl class="section user"><dt><b>XML</b> <b>config</b> <b>table</b> </dt><dd>Contains option values that are read from the XML configuration file.</dd></dl>
<dl class="section user"><dt><b>Current</b> <b>default</b> <b>attributes</b> </dt><dd>The attributes values used to create an object in the absence of custom attributes values.</dd></dl>
<dl class="section user"><dt><b>Current</b> <b>attributes</b> </dt><dd>The attribute values for an instantiated UM object that control the current operation of that object.</dd></dl>
<dl class="section user"><dt><b>Scope</b> </dt><dd>The type of object to which an option can apply. Possible scopes are context, source, receiver, wildcard_receiver, event_queue, and hfx.</dd></dl>
<p><br />
 </p>
<h2><a class="anchor" id="whichmethodshouldiuse"></a>
Which Method Should I Use?&nbsp;&nbsp;<small><a href="#whichmethodshouldiuse">&lt;-</a></small></h2>
<p>For the four basic assignment methods listed above, following are some scenarios where specific methods are selected.</p>
<ul>
<li>
<p class="startli">To change a default option value and apply it to all objects you create, call <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.12.1_RC1/doc/Config/api.tag:../API/" href="../API/lbm_8h.html#aecac05969bba0d6057589ca03dfe60a2">lbm_config()</a> for one or more configuration files. For example, to use LBT-RM rather than TCP for all sources, create a plain text configuration file containing </p><pre>source transport LBTRM</pre><p> and pass its file name to <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.12.1_RC1/doc/Config/api.tag:../API/" href="../API/lbm_8h.html#aecac05969bba0d6057589ca03dfe60a2">lbm_config()</a>.</p>
<dl class="section note"><dt>Note</dt><dd>The C API offers APIs lbm_*_attr_create_default() to create an attribute object with initial factory default values. This is unaffected by default overrides from configuration files. No such corresponding method exists for the Java or .NET APIs.</dd></dl>
</li>
<li>
To customize specific options before an object is created for a specific object instance, use a custom attributes object. Also, you can assign XML data to the XML config table directly from your application via <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.12.1_RC1/doc/Config/api.tag:../API/" href="../API/lbm_8h.html#ac3cb9ed202d10200b9e621f499556159">lbm_config_xml_string()</a>.  </li>
<li>
To create sets of custom values to be used when creating primitive objects, call <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.12.1_RC1/doc/Config/api.tag:../API/" href="../API/lbm_8h.html#ab1dc9d6fa0a9af0399a61a8d6029cf73">lbm_config_xml_file()</a> and specify an XML configuration file. This is useful for setting specific default options on a per-topic or per-context basis, which cannot be done with a plain text configuration file. For an example where a sending application uses specific options and values, create an XML configuration file with the application's name (optional) that specifies those options and values. Then pass the XML file name and application name to <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.12.1_RC1/doc/Config/api.tag:../API/" href="../API/lbm_8h.html#ab1dc9d6fa0a9af0399a61a8d6029cf73">lbm_config_xml_file()</a>.  </li>
<li>
To change an option after an object is created, modify the current attributes for the object. (Note that many options cannot be changed after an object has been created.)  </li>
</ul>
<p>These methods can be used in combination. See <a class="el" href="index.html#assignmentmethods">Assignment Methods</a> to see the relationships between attributes and the various UM API function calls that affect them.</p>
<p><br />
 </p>
<h2><a class="anchor" id="hostnameresolution"></a>
Host Name Resolution&nbsp;&nbsp;<small><a href="#hostnameresolution">&lt;-</a></small></h2>
<p>Many of UM's configuration options specify an IP address. Prior to UM version 6.10 these needed to be specified in dotted numeric format. For example, <b>10.23.19.210</b>. Starting in version 6.10, any configuration option that accepts an IP address can also accept a DNS host name (the few exceptions are noted in the documentation). For example, <b>myhost.mydomain.com</b>. Note that the DNS name system is not necessarily used when host names are specified; for example, most Unix systems will first look up the name in <b>/etc/hosts</b>.</p>
<p>When host names are specified, the name is resolved to an IP address when the configuration option is parsed. If you change the IP address associated with a name, that change will not take effect until the configuration file is re-read, typically by restarting the application.</p>
<p><br />
 </p>
<h2><a class="anchor" id="configurationfiles"></a>
Configuration Files&nbsp;&nbsp;<small><a href="#configurationfiles">&lt;-</a></small></h2>
<p>There are two types of UM Configuration files:</p>
<ul>
<li>
<a class="el" href="index.html#plaintextconfigurationfiles">Plain Text Configuration Files</a> </li>
<li>
<a class="el" href="xmlconfigurationfiles.html">XML Configuration Files</a> </li>
</ul>
<p>You can read Configuration files either by API call, or automatically upon application launch by specifying a file name in an environment variable. See <a class="el" href="index.html#assignmentmethods">Assignment Methods</a> and <a class="el" href="index.html#assignmentflow">Assignment Flow</a> for details on how these options replace or override default values.</p>
<p>There are some UM configuration options which cannot be set via configuration files. These are options whose values are function pointers or data structures. These options can only be set via API functions <b>*_setopt</b>. For example, <b>context resolver_source_notification_function</b> has a function pointer as its value. See <a class="el" href="optioncategories.html#optionsthatcannotbesetviaconfigurationfiles">Options that Cannot Be Set Via Configuration Files</a> for the full list.</p>
<p><br />
 </p>
<h1><a class="anchor" id="plaintextconfigurationfiles"></a>
Plain Text Configuration Files&nbsp;&nbsp;<small><a href="#plaintextconfigurationfiles">&lt;-</a></small></h1>
<p>The plain text configuration file (sometimes called a "flat" file), when invoked, writes option values into UM's current default attributes. These are then read and used in the creation of all objects.</p>
<p>See <a class="el" href="exampleconfigurationscenarios.html">Example Configuration Scenarios</a> for example configuration files.</p>
<p><br />
 </p>
<h2><a class="anchor" id="readingplaintextconfigurationfiles"></a>
Reading Plain Text Configuration Files&nbsp;&nbsp;<small><a href="#readingplaintextconfigurationfiles">&lt;-</a></small></h2>
<p>There are two ways to read a plain text configuration file to set values in current default attributes.</p>
<dl class="section user"><dt><b>API</b> <b>function</b> <b>lbm_config</b>()</dt><dd>You can call the API multiple times with different file names to set configuration options in phases.</dd></dl>
<p>When you create UM objects (such as a context or receiver), UM sets attributes for that object using the current default attributes. Hence, you must call <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.12.1_RC1/doc/Config/api.tag:../API/" href="../API/lbm_8h.html#aecac05969bba0d6057589ca03dfe60a2">lbm_config()</a> before creating objects (lbm_*_create()).</p>
<dl class="section user"><dt><b>Environment</b> <b>variable</b> <b>LBM_DEFAULT_CONFIG_FILE</b> </dt><dd>Reads configuration file when your application is started. You can set this variable to a full pathname or a URL; for example:</dd></dl>
<div class="fragment"><div class="line">export LBM_DEFAULT_CONFIG_FILE=/home/lbm/lbtrm.cfg</div></div><!-- fragment --><p>(You can still use the <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.12.1_RC1/doc/Config/api.tag:../API/" href="../API/lbm_8h.html#aecac05969bba0d6057589ca03dfe60a2">lbm_config()</a> API on a different file to make additional changes.)</p>
<p><br />
 </p>
<h1><a class="anchor" id="plaintextconfigurationfileformat"></a>
Plain Text Configuration File Format&nbsp;&nbsp;<small><a href="#plaintextconfigurationfileformat">&lt;-</a></small></h1>
<p>A plain text configuration file contains lines that each take the form:</p>
<p><em>scope_keyword option_name option_value</em></p>
<p>where:</p>
<p><em>scope_keyword</em> - the scope to which the option applies,</p>
<p><em>option_name</em> - the predefined name for the option, and</p>
<p><em>option_value</em> - the new value to be assigned to that option.</p>
<p>Allowable values for these parameters are given throughout the rest of this document. Any text following a hash character # (also known as a pound sign, number sign, or octothorp) is interpreted as comment text and is ignored.</p>
<p>For example:</p>
<div class="fragment"><div class="line"><span class="preprocessor"># Set transport_tcp_port_low to 4901</span></div><div class="line">context transport_tcp_port_low 4901</div><div class="line"><span class="preprocessor"># And set transport_tcp_port_high to 4920</span></div><div class="line"><span class="preprocessor">context transport_tcp_port_high 4920</span></div></div><!-- fragment --><dl class="section note"><dt>Note</dt><dd>For plain text configuration files, do not enclose any fields in double quotation marks ("). </dd></dl>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.11-->
</body>
</html>
