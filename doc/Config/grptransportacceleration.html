<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Configuration Guide: Transport Acceleration Options</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen_manual.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Configuration Guide
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('grptransportacceleration.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">Transport Acceleration Options </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Transport acceleration options enable kernel-bypass acceleration in conjunction with the following vendor solutions:</p>
<ul>
<li>
<a class="el" href="grptransportacceleration.html#myricomdatagrambypasslayerdbl">Myricom Datagram Bypass Layer (DBL)</a> </li>
<li>
<a class="el" href="grptransportacceleration.html#solarflareonload">Solarflare Onload</a> </li>
<li>
<a class="el" href="grptransportacceleration.html#mellanoxudacceleration">UD Acceleration for Mellanox Hardware Interfaces</a> </li>
</ul>
<p><br />
 </p>
<h1><a class="anchor" id="myricomdatagrambypasslayerdbl"></a>
Myricom Datagram Bypass Layer (DBL)&nbsp;&nbsp;<small><a href="#myricomdatagrambypasslayerdbl">&lt;-</a></small></h1>
<p>DBL is a kernel-bypass technology that accelerates sending and receiving UDP traffic and operates with DBL-enabled Myricom 10-Gigabit Ethernet adapter cards for Linux and Microsoft Windows.</p>
<p>DBL does not support fragmentation and reassembly, so do not send messages larger than the MTU size configured on the DBL interface.</p>
<p>DBL acceleration is compatible with the following Ultra Messaging transport types:</p>
<ul>
<li>
LBT-RM (UDP-based reliable multicast) </li>
<li>
LBT-RU (UDP-based reliable unicast) </li>
<li>
Multicast Immediate Messaging </li>
<li>
Multicast Topic Resolution </li>
</ul>
<p>To use DBL Transport Acceleration, perform the following steps:</p>
<ol>
<li>
Install the Myricom 10-Gigabit Ethernet NIC. </li>
<li>
Install the DBL shared library. </li>
<li>
Update your search path to include the location of the DBL shared library. </li>
<li>
Set option transport_*_datagram_max_size and option <a class="el" href="grpudpbasedresolveroperation.html#resolverdatagrammaxsizecontext">resolver_datagram_max_size (context)</a> to a value of no more than 28 bytes smaller than the Myricom interface's configured MTU size. </li>
</ol>
<p>Users of DBL are advised to make use of <a class="elRef" doxygen="/29W/Amun/home/sford/backup_exclude/labbox/sfordw_DEV_HF_6_16/29West/lbm/doc/Config/design.tag:../Design/" href="../Design/architecture.html#dynamicfragmentationreduction">Dynamic Fragmentation Reduction</a>.</p>
<p><br />
 </p>
<h1><a class="anchor" id="transportaccelerationmyricomref"></a>
Reference&nbsp;&nbsp;<small><a href="#transportaccelerationmyricomref">&lt;-</a></small></h1>
<p><br />
 </p>
<h2><a class="anchor" id="dbllbtrmaccelerationcontext"></a>
dbl_lbtrm_acceleration (context)&nbsp;&nbsp;<small><a href="#dbllbtrmaccelerationcontext">&lt;-</a></small></h2>
<dl class="section user"><dt></dt><dd>Flag indicating if DBL acceleration is enabled for LBT-RM transports. </dd></dl>
<dl class="section user"><dt></dt><dd>See <a class="el" href="grptransportacceleration.html#myricomdatagrambypasslayerdbl">Myricom Datagram Bypass Layer (DBL)</a>.</dd></dl>
<dl class="section user"><dt></dt><dd><table class="doxtable">
<tr>
<td><em>Scope:</em> </td><td>context </td></tr>
<tr>
<td><em>Type:</em> </td><td><b>int</b> </td></tr>
<tr>
<td><em>When to Set:</em> </td><td>Can only be set during object initialization.</td></tr>
<tr>
<td><em>Version:</em> </td><td>This option was implemented in LBM 4.0. </td></tr>
</table>
<br />
</dd></dl>
<dl class="section user"><dt></dt><dd><table class="doxtable">
<tr>
<th>Value </th><th>Description </th></tr>
<tr>
<td>1 </td><td><p class="starttd">DBL acceleration is enabled for LBT-RM.</p>
<p class="endtd"></p>
</td></tr>
<tr>
<td>0 </td><td>DBL acceleration is not enabled for LBT-RM. <b>Default for all.</b> </td></tr>
</table>
</dd></dl>
<p><br />
 </p>
<h2><a class="anchor" id="dbllbtruaccelerationcontext"></a>
dbl_lbtru_acceleration (context)&nbsp;&nbsp;<small><a href="#dbllbtruaccelerationcontext">&lt;-</a></small></h2>
<dl class="section user"><dt></dt><dd>Flag indicating if DBL acceleration is enabled for LBT-RU transports. </dd></dl>
<dl class="section user"><dt></dt><dd>See <a class="el" href="grptransportacceleration.html#myricomdatagrambypasslayerdbl">Myricom Datagram Bypass Layer (DBL)</a>.</dd></dl>
<dl class="section user"><dt></dt><dd><table class="doxtable">
<tr>
<td><em>Scope:</em> </td><td>context </td></tr>
<tr>
<td><em>Type:</em> </td><td><b>int</b> </td></tr>
<tr>
<td><em>When to Set:</em> </td><td>Can only be set during object initialization.</td></tr>
<tr>
<td><em>Version:</em> </td><td>This option was implemented in LBM 4.0. </td></tr>
</table>
<br />
</dd></dl>
<dl class="section user"><dt></dt><dd><table class="doxtable">
<tr>
<th>Value </th><th>Description </th></tr>
<tr>
<td>1 </td><td><p class="starttd">DBL acceleration is enabled for LBT-RU.</p>
<p class="endtd"></p>
</td></tr>
<tr>
<td>0 </td><td>DBL acceleration is not enabled for LBT-RU. <b>Default for all.</b> </td></tr>
</table>
</dd></dl>
<p><br />
 </p>
<h2><a class="anchor" id="dblmimaccelerationcontext"></a>
dbl_mim_acceleration (context)&nbsp;&nbsp;<small><a href="#dblmimaccelerationcontext">&lt;-</a></small></h2>
<dl class="section user"><dt></dt><dd>Flag indicating if DBL acceleration is enabled for MIM. </dd></dl>
<dl class="section user"><dt></dt><dd>See <a class="el" href="grptransportacceleration.html#myricomdatagrambypasslayerdbl">Myricom Datagram Bypass Layer (DBL)</a>. </dd></dl>
<dl class="section user"><dt></dt><dd>See <a class="elRef" doxygen="/29W/Amun/home/sford/backup_exclude/labbox/sfordw_DEV_HF_6_16/29West/lbm/doc/Config/design.tag:../Design/" href="../Design/umfeatures.html#multicastimmediatemessaging">Multicast Immediate Messaging</a> for general information about MIM.</dd></dl>
<dl class="section user"><dt></dt><dd><table class="doxtable">
<tr>
<td><em>Scope:</em> </td><td>context </td></tr>
<tr>
<td><em>Type:</em> </td><td><b>int</b> </td></tr>
<tr>
<td><em>When to Set:</em> </td><td>Can only be set during object initialization.</td></tr>
<tr>
<td><em>Version:</em> </td><td>This option was implemented in LBM 4.0. </td></tr>
</table>
<br />
</dd></dl>
<dl class="section user"><dt></dt><dd><table class="doxtable">
<tr>
<th>Value </th><th>Description </th></tr>
<tr>
<td>1 </td><td><p class="starttd">DBL acceleration is enabled for MIM.</p>
<p class="endtd"></p>
</td></tr>
<tr>
<td>0 </td><td>DBL acceleration is not enabled for MIM. <b>Default for all.</b> </td></tr>
</table>
</dd></dl>
<p><br />
 </p>
<h2><a class="anchor" id="dblresolveraccelerationcontext"></a>
dbl_resolver_acceleration (context)&nbsp;&nbsp;<small><a href="#dblresolveraccelerationcontext">&lt;-</a></small></h2>
<dl class="section user"><dt></dt><dd>Flag indicating if DBL acceleration is enabled for topic resolution. </dd></dl>
<dl class="section user"><dt></dt><dd>See <a class="el" href="grptransportacceleration.html#myricomdatagrambypasslayerdbl">Myricom Datagram Bypass Layer (DBL)</a>.</dd></dl>
<dl class="section user"><dt></dt><dd><table class="doxtable">
<tr>
<td><em>Scope:</em> </td><td>context </td></tr>
<tr>
<td><em>Type:</em> </td><td><b>int</b> </td></tr>
<tr>
<td><em>When to Set:</em> </td><td>Can only be set during object initialization.</td></tr>
<tr>
<td><em>Version:</em> </td><td>This option was implemented in LBM 4.0. </td></tr>
</table>
<br />
</dd></dl>
<dl class="section user"><dt></dt><dd><table class="doxtable">
<tr>
<th>Value </th><th>Description </th></tr>
<tr>
<td>1 </td><td><p class="starttd">DBL acceleration is enabled for topic resolution.</p>
<p class="endtd"></p>
</td></tr>
<tr>
<td>0 </td><td>DBL acceleration is not enabled for topic resolution. <b>Default for all.</b> </td></tr>
</table>
</dd></dl>
<p><br />
 </p>
<h1><a class="anchor" id="solarflareonload"></a>
Solarflare Onload&nbsp;&nbsp;<small><a href="#solarflareonload">&lt;-</a></small></h1>
<p>In UM documentation, we use the term "Solarflare" for NIC technology that was originally developed by Solarflare Communications Inc. As of this writing, that technology is currently owned by <a href="https://www.amd.com/en.html">Advanced Micro Devices, Inc</a> (AMD) and sold under their <a href="https://www.amd.com/en/products/xilinx">Xilinx</a> brand.</p>
<p>Onload is a kernel-bypass technology available for Linux that accelerates message traffic and operates with Solarflare Ethernet NICs. There is an open-source version of Onload called <a href="https://github.com/Xilinx-CNS/onload">OpenOnload</a>. Ultra Messaging does not differentiate between the two versions.</p>
<p>Ultra Messaging loads the Onload library dynamically if Onload functionality is specified in the UM configuration. Specifically, the use of any of the following configuration options will lead to UM loading the Onload library: </p><ul>
<li>
<a class="el" href="grptransportacceleration.html#onloadaccelerationstacknamecontext">onload_acceleration_stack_name (context)</a>, </li>
<li>
<a class="el" href="grptransportacceleration.html#onloadaccelerationstacknamesource">onload_acceleration_stack_name (source)</a>, </li>
<li>
<a class="el" href="grptransportacceleration.html#onloadaccelerationstacknamereceiver">onload_acceleration_stack_name (receiver)</a>, </li>
<li>
<a class="el" href="grptransportlbtrmoperation.html#transportlbtrmsourcetimestampcontext">transport_lbtrm_source_timestamp (context)</a>, or </li>
<li>
<a class="el" href="grptransportlbtrmoperation.html#transportlbtrmreceivertimestampcontext">transport_lbtrm_receiver_timestamp (context)</a>. </li>
</ul>
<p><br />
 </p>
<h2><a class="anchor" id="onloadstacknames"></a>
Onload Stack Names&nbsp;&nbsp;<small><a href="#onloadstacknames">&lt;-</a></small></h2>
<p>Onload and Solarflare NICs can support multiple "stacks" which can be used by software to send and receive packets. Different stacks can be used concurrently without interference, which is valuable to latency-sensitive multi-threaded applications. By ensuring that the sockets of a stack are only accessed by a single thread, you can keep latency outliers to a minimum.</p>
<p>Onload defaults to accelerating all sockets within a process on a single stack. But this is not always desired; users often want to accelerate only certain sockets and not others, or assign different sockets to different stacks, depending on their threading needs. The UM configuration options <a class="el" href="grptransportacceleration.html#onloadaccelerationstacknamecontext">onload_acceleration_stack_name (context)</a>, <a class="el" href="grptransportacceleration.html#onloadaccelerationstacknamesource">onload_acceleration_stack_name (source)</a>, and <a class="el" href="grptransportacceleration.html#onloadaccelerationstacknamereceiver">onload_acceleration_stack_name (receiver)</a>, control the stack used by various sockets. These options apply to transport types <a class="elRef" doxygen="/29W/Amun/home/sford/backup_exclude/labbox/sfordw_DEV_HF_6_16/29West/lbm/doc/Config/design.tag:../Design/" href="../Design/transporttypes.html#transporttcp">TCP</a>, <a class="elRef" doxygen="/29W/Amun/home/sford/backup_exclude/labbox/sfordw_DEV_HF_6_16/29West/lbm/doc/Config/design.tag:../Design/" href="../Design/transporttypes.html#transportlbtru">LBT-RU</a>, and <a class="elRef" doxygen="/29W/Amun/home/sford/backup_exclude/labbox/sfordw_DEV_HF_6_16/29West/lbm/doc/Config/design.tag:../Design/" href="../Design/transporttypes.html#transportlbtrm">LBT-RM</a>.</p>
<p>The <a class="el" href="grptransportacceleration.html#onloadaccelerationstacknamesource">onload_acceleration_stack_name (source)</a> option controls the Onload stack for the sockets associated with the underlying <a class="elRef" doxygen="/29W/Amun/home/sford/backup_exclude/labbox/sfordw_DEV_HF_6_16/29West/lbm/doc/Config/design.tag:../Design/" href="../Design/fundamentalconcepts.html#transportsessions">transport session</a> of a UM source object. Note that the option only applies when the first source object on a given transport session is created. Subsequent sources created on the same transport session do not affect the Onload stack.</p>
<p>Similarly, the <a class="el" href="grptransportacceleration.html#onloadaccelerationstacknamereceiver">onload_acceleration_stack_name (receiver)</a> option controls the Onload stack for the sockets associated with the underlying <a class="elRef" doxygen="/29W/Amun/home/sford/backup_exclude/labbox/sfordw_DEV_HF_6_16/29West/lbm/doc/Config/design.tag:../Design/" href="../Design/fundamentalconcepts.html#transportsessions">Transport Sessions</a> of a UM receiver object. Note that unlike a source, a receiver object can be associated with more than one transport session if the topic is published by more than one application instance. If sources come and go, the receiver may join and exit from transport sessions. Note that the stack name option only applies when a receiver object discovers and causes UM to join a transport session. Subsequent receiver objects mapped to the same transport session do not affect the Onload stack. However, when using multiple <a class="elRef" doxygen="/29W/Amun/home/sford/backup_exclude/labbox/sfordw_DEV_HF_6_16/29West/lbm/doc/Config/design.tag:../Design/" href="../Design/umfeatures.html#transportservicesproviderxsp">XSPs</a>, care should be taken to ensure that all transport sessions associate with a given receiver object are handled by the same XSP. Otherwise you can have multiple XSPs handling the same Onload stack, which can introduce latency outliers.</p>
<p>Finally, the <a class="el" href="grptransportacceleration.html#onloadaccelerationstacknamecontext">onload_acceleration_stack_name (context)</a> option controls the Onload stack for the sockets associated with the entire context. This includes all sockets associated with source and receiver objects, as well as sockets associated with topic resolution, <a class="elRef" doxygen="/29W/Amun/home/sford/backup_exclude/labbox/sfordw_DEV_HF_6_16/29West/lbm/doc/Config/design.tag:../Design/" href="../Design/umfeatures.html#unicastimmediatemessaging">Unicast Immediate Messaging</a>, and a Unix pipe used by UM for internal thread synchronization. Note that if the context stack name option is supplied, any source or receiver scoped stack name options are ignored.</p>
<dl class="section note"><dt>Note</dt><dd>You can set the LBM_SUPPRESS_ONLOAD environment variable to any value to prevent UM from loading Onload. In this case, you cannot use the onload_acceleration_stack_name options.</dd></dl>
<p>If your application uses the onload_set_stackname API directly for any non-UM sockets, note that after UM accelerates a transport socket, Ultra Messaging resets the stackname to the default for all threads by calling:</p>
<div class="fragment"><div class="line">onload_set_stackname(ONLOAD_ALL_THREADS, ONLOAD_SCOPE_NOCHANGE, <span class="stringliteral">&quot;&quot;</span>);</div></div><!-- fragment --><p>Ultra Messaging resets the stackname during source creation and when a receiver matched topic opens a transport session.</p>
<p><br />
 </p>
<h2><a class="anchor" id="usingonloadwithum"></a>
Using Onload with UM&nbsp;&nbsp;<small><a href="#usingonloadwithum">&lt;-</a></small></h2>
<p>To enable Onload socket acceleration for only selected transports, perform the following steps:</p>
<ol>
<li>
Install Onload. </li>
<li>
Set the Onload environment variable EF_DONT_ACCELERATE = 1 to disable Onload default behavior of accelerating all sockets. </li>
<li>
<p class="startli">Start the application as in the following example:</p>
<p class="endli">onload &lt;app_name&gt; [app_options] </p>
</li>
<li>
Set UM stack name configuration options for the application's sources and receivers. </li>
<li>
Disable batching to ensure that it is the application thread that sends the data out. </li>
<li>
If using multiple <a class="elRef" doxygen="/29W/Amun/home/sford/backup_exclude/labbox/sfordw_DEV_HF_6_16/29West/lbm/doc/Config/design.tag:../Design/" href="../Design/umfeatures.html#transportservicesproviderxsp">XSPs</a>, ensure that all transport sessions associated with each receiver object are handled by the same XSP. Otherwise you can have multiple XSPs handling the same Onload stack, which can introduce latency outliers. </li>
<li>
Prevent IP fragmentation by setting the options transport_*_datagram_max_size and option <a class="el" href="grpudpbasedresolveroperation.html#resolverdatagrammaxsizecontext">resolver_datagram_max_size (context)</a> to a value 28 bytes smaller than the Solarflare interface's configured MTU size usually 1472). See <a class="elRef" doxygen="/29W/Amun/home/sford/backup_exclude/labbox/sfordw_DEV_HF_6_16/29West/lbm/doc/Config/design.tag:../Design/" href="../Design/architecture.html#messagefragmentationandreassembly">Message Fragmentation and Reassembly</a>. </li>
</ol>
<p>Users of Onload are advised to set <a class="elRef" doxygen="/29W/Amun/home/sford/backup_exclude/labbox/sfordw_DEV_HF_6_16/29West/lbm/doc/Config/design.tag:../Design/" href="../Design/architecture.html#dynamicfragmentationreduction">Dynamic Fragmentation Reduction</a>.</p>
<p>For detailed information about onload, see the <a href="https://docs.xilinx.com/r/en-US/ug1586-onload-user">Onload User Guide</a>.</p>
<p><br />
 </p>
<h2><a class="anchor" id="solarflaretips"></a>
Solarflare Tips&nbsp;&nbsp;<small><a href="#solarflaretips">&lt;-</a></small></h2>
<p>Onload does not support <a class="elRef" doxygen="/29W/Amun/home/sford/backup_exclude/labbox/sfordw_DEV_HF_6_16/29West/lbm/doc/Config/design.tag:../Design/" href="../Design/umglossary.html#glossaryipfragmentation">IP fragmentation and reassembly</a>, so do not configure UM send datagrams that would require IP fragmentation. See <a class="elRef" doxygen="/29W/Amun/home/sford/backup_exclude/labbox/sfordw_DEV_HF_6_16/29West/lbm/doc/Config/design.tag:../Design/" href="../Design/architecture.html#datagrammaxsizeandnetworkmtu">Datagram Max Size and Network MTU</a>.</p>
<dl class="section warning"><dt>Warning</dt><dd>Onload does not support both accelerated and non-accelerated processes subscribing to the same multicast group on the same host. An attempt to do so will result in the non-accelerated process becoming "deaf" to the shared multicast group. See the <a href="https://docs.xilinx.com/r/en-US/ug1586-onload-user">Onload User Guide</a> section <a href="https://docs.xilinx.com/r/en-US/ug1586-onload-user/Multicast-Receive-to-Onload-or-Kernel-Stack">Multicast Receive to Onload or Kernel Stack</a>.</dd></dl>
<p>For many of our customers, having bursts of many tens or even hundreds of thousands of messages per second is not unusual during a trading day. Message rates this high can stress the networking stack, from switch to NIC and driver to UM. Packet loss can happen, leading to high latency if those packets are successfully recovered, or potentially to <a class="elRef" doxygen="/29W/Amun/home/sford/backup_exclude/labbox/sfordw_DEV_HF_6_16/29West/lbm/doc/Config/design.tag:../Design/" href="../Design/fundamentalconcepts.html#unrecoverableloss1">Unrecoverable Loss</a>.</p>
<p>Informatica is not an expert in tuning Solarflare NICs and Onload. We recommend using the <a href="https://docs.xilinx.com/r/en-US/ug1586-onload-user">Onload documentation</a> and discussing your use case with Onload support engineers.</p>
<p>However, we can give a few tips based on our own experience and that of our customers.</p>
<ol>
<li>
The number of receive descriptors (size of rx ring buffer) should always be set to the maximum value (probably 4096, but check to be sure). <ul>
<li>
For kernel driver, check the current and maximum settings with: <div class="fragment"><div class="line">ethtool -g sfdevicename</div></div><!-- fragment --> You can change it using ethtool: <div class="fragment"><div class="line">ethtool -G rx 4096 sfdevicename</div></div><!-- fragment --> but this will only stay in effect until the next reboot. Different versions of Linux have different methods for making the changes permanent. </li>
<li>
For Onload, set the environment variable: <div class="fragment"><div class="line">export EF_RXQ_SIZE=4096</div></div><!-- fragment --> </li>
</ul>
</li>
<li>
Set the maximum size of datagram that UM will generate. <ul>
<li>
If kernel drivers are used everywhere, set the <a class="elRef" doxygen="/29W/Amun/home/sford/backup_exclude/labbox/sfordw_DEV_HF_6_16/29West/lbm/doc/Config/design.tag:../Design/" href="../Design/architecture.html#datagrammaxsizes">Datagram Max Sizes</a> to 8192. This allows ip fragmentation, which improves efficiency. </li>
<li>
If Onload is being used anywhere, prevent IP fragmentation by enabling <a class="elRef" doxygen="/29W/Amun/home/sford/backup_exclude/labbox/sfordw_DEV_HF_6_16/29West/lbm/doc/Config/design.tag:../Design/" href="../Design/architecture.html#dynamicfragmentationreduction">Dynamic Fragmentation Reduction</a> and setting the <a class="elRef" doxygen="/29W/Amun/home/sford/backup_exclude/labbox/sfordw_DEV_HF_6_16/29West/lbm/doc/Config/design.tag:../Design/" href="../Design/architecture.html#datagrammaxsizes">Datagram Max Sizes</a> to 1472. But see <a class="elRef" doxygen="/29W/Amun/home/sford/backup_exclude/labbox/sfordw_DEV_HF_6_16/29West/lbm/doc/Config/design.tag:../Design/" href="../Design/architecture.html#datagrammaxsizeandnetworkmtu">Datagram Max Size and Network MTU</a> for a discussion of efficiency issues, especially for UM versions prior to 6.14. </li>
</ul>
</li>
<li>
If using Onload, you can get better performance if you configure sources on one stack using <a class="el" href="grptransportacceleration.html#onloadaccelerationstacknamesource">onload_acceleration_stack_name (source)</a> and receivers on a different stack using <a class="el" href="grptransportacceleration.html#onloadaccelerationstacknamereceiver">onload_acceleration_stack_name (receiver)</a>. </li>
<li>
For a wealth of additional information, see <a href="https://docs.xilinx.com/r/en-US/ug1586-onload-user">Onload documentation</a>, especially <a href="https://docs.xilinx.com/r/en-US/ug1586-onload-user/Tuning-Onload">Tuning Onload</a> and <a href="https://docs.xilinx.com/r/en-US/ug1586-onload-user/Eliminating-Drops">Eliminating Drops</a>. </li>
</ol>
<p><br />
 </p>
<h1><a class="anchor" id="transportaccelerationsolarflareref"></a>
Reference&nbsp;&nbsp;<small><a href="#transportaccelerationsolarflareref">&lt;-</a></small></h1>
<p><br />
 </p>
<h2><a class="anchor" id="onloadaccelerationstacknamecontext"></a>
onload_acceleration_stack_name (context)&nbsp;&nbsp;<small><a href="#onloadaccelerationstacknamecontext">&lt;-</a></small></h2>
<dl class="section user"><dt></dt><dd>The stackname to use when creating an Onload socket. </dd></dl>
<dl class="section user"><dt></dt><dd>Sets the stackname when creating Onload sockets on the context. The stackname must be eight characters or less. To disable the stackname, set this option to NULL, which must be all uppercase. </dd></dl>
<dl class="section user"><dt></dt><dd>Note: Use of this option requires Onload. </dd></dl>
<dl class="section user"><dt></dt><dd>See <a class="el" href="grptransportacceleration.html#onloadstacknames">Onload Stack Names</a> for more information.</dd></dl>
<dl class="section user"><dt></dt><dd><table class="doxtable">
<tr>
<td><em>Scope:</em> </td><td>context </td></tr>
<tr>
<td><em>Type:</em> </td><td><b>string</b> </td></tr>
<tr>
<td><em>Default value:</em> </td><td>NULL </td></tr>
<tr>
<td><em>When to Set:</em> </td><td>Can only be set during object initialization.</td></tr>
<tr>
<td><em>Version:</em> </td><td>This option was implemented in UM 6.16. </td></tr>
</table>
</dd></dl>
<p><br />
 </p>
<h2><a class="anchor" id="onloadaccelerationstacknamereceiver"></a>
onload_acceleration_stack_name (receiver)&nbsp;&nbsp;<small><a href="#onloadaccelerationstacknamereceiver">&lt;-</a></small></h2>
<dl class="section user"><dt></dt><dd>The stackname to use when creating an Onload transport data socket. </dd></dl>
<dl class="section user"><dt></dt><dd>The stackname must be eight characters or less. Because this is a transport setting, the first receiver applies its configuration option setting, and other receivers that join the transport inherit the setting of the first source. To disable the stackname, set this option to NULL, which must be all uppercase. </dd></dl>
<dl class="section user"><dt></dt><dd>Note: Use of this option requires Onload and applies to LBT-RM, LBT-RU, and TCP transports. </dd></dl>
<dl class="section user"><dt></dt><dd>See <a class="el" href="grptransportacceleration.html#onloadstacknames">Onload Stack Names</a> for more information.</dd></dl>
<dl class="section user"><dt></dt><dd><table class="doxtable">
<tr>
<td><em>Scope:</em> </td><td>receiver </td></tr>
<tr>
<td><em>Type:</em> </td><td><b>string</b> </td></tr>
<tr>
<td><em>Default value:</em> </td><td>NULL </td></tr>
<tr>
<td><em>When to Set:</em> </td><td>Can only be set during object initialization.</td></tr>
<tr>
<td><em>Version:</em> </td><td>This option was implemented in UM 6.5. </td></tr>
</table>
</dd></dl>
<p><br />
 </p>
<h2><a class="anchor" id="onloadaccelerationstacknamesource"></a>
onload_acceleration_stack_name (source)&nbsp;&nbsp;<small><a href="#onloadaccelerationstacknamesource">&lt;-</a></small></h2>
<dl class="section user"><dt></dt><dd>The stackname to use when creating an Onload transport data socket. </dd></dl>
<dl class="section user"><dt></dt><dd>The stackname must be eight characters or less. Because this is a transport setting, the first source applies its configuration option setting, and other sources that join the transport inherit the setting of the first source. To disable the stackname, set this option to NULL, which must be all uppercase. </dd></dl>
<dl class="section user"><dt></dt><dd>Note: Use of this option requires Onload and applies to LBT-RM, LBT-RU, and TCP transports. </dd></dl>
<dl class="section user"><dt></dt><dd>See <a class="el" href="grptransportacceleration.html#onloadstacknames">Onload Stack Names</a> for more information.</dd></dl>
<dl class="section user"><dt></dt><dd><table class="doxtable">
<tr>
<td><em>Scope:</em> </td><td>source </td></tr>
<tr>
<td><em>Type:</em> </td><td><b>string</b> </td></tr>
<tr>
<td><em>Default value:</em> </td><td>NULL </td></tr>
<tr>
<td><em>When to Set:</em> </td><td>Can only be set during object initialization.</td></tr>
<tr>
<td><em>Version:</em> </td><td>This option was implemented in UM 6.5. </td></tr>
</table>
</dd></dl>
<p><br />
 </p>
<h1><a class="anchor" id="mellanoxudacceleration"></a>
UD Acceleration for Mellanox Hardware Interfaces&nbsp;&nbsp;<small><a href="#mellanoxudacceleration">&lt;-</a></small></h1>
<p>UD (Unreliable Datagram) acceleration is a kernel-bypass technology that accelerates sending and receiving UDP traffic and operates with Mellanox 10-Gigabit Ethernet or InfiniBand adapter cards for 64-bit Linux on X86 platforms.</p>
<p>UD acceleration does not support fragmentation and reassembly, so do not send messages larger than the MTU size configured on the Mellanox interface.</p>
<p>UD acceleration is available for the following Ultra Messaging transport types:</p>
<ul>
<li>
LBT-RM (UDP-based reliable multicast) </li>
<li>
LBT-RU (UDP-based reliable unicast) </li>
<li>
Multicast Immediate Messaging </li>
<li>
Multicast Topic Resolution </li>
</ul>
<p>To use UD acceleration, perform the following steps:</p>
<ol>
<li>
Install the Mellanox NIC. </li>
<li>
Install the VMA package, which is part of the UD acceleration option . </li>
<li>
Include the appropriate transport acceleration options in your Ultra Messaging Configuration File. </li>
<li>
Set option transport_*_datagram_max_size and option <a class="el" href="grpudpbasedresolveroperation.html#resolverdatagrammaxsizecontext">resolver_datagram_max_size (context)</a> to a value of no more than 28 bytes smaller than the Mellanox interface's configured MTU size. </li>
</ol>
<p>Users of UD acceleration are advised to make use of <a class="elRef" doxygen="/29W/Amun/home/sford/backup_exclude/labbox/sfordw_DEV_HF_6_16/29West/lbm/doc/Config/design.tag:../Design/" href="../Design/architecture.html#dynamicfragmentationreduction">Dynamic Fragmentation Reduction</a>.</p>
<p><br />
 </p>
<h1><a class="anchor" id="transportaccelerationmellanoxref"></a>
Reference&nbsp;&nbsp;<small><a href="#transportaccelerationmellanoxref">&lt;-</a></small></h1>
<p><br />
 </p>
<h2><a class="anchor" id="resolverudaccelerationcontext"></a>
resolver_ud_acceleration (context)&nbsp;&nbsp;<small><a href="#resolverudaccelerationcontext">&lt;-</a></small></h2>
<dl class="section user"><dt></dt><dd>Flag indicating if Accelerated Multicast is enabled for Topic Resolution. Accelerated Multicast requires Mellanox InfiniBand or 10 Gigabit Ethernet hardware. </dd></dl>
<dl class="section user"><dt></dt><dd>UD Acceleration of topic resolution relies on hardware-supported loopback, which InfiniBand provides, but which the 10 Gigabit Ethernet ConnectX hardware does not. </dd></dl>
<dl class="section user"><dt></dt><dd>Note: If 10 Gigabit Ethernet ConnectX hardware is used and multiple UM contexts are desired on the host, this option must be disabled.</dd></dl>
<dl class="section user"><dt></dt><dd><table class="doxtable">
<tr>
<td><em>Scope:</em> </td><td>context </td></tr>
<tr>
<td><em>Type:</em> </td><td><b>int</b> </td></tr>
<tr>
<td><em>When to Set:</em> </td><td>Can only be set during object initialization.</td></tr>
<tr>
<td><em>Version:</em> </td><td>This option was implemented in LBM 5.2. </td></tr>
</table>
<br />
</dd></dl>
<dl class="section user"><dt></dt><dd><table class="doxtable">
<tr>
<th>Value </th><th>Description </th></tr>
<tr>
<td>1 </td><td><p class="starttd">Accelerated Topic Resolution is enabled.</p>
<p class="endtd"></p>
</td></tr>
<tr>
<td>0 </td><td>Accelerated Topic Resolution is not enabled. <b>Default for all.</b> </td></tr>
</table>
</dd></dl>
<p><br />
 </p>
<h2><a class="anchor" id="udaccelerationcontext"></a>
ud_acceleration (context)&nbsp;&nbsp;<small><a href="#udaccelerationcontext">&lt;-</a></small></h2>
<dl class="section user"><dt></dt><dd>Flag indicating if Accelerated Multicast is enabled for LBT-RM. </dd></dl>
<dl class="section user"><dt></dt><dd>Accelerated Multicast requires InfiniBand or 10 Gigabit Ethernet hardware and the purchase and installation of the Ultra Messaging Accelerated Multicast Module. See your Ultra Messaging representative for licensing specifics.</dd></dl>
<dl class="section user"><dt></dt><dd><table class="doxtable">
<tr>
<td><em>Scope:</em> </td><td>context </td></tr>
<tr>
<td><em>Type:</em> </td><td><b>int</b> </td></tr>
<tr>
<td><em>When to Set:</em> </td><td>Can only be set during object initialization.</td></tr>
<tr>
<td><em>Version:</em> </td><td>This option was implemented in LBM 4.1. </td></tr>
</table>
<br />
</dd></dl>
<dl class="section user"><dt></dt><dd><table class="doxtable">
<tr>
<th>Value </th><th>Description </th></tr>
<tr>
<td>1 </td><td><p class="starttd">Accelerated Multicast is enabled.</p>
<p class="endtd"></p>
</td></tr>
<tr>
<td>0 </td><td>Accelerated Multicast is not enabled. <b>Default for all.</b> </td></tr>
</table>
</dd></dl>
<p><br />
<br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
</p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.11-->
</body>
</html>
