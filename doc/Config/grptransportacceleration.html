<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Configuration Guide: Transport Acceleration Options</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen_manual.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Configuration Guide
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('grptransportacceleration.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">Transport Acceleration Options </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Transport acceleration options enable kernel-bypass acceleration in conjunction with the following vendor solutions:</p>
<ul>
<li>
Myricom® Datagram Bypass Layer (DBL™) </li>
<li>
Solarflare® Onload </li>
<li>
Mellanox® 10-Gigabit Ethernet or InfiniBand hardware </li>
</ul>
<p><br />
 </p>
<h1><a class="anchor" id="myricomdatagrambypasslayerdbl"></a>
Myricom® Datagram Bypass Layer (DBL™)</h1>
<p>DBL is a kernel-bypass technology that accelerates sending and receiving UDP traffic and operates with DBL-enabled Myricom 10-Gigabit Ethernet adapter cards for Linux and Microsoft® Windows.</p>
<p>DBL does not support fragmentation and reassembly, so do not send messages larger than the MTU size configured on the DBL interface.</p>
<p>DBL acceleration is compatible with the following Ultra Messaging transport types:</p>
<ul>
<li>
LBT-RM (UDP-based reliable multicast) </li>
<li>
LBT-RU (UDP-based reliable unicast) </li>
<li>
Multicast Immediate Messaging </li>
<li>
Multicast Topic Resolution </li>
</ul>
<p>To use DBL Transport Acceleration, perform the following steps:</p>
<ol>
<li>
Install the Myricom 10-Gigabit Ethernet NIC. </li>
<li>
Install the DBL shared library. </li>
<li>
Update your search path to include the location of the DBL shared library. </li>
<li>
Set option transport_*_datagram_max_size and option <a class="el" href="grpresolveroperation.html#resolverdatagrammaxsizecontext">resolver_datagram_max_size (context)</a> to a value of no more than 28 bytes smaller than the Myricom interface's configured MTU size. </li>
</ol>
<p><br />
 </p>
<h1><a class="anchor" id="transportaccelerationmyricomref"></a>
Reference</h1>
<p><br />
 </p>
<h2><a class="anchor" id="dbllbtrmaccelerationcontext"></a>
dbl_lbtrm_acceleration (context)</h2>
<dl class="section user"><dt></dt><dd>Flag indicating if DBL acceleration is enabled for LBT-RM transports.</dd></dl>
<dl class="section user"><dt></dt><dd><table class="doxtable">
<tr>
<td><em>Scope:</em> </td><td>context </td></tr>
<tr>
<td><em>Type:</em> </td><td><b>int</b> </td></tr>
<tr>
<td><em>When to Set:</em> </td><td>Can only be set during object initialization.</td></tr>
<tr>
<td><em>Version:</em> </td><td>This option was implemented in LBM 4.0. </td></tr>
</table>
<br />
</dd></dl>
<dl class="section user"><dt></dt><dd><table class="doxtable">
<tr>
<th>Value </th><th>Description </th></tr>
<tr>
<td>1 </td><td><p class="starttd">DBL acceleration is enabled for LBT-RM.</p>
<p class="endtd"></p>
</td></tr>
<tr>
<td>0 </td><td>DBL acceleration is not enabled for LBT-RM. <b>Default for all.</b> </td></tr>
</table>
</dd></dl>
<p><br />
 </p>
<h2><a class="anchor" id="dbllbtruaccelerationcontext"></a>
dbl_lbtru_acceleration (context)</h2>
<dl class="section user"><dt></dt><dd>Flag indicating if DBL acceleration is enabled for LBT-RU transports.</dd></dl>
<dl class="section user"><dt></dt><dd><table class="doxtable">
<tr>
<td><em>Scope:</em> </td><td>context </td></tr>
<tr>
<td><em>Type:</em> </td><td><b>int</b> </td></tr>
<tr>
<td><em>When to Set:</em> </td><td>Can only be set during object initialization.</td></tr>
<tr>
<td><em>Version:</em> </td><td>This option was implemented in LBM 4.0. </td></tr>
</table>
<br />
</dd></dl>
<dl class="section user"><dt></dt><dd><table class="doxtable">
<tr>
<th>Value </th><th>Description </th></tr>
<tr>
<td>1 </td><td><p class="starttd">DBL acceleration is enabled for LBT-RU.</p>
<p class="endtd"></p>
</td></tr>
<tr>
<td>0 </td><td>DBL acceleration is not enabled for LBT-RU. <b>Default for all.</b> </td></tr>
</table>
</dd></dl>
<p><br />
 </p>
<h2><a class="anchor" id="dblmimaccelerationcontext"></a>
dbl_mim_acceleration (context)</h2>
<dl class="section user"><dt></dt><dd>Flag indicating if DBL acceleration is enabled for multicast immediate messaging (MIM).</dd></dl>
<dl class="section user"><dt></dt><dd><table class="doxtable">
<tr>
<td><em>Scope:</em> </td><td>context </td></tr>
<tr>
<td><em>Type:</em> </td><td><b>int</b> </td></tr>
<tr>
<td><em>When to Set:</em> </td><td>Can only be set during object initialization.</td></tr>
<tr>
<td><em>Version:</em> </td><td>This option was implemented in LBM 4.0. </td></tr>
</table>
<br />
</dd></dl>
<dl class="section user"><dt></dt><dd><table class="doxtable">
<tr>
<th>Value </th><th>Description </th></tr>
<tr>
<td>1 </td><td><p class="starttd">DBL acceleration is enabled for MIM.</p>
<p class="endtd"></p>
</td></tr>
<tr>
<td>0 </td><td>DBL acceleration is not enabled for MIM. <b>Default for all.</b> </td></tr>
</table>
</dd></dl>
<p><br />
 </p>
<h2><a class="anchor" id="dblresolveraccelerationcontext"></a>
dbl_resolver_acceleration (context)</h2>
<dl class="section user"><dt></dt><dd>Flag indicating if DBL acceleration is enabled for topic resolution.</dd></dl>
<dl class="section user"><dt></dt><dd><table class="doxtable">
<tr>
<td><em>Scope:</em> </td><td>context </td></tr>
<tr>
<td><em>Type:</em> </td><td><b>int</b> </td></tr>
<tr>
<td><em>When to Set:</em> </td><td>Can only be set during object initialization.</td></tr>
<tr>
<td><em>Version:</em> </td><td>This option was implemented in LBM 4.0. </td></tr>
</table>
<br />
</dd></dl>
<dl class="section user"><dt></dt><dd><table class="doxtable">
<tr>
<th>Value </th><th>Description </th></tr>
<tr>
<td>1 </td><td><p class="starttd">DBL acceleration is enabled for topic resolution.</p>
<p class="endtd"></p>
</td></tr>
<tr>
<td>0 </td><td>DBL acceleration is not enabled for topic resolution. <b>Default for all.</b> </td></tr>
</table>
</dd></dl>
<p><br />
 </p>
<h1><a class="anchor" id="solarflareonload"></a>
Solarflare® Onload</h1>
<p>Solarflare Onload is a kernel-bypass technology that accelerates message traffic and operates with Solarflare 10GbE Ethernet NICs.</p>
<dl class="section note"><dt>Note</dt><dd>Onload does not support fragmentation and reassembly, so do not send messages larger than the MTU size configured on the Solarflare interface.</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>Onload does not support both accelerated and non-accelerated processes subscribing to the same multicast group on the same host. An attempt to do so will result in the non-accelerated process becoming "deaf" to the shared multicast group. See "Onload User Guide", chapter 9.11 <em>"Multicast Operation and Stack Sharing"</em>, sub-section <em>"Multicast Receive ‐ Onload Stack and Kernel Stack"</em>.</dd></dl>
<p>Ultra Messaging loads the Onload library dynamically during Ultra Messaging initialization on the following Ultra Messaging platforms:</p>
<ul>
<li>
Linux-glibc-2.3-i686 </li>
<li>
Linux-glibc-2.3-x86_64 Linux-glibc-2.5-x86_64 </li>
</ul>
<p>Onload default behavior accelerates all sockets. You can access the Onload onload_set_stackname API extension to select the sockets you want to accelerate by using UM configuration options. Selecting sockets with a stackname lets you accelerate data transmission sockets and not sockets for control messages, topic resolution, or responses.</p>
<p>You can select a stackname with the configuration options <a class="el" href="grptransportacceleration.html#onloadaccelerationstacknamereceiver">onload_acceleration_stack_name (receiver)</a> and <a class="el" href="grptransportacceleration.html#onloadaccelerationstacknamesource">onload_acceleration_stack_name (source)</a> for the following Ultra Messaging transport types:</p>
<ul>
<li>
LBT-RM (UDP-based reliable multicast) </li>
<li>
LBT-RU (UDP-based reliable unicast) </li>
<li>
TCP </li>
</ul>
<dl class="section note"><dt>Note</dt><dd>If you set the LBM_SUPPRESS_ONLOAD environment variable to any value, Ultra Messaging does not dynamically load the Onload library at runtime. In this case, you cannot use the onload_acceleration_stack_name options.</dd></dl>
<p>If you use the onload_set_stackname API directly for any other accelerated sockets, note that after Ultra Messaging accelerates a transport socket, Ultra Messaging resets the stackname to the default for all threads by calling:</p>
<p>onload_set_stackname(ONLOAD_ALL_THREADS, ONLOAD_SCOPE_NOCHANGE, "");</p>
<p>Ultra Messaging resets the stackname during source creation and when a receiver matched topic opens a transport session.</p>
<p>To enable Onload socket acceleration for selected transports, perform the following steps:</p>
<ol>
<li>
Install Onload. </li>
<li>
Set the Onload environment variable EF_DONT_ACCELERATE = 1 to disable Onload default behavior. </li>
<li>
<p class="startli">To enable acceleration for all applications in an environment, export the following environment variable:</p>
<p class="endli">export LD_PRELOAD=libonload.so </p>
</li>
<li>
<p class="startli">To enable acceleration on a per-application basis, start the application as in the following example:</p>
<p class="endli">onload &lt;app_name&gt; [app_options] </p>
</li>
<li>
<p class="startli">Set UM configuration option <a class="el" href="grptransportacceleration.html#onloadaccelerationstacknamesource">onload_acceleration_stack_name (source)</a> according to the thread the source uses.</p>
<p class="endli">Note: Disable batching to ensure that it is the application thread that sends the data out. </p>
</li>
<li>
<p class="startli">Set UM configuration option <a class="el" href="grptransportacceleration.html#onloadaccelerationstacknamereceiver">onload_acceleration_stack_name (receiver)</a> according to the thread the receiver uses.</p>
<p class="endli">Note: Receiver transports might not share the same thread if MTT is enabled. </p>
</li>
<li>
Set option transport_*_datagram_max_size and option <a class="el" href="grpresolveroperation.html#resolverdatagrammaxsizecontext">resolver_datagram_max_size (context)</a> to a value of no more than 28 bytes smaller than the Solarflare interface's configured MTU size. </li>
</ol>
<p>For detailed information about onload stack names, refer to the Solarflare® Onload User Guide.</p>
<p><br />
 </p>
<h1><a class="anchor" id="transportaccelerationsolarflareref"></a>
Reference</h1>
<p><br />
 </p>
<h2><a class="anchor" id="onloadaccelerationstacknamereceiver"></a>
onload_acceleration_stack_name (receiver)</h2>
<dl class="section user"><dt></dt><dd>The stackname to use when creating an OpenOnload transport data socket. The stackname must be eight characters or less. Because this is a transport setting, the first receiver applies its configuration option setting, and other receivers that join the transport inherit the setting of the first source. To disable the stackname, set this option to NULL, which must be all uppercase. </dd></dl>
<dl class="section user"><dt></dt><dd>Note: Use of this option requires Solarflare OpenOnload and applies to LBT-RM, LBT-RU, and TCP transports.</dd></dl>
<dl class="section user"><dt></dt><dd><table class="doxtable">
<tr>
<td><em>Scope:</em> </td><td>receiver </td></tr>
<tr>
<td><em>Type:</em> </td><td><b>string</b> </td></tr>
<tr>
<td><em>Default value:</em> </td><td>NULL </td></tr>
<tr>
<td><em>When to Set:</em> </td><td>Can only be set during object initialization.</td></tr>
<tr>
<td><em>Version:</em> </td><td>This option was implemented in UM 6.5. </td></tr>
</table>
</dd></dl>
<p><br />
 </p>
<h2><a class="anchor" id="onloadaccelerationstacknamesource"></a>
onload_acceleration_stack_name (source)</h2>
<dl class="section user"><dt></dt><dd>The stackname to use when creating an OpenOnload transport data socket. The stackname must be eight characters or less. Because this is a transport setting, the first source applies its configuration option setting, and other sources that join the transport inherit the setting of the first source. To disable the stackname, set this option to NULL, which must be all uppercase. </dd></dl>
<dl class="section user"><dt></dt><dd>Note: Use of this option requires Solarflare OpenOnload and applies to LBT-RM, LBT-RU, and TCP transports.</dd></dl>
<dl class="section user"><dt></dt><dd><table class="doxtable">
<tr>
<td><em>Scope:</em> </td><td>source </td></tr>
<tr>
<td><em>Type:</em> </td><td><b>string</b> </td></tr>
<tr>
<td><em>Default value:</em> </td><td>NULL </td></tr>
<tr>
<td><em>When to Set:</em> </td><td>Can only be set during object initialization.</td></tr>
<tr>
<td><em>Version:</em> </td><td>This option was implemented in UM 6.5. </td></tr>
</table>
</dd></dl>
<p><br />
 </p>
<h1><a class="anchor" id="mellanoxudacceleration"></a>
UD Acceleration for Mellanox® Hardware Interfaces</h1>
<p>UD (Unreliable Datagram) acceleration is a kernel-bypass technology that accelerates sending and receiving UDP traffic and operates with Mellanox 10-Gigabit Ethernet or InfiniBand adapter cards for 64-bit Linux on X86 platforms.</p>
<p>UD acceleration does not support fragmentation and reassembly, so do not send messages larger than the MTU size configured on the Mellanox interface.</p>
<p>UD acceleration is available for the following Ultra Messaging transport types:</p>
<ul>
<li>
LBT-RM (UDP-based reliable multicast) </li>
<li>
LBT-RU (UDP-based reliable unicast) </li>
<li>
Multicast Immediate Messaging </li>
<li>
Multicast Topic Resolution </li>
</ul>
<p>To use UD acceleration, perform the following steps:</p>
<ol>
<li>
Install the Mellanox NIC. </li>
<li>
Install the VMA package, which is part of the UD acceleration option . </li>
<li>
Include the appropriate transport acceleration options in your Ultra Messaging Configuration File. </li>
<li>
Set option transport_*_datagram_max_size and option <a class="el" href="grpresolveroperation.html#resolverdatagrammaxsizecontext">resolver_datagram_max_size (context)</a> to a value of no more than 28 bytes smaller than the Mellanox interface's configured MTU size. </li>
</ol>
<p><br />
 </p>
<h1><a class="anchor" id="transportaccelerationmellanoxref"></a>
Reference</h1>
<p><br />
 </p>
<h2><a class="anchor" id="resolverudaccelerationcontext"></a>
resolver_ud_acceleration (context)</h2>
<dl class="section user"><dt></dt><dd>Flag indicating if Accelerated Multicast is enabled for Topic Resolution. Accelerated Multicast requires Mellanox InfiniBand or 10 Gigabit Ethernet hardware. UD Acceleration of topic resolution relies on hardware-supported loopback, which InfiniBand provides, but which the 10 Gigabit Ethernet ConnectX hardware does not. </dd></dl>
<dl class="section user"><dt></dt><dd>Note: If 10 Gigabit Ethernet ConnectX hardware is used and multiple UM contexts are desired on the host, this option must be disabled.</dd></dl>
<dl class="section user"><dt></dt><dd><table class="doxtable">
<tr>
<td><em>Scope:</em> </td><td>context </td></tr>
<tr>
<td><em>Type:</em> </td><td><b>int</b> </td></tr>
<tr>
<td><em>When to Set:</em> </td><td>Can only be set during object initialization.</td></tr>
<tr>
<td><em>Version:</em> </td><td>This option was implemented in LBM 5.2. </td></tr>
</table>
<br />
</dd></dl>
<dl class="section user"><dt></dt><dd><table class="doxtable">
<tr>
<th>Value </th><th>Description </th></tr>
<tr>
<td>1 </td><td><p class="starttd">Accelerated Topic Resolution is enabled.</p>
<p class="endtd"></p>
</td></tr>
<tr>
<td>0 </td><td>Accelerated Topic Resolution is not enabled. <b>Default for all.</b> </td></tr>
</table>
</dd></dl>
<p><br />
 </p>
<h2><a class="anchor" id="udaccelerationcontext"></a>
ud_acceleration (context)</h2>
<dl class="section user"><dt></dt><dd>Flag indicating if Accelerated Multicast is enabled for LBT-RM. Accelerated Multicast requires InfiniBand or 10 Gigabit Ethernet hardware and the purchase and installation of the Ultra Messaging Accelerated Multicast Module. See your Ultra Messaging representative for licensing specifics.</dd></dl>
<dl class="section user"><dt></dt><dd><table class="doxtable">
<tr>
<td><em>Scope:</em> </td><td>context </td></tr>
<tr>
<td><em>Type:</em> </td><td><b>int</b> </td></tr>
<tr>
<td><em>When to Set:</em> </td><td>Can only be set during object initialization.</td></tr>
<tr>
<td><em>Version:</em> </td><td>This option was implemented in LBM 4.1. </td></tr>
</table>
<br />
</dd></dl>
<dl class="section user"><dt></dt><dd><table class="doxtable">
<tr>
<th>Value </th><th>Description </th></tr>
<tr>
<td>1 </td><td><p class="starttd">Accelerated Multicast is enabled.</p>
<p class="endtd"></p>
</td></tr>
<tr>
<td>0 </td><td>Accelerated Multicast is not enabled. <b>Default for all.</b> </td></tr>
</table>
</dd></dl>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.11-->
</body>
</html>
