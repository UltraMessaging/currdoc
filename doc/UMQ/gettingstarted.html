<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Guide to Queuing: Getting Started</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen_manual.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Guide to Queuing
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('gettingstarted.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">Getting Started </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>To install Ultra Messaging and Ultra Messaging options, download the Ultra Messaging installation files for your specific operating system and platform.</p>
<p>Ultra Messaging Queuing Edition installation files include the following files:</p>
<dl class="section user"><dt><b>Core</b> <b>installation</b> <b>script</b> </dt><dd>The core installation program or script is a self-extracting executable file you run to extract Ultra Messaging files to a host system. Use the core installation script that matches your operating system, version, and chip set combination.</dd></dl>
<dl class="section user"><dt><b>Documentation</b> </dt><dd>The compressed documentation files each contain the complete documentation set.</dd></dl>
<dl class="section user"><dt><b>Option</b> packages</dt><dd>Option packages include support for Java and .NET.</dd></dl>
<dl class="section user"><dt></dt><dd>In addition to the installation files, you also receive the following files by email:</dd></dl>
<dl class="section user"><dt><b>Software</b> <b>Download</b> <b>Instructions</b> </dt><dd>Description of general procedure for downloading Informatica software.</dd></dl>
<dl class="section user"><dt><b>License</b> </dt><dd>You must supply the license to run Ultra Messaging applications.</dd></dl>
<p><br />
 </p>
<h1><a class="anchor" id="requirements"></a>
Requirements&nbsp;&nbsp;<small><a href="#requirements">&lt;-</a></small></h1>
<p>Ultra Messaging runs on a variety of current operating systems and chip sets.</p>
<p><br />
 </p>
<h2><a class="anchor" id="minimumsystemrequirements"></a>
Minimum System Requirements&nbsp;&nbsp;<small><a href="#minimumsystemrequirements">&lt;-</a></small></h2>
<p>For Ultra Messaging, there are no strict requirements for hardware computing capacity and storage capacity. Such requirements depend on client applications and on configuration of clients and brokers.</p>
<p><br />
 </p>
<h2><a class="anchor" id="softwarerequirements"></a>
Software Requirements&nbsp;&nbsp;<small><a href="#softwarerequirements">&lt;-</a></small></h2>
<p>UMQ brokers require Java SE Development Kit 6 or later. Informatica recommends Java SE Development Kit 7.</p>
<p>UMQ on UNIX requires an installation of a libstdc++ Standard C++ Library.</p>
<p><br />
 </p>
<h1><a class="anchor" id="singlenodeinstallation"></a>
Single Node Installation&nbsp;&nbsp;<small><a href="#singlenodeinstallation">&lt;-</a></small></h1>
<p>To install UMQ on a host for a single-node deployment, perform the following steps. All examples are Linux examples.</p>
<ol>
<li>
Consult your Informatica sales engineer for the download procedure and appropriate files for your specific operating system and platform. Informatica sends you the Ultra Messaging license file by email. </li>
<li>
Download the installation files to the installation directory and run the installation script. </li>
<li>
<p class="startli">Locate the documentation .zip package and unzip it into the installation directory. For example:</p>
<pre class="fragment">unzip UMQ_6.12_doc.zip -d &lt;InstallDir&gt;/
</pre> </li>
<li>
Copy the license file into a location that is accessible to the Ultra Messaging library. </li>
<li>
<p class="startli">Set the Ultra Messaging license environment variable to the full path name of the license file. For example: </p><pre class="fragment">export LBM_LICENSE_FILENAME=/path/filename.lic
</pre><p class="endli"></p>
</li>
<li>
Add the library to the library path. For example, use the following line: <pre class="fragment">export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:&lt;InstallDir&gt;/UMQ_6.12/&lt;platform&gt;/lib
</pre> </li>
</ol>
<p><br />
 </p>
<h1><a class="anchor" id="startingasinglenodequeuingsystem"></a>
Starting a Single-Node Queuing System&nbsp;&nbsp;<small><a href="#startingasinglenodequeuingsystem">&lt;-</a></small></h1>
<p>After you have installed Ultra Messaging, run the daemons and sample applications to verify successful installation.</p>
<ol>
<li>
<p class="startli">Start the broker with the following command: </p><pre class="fragment">&lt;InstallDir&gt;/UMQ_6.12/&lt;platform&gt;/broker/apache-activemq-5.10.0/bin/activemq start
</pre><p class="endli"></p>
</li>
<li>
<p class="startli">Start the sample receiving application with the following commands: </p><pre class="fragment">&lt;InstallDir&gt;/UMQ_6.12/&lt;platform&gt;/bin/umqrcv -B &lt;brokerIP:port&gt; -r 10 QueueDestA
</pre><p class="endli"></p>
</li>
<li>
<p class="startli">In a second command window, start the sample sending application with the following command: </p><pre class="fragment">&lt;InstallDir&gt;/UMQ_6.12/&lt;platform&gt;/bin/umqsrc -B &lt;brokerIP:port&gt; -M 10 QueueDestA
</pre><p>In the sending application window, you see output similar to the following example display: </p><pre class="fragment">0 msgs/sec -&gt; 1 msgs/ivl, 0 msec ivl
Using flight size of 1000
Not using UME Late Join.
Using UMQ Message Stability Notification. Will not display events. Delaying for 1 second
UMQ queue "(Broker: Default IP: 10.29.3.49 PORT: 5672 )"[0][Inst: 10.29.3.49/5672] [0] ctx registration. ID 92da70611c65ece4 Flags 0
UMQ queue "(Broker: Default IP: 10.29.3.49 PORT: 5672 )"[0] ctx registration complete. ID 92da70611c65ece4 Flags 0
UMQ "(Broker: Default IP: 10.29.3.49 PORT: 5672 )"[0] src registration complete. Flags 0
Sending 10 messages of size 25 bytes to topic [QueueDestA]
Sent 10 messages of size 25 bytes in 1.003 seconds.
1.003 secs. 0.009965 Kmsgs/sec. 1.993 Kbps
[BROKER], sent 10/1660, app sent 10 stable 0 inflight 10 Lingering for 5 seconds...
Deleting source
Deleting context
</pre><p>In the receiving application window, you see messages being received, as in the following example display: </p><pre class="fragment">Request port binding disabled, no immediate messaging target.
UMQ queue "(Broker: Default IP: 10.29.3.49 PORT: 5672 )"[0][Inst: 10.29.3.49/5672] [0] ctx registration. ID a1387d282ba177d2 Flags 0
UMQ queue "(Broker: Default IP: 10.29.3.49 PORT: 5672 )"[0] ctx registration complete. ID a1387d282ba177d2 Flags 0
[QueueDestA][(Broker: Default IP: 10.29.3.49 PORT: 5672 )] UMQ "(Broker: Default IP: 10.29.3.49 PORT: 5672 )"[0] registration complete. AssignID 0. Flags 0
1.001 secs. 0
1.001 secs. 0
1.001 secs. 0
1.001 secs. 0
1.001 secs. 0
1.001 secs. 0.009991 Kmsgs/sec.
Quitting.... received 10 messages (0 reassigned, 0 resubmitted)
</pre><p class="endli"><br />
 </p>
</li>
</ol>
<h1><a class="anchor" id="shuttingdownasinglenodebroker"></a>
Shutting Down a Single-Node Broker&nbsp;&nbsp;<small><a href="#shuttingdownasinglenodebroker">&lt;-</a></small></h1>
<p>Shut down the broker with the following command: </p><pre class="fragment">&lt;InstallDir&gt;/UMQ_6.12/&lt;platform&gt;/broker/apache-activemq-5.10.0/bin/activemq stop
Kmsgs/sec. 0 Kmsgs/sec. 0 Kmsgs/sec. 0 Kmsgs/sec. 0 Kmsgs/sec. 0
Kbps Kbps Kbps Kbps Kbps 1.998 Kbps
</pre><p><br />
 </p>
<h1><a class="anchor" id="highavailabilityinstallation"></a>
High Availability Installation&nbsp;&nbsp;<small><a href="#highavailabilityinstallation">&lt;-</a></small></h1>
<p>A high-availability queuing system requires an Ultra Messaging installation on three hosts. To install UMQ on hosts for a high-availability queuing system, perform the following steps. All examples are Linux examples.</p>
<dl class="section note"><dt>Note</dt><dd>Each node has a unique configuration file, but these configuration files are each in the same path- named directory. Therefore, the three installations must not be on the same NFS mounted disk.</dd></dl>
<ol>
<li>
Consult your Informatica sales engineer for the download procedure and appropriate files for your specific operating system and platform. Informatica sends you the Ultra Messaging license file by email. </li>
<li>
Download the installation files to the installation directory of the first broker host and run the installation script. </li>
<li>
<p class="startli">Locate the documentation .zip package and unzip it into the installation directory. For example: </p><pre class="fragment">unzip UMQ_6.12_doc.zip -d &lt;InstallDir&gt;/
</pre><p class="endli"></p>
</li>
<li>
Copy the license file into a location that is accessible to the Ultra Messaging library. </li>
<li>
<p class="startli">Set the Ultra Messaging license environment variable to the full path name of the license file. For example: </p><pre class="fragment">export LBM_LICENSE_FILENAME=/path/filename.lic
</pre><p class="endli"></p>
</li>
<li>
<p class="startli">Add the library to the library path. For example, use the following line: </p><pre class="fragment">export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:&lt;InstallDir&gt;/UMQ_6.12/&lt;platform&gt;/lib
</pre><p class="endli"></p>
</li>
<li>
<p class="startli">A high availability broker node contains a working configuration directory and a default configuration directory for each unique node in a multiple node arrangement.</p>
<p>Create the store repository directories. Then, depending on which host you are configuring, copy the default broker1, broker2, or broker3 configuration file to the working configuration directory with the following example commands: </p><pre class="fragment">mkdir &lt;InstallDir&gt;/UMQ_6.12/&lt;platform&gt;/broker/store/
mkdir &lt;InstallDir&gt;/UMQ_6.12/&lt;platform&gt;/broker/store/cache
mkdir &lt;InstallDir&gt;/UMQ_6.12/&lt;platform&gt;/broker/store/state
cp &lt;InstallDir&gt;/UMQ_6.12/&lt;platform&gt;/broker/deployments/three_replicating_brokers/broker1/um.xml &lt;InstallDir&gt;/UMQ_6.12/&lt;platform&gt;/broker
</pre><p class="endli"></p>
</li>
<li>
<p class="startli">Edit the um.xml configuration file that is in &lt;InstallDir&gt;/UMQ_6.12/&lt;platform&gt;/broker/ to set the resolver IP addresses and ports for all three nodes, as shown in the following example: </p><pre class="fragment">&lt;option name="resolver_unicast_daemon" default-value="10.33.200.201:21212"/&gt;
&lt;option name="resolver_unicast_daemon" default-value="10.33.200.202:21212"/&gt;
&lt;option name="resolver_unicast_daemon" default-value="10.33.200.203:21212"/&gt;
</pre><p> Also, set the local broker host interface addresses to the IP address of a network interface on the current broker host that has connectivity to the other broker hosts, and to the servers where the clients run, as shown in the following example: </p><pre class="fragment">&lt;option name="resolver_multicast_interface" default-value="10.33.200.201"/&gt;
&lt;option name="resolver_unicast_interface" default-value="10.33.200.201"/&gt;
&lt;option name="request_tcp_interface" default-value="10.33.200.201"/&gt;
&lt;option name="response_tcp_interface" default-value="10.33.200.201 "/&gt;
</pre><dl class="section note"><dt>Note</dt><dd>Do not change any values in the broker um.xml configuration file other than interfaces and addresses shown in this step.</dd></dl>
</li>
<li>
<p class="startli">Depending on which host you are configuring, copy the default broker1, broker2, or broker3 stored.xml configuration file to the working configuration directory with the following broker1 example command: </p><pre class="fragment">cp &lt;InstallDir&gt;/UMQ_6.12/&lt;platform&gt;/broker/deployments/three_replicating_brokers/broker1/store/stored.xml &lt;InstallDir&gt;/UMQ_6.12/&lt;platform&gt;/broker/store
</pre><p class="endli"></p>
</li>
<li>
Depending on which host you are configuring, copy the default broker1, broker2, or broker3 ActiveMQ configuration file to the working configuration directory with the following broker1 example command: <pre class="fragment">cp &lt;InstallDir&gt;/UMQ_6.12/&lt;platform&gt;/broker/deployments/three_replicating_brokers/broker1/apache-activemq-5.10.0/conf/activemq.xml &lt;InstallDir&gt;/UMQ_6.12/&lt;platform&gt;/broker/apache-activemq-5.10.0/conf
</pre> </li>
<li>
<p class="startli">Repeat steps 1-10 for the second broker host, and again for the third broker host, making sure to copy the configuration files from ...three_replication_brokers/broker2/... or ...three_replication_brokers/broker3/... as needed.</p>
<p class="endli"><br />
 </p>
</li>
</ol>
<h1><a class="anchor" id="startingahighavailabilityqueuingsystem"></a>
Starting a High Availability Queuing System&nbsp;&nbsp;<small><a href="#startingahighavailabilityqueuingsystem">&lt;-</a></small></h1>
<p>After you have installed Ultra Messaging, run the daemons and sample applications to verify successful installation.</p>
<ol>
<li>
On the first host, start the lbmrd resolver daemon with the following example command: <pre class="fragment">&lt;InstallDir&gt;/UMQ_6.12/&lt;platform&gt;/bin/lbmrd -i 10.33.200.201 -p 21212 &amp;
</pre> </li>
<li>
Start the umestored daemon with the following example commands: <pre class="fragment">cd &lt;InstallDir&gt;/UMQ_6.12/&lt;platform&gt;/broker/store
&lt;InstallDir&gt;/UMQ_6.12/&lt;platform&gt;/bin/umestored stored.xml &amp;
</pre> </li>
<li>
Start the broker with the following example commands: <pre class="fragment">cd &lt;InstallDir&gt;/UMQ_6.12/&lt;platform&gt;/broker/apache-activemq-5.10.0
&lt;InstallDir&gt;/UMQ_6.12/&lt;platform&gt;/broker/apache-activemq-5.10.0/bin/activemq start
</pre> </li>
<li>
Repeat steps 1-3 on the second and third host. </li>
<li>
Start the sample receiving application with the following commands: <pre class="fragment">&lt;InstallDir&gt;/UMQ_6.12/&lt;platform&gt;/bin/umqrcv -B &lt;broker1IP:port1,broker2IP:port2,broker3IP:port3&gt; -r 10 QueueDestA
</pre> </li>
<li>
<p class="startli">In a second command window, start the sample sending application with the following command: </p><pre class="fragment">&lt;InstallDir&gt;/UMQ_6.12/&lt;platform&gt;/bin/umqsrc -B &lt;broker1IP:port1,broker2IP:port2,broker3IP:port3&gt; -M 10 QueueDestA
</pre><p>In the sending application window, you see output similar to the following example display: </p><pre class="fragment">0 msgs/sec -&gt; 1 msgs/ivl, 0 msec ivl
Using flight size of 1000
Not using UME Late Join.
Using UMQ Message Stability Notification. Will not display events. Delaying for 1 second
LOG Level 4: Core-8901-03: BROKER: Disconnect detected while establishing broker connection (10.29.3.85:5672).
UMQ queue "(Broker: Default IP: 10.29.3.49 PORT: 5672 )"[0][Inst: 10.29.3.49/5672] [0] ctx registration. ID f544ce868d92a087 Flags 0
UMQ queue "(Broker: Default IP: 10.29.3.49 PORT: 5672 )"[0] ctx registration complete. ID f544ce868d92a087 Flags 0
UMQ "(Broker: Default IP: 10.29.3.49 PORT: 5672 )"[0] src registration complete. Flags 0
Sending 10 messages of size 25 bytes to topic [QueueTstA] Sent 10 messages of size 25 bytes in 1.003 seconds. 1.003 secs. 0.009972 Kmsgs/sec. 1.994 Kbps
[BROKER], sent 10/1660, app sent 10 stable 0 inflight 10 Lingering for 5 seconds...
Deleting source Deleting context
</pre><p>In the receiving application window, you see messages being received, as in the following example display: </p><pre class="fragment">Request port binding disabled, no immediate messaging target.
LOG Level 4: Core-8901-03: BROKER: Disconnect detected while establishing broker connection (10.29.3.85:5672).
UMQ queue "(Broker: Default IP: 10.29.3.49 PORT: 5672 )"[0][Inst: 10.29.3.49/5672] [0] ctx registration. ID a8c3c09a7ccb1476 Flags 0
UMQ queue "(Broker: Default IP: 10.29.3.49 PORT: 5672 )"[0] ctx registration complete. ID a8c3c09a7ccb1476 Flags 0
[QueueTstA][(Broker: Default IP: 10.29.3.49 PORT: 5672 )] UMQ "(Broker: Default IP: 10.29.3.49 PORT: 5672 )"[0] registration complete. AssignID 0. Flags 0
1.001 secs. 0      Kmsgs/sec.  0          Kbps
1.001 secs. 0      Kmsgs/sec.  0          Kbps
1.001 secs. 0      Kmsgs/sec.  0          Kbps
1.001 secs. 0      Kmsgs/sec.  0          Kbps
1.001 secs. 0      Kmsgs/sec.  0          Kbps
1.001 secs. 0.007993 Kmsgs/sec.  1.599 Kbps
1.001 secs. 0.001998 Kmsgs/sec.  0.3996 Kbps
Quitting.... received 10 messages (0 reassigned, 0 resubmitted)
</pre><p class="endli"><br />
 </p>
</li>
</ol>
<h1><a class="anchor" id="shuttingdownhighavailabilitynodes"></a>
Shutting Down High Availability Nodes&nbsp;&nbsp;<small><a href="#shuttingdownhighavailabilitynodes">&lt;-</a></small></h1>
<p>To shut down a high availability queuing system node, perform the following steps:</p>
<ol>
<li>
Shut down the broker with the following command: <pre class="fragment">&lt;InstallDir&gt;/UMQ_6.12/&lt;platform&gt;/broker/apache-activemq-5.10.0/bin/activemq stop
</pre> </li>
<li>
Shut down the umestored process. </li>
<li>
Shut down the lbmrd process. </li>
<li>
<p class="startli">Repeat steps 1-3 for the remaining nodes.</p>
<p class="endli"><br />
 </p>
</li>
</ol>
<h1><a class="anchor" id="queuingupgradeconsiderations"></a>
Queuing Upgrade Considerations&nbsp;&nbsp;<small><a href="#queuingupgradeconsiderations">&lt;-</a></small></h1>
<p>When UMQ 6.8 was released, it added some capabilities and deprecated others, when compared with pre-6.8 UMQ. You might need to change how you set configuration options or change function calls in your application code.</p>
<p>If the application does not use UMQ-specific features other than Ultra Load Balancing (ULB), ignore this section. This section is a supplement to upgrade guidelines in the Release Notes and does not repeat the guidelines therein.</p>
<p><br />
 </p>
<h2><a class="anchor" id="configurationoptions"></a>
Configuration Options&nbsp;&nbsp;<small><a href="#configurationoptions">&lt;-</a></small></h2>
<p>When you upgrade client applications from versions prior to 6.8, you must change the following configuration settings:</p>
<ul>
<li>
Contexts that contain queue sources or receivers must specify a list of brokers with the broker option. </li>
<li>
<p class="startli">Sources in a brokered context must set source option transport to BROKER.</p>
<p class="endli"><br />
 </p>
</li>
</ul>
<h2><a class="anchor" id="applicationcode"></a>
Application Code&nbsp;&nbsp;<small><a href="#applicationcode">&lt;-</a></small></h2>
<p>You might need to make changes to client application source code.</p>
<p>You do not need to change any API calls unless the functions are deprecated. However, you must recompile client applications from versions prior to 6.8.</p>
<p>UMQ client applications from versions prior to 6.8 might use the same context for both queue sources or receivers and topic sources or receivers. In such cases, you must create separate contexts for queue applications and non-queue applications.</p>
<p>For more information, see <a class="el" href="deprecatedandunavailablefeatures.html">Deprecated and Unavailable Features</a>. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.11-->
</body>
</html>
