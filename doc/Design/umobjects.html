<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Concepts Guide: UM Objects</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen_manual.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Concepts Guide
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('umobjects.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">UM Objects </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Many UM documents use the term object. Be aware that with the C API, they do not refer to formal class-based objects as supported by C++. The term is used here in an informal sense to denote an entity that can be created, used, and (usually) deleted, has functionality and data associated with it, and is managed through the API. The handle that is used to refer to an object is usually implemented as a pointer to a data structure (defined in <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.13.1_RC1/doc/Design/api.tag:../API/" href="../API/lbm_8h.html">lbm.h</a>), but the internal structure of an object is said to be opaque, meaning that application code should not read or write the structure directly.</p>
<p>However, the UM Java and .NET APIs <em>are</em> formally object oriented, with Java/C# class-based objects. See the <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.13.1_RC1/doc/Design/javaapi.tag:../JavaAPI/" href="../JavaAPI/index.html#umjavaapi">UM Java API</a> and the <a href="../DotNetAPI/index.html#umnetapi">UM .NET API</a> documentation.</p>
<p>The UM API is designed around a set of UM objects. The most-often used object types are: </p><ul>
<li>
<a class="el" href="umobjects.html#contextobject">Context</a> - a fairly "heavy-weight" parent object for most other UM objects. Also represents an "instance" of UM, with all foreground and background functions. </li>
<li>
<a class="el" href="umobjects.html#sourceobject">Source</a> - a publisher creates one or more Source objects, one per topic to be published. </li>
<li>
<a class="el" href="umobjects.html#receiverobject">Receiver</a> - a subscriber creates one or more Receivers, one per topic that is subscribed. </li>
<li>
<a class="el" href="umobjects.html#umwildcardreceivers">Wildcard Receiver</a> - a subscriber can optionally create Wildcard Receivers to subscribe to patterns that can match multiple topics. </li>
<li>
<a class="el" href="umfeatures.html#hotfailoverhf">Hot Failover Receiver</a> - a specialized type of Receiver object that allows for redundant publishing. </li>
<li>
<a class="el" href="umfeatures.html#hotfailoveracrossmultiplecontexts">HFX Receiver</a> - a specialized type of Hot Failover Receiver object that allows redundant sources across multiple Context objects. </li>
<li>
<a class="el" href="umobjects.html#eventqueueobject">Event Queue</a> - an active object (requires one or more threads) which is used to queue and deliver UM events (including received messages) to the application using a separate thread. Event queues are normally not required; by default UM delivers events using the Context's own thread. But there are circumstances where it is useful to transfer the received message or event to an independent thread for delivery. </li>
</ul>
<p>A typical UM application program manages UM objects following certain ordering rules: </p><ol>
<li>
If desired, Event Queues are typically created first. (Most UM applications do not use Event Queues.) </li>
<li>
Create a Context object. A typical application creates only one context, but there are some specialized use cases in which a small number of contexts (typically less than 5) are useful. </li>
<li>
Create one or more Source and Receiver objects. It is not unusual for an application to create thousands of sources or receivers. </li>
<li>
The application's main processing phase consists of publishing messages using the Source objects, and receiving messages using the Receiver objects. UM is most efficiently used if those Source and Receiver objects are created during initialization. Dynamic object creation during normal operation is possible, but can require special coding. </li>
<li>
When the application is ready to shut down, Sources and Receivers should be deleted. </li>
<li>
Contexts are deleted after all Sources and Receivers are deleted. Note that if the event queue uses <a class="el" href="architecture.html#sequentialmode">Sequential Mode</a>, the event processing thread should be unblocked and joined prior to Context deletion. </li>
<li>
Event Queues, if used, are deleted last. Note that the Event Queue dispatching thread(s) should be unblocked and joined prior to deletion of the Event Queue. </li>
</ol>
<p>Note that it is very important to enforce the above deletion order. For example, it can lead to crashes if you delete a context while it still has active Sources or Receivers associated with it. Similarly, crashes can result if you delete an event queue while it still has active Contexts associated with it.</p>
<p>Also, note that deletion of Source objects can affect the reliability of message delivery. UM Receivers are designed to detect lost packets and request retransmission. However, once a Source object is deleted, it can no longer fulfill retransmission requests. It is usually best for an application to delay a few seconds after sending its last messages before deleting the Sources. This is especially important if <a class="el" href="architecture.html#implicitbatching">Implicit Batching</a> is used since outgoing messages might be held in the Batcher.</p>
<p><br />
 </p>
<h1><a class="anchor" id="contextobject"></a>
Context Object&nbsp;&nbsp;<small><a href="#contextobject">&lt;-</a></small></h1>
<p>A UM context object conceptually is an environment in which UM runs. An application creates a context, typically during initialization, and uses it for most other UM operations. In the process of creating the context, UM normally starts an independent thread (the context thread) to do the necessary background processing such as the following: </p><ul>
<li>
Topic resolution </li>
<li>
Enforce rate controls for sending messages </li>
<li>
Manage timers </li>
<li>
Manage state </li>
<li>
Implement UM protocols </li>
<li>
Manage <a class="el" href="fundamentalconcepts.html#transportsessions">Transport Sessions</a> </li>
</ul>
<p>You create a context with <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.13.1_RC1/doc/Design/api.tag:../API/" href="../API/lbm_8h.html#a8058947690bd0995bc2c59d4a61b462f">lbm_context_create()</a>. When an application is finished with the context (no more message passing needed), it should delete the context by calling <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.13.1_RC1/doc/Design/api.tag:../API/" href="../API/lbm_8h.html#a962bfceb336c65191ba08497ac70602b">lbm_context_delete()</a>.</p>
<dl class="section warning"><dt>Warning</dt><dd>Before deleting a context, you must first delete all objects contained within that context (sources, receivers, wildcard receivers).</dd></dl>
<p>Your application can give a context a name, which are optional but should be unique across your UM network. You set a context name before calling <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.13.1_RC1/doc/Design/api.tag:../API/" href="../API/lbm_8h.html#a8058947690bd0995bc2c59d4a61b462f">lbm_context_create()</a> in the following ways:</p>
<ul>
<li>
If you are using XML UM configuration files, call <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.13.1_RC1/doc/Design/api.tag:../API/" href="../API/lbm_8h.html#a3a97ec59981f5b863b0b40faf82eceb8">lbm_context_attr_set_from_xml()</a> or <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.13.1_RC1/doc/Design/api.tag:../API/" href="../API/lbm_8h.html#a04d99cc97d32f359888c5befcc50512e">lbm_context_attr_create_from_xml()</a> and set the name in the <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.13.1_RC1/doc/Design/config.tag:../Config/" href="../Config/grpmajoroptions.html#contextnamecontext">context_name (context)</a> parameter. </li>
<li>
If you are using plain text UM configuration files, call <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.13.1_RC1/doc/Design/api.tag:../API/" href="../API/lbm_8h.html#ab67f641d5a0ad1a9fe53d415da58d961">lbm_context_attr_setopt()</a> and specify <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.13.1_RC1/doc/Design/config.tag:../Config/" href="../Config/grpmajoroptions.html#contextnamecontext">context_name (context)</a> as the optname and the context's name as the optval. Don't forget to set the optlen. </li>
<li>
Create a plain text UM configuration file with the option <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.13.1_RC1/doc/Design/config.tag:../Config/" href="../Config/grpmajoroptions.html#contextnamecontext">context_name (context)</a> set to the name of the context. </li>
</ul>
<p>Context names are optional but should be unique within a process. UM does not enforce uniqueness, rather issues a log warning if it encounters duplicate context names. Application context names are only used to load template and individual option values within an XML UM configuration file.</p>
<p>One of the more important functions of a context is to hold configuration information that is of context scope. See the <a href="../Config/index.html">UM Configuration Guide</a> for options that are of context scope.</p>
<p>Most UM applications create a single context. However, there are some specialized circumstances where an application would create multiple contexts. For example, with appropriate configuration options, two contexts can provide separate topic name spaces. Also, multiple contexts can be used to portion available bandwidth across topic sub-spaces (in effect allocating more bandwidth to high-priority topics).</p>
<dl class="section attention"><dt>Attention</dt><dd>Regardless of the number of contexts created by your application, a good practice is to keep them open throughout the life of your application. Do not close them until you close the application.</dd></dl>
<p><br />
 </p>
<h1><a class="anchor" id="topicobject"></a>
Topic Object&nbsp;&nbsp;<small><a href="#topicobject">&lt;-</a></small></h1>
<p>A UM topic object is conceptually very simple; it is little more than a container for a string (the topic name). However, UM uses the topic object to hold a variety of state information used by UM for internal processing. It is conceptually contained within a context. Topic objects are used by applications in the creation of <a class="el" href="umobjects.html#sourceobject">sources</a> and <a class="el" href="umobjects.html#receiverobject">receivers</a>.</p>
<p>Technically, the user's application does not create or delete topic objects. Their management is handled internally by UM, as needed. The application uses APIs to gain access to topic objects. A publishing application calls <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.13.1_RC1/doc/Design/api.tag:../API/" href="../API/lbm_8h.html#a1ba60407fa2bde0997aab6d5a5d2da1a">lbm_src_topic_alloc()</a> to get a reference to a topic object that it intends to use for creation of a <a class="el" href="umobjects.html#sourceobject">Source Object</a>. A subscribing application calls <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.13.1_RC1/doc/Design/api.tag:../API/" href="../API/lbm_8h.html#a3de8a6a659896f76475c453683db4e18">lbm_rcv_topic_lookup()</a> to get a reference to a topic object that it intends to use for creation of a <a class="el" href="umobjects.html#receiverobject">Receiver Object</a>.</p>
<p>The application does not need to explicitly tell UM when it no longer needs the topic object. The application's reference can simply be discarded.</p>
<p><br />
 </p>
<h1><a class="anchor" id="sourceobject"></a>
Source Object&nbsp;&nbsp;<small><a href="#sourceobject">&lt;-</a></small></h1>
<p>A UM source object is used to send messages to the topic that it is bound to. It is conceptually contained within a context.</p>
<p>You create a source object by calling <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.13.1_RC1/doc/Design/api.tag:../API/" href="../API/lbm_8h.html#ab8dd76271bf9df7a5f88476d431f523e">lbm_src_create()</a>. One of its parameters is a <a class="el" href="umobjects.html#topicobject">Topic Object</a>. A source object can be bound to only one topic. The application is responsible for deleting a source object when it is no longer needed by calling <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.13.1_RC1/doc/Design/api.tag:../API/" href="../API/lbm_8h.html#a29d45db8f76835b4ae78f4568c25712f">lbm_src_delete()</a>.</p>
<p><br />
 </p>
<h2><a class="anchor" id="sourcestring"></a>
Source String&nbsp;&nbsp;<small><a href="#sourcestring">&lt;-</a></small></h2>
<p>Every source that a publishing application creates has associated with it a unique <em>source string</em>. Note that if multiple publishing UM contexts (applications) create sources for the same topic, each context's source will have its own unique source string. Similarly, if one publishing UM context (application) creates multiple sources for different topics, each topic's source will have its own unique source string. So a source string identifies one specific instance of a topic within a UM context.</p>
<p>The source string is used in a few different ways in the UM API, for example to identify which <a class="el" href="fundamentalconcepts.html#transportsessions">Transport Session</a> to retrieve statistics for in <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.13.1_RC1/doc/Design/api.tag:../API/" href="../API/lbm_8h.html#a4094c703f97a7ebe340b985b2ed1ac2b">lbm_rcv_retrieve_transport_stats()</a>. The source string is made available to the application in several callbacks, for example <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.13.1_RC1/doc/Design/api.tag:../API/" href="../API/lbm_8h.html#a20d2e77507380a39c081a95462acb995">lbm_src_notify_function_cb</a>, or the "source" field of <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.13.1_RC1/doc/Design/api.tag:../API/" href="../API/structlbm__msg__t__stct.html">lbm_msg_t_stct</a> of a received message. See also <a class="el" href="umfeatures.html#sendingtosources">Sending to Sources</a>.</p>
<p>The format of a source string depends on the transport type: </p><ul>
<li>
<p class="startli">TCP:src_ip:src_port:session_id[topic_idx] <br />
 session_id is optional, per configuration option <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.13.1_RC1/doc/Design/config.tag:../Config/" href="../Config/grptransporttcpoperation.html#transporttcpusesessionidsource">transport_tcp_use_session_id (source)</a> <br />
 example: <code>TCP:192.168.0.4:45789:f1789bcc[1539853954]</code></p>
<p class="endli"></p>
</li>
<li>
<p class="startli">LBTRM:src_ip:src_port:session_id:mc_group:dest_port[topic_idx] <br />
 example: <code>LBTRM:10.29.3.88:14390:e0679abb:231.13.13.13:14400[1539853954]</code></p>
<p class="endli"></p>
</li>
<li>
<p class="startli">LBT-RU:src_ip:src_port:session_id[topic_idx] <br />
 session_id is optional, per configuration option <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.13.1_RC1/doc/Design/config.tag:../Config/" href="../Config/grptransportlbtruoperation.html#transportlbtruusesessionidsource">transport_lbtru_use_session_id (source)</a> <br />
 example: <code>LBT-RU:192.168.3.189:34678[1539853954]</code></p>
<p class="endli"></p>
</li>
<li>
<p class="startli">LBT-IPC:session_id:transport_id[topic_idx] <br />
 example: <code>LBT-IPC:6481f8d4:20000[1539853954]</code></p>
<p class="endli"></p>
</li>
<li>
<p class="startli">LBT-SMX:session_id:transport_id[topic_idx] <br />
 example: <code>LBT-SMX:6481f8d4:20000[1539853954]</code></p>
<p class="endli"></p>
</li>
<li>
BROKER <br />
 example: <code>BROKER</code> </li>
</ul>
<p>Please note that the topic index field (topic_idx) may or may not be present depending on your version of UM and/or the setting for configuration option <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.13.1_RC1/doc/Design/config.tag:../Config/" href="../Config/grpmajoroptions.html#sourceincludestopicindexcontext">source_includes_topic_index (context)</a>.</p>
<p>See also <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.13.1_RC1/doc/Design/api.tag:../API/" href="../API/lbm_8h.html#afa35ad2c7d5d473ffeda6727022f9b94">lbm_transport_source_format()</a> and <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.13.1_RC1/doc/Design/api.tag:../API/" href="../API/lbm_8h.html#a30bf33dce2021f6ea8915b45f511af56">lbm_transport_source_parse()</a>.</p>
<p><br />
 </p>
<h2><a class="anchor" id="sourcestringsinaroutednetwork"></a>
Source Strings in a Routed Network&nbsp;&nbsp;<small><a href="#sourcestringsinaroutednetwork">&lt;-</a></small></h2>
<p>In a UM network consisting of multiple Topic Resolution Domains (TRDs) connected by <a class="el" href="fundamentalconcepts.html#umrouter">DROs</a>, a given source will be uniquely identifiable within a TRD by its source string. However, that same source will have different source strings in different TRDs. For receivers in the same TRD as the source, the source string will refer to the source. But in remote TRDs, that same source's source string will refer to the <em>proxy source</em> of the DRO on the shortest path to the source. The IP information contained in the source string will refer to the DRO.</p>
<p>This can lead to a situation where multiple originating sources located elsewhere in the UM network will have source strings with the same IP information in a given TRD. They will differ by Topic Index number, but even that topic index will be different in different TRDs.</p>
<p><br />
 </p>
<h2><a class="anchor" id="sourceconfigurationandtransportsessions"></a>
Source Configuration and Transport Sessions&nbsp;&nbsp;<small><a href="#sourceconfigurationandtransportsessions">&lt;-</a></small></h2>
<p>As with contexts, a source holds configuration information that is of source scope. This includes network options, operational options and reliability options for LBT-RU and LBT-RM. For example, each source can use a different transport and would therefore configure a different network address to which to send topic messages. See the <a href="../Config/index.html">UM Configuration Guide</a> for source configuration options.</p>
<p>As stated in <a class="el" href="fundamentalconcepts.html#umtransports">UM Transports</a>, many topics (and therefore sources) can be mapped to a single transport. Many of the configuration options for sources actually control or influence <a class="el" href="fundamentalconcepts.html#transportsessions">Transport Session</a> activity. If many sources are sending topic messages over a single Transport Session (TCP, LBT-RU or LBT-RM), UM only uses the configuration options for the first source assigned to the transport.</p>
<p>For example, if the first source to use a LBT-RM Transport Session sets the <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.13.1_RC1/doc/Design/config.tag:../Config/" href="../Config/grptransportlbtrmreliability.html#transportlbtrmnakgenerationintervalreceiver">transport_lbtrm_nak_generation_interval (receiver)</a> to 24 MB and the second source sets the same option to 2 MB, UM assigns 24 MB to the Transport Session's <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.13.1_RC1/doc/Design/config.tag:../Config/" href="../Config/grptransportlbtrmreliability.html#transportlbtrmnakgenerationintervalreceiver">transport_lbtrm_nak_generation_interval (receiver)</a>.</p>
<p>The <a href="../Config/index.html">UM Configuration Guide</a> identifies the source configuration options that may be ignored when UM assigns the source to an existing Transport Session. Log file warnings also appear when UM ignores source configuration options.</p>
<p><br />
 </p>
<h2><a class="anchor" id="zeroobjectdeliverysource"></a>
Zero Object Delivery (Source)&nbsp;&nbsp;<small><a href="#zeroobjectdeliverysource">&lt;-</a></small></h2>
<p>The Zero Object Delivery (ZOD) feature for Java and .NET lets sources deliver events to an application with no per-event object creation. This prevents latencies due to garbage collection. UM's ZOD design operates on receiver, source, and context level events.</p>
<p>See <a class="el" href="umobjects.html#zeroobjectdelivery">Zero Object Delivery</a> for information on how to employ ZOD.</p>
<p><br />
 </p>
<h1><a class="anchor" id="receiverobject"></a>
Receiver Object&nbsp;&nbsp;<small><a href="#receiverobject">&lt;-</a></small></h1>
<p>A UM receiver object is used to receive messages from the topic that it is bound to. It is conceptually contained within a context. Messages are delivered to the application by an application callback function, specified when the receiver object is created.</p>
<p>You create a receiver object by calling <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.13.1_RC1/doc/Design/api.tag:../API/" href="../API/lbm_8h.html#aa7491c50fefbc2b70f8035fce7ac1477">lbm_rcv_create()</a>. One of its parameters is a <a class="el" href="umobjects.html#topicobject">Topic Object</a>. A receiver object can be bound to only one topic. The application is responsible for deleting a receiver object when it is no longer needed by calling <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.13.1_RC1/doc/Design/api.tag:../API/" href="../API/lbm_8h.html#a8d5e8713f5ae776330b23a1e371f934d">lbm_rcv_delete()</a>.</p>
<p>Multiple receiver objects can be created for the same topic within a single context, which can be used to trigger multiple delivery callbacks when messages arrive for that topic.</p>
<p><br />
 </p>
<h2><a class="anchor" id="receiverconfigurationandtransportsessions"></a>
Receiver Configuration and Transport Sessions&nbsp;&nbsp;<small><a href="#receiverconfigurationandtransportsessions">&lt;-</a></small></h2>
<p>A receiver holds configuration information that is of receiver scope. This includes network options, operational options and reliability options for LBT-RU and LBT-RM. See the <a href="../Config/index.html">UM Configuration Guide</a> for receiver configuration options.</p>
<p>As stated above in <a class="el" href="umobjects.html#sourceconfigurationandtransportsessions">Source Configuration and Transport Sessions</a>, multiple topics (and therefore receivers) can be mapped to a single transport. As with source configuration options, many receiver configuration options control or influence <a class="el" href="fundamentalconcepts.html#transportsessions">Transport Session</a> activity. If multiple receivers are receiving topic messages over a single Transport Session (TCP, LBT-RU or LBT-RM), UM only uses the configuration options for the first receiver assigned to the transport.</p>
<p>For example, if the first receiver to use a LBT-RM Transport Session sets <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.13.1_RC1/doc/Design/config.tag:../Config/" href="../Config/grptransportlbtrmreliability.html#transportlbtrmnakgenerationintervalreceiver">transport_lbtrm_nak_generation_interval (receiver)</a> to 10 seconds, that value is applied to the Transport Session. If a second receiver using the same transport session sets the same option to 2 seconds, that value is ignored.</p>
<p>The <a href="../Config/index.html">UM Configuration Guide</a> identifies the receiver configuration options that may be ignored when UM assigns the receiver to an existing Transport Session. Log file warnings also appear when UM ignores receiver configuration options.</p>
<p><br />
 </p>
<h2><a class="anchor" id="umwildcardreceivers"></a>
UM Wildcard Receivers&nbsp;&nbsp;<small><a href="#umwildcardreceivers">&lt;-</a></small></h2>
<p>You create a wildcard receiver object by calling <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.13.1_RC1/doc/Design/api.tag:../API/" href="../API/lbm_8h.html#a5b5d52f6b87499213757b73b09bc8160">lbm_wildcard_rcv_create()</a>. Instead of a topic object, the caller supplies a pattern which UM uses to match multiple topics. Because the application does not explicitly lookup the topics, UM passes the topic attribute into <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.13.1_RC1/doc/Design/api.tag:../API/" href="../API/lbm_8h.html#a5b5d52f6b87499213757b73b09bc8160">lbm_wildcard_rcv_create()</a> so that it can set options. Also, wildcard receivers have their own set of options, such as pattern type. The application is responsible for deleting a wildcard receiver object when it is no longer needed by calling <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.13.1_RC1/doc/Design/api.tag:../API/" href="../API/lbm_8h.html#a64407f3874012efaebcba322ea6d229d">lbm_wildcard_rcv_delete()</a>.</p>
<p>The wildcard pattern supplied for matching is a PCRE regular expression that Perl recognizes. See <a href="http://perldoc.perl.org/perlrequick.html">http://perldoc.perl.org/perlrequick.html</a> for details about PCRE. See also the <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.13.1_RC1/doc/Design/config.tag:../Config/" href="../Config/grpwildcardreceiver.html#patterntypewildcardreceiver">pattern_type (wildcard_receiver)</a> option.</p>
<dl class="section note"><dt>Note</dt><dd>Ultra Messaging has deprecated two other wildcard receiver pattern types, regex POSIX extended regular expressions and appcb application callback, as of UM Version 6.1.</dd></dl>
<p>Be aware that some platforms may not support all of the regular expression wildcard types. For example, UM does not support the use of Unicode PCRE characters in wildcard receiver patterns on any system that communicates with a HP-UX or AIX system. See the Informatica Knowledge Base article, <a href="https://kb.informatica.com/faq/5/Pages/80077.aspx">Platform-Specific Dependencies</a> for details.</p>
<p>For an example of wildcard usage, see <a href="../example/lbmwrcv.c">lbmwrcv.c</a></p>
<p>For more information on wildcard receivers, see <a class="el" href="topicresolutiondescription.html#wildcardreceivertopicresolution">Wildcard Receiver Topic Resolution</a>, and <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.13.1_RC1/doc/Design/config.tag:../Config/" href="../Config/grpwildcardreceiver.html">Wildcard Receiver Options</a>.</p>
<p>TIBCO users see the Informatica Knowledge Base articles, <a href="https://kb.informatica.com/faq/5/Pages/80075.aspx">Wildcard topic regular expressions and SmartSockets wildcards</a> and <a href="https://kb.informatica.com/faq/5/Pages/80277.aspx">Wildcard topic regular expressions and Rendezvous wildcards</a>.</p>
<p><br />
 </p>
<h2><a class="anchor" id="transportservicesproviderobject"></a>
Transport Services Provider Object&nbsp;&nbsp;<small><a href="#transportservicesproviderobject">&lt;-</a></small></h2>
<p>The Transport Services Provider object ("XSP") is introduced with UM version 6.11 and beyond to manage sockets, threads, and other receive-side resources associated with subscribed <a class="el" href="fundamentalconcepts.html#transportsessions">Transport Sessions</a>. The primary purpose for an XSP object is to allow the programmer to control the threading of received messages, based on the Transport Sessions of those messages.</p>
<p>For more information on XSP, see <a class="el" href="umfeatures.html#transportservicesproviderxsp">Transport Services Provider (XSP)</a>.</p>
<p><br />
 </p>
<h2><a class="anchor" id="umhotfailoveracrosscontextsobjects"></a>
UM Hot Failover Across Contexts Objects&nbsp;&nbsp;<small><a href="#umhotfailoveracrosscontextsobjects">&lt;-</a></small></h2>
<p>Hot Failover Across Contexts objects ("HFX") provide a form of hot failover that can operate across multiple network interfaces.</p>
<p>For more information, see <a class="el" href="umfeatures.html#hotfailoveracrossmultiplecontexts">Hot Failover Across Multiple Contexts</a>.</p>
<p><br />
 </p>
<h2><a class="anchor" id="zeroobjectdelivery"></a>
Zero Object Delivery&nbsp;&nbsp;<small><a href="#zeroobjectdelivery">&lt;-</a></small></h2>
<p>The Zero Object Delivery (ZOD) feature for Java and .NET lets receivers (and sources) deliver messages and events to an application with no per-message or per-event object creation. This facilitates source/receiver applications that would require little to no garbage collection at runtime, producing lower and more consistent message latencies.</p>
<p>To take advantage of this feature, you must call dispose() on a message to mark it as available for reuse. To access data from the message when using ZOD, you use a specific pair of LBMMessage-class methods (see below) to extract message data directly from the message, rather than the standard data() method. Using the latter method creates a byte array, and consequently, an object. It is the subsequent garbage collecting to recycle those objects that can affect performance.</p>
<p>For using ZOD, the LBMMessage class methods are: </p><ul>
<li>
Java: <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.13.1_RC1/doc/Design/javaapi.tag:../JavaAPI/" href="../JavaAPI/classcom_1_1latencybusters_1_1lbm_1_1LBMMessage.html#a963d0f07751ed176a97f3eff84740fb9">dispose()</a>, <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.13.1_RC1/doc/Design/javaapi.tag:../JavaAPI/" href="../JavaAPI/classcom_1_1latencybusters_1_1lbm_1_1LBMMessage.html#a66588284dc0a60fdd0267f397f36c3c6">dataBuffer()</a>, and <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.13.1_RC1/doc/Design/javaapi.tag:../JavaAPI/" href="../JavaAPI/classcom_1_1latencybusters_1_1lbm_1_1LBMMessage.html#a8480fa58f107456108732af3940efd59">dataLength()</a>. </li>
<li>
.NET: <a href="../DotNetAPI/classcom_1_1latencybusters_1_1lbm_1_1LBMMessage.html#a963d0f07751ed176a97f3eff84740fb9">dispose()</a>, <a href="../DotNetAPI/classcom_1_1latencybusters_1_1lbm_1_1LBMMessage.html#a98f034f21af3ac96cc48cd90df73b48b">dataPointer()</a>, and <a href="../DotNetAPI/classcom_1_1latencybusters_1_1lbm_1_1LBMMessage.html#a26ee9e9a8fa76302a91bcf77a60a9d26">length()</a>. </li>
</ul>
<p>On the other hand, you may need to keep the message as an object for further use after callback. In this case, ZOD is not appropriate and you must call promote() on the message. Alternatively, you can copy the message data into your own pool of object.</p>
<p>The ZOD feature does not apply to the C API.</p>
<p><br />
 </p>
<h1><a class="anchor" id="eventqueueobject"></a>
Event Queue Object&nbsp;&nbsp;<small><a href="#eventqueueobject">&lt;-</a></small></h1>
<p>A UM event queue object is a serialization queue structure and execution thread for delivery of other UM objects' events, including received message. For example, a <a class="el" href="umobjects.html#sourceobject">Source Object</a> can generate events that the user's application wants to receive via application callback. When the source is created, an event queue can be specified as the delivery agent of those events. Multiple UM <a class="el" href="umobjects.html#contextobject">contexts</a>, <a class="el" href="umobjects.html#sourceobject">sources</a>, and <a class="el" href="umobjects.html#receiverobject">receivers</a> can specify the same event queue, and these events will be delivered in a FIFO manner (first-in, first-out).</p>
<p>Without event queues, these events are delivered via callback from the originating object's context thread, which places the following restrictions on the application callback function being called:</p>
<ul>
<li>
The application function is not allowed to make certain API calls (mostly having to do with creating or deleting UM objects). </li>
<li>
The application function must execute very quickly without blocking. </li>
<li>
The application does not have control over when the callback executes. For example, it can't prevent callbacks during critical sections of application code. </li>
</ul>
<p>Using an event queue relaxes these restrictions by running the application callback function from a different (non-context) thread. As mentioned above, if the receive callback needs to use UM functions that create or delete objects, or if the receive callback performs operations that potentially block, the UM event queue can help. You may also want to use an event queue if the receive callback is CPU intensive and can make good use of multi-core hardware.</p>
<p>An event queue introduces a small amount of latency. However, high message rates or extensive message processing can negate the low latency benefit if the context thread continually blocks.</p>
<p>UM event queues are unbounded, non-blocking queues and provide the following features:</p>
<ul>
<li>
Your application can set a queue size threshold with <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.13.1_RC1/doc/Design/config.tag:../Config/" href="../Config/grpeventqueue.html#queuesizewarningeventqueue">queue_size_warning (event_queue)</a> and be warned when the queue contains too many messages. (Note: this size threshold does not prevent new events from being enqueued.) </li>
<li>
Your application can set a delay threshold with <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.13.1_RC1/doc/Design/config.tag:../Config/" href="../Config/grpeventqueue.html#queuedelaywarningeventqueue">queue_delay_warning (event_queue)</a> and be warned when events have been in the queue for too long. </li>
<li>
The application callback function has no UM API restrictions. </li>
<li>
Your application can control exactly when UM delivers queued events with <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.13.1_RC1/doc/Design/api.tag:../API/" href="../API/lbm_8h.html#ac06b127bae882dd5fb68b7044fdceb5f">lbm_event_dispatch()</a>. And you can have control return to your application either when specifically asked to do so (by calling <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.13.1_RC1/doc/Design/api.tag:../API/" href="../API/lbm_8h.html#af4b1b274cb142acefe0826673ecffdbe">lbm_event_dispatch_unblock()</a>), or optionally when there are no events left to deliver. </li>
<li>
Your application can take advantage of parallel processing on multiple processor hardware since UM processes asynchronously on a separate thread from your application's processing of received messages. By using multiple application threads to dispatch an event queue, or by using multiple event queues, each with its own dispatch thread, your application can further increase parallelism. </li>
</ul>
<p>You create an UM event queue in the C API by calling <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.13.1_RC1/doc/Design/api.tag:../API/" href="../API/lbm_8h.html#ac7ebe02319363c84bef08f34be7865ec">lbm_event_queue_create()</a>. When finished with an event queue, delete it by calling <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.13.1_RC1/doc/Design/api.tag:../API/" href="../API/lbm_8h.html#a189f4c0178374d488acacf592c3015e4">lbm_event_queue_delete()</a>.</p>
<p>See <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.13.1_RC1/doc/Design/config.tag:../Config/" href="../Config/grpeventqueue.html">Event Queue Options</a> for configuration options related to event queues.</p>
<dl class="section warning"><dt>Warning</dt><dd>Before deleting an event queue, you must first delete all objects that reference that event queue (sources, receivers, wildcard receivers, contexts).</dd></dl>
<p>In the Java API and the .NET API, use the <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.13.1_RC1/doc/Design/javaapi.tag:../JavaAPI/" href="../JavaAPI/classcom_1_1latencybusters_1_1lbm_1_1LBMEventQueue.html">LBMEventQueue</a> class.</p>
<p>Of course, your application can create its own queues, which can be bounded or unbounded, blocking or non-blocking. For transports that are <a class="el" href="fundamentalconcepts.html#transportpacing">receiver-paced</a>, a bounded, blocking application queue can provide end-to-end receiver-pacing, so long as the publisher and subscriber are in the same <a class="el" href="fundamentalconcepts.html#topicresolutiondomain">Topic Resolution Domain</a> (TRD). However, this end-to-end receiver pacing is not retained when messages flow through a <a class="el" href="fundamentalconcepts.html#umrouter">DRO</a>.</p>
<p><br />
 </p>
<h2><a class="anchor" id="usinganeventqueue"></a>
Using an Event Queue&nbsp;&nbsp;<small><a href="#usinganeventqueue">&lt;-</a></small></h2>
<p>To use an Event Queue, an application typically performs the following actions: </p><ol>
<li>
Create the Event Queue using <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.13.1_RC1/doc/Design/api.tag:../API/" href="../API/lbm_8h.html#ac7ebe02319363c84bef08f34be7865ec">lbm_event_queue_create()</a>. <div class="fragment"><div class="line"><a class="codeRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.13.1_RC1/doc/Design/api.tag:../API/" href="../API/lbm_8h.html#a6897baf281a5b4729e05c873aacac420">lbm_event_queue_t</a> *evq;</div><div class="line">err = <a class="codeRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.13.1_RC1/doc/Design/api.tag:../API/" href="../API/lbm_8h.html#ac7ebe02319363c84bef08f34be7865ec">lbm_event_queue_create</a>(&amp;evq, NULL, NULL, NULL);</div></div><!-- fragment --> </li>
<li>
Create a new thread of execution to be the dispatch thread. This new thread should call <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.13.1_RC1/doc/Design/api.tag:../API/" href="../API/lbm_8h.html#ac06b127bae882dd5fb68b7044fdceb5f">lbm_event_dispatch()</a> in a loop. <div class="fragment"><div class="line">evq_running = 1;</div><div class="line"><span class="keywordflow">while</span> (evq_running) {</div><div class="line">  err = <a class="codeRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.13.1_RC1/doc/Design/api.tag:../API/" href="../API/lbm_8h.html#ac06b127bae882dd5fb68b7044fdceb5f">lbm_event_dispatch</a>(evq, LBM_EVENT_QUEUE_BLOCK);</div><div class="line">  <span class="keywordflow">if</span> (err == LBM_FAILURE) { ... handle error ... }</div><div class="line">}</div><div class="line"><span class="comment">/* Exit the thread (OS-dependent). */</span></div></div><!-- fragment --> Note that the return value should be compared to <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.13.1_RC1/doc/Design/api.tag:../API/" href="../API/lbm_8h.html#a06fc87d81c62e9abb8790b6e5713c55baf90fd7c1c303f82795102f289988877a">LBM_FAILURE</a> (-1), and not the normal success value of 0. This is because on success, <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.13.1_RC1/doc/Design/api.tag:../API/" href="../API/lbm_8h.html#ac06b127bae882dd5fb68b7044fdceb5f">lbm_event_dispatch()</a> returns the number of events that were dispatched during its execution. </li>
<li>
Create other UM objects whose events you want processed by the event queue. For example, creating a UM Receiver object with the Event Queue will call your message receive callback through the event queue, using your dispatch thread. <div class="fragment"><div class="line"><a class="codeRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.13.1_RC1/doc/Design/api.tag:../API/" href="../API/lbm_8h.html#a0a4af6b8247cc5a0a24a8578fb6e83bd">lbm_rcv_t</a> *rcv;</div><div class="line">err = <a class="codeRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.13.1_RC1/doc/Design/api.tag:../API/" href="../API/lbm_8h.html#aa7491c50fefbc2b70f8035fce7ac1477">lbm_rcv_create</a>(&amp;rcv, ctx, topic, app_rcv_callback, NULL, evq);</div></div><!-- fragment --> From this point, your application receiver callback function will be called from the dispatch loop for received messages and other receiver events. </li>
<li>
When it is time to shut down the program, the UM objects that refer to the event queue must first be deleted. <div class="fragment"><div class="line">err = <a class="codeRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.13.1_RC1/doc/Design/api.tag:../API/" href="../API/lbm_8h.html#a8d5e8713f5ae776330b23a1e371f934d">lbm_rcv_delete</a>(rcv);</div></div><!-- fragment --> Remember that an event queue might be handling events for many UM objects; they must all be deleted prior to deleting the event queue. </li>
<li>
Now shut down dispatching the event queue. <div class="fragment"><div class="line">evq_running = 0;</div><div class="line">err = <a class="codeRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.13.1_RC1/doc/Design/api.tag:../API/" href="../API/lbm_8h.html#af4b1b274cb142acefe0826673ecffdbe">lbm_event_dispatch_unblock</a>(evq);</div><div class="line"><span class="comment">/* &quot;Join&quot; the dispatch thread (OS-dependent). */</span></div></div><!-- fragment --> The unblock forces the <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.13.1_RC1/doc/Design/api.tag:../API/" href="../API/lbm_8h.html#ac06b127bae882dd5fb68b7044fdceb5f">lbm_event_dispatch()</a> function to return. Typically at that point, the dispatch thread is "joined", which blocks until the dispatch thread exits. </li>
<li>
Delete the event queue. <div class="fragment"><div class="line">err = <a class="codeRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.13.1_RC1/doc/Design/api.tag:../API/" href="../API/lbm_8h.html#a189f4c0178374d488acacf592c3015e4">lbm_event_queue_delete</a>(evq);</div></div><!-- fragment --> </li>
</ol>
<p>Here are some lesser used event queue APIs: </p><ul>
<li>
<a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.13.1_RC1/doc/Design/api.tag:../API/" href="../API/lbm_8h.html#ab0a5134ef39fc7054e5d164f0a1889f7">lbm_event_queue_size()</a> - number of events in the queue. </li>
<li>
<a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.13.1_RC1/doc/Design/api.tag:../API/" href="../API/lbm_8h.html#ad94310754a9f685693f789a017c7bb7e">lbm_event_queue_shutdown()</a> - purge events from the queue (risky). </li>
<li>
<a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.13.1_RC1/doc/Design/api.tag:../API/" href="../API/lbm_8h.html#aeb9ed445a630f0db48f8c9d24bf23178">lbm_event_queue_retrieve_stats()</a> - retrieve statistics counters. </li>
<li>
<a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.13.1_RC1/doc/Design/api.tag:../API/" href="../API/lbm_8h.html#a1838b8382eb314eed96e6ed48c0d1f5b">lbm_event_queue_reset_stats()</a> - reset statistics counters. </li>
</ul>
<p><br />
 </p>
<h2><a class="anchor" id="eventqueuetimeout"></a>
Event Queue Timeout&nbsp;&nbsp;<small><a href="#eventqueuetimeout">&lt;-</a></small></h2>
<p>The second parameter passed to <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.13.1_RC1/doc/Design/api.tag:../API/" href="../API/lbm_8h.html#ac06b127bae882dd5fb68b7044fdceb5f">lbm_event_dispatch()</a> is a timeout. There are two special values: </p><ul>
<li>
<a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.13.1_RC1/doc/Design/api.tag:../API/" href="../API/lbm_8h.html#a2c6b535637bfd72be2905b0cd4782140">LBM_EVENT_QUEUE_BLOCK</a> - no timeout. Do not return until <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.13.1_RC1/doc/Design/api.tag:../API/" href="../API/lbm_8h.html#af4b1b274cb142acefe0826673ecffdbe">lbm_event_dispatch_unblock()</a> is called. </li>
<li>
<a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.13.1_RC1/doc/Design/api.tag:../API/" href="../API/lbm_8h.html#a1995a85e2c983f6b38322c5c5784f32e">LBM_EVENT_QUEUE_POLL</a> - no wait. If there are one or more events in the queue, process exactly one of them and return. Otherwise, return immediately without waiting. </li>
</ul>
<p>Any other value specifies a timeout in milliseconds.</p>
<p>However, this timeout does not necessarily limit the time spent waiting inside the dispatch function. The purpose of the timeout is to set a <em>minimum</em> time that the dispatch function will process events, not a maximum.</p>
<p>The implementation of the event queue uses an unbounded wait for incoming events. When an event is delivered to the queue, the dispatch function wakes up and processes the event (calls the appropriate application callback). Then the dispatch function checks the time to see if the timeout has been exceeded. If so, the dispatch function returns. Otherwise, it waits for the next event.</p>
<p>However, suppose that no further events are delivered to the event queue. In this case, the dispatch function will wait without bound. The timeout parameter will not cause the dispatch function to stop waiting.</p>
<p>If the application needs an upper limit to the time spent dispatching, the timeout can be combined with the use of an external timer that calls <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.13.1_RC1/doc/Design/api.tag:../API/" href="../API/lbm_8h.html#af4b1b274cb142acefe0826673ecffdbe">lbm_event_dispatch_unblock()</a> when the maximum time has expired. UM's timer system may be used by calling <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.13.1_RC1/doc/Design/api.tag:../API/" href="../API/lbm_8h.html#a6ddbee95ee1eb4e6b98b177f84157f8a">lbm_schedule_timer()</a>.</p>
<p><br />
 </p>
<h1><a class="anchor" id="messageobject"></a>
Message Object&nbsp;&nbsp;<small><a href="#messageobject">&lt;-</a></small></h1>
<p>When an application subscribes to a topic to which publishers are sending messages, the received messages are delivered to the application by an application callback function (see <a class="el" href="fundamentalconcepts.html#eventdelivery">Event Delivery</a>). One of the parameters that UM passes to the application callback is a message object. This object gives the application access to the content of the message, as well as some metadata about the message, such as the topic.</p>
<p>Unlike other objects described above, the user does not create these message objects by API call. UM creates and initializes the objects internally.</p>
<p>The default life-span of a message object is different between C and Java or .NET.</p>
<p><br />
 </p>
<h2><a class="anchor" id="messageobjectdeletion"></a>
Message Object Deletion&nbsp;&nbsp;<small><a href="#messageobjectdeletion">&lt;-</a></small></h2>
<p><b>C API</b></p>
<p>In C, by default, the message object is deleted when the receiver callback returns. No action is necessary by the application to trigger that deletion.</p>
<p><b>Java or .NET API</b></p>
<p>In Java or .NET, the passed-in message object is <em>not</em> automatically deleted when the receiver application callback returns. Instead, the message object is fully deleted only when all references to the object are lost and the garbage collector reclaims the object.</p>
<p>However, applications which allow this kind of garbage buildup and collection usually suffer from large latency outliers (<a class="el" href="umglossary.html#glossaryjitter">jitter</a>), and while garbage collection can be tuned to minimize its impact, it is usually recommended that latency-sensitive applications manage their objects more carefully. See <a class="el" href="umobjects.html#zeroobjectdelivery">Zero Object Delivery</a>.</p>
<p>Also, there are some UM features in which specific actions are triggered by the deletion of messages, and the application designer usually wants to control when those actions are performed (for example, <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.13.1_RC1/doc/Design/ume.tag:../UME/" href="../UME/designingpersistentreceivers.html#persistencemessageconsumption">Persistence Message Consumption</a>).</p>
<p>For these reasons, Java and .NET developers are strongly advised to explicitly dispose of a message object when the application is finished with it. It does this by calling the "dispose()" method of the message object. In the simple case, this should be done in the receiver application callback just before returning.</p>
<p><br />
 </p>
<h2><a class="anchor" id="messageobjectretention"></a>
Message Object Retention&nbsp;&nbsp;<small><a href="#messageobjectretention">&lt;-</a></small></h2>
<p>Some applications are designed to process received messages in ways that cannot be completed by the time the receiver callback returns. In these cases, the application must extend the life span of the message object beyond the return from the receiver application callback. This is called "message retention".</p>
<p>Note that message retention prevents the recycling of the UM receive buffer. See <a class="el" href="advancedoptimizations.html#receivebufferrecycling">Receive Buffer Recycling</a>.</p>
<p><b>C API</b></p>
<p>To prevent automatic deletion of the message object when the receiver application callback returns, the callback must call <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.13.1_RC1/doc/Design/api.tag:../API/" href="../API/lbm_8h.html#a2b7788ff58f9e78bc89ea890dad0cccf">lbm_msg_retain()</a>. This allows the application to transfer the message object to another thread, work queue, or control flow.</p>
<p>When a received message is retained, it becomes the application's responsibility to delete the message explicitly by calling <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.13.1_RC1/doc/Design/api.tag:../API/" href="../API/lbm_8h.html#aa5fc1eb324a55b8c800c31460b0f0116">lbm_msg_delete()</a>. Failure to delete retained messages can lead to unbounded memory growth.</p>
<p><b>Java or .NET</b></p>
<p>The receiver application callback typically calls the "promote()" method of the message object prior to returning. See <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.13.1_RC1/doc/Design/javaapi.tag:../JavaAPI/" href="../JavaAPI/index.html#retainingmessages">Retaining Messages</a>.</p>
<p><br />
 </p>
<h1><a class="anchor" id="attributesobject"></a>
Attributes Object&nbsp;&nbsp;<small><a href="#attributesobject">&lt;-</a></small></h1>
<p>An attribute object is used to programmatically configure other UM objects. Their use is usually optional; omitting them results in default configurations (potentially overridden by configuration files). See <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.13.1_RC1/doc/Design/config.tag:../Config/" href="../Config/index.html#configurationoverview">Configuration Overview</a> for details.</p>
<p>However, there is a class of configuration options that require the use of an attribute object: configuring application callbacks. With these options, you are setting a value that includes a pointer to a C function. This cannot be done from a configuration file. For example, see <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.13.1_RC1/doc/Design/config.tag:../Config/" href="../Config/grpdeliverycontrol.html#sourcenotificationfunctionreceiver">source_notification_function (receiver)</a>.</p>
<p>See <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.13.1_RC1/doc/Design/config.tag:../Config/" href="../Config/attributesobjects.html">Attributes Objects</a> for more details on the types, creation, use, and deletion of attributes objects.</p>
<p><br />
 </p>
<h1><a class="anchor" id="securityconsiderations"></a>
Security Considerations&nbsp;&nbsp;<small><a href="#securityconsiderations">&lt;-</a></small></h1>
<p>UM should generally be used in secure networks where unauthorized users are unable to access UM components and applications. A UM network can be made secure through the use of certificate-based encryption (see <a class="el" href="umfeatures.html#encryptedtcp">Encrypted TCP</a>), but this increases message delivery latency and reduces maximum possible throughput.</p>
<p>In particular, the use of UDP-based protocols (LBT-RM and LBT-RU) cannot secured in the same way that TCP can. In a system that uses UDP-based protocols, there is no mechanism in UM to prevent unauthorized applications to be deployed which can then subscribe and publish topics with complete freedom.</p>
<p><br />
 </p>
<h2><a class="anchor" id="webmonsecurity"></a>
Webmon Security&nbsp;&nbsp;<small><a href="#webmonsecurity">&lt;-</a></small></h2>
<p>Of special interest is the use of simple web-based monitoring of the UM daemons: Store, DRO, SRS. UM does not provide any sort of authentication or authorization for the daemons web pages.</p>
<p>Be aware that the use of UM daemon web-based monitoring pages does place a load on the daemon being monitored. For some pages, that load can be significant. An unauthorized user who rapidly accesses pages can disrupt the normal operation of the daemon, potentially leading to message loss.</p>
<p>Users are expected to prevent unauthorized access to the web monitor through normal firewalling methods. Users who are unable to limit access to a level consistent with their overall security needs should disable the daemon web monitors. See: </p><table class="doxtable">
<tr>
<th>Daemon </th><th><p class="starttd">Configuration Element to Disable Web Monitor</p>
<p class="endtd"></p>
</th></tr>
<tr>
<td>Store </td><td><p class="starttd"><a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.13.1_RC1/doc/Design/ume.tag:../UME/" href="../UME/configurationreferenceforumestored.html#umeelementwebmonitor">&lt;web-monitor&gt;</a></p>
<p class="endtd"></p>
</td></tr>
<tr>
<td>DRO </td><td><p class="starttd"><a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.13.1_RC1/doc/Design/gateway.tag:../Gateway/" href="../Gateway/xmlconfigurationreference.html#droelementwebmonitor">&lt;web-monitor&gt;</a></p>
<p class="endtd"></p>
</td></tr>
<tr>
<td>SRS </td><td><a class="el" href="srsconfigurationfile.html#srselementdebugmonitor">&lt;debug-monitor&gt;</a> </td></tr>
</table>
<p><br />
 </p>
<h1><a class="anchor" id="configurationintroduction"></a>
Configuration Introduction&nbsp;&nbsp;<small><a href="#configurationintroduction">&lt;-</a></small></h1>
<p>UM is designed to be highly configurable. Configuration options are generally given default values to support good performance over a wide variety of use cases, but for users who demand the highest levels of performance, many configuration options allow for optimization.</p>
<p>Where practical, UM's design philosophy is to offer new features that can be enabled via configuration only, without requiring changes to the application source code. This can provide higher performance and reliability just by upgrading, without needing to rebuild the application.</p>
<p>Broadly speaking, there are two kinds of components in a UM-based distributed system that need to be configured: </p><ol>
<li>
Application programs, linked with the UM library, </li>
<li>
Informatica daemons (service programs that run in the background), which provide services to the applications. </li>
</ol>
<p>Application programs are written by users and call UM API functions. There are different ways of providing configuration to application programs, described in <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.13.1_RC1/doc/Design/config.tag:../Config/" href="../Config/index.html#configurationoverview">Configuration Overview</a>.</p>
<p>Informatica daemons include: </p><ul>
<li>
SRS (Stateful Resolver Service) - provides TCP-based topic resolution services to other components. See <a class="el" href="srsconfigurationfile.html">SRS Configuration File</a> for configuration details. </li>
<li>
lbmrd (Resolver Daemon) - provides unicast UDP-based topic resolution services to other components. See <a class="el" href="lbmrdconfigurationfile.html">lbmrd Configuration File</a> for configuration details. </li>
<li>
Stored - provides persistence services. See <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.13.1_RC1/doc/Design/ume.tag:../UME/" href="../UME/configurationreferenceforumestored.html">Configuration Reference for Umestored</a> for configuration details. </li>
<li>
DRO - routes messages between Topic Resolution Domains. See <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.13.1_RC1/doc/Design/gateway.tag:../Gateway/" href="../Gateway/xmlconfigurationreference.html">XML Configuration Reference</a> for configuration details. </li>
<li>
ActiveMQ Broker - provides general queuing services and JMS API. See <a href="https://activemq.apache.org/xml-configuration">ActiveMQ Xml Configuration</a> for configuration details. </li>
</ul>
<p>It is important to remember the different kinds of configuration. </p><ul>
<li>
Applications create UM objects (contexts, sources, receivers) using the UM library. Those objects must be configured to control their operation and behavior using <b>"LBM configuration options"</b>. An application typically uses an <b>"LBM configuration file"</b> in either XML or flat format. For full details on LBM configuration options, see <a href="../Config/index.html">UM Configuration Guide</a> </li>
<li>
Informatica daemons (e.g. SRS, Store, DRO) are configured using program-specific configuration files in XML format. </li>
<li>
Informatica daemons (e.g. SRS, Store, DRO) also internally create UM objects (contexts, sources, receivers) using the UM library. Those objects must also be configured using one or more LBM configuration files. </li>
</ul>
<p><br />
 </p>
<h2><a class="anchor" id="xmlspaceattribute"></a>
xml:space Attribute&nbsp;&nbsp;<small><a href="#xmlspaceattribute">&lt;-</a></small></h2>
<p>Many XML elements throughout UM's configuration files include an attribute named "xml:space". This attribute instructs the XML parser how to deal with whitespace (spaces, tabs, newlines) in the element's value. The attribute defaults to the value "default", which tells the XML parser to trim leading and trailing whitespace, and to compress multiple whitespace into a single space.</p>
<p>For example: </p><div class="fragment"><div class="line">&lt;log&gt;</div><div class="line">  my_logfile.log</div><div class="line">&lt;/log&gt;</div></div><!-- fragment --><p> Note that the value for the "&lt;log&gt;" element contains a leading newline, followed by two spaces, followed by the file name, followed by another newline. Those whitespace characters should be trimmed, which is the default behavior. It is equivalent to: </p><div class="fragment"><div class="line">&lt;log xml:space=<span class="stringliteral">&quot;default&quot;</span>&gt;</div><div class="line">  my_logfile.log</div><div class="line">&lt;/log&gt;</div></div><!-- fragment --><p>However, let's say you really want a space as the first character of the file name. While unusual, it can be done as follows: </p><div class="fragment"><div class="line">&lt;log xml:space=<span class="stringliteral">&quot;preserve&quot;</span>&gt; my_logfile.log&lt;/log&gt;</div></div><!-- fragment --><p> Note that it had to be combined into a single line to get rid of the newlines.</p>
<p><br />
<br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
</p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.11-->
</body>
</html>
