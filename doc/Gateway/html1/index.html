<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Dynamic Routing Guide: Dynamic Routing Guide</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen_manual.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Dynamic Routing Guide
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('index.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title"></div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p> 
<img src="infa_logo.png" width="400" height="138" alt="Informatica"/><br/><br/>
<big><b>Ultra Messaging</b></big> <small>(Version 6.12)</small><br/>
<br/><br/><br/>
<center class="mytitle">Dynamic Routing Guide</center>
<center>Copyright (C) 2004-2019, Informatica Corporation.  All Rights Reserved.</center>
<br/><br/><br/>
[&nbsp;<a href="../index.html">Multi-page HTML</a>&nbsp;]&nbsp;&nbsp;|&nbsp;&nbsp;[&nbsp;<a href="../UM_Routing_Guide=en.pdf">PDF</a>&nbsp;]
<br/><br/>
 </p>
<h1><a class="anchor" id="firstsect"></a>
Introduction&nbsp;&nbsp;<small><a href="#firstsect">&lt;-</a></small></h1>
<p>This document explains design concepts and product implementation for the Ultra Messaging <em>Dynamic Routing Option</em> (DRO).</p>
<dl class="section attention"><dt>Attention</dt><dd><b>See the <a href="../../DocIntro=en.pdf">Documentation Introduction</a> for important information on copyright, patents, information resources (including Knowledge Base, and How To articles), Marketplace, Support, and other information about Informatica and its products.</b></dd></dl>
<p>The Ultra Messaging Dynamic Routing Option (DRO) consists of a daemon called the "UM Router" (or just the DRO) that bridges disjoint Topic Resolution Domains (TRDs) by effectively forwarding control and user traffic between them. Thus, the UM Router facilitates WAN routing where multicast routing capability is absent, possibly due to technical obstacles or enterprise policies. (FYI: a historical name for the UM Router is "Twenty Nine West Gateway Daemon" or "tnwgd". In the documentation you will see various abbreviations that include "tnwg".)</p>
<p><br />
 </p>
<h2><a class="anchor" id="drofeatures"></a>
DRO Features&nbsp;&nbsp;<small><a href="#drofeatures">&lt;-</a></small></h2>
<p>The UM Router includes the following features: </p><ul>
<li>
Full bidirectional forwarding </li>
<li>
Multi-hop forwarding </li>
<li>
Mesh, loop, or alternate path UM Router configurations </li>
<li>
Automatic rerouting around faults </li>
<li>
Support for wildcard receivers </li>
<li>
Support of Request/Response messages </li>
<li>
Traffic filtering on multiple criteria </li>
<li>
UM Router resilience </li>
<li>
UMP persistence support </li>
<li>
UM transport monitoring statistics </li>
<li>
Web Monitoring </li>
<li>
MIM and UIM forwarding </li>
</ul>
<p>The following features are not fully supported in this release of the UM Router: </p><ul>
<li>
Queuing, both ULB and Brokered (including brokered JMS) </li>
<li>
Multitransport Threads (MTT) </li>
</ul>
<p>If you desire any of these features or any configuration or topology not presented in this document, please contact Informatica Ultra Messaging Support for possible alternatives.</p>
<dl class="section note"><dt>Note</dt><dd>The UM Router is not directly supported on the OpenVMS® platform. UM applications running on the OpenVMS® platform, however, can use a UM Router running on a different platform, such as Microsoft Windows or Linux.</dd></dl>
<p><br />
 </p>
<h1><a class="anchor" id="droarchitecture"></a>
DRO Architecture&nbsp;&nbsp;<small><a href="#droarchitecture">&lt;-</a></small></h1>
<p><br />
 </p>
<h2><a class="anchor" id="umrouterportals"></a>
UM Router Portals&nbsp;&nbsp;<small><a href="#umrouterportals">&lt;-</a></small></h2>
<p>The UM Router uses interfaces, called portals, through which to pass data. A UM Router consists of two or more bidirectional portals that may be one of two types:</p>
<ul>
<li>
An endpoint portal, which communicates directly to a UM topic resolution domain (TRD; see Topic Resolution Domains). </li>
<li>
A peer portal, which communicates via TCP with another peer portal (of another UM Router), allowing tunneling between UM Routers. Two peer portals connected to each other are referred to as companion peers, and utilize TCP connections for all data and control traffic (UDP is not supported for this). Compression and encryption can be applied to peer links. </li>
</ul>
<p>The figure below shows a simple UM Router use case, where two UM Routers bridge an ISP to connect two TRDs.</p>
<div class="image">
<img src="portals.png" alt="portals.png"/>
</div>
 <p>You configure portals in the UM Router's XML configuration file, specifying the portal's name, cost, UM Configuration, Access Control Lists and other attributes. See <a class="el" href="index.html#xmlconfigurationreference">XML Configuration Reference</a>.</p>
<p><br />
 </p>
<h2><a class="anchor" id="topicresolutiondomains"></a>
Topic Resolution Domains&nbsp;&nbsp;<small><a href="#topicresolutiondomains">&lt;-</a></small></h2>
<p>Since topic resolution uses UDP, sources and receivers must have UDP connectivity to each other. When they do, we consider them to be in the same topic resolution domain (TRD). More specifically, UM contexts must satisfy the following two requirements to belong to the same topic resolution domain.</p>
<ul>
<li>
The contexts must use the same topic resolution UM configuration (i.e., resolver_* options are the same). </li>
<li>
Contexts can communicate using the protocols required for both message transport and topic resolution traffic. </li>
</ul>
<p>For example, two contexts on separate machines in the same LAN are not in the same topic resolution domain if they use different resolver addresses. See Multicast Resolver Network Options. A topic resolution domain can span a WAN if the UM contexts on each side of a firewall use the same UM configuration and the firewall allows UDP traffic (multicast or unicast) to pass.</p>
<p>Each endpoint portal must identify its associated topic resolution domain with a domain-id the UM Router's XML configuration file, as in the example below. All portals in the same TRD must have the same domain-id, and different TRDs networked together via UM Routers must have domain-ids unique to each other.</p>
<pre class="fragment">  &lt;portals&gt;
    &lt;endpoint&gt;
      &lt;name&gt;LAN100&lt;/name&gt;
      &lt;domain-id&gt;100&lt;/domain-id&gt;
      &lt;lbm-config&gt;lan100.cfg&lt;/lbm-config&gt;
    &lt;/endpoint&gt;
    &lt;endpoint&gt;
      &lt;name&gt;LAN200&lt;/name&gt;
      &lt;domain-id&gt;200&lt;/domain-id&gt;
      &lt;lbm-config&gt;lan200.cfg&lt;/lbm-config&gt;
    &lt;/endpoint&gt;
  &lt;/portals&gt;
</pre><p><br />
 </p>
<h2><a class="anchor" id="proxysourcesandproxyreceivers"></a>
Proxy Sources and Proxy Receivers&nbsp;&nbsp;<small><a href="#proxysourcesandproxyreceivers">&lt;-</a></small></h2>
<p>To resolve a topic across a UM Router (described in <a class="el" href="index.html#basicumrouteroperation">Basic UM Router Operation</a>), the UM Router creates, within portals, proxy sources and proxy receivers (shown in the figure below by their dashed lines). These proxies behave like their UM counterparts; they resolve topics on the TRDs like normal sources and receivers, and the UM Router internally passes data from one portal to the other. However unlike regular sources, proxy sources do not have retransmission retention buffers normally used for Late Join or OTR.</p>
<div class="image">
<img src="proxies.png" alt="proxies.png"/>
</div>
 <p>Portals exist while the UM Router is running, however, the UM Router creates proxy sources and receivers during topic resolution and deletes them when the topic is retired.</p>
<dl class="section note"><dt>Note</dt><dd>The proxy sources created by the UM Router are unrelated to proxy sources created by the UMP persistent store.</dd></dl>
<p><br />
 </p>
<h2><a class="anchor" id="routing"></a>
Routing&nbsp;&nbsp;<small><a href="#routing">&lt;-</a></small></h2>
<p>In multiple-UM Router environments where more than one UM Router can provide possible messaging pathways, the UM Routers are able to cooperatively determine and establish optimal routes. Also, the UM Router network is able to detect link or other UM Router outages and automatically reroute traffic as needed. See <a class="el" href="index.html#routingtopologies">Routing Topologies</a> for more information.</p>
<p><br />
 </p>
<h1><a class="anchor" id="umrouterconcepts"></a>
UM Router Concepts&nbsp;&nbsp;<small><a href="#umrouterconcepts">&lt;-</a></small></h1>
<p><br />
 </p>
<h2><a class="anchor" id="basicumrouteroperation"></a>
Basic UM Router Operation&nbsp;&nbsp;<small><a href="#basicumrouteroperation">&lt;-</a></small></h2>
<p>The diagram below shows a UM Router bridging topic resolution domains TRD1 and TRD2, for topic AAA, in a direct link configuration. Endpoint E1 contains a proxy receiver for topic AAA and endpoint E2 has a proxy source for topic AAA.</p>
<div class="image">
<img src="basic_routing.png" alt="basic_routing.png"/>
</div>
 <p>To establish topic resolution in an already-running UM Router, the following sequence typically occurs in an example like the above figure.</p>
<ol>
<li>
A receiver in TRD2 issues a TQR (Topic Query Record) for topic AAA. </li>
<li>
Portal E2 receives the TQR and passes information about topic AAA to all other portals in the UM Router. (In this case, E1 is the only other portal.) </li>
<li>
E1 immediately responds with three actions: a) create a proxy receiver for topic AAA, b) the new proxy receiver sends a TQR for AAA into TRD1, and c) E1 issues a Topic Interest message into TRD1 for the benefit of any other UM Routers that may be connected to that domain. </li>
<li>
A source for topic AAA in TRD1 sees the TQR and issues a TIR (Topic Information Record). </li>
<li>
E2 creates proxy source AAA, which then issues a TIR to TRD2. The receiver in TRD2 joins the transport, thus completing topic resolution. </li>
<li>
E1's AAA proxy receiver sees the TIR and requests that E2 (and any other interested portals in the UM Router, if there were any) create a proxy source for AAA. </li>
</ol>
<p><br />
 </p>
<h3><a class="anchor" id="interestandusequeries"></a>
Interest and Use Queries&nbsp;&nbsp;<small><a href="#interestandusequeries">&lt;-</a></small></h3>
<p>When a UM Router starts, its endpoint portals issue a brief series of Topic Resolution Request messages to their respective topic resolution domains. This provokes quiescent receivers (and wildcard receivers) into sending Use Query Responses, indicating interest in various topics. Each portal then records this interest.</p>
<div class="image">
<img src="dro_tr_1.png" alt="dro_tr_1.png"/>
</div>
 <p>After a UM Router has been running, endpoint portals issue periodic Topic Use Queries and Pattern Use Queries (collectively referred to as simply Use Queries). Use Query Responses from UM contexts confirm that the receivers for these topics indeed still exist, thus maintaining these topics on the interest list. Autonomous TQRs also refresh interest and have the effect of suppressing the generation of Use Queries.</p>
<div class="image">
<img src="dro_tr_2.png" alt="dro_tr_2.png"/>
</div>
 <p>In the case of multi-hop UM Router configurations, UM Routers cannot detect interest for remote contexts via Use Queries or TQRs. They do this instead via Interest Messages. An endpoint portal generates periodic interest messages, which are picked up by adjacent UM Routers (i.e., the next hop over), at which time interest is refreshed.</p>
<div class="image">
<img src="dro_tr_3.png" alt="dro_tr_3.png"/>
</div>
 <p>You can adjust intervals, limits, and durations for these topic resolution and interest mechanisms via UM Router configuration options (see <a class="el" href="index.html#xmlconfigurationreference">XML Configuration Reference</a>).</p>
<p><br />
 </p>
<h3><a class="anchor" id="umrouterkeepalive"></a>
UM Router Keepalive&nbsp;&nbsp;<small><a href="#umrouterkeepalive">&lt;-</a></small></h3>
<p>To maintain a reliable connection, peer portals exchange UM Router Keepalive signals. Keepalive intervals and connection timeouts are configurable on a per-portal basis. You can also set the UM Router to send keepalives only when traffic is idle, which is the default condition. When both traffic and keepalives go silent at a portal ingress, the portal considers the connection lost and disconnects the TCP link. After the disconnect, the portal tries to reconnect. See refeatewaykeepalive.</p>
<p><br />
 </p>
<h3><a class="anchor" id="finaladvertisements"></a>
Final Advertisements&nbsp;&nbsp;<small><a href="#finaladvertisements">&lt;-</a></small></h3>
<p>UM Router proxy sources on endpoint portals, when deleted, send out a series of final advertisements. A final advertisement tells any receivers, including proxy receivers on other UM Routers, that the particular source has gone away. This triggers EOS and clean-up activities on the receiver relative to that specific source, which causes the receiver to begin querying according to its topic resolution configuration for the sustaining phase of querying.</p>
<p>In short, final advertisements announce earlier detection of a source that has gone away, instead of transport timeout. This causes a faster transition to an alternative proxy source on a different UM Router if there is a change in the routing path.</p>
<p><br />
 </p>
<h3><a class="anchor" id="moreaboutproxysourcesandreceivers"></a>
More About Proxy Sources and Receivers&nbsp;&nbsp;<small><a href="#moreaboutproxysourcesandreceivers">&lt;-</a></small></h3>
<p>The domain-id is used by Interest Messages and other internal and UM Router-to-UM Router traffic to ensure forwarding of all messages (payload and topic resolution) to the correct recipients. This also has the effect of not creating proxy sources/receivers where they are not needed. Thus, UM Routers create proxy sources and receivers based solely on receiver interest.</p>
<p>If more than one source sends on a given topic, the receiving portal's single proxy receiver for that topic receives all messages sent on that topic. The sending portal, however creates a proxy source for every source sending on the topic. The UM Router maintains a table of proxy sources, each keyed by an Originating Transport ID (OTID), enabling the proxy receiver to forward each message to the correct proxy source. An OTID uniquely identifies a source's transport session, and is included in topic advertisements.</p>
<p><br />
 </p>
<h3><a class="anchor" id="protocolconversion"></a>
Protocol Conversion&nbsp;&nbsp;<small><a href="#protocolconversion">&lt;-</a></small></h3>
<p>When an application creates a source, it is configured to use one of the UM transport types. When a DRO is deployed, the proxy sources are also configured to use one of the UM transport types. Although users often use the same transport type for sources and proxy sources, this is not necessary. When different transport types are configured for source and proxy source, the DRO is performing a protocol conversion.</p>
<p>When this is done, it is very important to configure the transports to use the same maximum datagram size. If you don't, the DRO can drop messages which cannot be recovered through normal means. For example, a source in TRD1 can be configured for TCP, which has a default maximum datagram size of 65536. If a DRO's remote portal is configured to create LBT-RU proxy sources, that has a default maximum datagram size of 8192. If the source sends a user message of 10K, the TCP source will send it as a single fragment. The DRO will receive it and will attempt to forward it on an LBT-RU proxy source, but the 10K fragment is too large for LBT-RU's maximum datagram size, so the message will be dropped.</p>
<p>The solution is to override the default maximum datagram sizes to be the same. Informatica generally does not recommend configuring UDP-based transports for datagram sizes above 8K, so it is advisable to set the maximum datagram sizes of all transport types to 8192, like this:</p>
<pre>
context transport_tcp_datagram_max_size 8192
context transport_lbtrm_datagram_max_size 8192
context transport_lbtru_datagram_max_size 8192
context transport_lbtipc_datagram_max_size 8192
source transport_lbtsmx_datagram_max_size 8192
</pre><p>See configuration options: <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.12_RC3/doc/Gateway/config.tag:../../Config/" href="../../Config/grptransporttcpoperation.html#transporttcpdatagrammaxsizecontext">transport_tcp_datagram_max_size (context)</a>, <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.12_RC3/doc/Gateway/config.tag:../../Config/" href="../../Config/grptransportlbtrmoperation.html#transportlbtrmdatagrammaxsizecontext">transport_lbtrm_datagram_max_size (context)</a>, <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.12_RC3/doc/Gateway/config.tag:../../Config/" href="../../Config/grptransportlbtruoperation.html#transportlbtrudatagrammaxsizecontext">transport_lbtru_datagram_max_size (context)</a>, <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.12_RC3/doc/Gateway/config.tag:../../Config/" href="../../Config/grptransportlbtipcoperation.html#transportlbtipcdatagrammaxsizecontext">transport_lbtipc_datagram_max_size (context)</a>, and <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.12_RC3/doc/Gateway/config.tag:../../Config/" href="../../Config/grptransportlbtsmxoperation.html#transportlbtsmxdatagrammaxsizesource">transport_lbtsmx_datagram_max_size (source)</a>.</p>
<p>Also see <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.12_RC3/doc/Gateway/design.tag:../../Design/" href="../../Design/architecture.html#messagefragmentationandreassembly">Message Fragmentation and Reassembly</a>.</p>
<p>Final note: the <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.12_RC3/doc/Gateway/config.tag:../../Config/" href="../../Config/grpudpbasedresolveroperation.html#resolverdatagrammaxsizecontext">resolver_datagram_max_size (context)</a> option also needs to be made the same in all instances of UM, including DROs.</p>
<p><br />
 </p>
<h2><a class="anchor" id="multihopforwarding"></a>
Multi-Hop Forwarding&nbsp;&nbsp;<small><a href="#multihopforwarding">&lt;-</a></small></h2>
<p>UM can resolve topics across a span of multiple UM Routers. Consider a simple example UM Router deployment, as shown in the following figure.</p>
<div class="image">
<img src="multi_hop.png" alt="multi_hop.png"/>
</div>
 <p>In this diagram, UM Router A has two endpoint portals connected to topic resolution domains TRD1 and TRD2. UM Router B also has two endpoint portals, which bridge TRD2 and TRD3. Endpoint portal names reflect the topic resolution domain to which they connect. For example, UM Router A endpoint E2 interfaces TRD2.</p>
<p>TRD1 has a source for topic AAA, and TRD3, an AAA receiver. The following sequence of events enables the forwarding of topic messages from source AAA to receiver AAA.</p>
<ol>
<li>
Receiver AAA queries (issues a TQR). </li>
<li>
UM Router B, endpoint E3 (B-E3) receives the TQR and passes information about topic AAA to all other portals in the UM Router. In this case, B-E2 is the only other portal. </li>
<li>
In response, B-E2 creates a proxy receiver for AAA and sends a Topic Interest message for AAA into TRD2. The proxy receiver also issues a TQR, which in this case is ignored. </li>
<li>
UM Router A, endpoint E2 (A-E2) receives this Topic Interest message and passes information about topic AAA to all other portals in the UM Router. In this case, A-E1 is the only other portal. </li>
<li>
In response, A-E1 creates a proxy receiver for AAA and sends a Topic Interest message and TQR for AAA into TRD1. </li>
<li>
Source AAA responds to the TQR by sending a TIR for topic AAA. In this case, the Topic Interest message is ignored. </li>
<li>
The AAA proxy receiver created by A-E1 receives this TIR and requests that all UM Router A portals with an interest in topic AAA create a proxy source for AAA. </li>
<li>
In response, A-E2 creates a proxy source, which sends a TIR for topic AAA via TRD2. </li>
<li>
The AAA proxy receiver at B-E2 receives this TIR and requests that all UM Router B portals with an interest in topic AAA create a proxy source for AAA. </li>
<li>
In response, B-E3 creates a proxy source, which sends a TIR for topic AAA via TRD3. The receiver in TRD3 joins the transport. </li>
<li>
Topic AAA has now been resolved across both UM Routers, which forward all topic messages sent by source AAA to receiver AAA. </li>
</ol>
<p><br />
 </p>
<h2><a class="anchor" id="routingwildcardreceivers"></a>
Routing Wildcard Receivers&nbsp;&nbsp;<small><a href="#routingwildcardreceivers">&lt;-</a></small></h2>
<p>The UM Router supports topic resolution for wildcard receivers in a manner very similar to non-wildcard receivers. Wildcard receivers in a TRD issuing a WC-TQR cause corresponding proxy wildcard receivers to be created in portals, as shown in the following figure. The UM Router creates a single proxy source for pattern match.</p>
<div class="image">
<img src="wildcard.png" alt="wildcard.png"/>
</div>
 <p><br />
 </p>
<h2><a class="anchor" id="forwardingcosts"></a>
Forwarding Costs&nbsp;&nbsp;<small><a href="#forwardingcosts">&lt;-</a></small></h2>
<p>Forwarding a message through a UM Router incurs a cost in terms of latency, network bandwidth, and CPU utilization on the UM Router machine (which may in turn affect the latency of other forwarded messages). Transiting multiple UM Routers adds even more cumulative latency to a message. Other UM Router-related factors such as portal buffering, network bandwidth, switches, etc., can also add latency.</p>
<p>Factors other than latency contribute to the cost of forwarding a message. Consider a message that can be sent from one domain to its destination domain over one of two paths. A three-hop path over 1Gbps links may be faster than a single-hop path over a 100Mbps link. Further, it may be the case that the 100Mbps link is more expensive or less reliable.</p>
<p>You assign forwarding cost values on a per-portal basis. When summed over a path, these values determine the cost of that entire path. A network of UM Routers uses forwarding cost as the criterion for determining the best path over which to resolve a topic.</p>
<p><br />
 </p>
<h2><a class="anchor" id="umrouterrouting"></a>
UM Router Routing&nbsp;&nbsp;<small><a href="#umrouterrouting">&lt;-</a></small></h2>
<p>UM Routers have an awareness of other UM Routers in their network and how they are linked. Thus, they each maintain a topology map, which is periodically confirmed and updated. This map also includes forwarding cost information.</p>
<p>Using this information, the UM Routers can cooperate during topic resolution to determine the best (lowest cost) path over which to resolve a topic or to route control information. They do this by totaling the costs of all portals along each candidate route, then comparing the totals.</p>
<p>For example, the following figure shows two possible paths from TRD1 to TRD2: A-C (total route cost of 11) and B-D (total route cost of 7). In this case, the UM Routers select path B-D.</p>
<div class="image">
<img src="routing.png" alt="routing.png"/>
</div>
 <p>If a UM Router or link along path B-D should fail, the UM Routers detect this and reroute over path A-C. Similarly, if an administrator revises cost values along path B-D to exceed a total of 12, the UM Routers reroute to A-C.</p>
<p>If the UM Routers find more than one path with the same lowest total cost value, i.e., a "tie", they select the path based on a node-ID selection algorithm. Since administrators do not have access to node IDs, this will appear to be a pseudo-random selection.</p>
<dl class="section note"><dt>Note</dt><dd>You cannot configure parallel paths (such as for load balancing or Hot failover), as the UM Routers always select the lowest-cost path and only the lowest-cost path for all data between two points. However, you can devise an exception to this rule by configuring the destinations to be in different TRDs. For example, you can create an HFX Receiver bridging two receivers in different TRD contexts. The UM Routers route to both TRDs, and the HFX Receiver merges to a single stream for the application.</dd></dl>
<p><br />
 </p>
<h2><a class="anchor" id="routingtopologies"></a>
Routing Topologies&nbsp;&nbsp;<small><a href="#routingtopologies">&lt;-</a></small></h2>
<p>You can configure multiple UM Routers in a variety of topologies. Following are several examples.</p>
<p><br />
 </p>
<h3><a class="anchor" id="directlink"></a>
Direct Link&nbsp;&nbsp;<small><a href="#directlink">&lt;-</a></small></h3>
<p>The Direct Link configuration uses a single UM Router to directly connect two TRDs. For a configuration example, see <a class="el" href="index.html#directlinkconfiguration">Direct Link Configuration</a>.</p>
<div class="image">
<img src="direct_link.png" alt="direct_link.png"/>
</div>
 <p><br />
 </p>
<h3><a class="anchor" id="singlelink"></a>
Single Link&nbsp;&nbsp;<small><a href="#singlelink">&lt;-</a></small></h3>
<p>A Single Link configuration connects two TRDs using a UM Router on each end of an intermediate link. The intermediate link can be a "peer" link, or a transit TRD. For configuration examples, see <a class="el" href="index.html#peerlinkconfiguration">Peer Link Configuration</a> and <a class="el" href="index.html#transittrdlinkconfiguration">Transit TRD Link Configuration</a>.</p>
<div class="image">
<img src="single_link.png" alt="single_link.png"/>
</div>
 <p><br />
 </p>
<h3><a class="anchor" id="parallellinks"></a>
Parallel Links&nbsp;&nbsp;<small><a href="#parallellinks">&lt;-</a></small></h3>
<p>Parallel Links offer multiple complete paths between two TRDs. However, UM will not load-balance messages across both links. Rather, parallel links are used for failover purposes. You can set preference between the links by setting the primary path for the lowest cost and standby paths at higher costs. For a configuration example, see <a class="el" href="index.html#parallellinksconfiguration">Parallel Links Configuration</a>.</p>
<div class="image">
<img src="parallel_links.png" alt="parallel_links.png"/>
</div>
 <p><br />
 </p>
<h3><a class="anchor" id="loops"></a>
Loops&nbsp;&nbsp;<small><a href="#loops">&lt;-</a></small></h3>
<p>Loops let you route packets back to the originating UM Router without reusing any paths. Also, if any peer-peer links are interrupted, the looped UM Routers are able to find an alternate route between any two TRDs.</p>
<div class="image">
<img src="loops.png" alt="loops.png"/>
</div>
 <p><br />
 </p>
<h3><a class="anchor" id="loopandspur"></a>
Loop and Spur&nbsp;&nbsp;<small><a href="#loopandspur">&lt;-</a></small></h3>
<p>The Loop and Spur has a one or more UM Routers tangential to the loop and accessible only through a single UM Router participating in the loop. For a configuration example, see <a class="el" href="index.html#loopandspurconfiguration">Loop and Spur Configuration</a>.</p>
<div class="image">
<img src="loop_and_spur.png" alt="loop_and_spur.png"/>
</div>
 <p><br />
 </p>
<h3><a class="anchor" id="loopwithcentralizedtrd"></a>
Loop with Centralized TRD&nbsp;&nbsp;<small><a href="#loopwithcentralizedtrd">&lt;-</a></small></h3>
<p>Adding a TRD to the center of a loop enhances its rerouting capabilities.</p>
<div class="image">
<img src="loop_central_trd.png" alt="loop_central_trd.png"/>
</div>
 <p><br />
 </p>
<h3><a class="anchor" id="Star"></a>
with centralized TRD&nbsp;&nbsp;<small><a href="#Star">&lt;-</a></small></h3>
<p>A Star with a centralized TRD does not offer rerouting capabilities but does provide an economical way to join multiple disparate TRDs.</p>
<div class="image">
<img src="star_central_trd.png" alt="star_central_trd.png"/>
</div>
 <p><br />
 </p>
<h3><a class="anchor" id="starwithcentralizedumrouter"></a>
Star with Centralized UM Router&nbsp;&nbsp;<small><a href="#starwithcentralizedumrouter">&lt;-</a></small></h3>
<p>The Star with a centralized UM Router is the simplest way to bridge multiple TRDs. For a configuration example, see <a class="el" href="index.html#starconfiguration">Star Configuration</a>.</p>
<div class="image">
<img src="star_central_dro.png" alt="star_central_dro.png"/>
</div>
 <p><br />
 </p>
<h3><a class="anchor" id="mesh"></a>
Mesh&nbsp;&nbsp;<small><a href="#mesh">&lt;-</a></small></h3>
<p>The Mesh topology provides peer portal interconnects between many UM Routers, approaching an all-connected-to-all configuration. This provides multiple possible paths between any two TRDs in the mesh. Note that this diagram is illustrative of the ways the UM Routers may be interconnected, and not necessarily a practical or recommended application. For a configuration example, see <a class="el" href="index.html#meshconfiguration">Mesh Configuration</a>.</p>
<div class="image">
<img src="mesh.png" alt="mesh.png"/>
</div>
 <p><br />
 </p>
<h3><a class="anchor" id="palmtree"></a>
Palm Tree&nbsp;&nbsp;<small><a href="#palmtree">&lt;-</a></small></h3>
<p>The Palm Tree has a set of series-connected TRDs fanning out to a more richly meshed set of TRDs. This topology tends to pass more concentrated traffic over common links for part of its transit while supporting a loop, star, or mesh near its terminus.</p>
<div class="image">
<img src="palm_tree.png" alt="palm_tree.png"/>
</div>
 <p><br />
 </p>
<h3><a class="anchor" id="dumbbell"></a>
Dumbbell&nbsp;&nbsp;<small><a href="#dumbbell">&lt;-</a></small></h3>
<p>Similar to the Palm Tree, the Dumbbell has a funneled route with a loop, star, or mesh topology on each end.</p>
<div class="image">
<img src="dumbell.png" alt="dumbell.png"/>
</div>
 <p><br />
 </p>
<h2><a class="anchor" id="unsupportedconfigurations"></a>
Unsupported Configurations&nbsp;&nbsp;<small><a href="#unsupportedconfigurations">&lt;-</a></small></h2>
<p>When designing UM Router networks, do not use any of the following topology constructs.</p>
<p>Two peer-to-peer connections between the same two UM Routers:</p>
<div class="image">
<img src="two_peers.png" alt="two_peers.png"/>
</div>
 <p>Two endpoint connections from the same UM Router to the same TRD:</p>
<div class="image">
<img src="two_endpoints.png" alt="two_endpoints.png"/>
</div>
 <p>Assigning two different Domain ID values (from different UM Routers) to the same TRD:</p>
<div class="image">
<img src="two_domainids.png" alt="two_domainids.png"/>
</div>
 <p><br />
 </p>
<h2><a class="anchor" id="umfeaturecompatibility"></a>
UM Feature Compatibility&nbsp;&nbsp;<small><a href="#umfeaturecompatibility">&lt;-</a></small></h2>
<p>You must install the UM Dynamic Routing Option with its companion Ultra Messaging UMS, UMP, or UMQ product, and versions must match. While most UM features are compatible with the UM Router, some are not. Following is a table of features and their compatibilities with the UM Router.</p>
<table class="doxtable">
<tr>
<th>UM Feature </th><th>UM Router Compatible? </th><th>Notes </th></tr>
<tr>
<td><a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.12_RC3/doc/Gateway/config.tag:../../Config/" href="../../Config/grptransportacceleration.html">Transport Acceleration</a> </td><td>Yes </td><td></td></tr>
<tr>
<td>Hot Failover (HF) </td><td>Yes </td><td>The UM Router can pass messages sent by HF publishers to HF receivers, however the UM Router itself cannot be configured to originate or terminate HF data streams. </td></tr>
<tr>
<td>Hot Failover across contexts (HFX) </td><td>Yes </td><td></td></tr>
<tr>
<td>Late Join </td><td>Yes </td><td></td></tr>
<tr>
<td>Message Batching </td><td>Yes </td><td></td></tr>
<tr>
<td>Monitoring/Statistics </td><td>Yes </td><td></td></tr>
<tr>
<td>Multicast Immediate Messaging (MIM) </td><td>Yes </td><td></td></tr>
<tr>
<td>Multi-Transport Threads </td><td>No </td><td></td></tr>
<tr>
<td>Off-Transport Recovery (OTR) </td><td>Yes </td><td></td></tr>
<tr>
<td>Ordered Delivery </td><td>Yes </td><td></td></tr>
<tr>
<td>Pre-Defined Messaging (PDM) </td><td>Yes </td><td></td></tr>
<tr>
<td>Request/Response </td><td>Yes </td><td></td></tr>
<tr>
<td>Self-Describing Messaging (SDM) </td><td>Yes </td><td></td></tr>
<tr>
<td>Source Side Filtering </td><td>Yes </td><td>The UM Router supports transport source side filtering. You can activate this either at the originating TRD source, or at a downstream proxy source. </td></tr>
<tr>
<td>Transport LBT-IPC </td><td>Yes </td><td></td></tr>
<tr>
<td>Transport LBT-RDMA </td><td>Yes </td><td></td></tr>
<tr>
<td>Transport LBT-RM </td><td>Yes </td><td></td></tr>
<tr>
<td>Transport LBT-RU </td><td>Yes </td><td></td></tr>
<tr>
<td>Transport LBT-SMX </td><td>Partial </td><td>The UM router does not support proxy sources sending data via LBT-SMX. Any proxy sources configured for LBT-SMX will be converted to TCP, with a log message warning of the transport change. The UM Router does accept LBT-SMX ingress traffic to proxy receivers. </td></tr>
<tr>
<td>Transport TCP </td><td>Yes </td><td></td></tr>
<tr>
<td>Transport TCP-LB </td><td>Yes </td><td></td></tr>
<tr>
<td>JMS, via UMQ broker </td><td>No </td><td></td></tr>
<tr>
<td>UM Spectrum </td><td>Yes </td><td>The UM Router supports UM Spectrum traffic, but you cannot implement Spectrum channels in UM Router proxy sources or receivers. </td></tr>
<tr>
<td>UMP Implicit/Explicit Acknowledgements </td><td>Yes </td><td></td></tr>
<tr>
<td>UMP Persistent Store </td><td>Yes </td><td></td></tr>
<tr>
<td>UMP Proxy Sources </td><td>Yes </td><td></td></tr>
<tr>
<td>UMP Quorum Consensus </td><td>Yes </td><td></td></tr>
<tr>
<td>UMP Registration ID/Session Management </td><td>Yes </td><td></td></tr>
<tr>
<td>UMP Receiver-Paced Persistence (RPP) </td><td>Yes </td><td></td></tr>
<tr>
<td>UMP Store Failover </td><td>Yes </td><td></td></tr>
<tr>
<td>UMQ Brokered Queuing </td><td>No </td><td></td></tr>
<tr>
<td>UMQ Ultra Load Balancing (ULB) </td><td>No </td><td></td></tr>
<tr>
<td>Ultra Messaging Desktop Services (UMDS) </td><td>Not for client connectivity to the UMDS server </td><td></td></tr>
<tr>
<td>Ultra Messaging Manager (UMM) </td><td>Yes </td><td>Not for UM Router management </td></tr>
<tr>
<td>UM SNMP Agent </td><td>No </td><td></td></tr>
<tr>
<td>UMCache </td><td>No </td><td></td></tr>
<tr>
<td>Wildcard Receivers </td><td>Yes </td><td></td></tr>
<tr>
<td>Zero Object Delivery (ZOD) </td><td>Yes </td><td></td></tr>
</table>
<p><br />
 </p>
<h1><a class="anchor" id="umrouterimplementation"></a>
UM Router Implementation&nbsp;&nbsp;<small><a href="#umrouterimplementation">&lt;-</a></small></h1>
<p><br />
 </p>
<h2><a class="anchor" id="umrouterconfigurationoverview"></a>
UM Router Configuration Overview&nbsp;&nbsp;<small><a href="#umrouterconfigurationoverview">&lt;-</a></small></h2>
<p>When the UM Router daemon launches, it uses configuration option settings to determine its behavior and expectations. You specify option values in an XML configuration file, and reference the file from a command line argument.</p>
<p>Typically, you have a separate XML configuration file for each UM Router, which contains structured configuration elements that describe aspects of the UM Router. Within this XML configuration file, each endpoint portal definition points to a UM configuration file, which allow the portal to properly connect to its TRD.</p>
<p><br />
 </p>
<h2><a class="anchor" id="creatingapplicationsforumroutercompatibility"></a>
Creating Applications for UM Router Compatibility&nbsp;&nbsp;<small><a href="#creatingapplicationsforumroutercompatibility">&lt;-</a></small></h2>
<p>When developing messaging applications that use Ultra Messaging and, in particular, the UM Router, please observe the following guidelines.</p>
<p><br />
 </p>
<h3><a class="anchor" id="namingandidentification"></a>
Naming and Identification&nbsp;&nbsp;<small><a href="#namingandidentification">&lt;-</a></small></h3>
<p>An important part to successfully implementing UM Routers is prudent and error-free naming of TRDs, UM Routers, portals, etc., as well as correct identification of IP addresses and ports. It is good practice to first design the UM Router network by defining all connections and uniquely naming all UM Routers, portals, and TRDs. This works well as a diagram similar to some examples presented in this document. Include the following names and parameters in your design diagram:</p>
<ul>
<li>
TRD names and IDs </li>
<li>
UM Router names </li>
<li>
Portal names </li>
<li>
Portal costs </li>
</ul>
<p>For example, a well-prepared UM Router design could look like the following figure.</p>
<div class="image">
<img src="design_diagram.png" alt="design_diagram.png"/>
</div>
 <p><br />
 </p>
<h3><a class="anchor" id="portalcosts"></a>
Portal Costs&nbsp;&nbsp;<small><a href="#portalcosts">&lt;-</a></small></h3>
<p>A network of UM Routers uses forwarding cost as the criterion for determining the best (lowest cost) path over which to resolve a topic and route data. Forwarding cost is simply the sum of all portal costs along a multi-UM Router path. Thus, total cost for the single path in the above example is 34. (Note that this is a non-real-world example, since costs are pointless without alternate routes to compare to.) You assign portal costs via the <code>&lt;cost&gt;</code> configuration option.</p>
<p>After the UM Router network calculates its paths, if a new lower-cost source becomes available, receivers switch to that path.</p>
<p><br />
 </p>
<h3><a class="anchor" id="accesscontrollistsacl"></a>
Access Control Lists (ACL)&nbsp;&nbsp;<small><a href="#accesscontrollistsacl">&lt;-</a></small></h3>
<p>You can apply Access Control Lists (ACL) to a UM Router's portals to filter traffic by certain topics, transports, topic patterns, multicast groups, etc. You configure ACLs in a UM Router's XML configuration file, as children of an <code>&lt;endpoint&gt;</code> or <code>&lt;peer&gt;</code> portal. As traffic arrives at the portal, the portal either forwards it or rejects it per ACL criteria.</p>
<p>Inbound ACLs determine what information to forward to other portals in the UM Router, while Outbound ACLs determine (by topic) what information from other portals that this portal can send out the UM Router. Each portal (endpoint or peer) can have up to one inbound ACL and one outbound ACL.</p>
<div class="image">
<img src="acl.png" alt="acl.png"/>
</div>
 <p>An ACL can contain one or more Access Control Entries (ACEs). ACEs are the filters that let you match (and accept or reject based on), criteria elements. For example, to accept only messages for topic ABC:</p>
<pre class="fragment">        &lt;acl&gt;
          &lt;inbound&gt;
            &lt;ace match="accept"&gt;
              &lt;topic&gt;ABC&lt;/topic&gt;
            &lt;/ace&gt;
          &lt;/inbound&gt;
        &lt;/acl&gt;
</pre><p>Possible ACE condition elements are:</p>
<ul>
<li>
<code>&lt;multicast-group/&gt;</code> * </li>
<li>
<code>&lt;pcre-pattern&gt;</code> (PCRE wildcard patterns) </li>
<li>
<code>&lt;regex-pattern&gt;</code> (Regex wildcard patterns) </li>
<li>
<code>&lt;source-ip/&gt;</code> * </li>
<li>
<code>&lt;tcp-source-port/&gt;</code> * </li>
<li>
<code>&lt;topic&gt;</code> </li>
<li>
<code>&lt;transport/&gt;</code> * </li>
<li>
<code>&lt;udp-destination-port/&gt;</code> * </li>
<li>
<code>&lt;udp-source-port/&gt;</code> * </li>
<li>
<code>&lt;xport-id/&gt;</code> * (for LBT-IPC traffic) </li>
</ul>
<p>These items apply to only inbound ACLs, and are ignored if used with an outbound ACL.</p>
<p>The above elements are all children of the <code>&lt;ace&gt;</code> element. When an ACL has multiple ACE entries, the UM Router goes down the list until it finds a match. It then accepts (forwards) or rejects, and is done with that ACL. An implicit "reject all" is at the end of every ACL, so the UM Router rejects any topic not matched. If you place multiple conditions within an ACE, the UM Router performs an "and" operation with them.</p>
<p>Note that the portal ignores a condition element if a) it is inbound-only and used in an outbound ACL, or b) it simply does not apply (such as a <code>&lt;udp-source-port/&gt;</code> if the transport is TCP).</p>
<p>Also note that ACLs can affect topic resolution traffic as well as user messages. They can, for example, block a topic (which prevents the creation of proxy receivers) and, thus, protect remote TRDs from unwanted queries and advertisements. This effect does not apply to wildcard receivers, however, because ACLs match only on discrete topics. Thus, while ACLs can operate on specific topic traffic derived from wildcard topic resolution, they cannot prevent pattern interest from propagating throughout the network.</p>
<p>Consider the following example, where we configure a portal to forward on specific topics. This example also illustrates the parent/child hierarchy for ACLs, ACEs, and ACE conditions.</p>
<pre class="fragment">    &lt;endpoint&gt;
      &lt;name&gt;LAN1&lt;/name&gt;
      &lt;lbm-config&gt;lan1.cfg&lt;/lbm-config&gt;
      &lt;domain-id&gt;1&lt;/domain-id&gt;
        &lt;acl&gt;
          &lt;inbound&gt;
            &lt;ace match="accept"&gt;
              &lt;topic&gt;ABC&lt;/topic&gt;
            &lt;/ace&gt;
            &lt;ace match="accept"&gt;
              &lt;topic&gt;DEF&lt;/topic&gt;
              &lt;transport value=lbt-rm comparison=eq/&gt;
            &lt;/ace&gt;
            &lt;ace match="accept"&gt;
              &lt;topic&gt;GHI&lt;/topic&gt;
            &lt;/ace&gt;
          &lt;/inbound&gt;
        &lt;/acl&gt;
    &lt;/endpoint&gt;
</pre><p>The above example shows each topic match in a separate ACE. When topic "GHI" arrives, the portal finds a match in the third ACE and forwards the topic. (Placing all three <code>&lt;topic&gt;</code>s in a single ACE would never match anything.) Also note that "DEF" is forwarded only if it uses an LBT-RM transport.</p>
<p>Since the behavior for multiple ACEs is "first match, then done", list ACEs in a specific-to-general order. For the example below, to forward topic "ABC123" but reject similar topics such as "ABCD123" or "ABCE123", list the ACE for "ABC123" first (as done below). If the ACE to reject "ABC.*123" was listed first, it would also (undesirably) match and reject "ABC123".</p>
<pre class="fragment">    &lt;endpoint&gt;
      &lt;name&gt;LAN1&lt;/name&gt;
      &lt;lbm-config&gt;lan1.cfg&lt;/lbm-config&gt;
      &lt;domain-id&gt;1&lt;/domain-id&gt;
        &lt;acl&gt;
          &lt;inbound&gt;
            &lt;ace match="accept"&gt;
              &lt;topic&gt;ABC123&lt;/topic&gt;
            &lt;/ace&gt;
            &lt;ace match="reject"&gt;
              &lt;pcre-pattern&gt;ABC.*123&lt;/pcre-pattern&gt;
            &lt;/ace&gt;
          &lt;/inbound&gt;
        &lt;/acl&gt;
    &lt;/endpoint&gt;
</pre><p>You can also filter on certain transport types to accept multicast traffic but reject tcp traffic, as shown below.</p>
<pre class="fragment">    &lt;endpoint&gt;
      &lt;name&gt;LAN1&lt;/name&gt;
      &lt;lbm-config&gt;lan1.cfg&lt;/lbm-config&gt;
      &lt;domain-id&gt;1&lt;/domain-id&gt;
        &lt;acl&gt;
          &lt;inbound&gt;
            &lt;ace match="accept"&gt;
              &lt;transport comparison="equal" value="lbtrm"/&gt;
            &lt;/ace&gt;
            &lt;ace match="reject"&gt;
              &lt;transport comparison="equal" value="tcp"/&gt;
            &lt;/ace&gt;
          &lt;/inbound&gt;
        &lt;/acl&gt;
    &lt;/endpoint&gt;
</pre><p><br />
 </p>
<h3><a class="anchor" id="timersandintervals"></a>
Timers and Intervals&nbsp;&nbsp;<small><a href="#timersandintervals">&lt;-</a></small></h3>
<p>The UM Router offers a wide choice of timer and interval options to fine tune its behavior and performance. There are interactions and dependencies between some of these, and if misconfigured, they may cause race or failure conditions.</p>
<p>This manual's description of configuration options (see <a class="el" href="index.html#xmlconfigurationreference">XML Configuration Reference</a>), includes identification of such relationships. Please heed them.</p>
<p><br />
 </p>
<h3><a class="anchor" id="multicastimmediatemessagingconsiderations"></a>
Multicast Immediate Messaging Considerations&nbsp;&nbsp;<small><a href="#multicastimmediatemessagingconsiderations">&lt;-</a></small></h3>
<p>Multicast Immediate Messages (MIMs) may pass through the UM Router. You cannot filter MIMs with Access Control Lists (ACL)-MIMs are forwarded to all TRDs. Informatica does not recommend using MIM for messaging traffic across the UM Router. MIM is intended for short-lived topics and applications that cannot tolerate a delay between source creation and the sending of the first message. See also <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.12_RC3/doc/Gateway/design.tag:../../Design/" href="../../Design/umfeatures.html#multicastimmediatemessaging">Multicast Immediate Messaging</a>.</p>
<p><br />
 </p>
<h3><a class="anchor" id="persistenceovertheumrouter"></a>
Persistence Over the UM Router&nbsp;&nbsp;<small><a href="#persistenceovertheumrouter">&lt;-</a></small></h3>
<p>The UM Router supports UMP persistence by routing all necessary control and retransmission channels along with transport and topic resolution traffic. A typical implementation places the UMP persistent store in the same TRD as its registered source, as shown in the following figure.</p>
<div class="image">
<img src="persist_1.png" alt="persist_1.png"/>
</div>
 <p>The UM Router also supports UMP implementations with the store located in a receiver's TRD, as shown in the following figure.</p>
<div class="image">
<img src="persist_2.png" alt="persist_2.png"/>
</div>
 <p>Note: For more reliable operation when using UMP with UM Routers, Informatica recommends enabling OTR.</p>
<p><br />
 </p>
<h3><a class="anchor" id="latejoinandofftransportrecovery"></a>
Late Join and Off-Transport Recovery&nbsp;&nbsp;<small><a href="#latejoinandofftransportrecovery">&lt;-</a></small></h3>
<p>The UM Router supports sources and receivers configured for Late Join and/or Off-Transport Recovery (OTR). Retransmission requests and subsequent retransmissions are conducted across the entire path through the UM Router network. A UM Router's proxy sources do not have Late-Join/OTR retention buffers and hence, are not able to provide recovered messages.</p>
<p><br />
 </p>
<h3><a class="anchor" id="topicresolutionreliability"></a>
Topic Resolution Reliability&nbsp;&nbsp;<small><a href="#topicresolutionreliability">&lt;-</a></small></h3>
<p>Topic resolution can sometimes remain in a quiescent phase due to link interruption, preventing needed re-subscription topic resolution activity. Two ways you can address this are:</p>
<ul>
<li>
For isolated incidents, call <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.12_RC3/doc/Gateway/api.tag:../../API/" href="../../API/lbm_8h.html#ae6dd7c56acf916ef66658cc1ebc7a525">lbm_context_topic_resolution_request()</a> (see example lbmtrreq.c). This restarts the sustaining phase. </li>
<li>
For more chronic problems, such as a UM Router link (especially an endpoint link) over a WAN of questionable reliability, consider configuring Topic resolution to stay in the sustaining phase (options <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.12_RC3/doc/Gateway/config.tag:../../Config/" href="../../Config/grpudpbasedresolveroperation.html#resolveradvertisementminimumsustaindurationsource">resolver_advertisement_minimum_sustain_duration (source)</a> and <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.12_RC3/doc/Gateway/config.tag:../../Config/" href="../../Config/grpudpbasedresolveroperation.html#resolverqueryminimumsustaindurationreceiver">resolver_query_minimum_sustain_duration (receiver)</a>). </li>
</ul>
<p><br />
 </p>
<h3><a class="anchor" id="bosandeosbehaviorovertheumrouter"></a>
BOS and EOS Behavior Over the UM Router&nbsp;&nbsp;<small><a href="#bosandeosbehaviorovertheumrouter">&lt;-</a></small></h3>
<p>Through a network of UM Routers, a topic traverses a separate session for each link along its path. Thus, the UM Router reports BOS/EOSs based on the activity between the proxy source transport and its associated receiver. There is no end-to-end, application-to-application reporting of the data path state. Also, in the case of multiple topics being assigned to multiple sessions, topics may find themselves with different session mates from hop to hop. Of course, this all influences when, and for which transport session, a topic's BOSs and EOSs are issued.</p>
<p><br />
 </p>
<h3><a class="anchor" id="umrouterreliableloss"></a>
UM Router Reliable Loss&nbsp;&nbsp;<small><a href="#umrouterreliableloss">&lt;-</a></small></h3>
<p>The UM router can create a situation where a "reliable" transport (TCP or LBT-IPC) can experience out-of-order message delivery.</p>
<p>The UM router can perform a "protocol conversion" function. I.e. an originating source can use a UDP-based protocol (LBT-RM or LBT-RU), but the proxy source for a remote receiver can use a "reliable" protocol (TCP or LBT-IPC). With a UDP-based protocol, messages can arrive to the UM Router network out of order, usually due to packet loss and recovery. However, when those out-of-order messages are forwarded across a "reliable" protocol (TCP or LBT-IPC), the receiver does not expect the sequence number gap, and immediately declares the out-of-order messages as unrecoverable loss. This, in spite of the fact that the missing message arrives shortly thereafter.</p>
<p>Starting in UM version 6.12, there are two new configuration options: <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.12_RC3/doc/Gateway/config.tag:../../Config/" href="../../Config/grptransporttcpoperation.html#transporttcpdrolossrecoverytimeoutreceiver">transport_tcp_dro_loss_recovery_timeout (receiver)</a> and <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.12_RC3/doc/Gateway/config.tag:../../Config/" href="../../Config/grptransportlbtipcoperation.html#transportlbtipcdrolossrecoverytimeoutreceiver">transport_lbtipc_dro_loss_recovery_timeout (receiver)</a>, which modify the receiver's behavior. Instead of declaring a gap immediately unrecoverable, a delay is introduced which is similar to what a UDP-based receiver uses to wait for lost and retransmitted datagrams. If the missing message arrives within the delay time, the messages are delivered to application without loss.</p>
<p>Be aware that this functionality is only used with "reliable" protocols published by a UM Router's proxy source. If this delay feature is enabled, it will <em>not</em> apply to a "reliable" protocol that is received directly from the originating source.</p>
<p>Note however that you can get genuine gaps in the "reliable" data stream <em>without</em> recovery. For example, an overloaded UM Router can drop messages. Or a UM Router's proxy receiver can experience unrecoverable loss. In that case, the delay will have to expire before the missing messages are declared unrecoverable and subsequent data is delivered.</p>
<dl class="section attention"><dt>Attention</dt><dd>The delay times default to 0, which retains the pre-6.12 behavior of immediately declaring sequence number gaps unrecoverable. If you want this new behavior, you must configure the appropriate option.</dd></dl>
<p><br />
 </p>
<h2><a class="anchor" id="topologyconfigurationexamples"></a>
Topology Configuration Examples&nbsp;&nbsp;<small><a href="#topologyconfigurationexamples">&lt;-</a></small></h2>
<p>Following are example configurations for a variety of UM Router topologies. These are the topology examples presented <a class="el" href="index.html#routingtopologies">Routing Topologies</a>.</p>
<p>In a real-world situation, you would have UM Router XML configuration files with their portal interfaces referencing complete UM configuration files. However, for these examples, the referred domain configuration files are simplified to contain only information relevant to the applicable UM Router. As part of this simplification, domain configuration files show interfaces for only one or two transport types.</p>
<p>Also, IP addresses are provided in some cases and omitted in other cases. This is because initiator peer portals need to know the IP addresses (and port numbers) of their corresponding acceptor portals to establish connections, whereas endpoint portals communicate via topic resolution and thus, do not need to know IP addresses.</p>
<dl class="section note"><dt>Note</dt><dd>Before designing any UM Router implementations based on configurations or examples other than the types presented in this document, please contact your technical support representative.</dd></dl>
<p><br />
 </p>
<h3><a class="anchor" id="directlinkconfiguration"></a>
Direct Link Configuration&nbsp;&nbsp;<small><a href="#directlinkconfiguration">&lt;-</a></small></h3>
<p>This example uses a UM Router to connect two topic resolution domain LANs.</p>
<div class="image">
<img src="cfg_direct_link.png" alt="cfg_direct_link.png"/>
</div>
 <p><b>TRD1</b> <b>Configuration</b> </p>
<p>This UM configuration file, trd1.cfg, describes TRD1 and is referenced in the UM Router configuration file.</p>
<pre class="fragment">## Global Configuration Options ##
context request_tcp_interface 10.29.3.0/24
context resolver_multicast_port 13965
context resolver_multicast_interface 10.29.3.0/24
context resolver_multicast_address 225.1.37.85
</pre><p><b>G1</b> <b>Configuration</b> </p>
<p>This UM Router configuration file defines two endpoint portals. In the daemon section, we have turned on monitoring for the all endpoint portals in the UM Router. The configuration specifies that all statistics be collected every 5 seconds and uses the lbm transport module to send statistics to your monitoring application, which runs in TRD1. See also UM Concepts, Monitoring UMS. The Web Monitor has also been turned on (port 15304) to monitor the performance of the UM Router.</p>
<pre class="fragment">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;
&lt;!-- G1 xml file- 2 endpoint portals --&gt;
&lt;tnw-gateway version="1.0"&gt;
  &lt;daemon&gt;
    &lt;log type="console"/&gt;
    &lt;lbm-license-file&gt;lic0014.txt&lt;/lbm-license-file&gt;
    &lt;monitor interval="5"&gt;
      &lt;transport-module module="lbm" options="config=trd1.cfg"/&gt;
    &lt;/monitor&gt;
    &lt;web-monitor&gt;*:15304&lt;/web-monitor&gt;
  &lt;/daemon&gt;
  &lt;portals&gt;
    &lt;endpoint&gt;
      &lt;name&gt;G1-TRD1&lt;/name&gt;
      &lt;domain-id&gt;1&lt;/domain-id&gt;
      &lt;lbm-config&gt;trd1.cfg&lt;/lbm-config&gt;
    &lt;/endpoint&gt;
    &lt;endpoint&gt;
      &lt;name&gt;G1-TRD2&lt;/name&gt;
      &lt;domain-id&gt;2&lt;/domain-id&gt;
      &lt;lbm-config&gt;trd2.cfg&lt;/lbm-config&gt;
    &lt;/endpoint&gt;
  &lt;/portals&gt;
&lt;/tnw-gateway&gt;
</pre><p><b>TRD2</b> <b>Configuration</b> </p>
<p>The configuration file trd2.cfg could look something like this.</p>
<pre class="fragment"># Global Configuration Options ##
context request_tcp_interface 10.29.3.0/24
context resolver_multicast_port 13965
context resolver_multicast_interface 10.29.3.0/24
context resolver_multicast_address 225.2.37.85
</pre><p><br />
 </p>
<h3><a class="anchor" id="peerlinkconfiguration"></a>
Peer Link Configuration&nbsp;&nbsp;<small><a href="#peerlinkconfiguration">&lt;-</a></small></h3>
<p>In cases where the UM Router connection between two TRDs must tunnel through a WAN or TCP/IP network, you can implement a UM Router at each end, as shown in the example below.</p>
<div class="image">
<img src="cfg_single_link.png" alt="cfg_single_link.png"/>
</div>
 <p><b>TRD1</b> <b>Configuration</b> </p>
<pre class="fragment">## Global Configuration Options ##
context request_tcp_interface 10.29.3.0/24
context resolver_multicast_port 13965
context resolver_multicast_interface 10.29.3.0/24
context resolver_multicast_address 225.1.37.85
</pre><p><b>G1</b> <b>Configuration</b> </p>
<p>Following is an example of two companion peer portals (on different UM Routers) configured via UM Router XML configuration file for a single TCP setup. Note that one must be an initiator and the other, an acceptor.</p>
<pre class="fragment">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;
&lt;tnw-gateway version="1.0"&gt;
    &lt;daemon&gt;
       &lt;log type="console"/&gt;
    &lt;/daemon&gt;
    &lt;portals&gt;
       &lt;endpoint&gt;
          &lt;name&gt;G1-TRD1&lt;/name&gt;
          &lt;domain-id&gt;1&lt;/domain-id&gt;
          &lt;lbm-config&gt;TRD1.cfg&lt;/lbm-config&gt;
       &lt;/endpoint&gt;
       &lt;peer&gt;
          &lt;name&gt;G1-G2&lt;/name&gt;
          &lt;single-tcp&gt;
             &lt;interface&gt;10.30.3.100&lt;/interface&gt;
             &lt;initiator&gt;
                &lt;address&gt;10.30.3.102&lt;/address&gt;
                &lt;port&gt;26123&lt;/port&gt;
             &lt;/initiator&gt;
          &lt;/single-tcp&gt;
       &lt;/peer&gt;
    &lt;/portals&gt;
&lt;/tnw-gateway&gt;
</pre><p><b>G2</b> <b>Configuration</b> </p>
<pre class="fragment">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;
&lt;tnw-gateway version="1.0"&gt;
    &lt;daemon&gt;
        &lt;log type="console"/&gt;
    &lt;/daemon&gt;
    &lt;portals&gt;
      &lt;peer&gt;
         &lt;name&gt;G2-G1&lt;/name&gt;
         &lt;single-tcp&gt;
           &lt;interface&gt;10.30.3.102&lt;/interface&gt;
           &lt;acceptor&gt;
             &lt;listen-port&gt;26123&lt;/listen-port&gt;
           &lt;/acceptor&gt;
         &lt;/single-tcp&gt;
      &lt;/peer&gt;
      &lt;endpoint&gt;
         &lt;name&gt;G2-TRD2&lt;/name&gt;
         &lt;domain-id&gt;2&lt;/domain-id&gt;
         &lt;lbm-config&gt;TRD2.cfg&lt;/lbm-config&gt;
      &lt;/endpoint&gt;
    &lt;/portals&gt;
&lt;/tnw-gateway&gt;
</pre><p><b>TRD2</b> <b>Configuration</b> </p>
<pre class="fragment">## LAN2 Configuration Options ##
context request_tcp_interface 10.33.3.0/24
context resolver_multicast_port 13965
</pre><p><br />
 </p>
<h3><a class="anchor" id="transittrdlinkconfiguration"></a>
Transit TRD Link Configuration&nbsp;&nbsp;<small><a href="#transittrdlinkconfiguration">&lt;-</a></small></h3>
<p>This example, like the previous one, configures two localized UM Routers tunneling a connection between two TRDs, however, the UM Routers in this example are tunneling through an intermediate TRD. This has the added effect of connecting three TRDs.</p>
<div class="image">
<img src="cfg_transit_trd.png" alt="cfg_transit_trd.png"/>
</div>
 <p><b>TRD1</b> <b>Configuration</b> </p>
<pre class="fragment">## TRD1 Configuration Options ##
context request_tcp_interface 10.29.3.0/24
context resolver_multicast_port 13965
context resolver_multicast_interface 10.29.3.0/24
context resolver_multicast_address 225.2.37.85
</pre><p><b>G1</b> <b>Configuration</b> </p>
<p>Following is an example of two companion peer portals (on different UM Routers) configured via UM Router XML configuration file for a single TCP setup. Note that one must be an initiator and the other, an acceptor.</p>
<pre class="fragment">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;
&lt;tnw-gateway version="1.0"&gt;
    &lt;daemon&gt;
        &lt;log type="console"/&gt;
    &lt;/daemon&gt;
    &lt;portals&gt;
      &lt;endpoint&gt;
         &lt;name&gt;G1-TRD1&lt;/name&gt;
         &lt;domain-id&gt;1&lt;/domain-id&gt;
         &lt;lbm-config&gt;TRD1.cfg&lt;/lbm-config&gt;
      &lt;/endpoint&gt;
      &lt;endpoint&gt;
         &lt;name&gt;G1-TRD2&lt;/name&gt;
         &lt;domain-id&gt;2&lt;/domain-id&gt;
         &lt;lbm-config&gt;TRD2.cfg&lt;/lbm-config&gt;
      &lt;/endpoint&gt;
    &lt;/portals&gt;
&lt;/tnw-gateway&gt;
</pre><p><b>TRD2</b> <b>Configuration</b> </p>
<pre class="fragment">## TRD2 Configuration Options ##
context request_tcp_interface 10.29.3.0/24
context resolver_multicast_port 13965
context resolver_multicast_interface 10.29.3.0/24
context resolver_multicast_address 225.2.37.85
</pre><p><b>G2</b> <b>Configuration</b> </p>
<pre class="fragment">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;
&lt;tnw-gateway version="1.0"&gt;
    &lt;daemon&gt;
        &lt;log type="console"/&gt;
    &lt;/daemon&gt;
    &lt;portals&gt;
      &lt;endpoint&gt;
         &lt;name&gt;G2-TRD2&lt;/name&gt;
         &lt;domain-id&gt;2&lt;/domain-id&gt;
         &lt;lbm-config&gt;TRD2.cfg&lt;/lbm-config&gt;
      &lt;/endpoint&gt;
      &lt;endpoint&gt;
         &lt;name&gt;G2-TRD3&lt;/name&gt;
         &lt;domain-id&gt;3&lt;/domain-id&gt;
         &lt;lbm-config&gt;TRD3.cfg&lt;/lbm-config&gt;
      &lt;/endpoint&gt;
    &lt;/portals&gt;
&lt;/tnw-gateway&gt;
</pre><p><b>TRD3</b> <b>Configuration</b> </p>
<pre class="fragment">## TRD3 Configuration Options ##
context request_tcp_interface 10.29.3.0/24
context resolver_multicast_port 13965
context resolver_multicast_interface 10.29.3.0/24
context resolver_multicast_address 225.3.37.85
</pre><p><br />
 </p>
<h3><a class="anchor" id="parallellinksconfiguration"></a>
Parallel Links Configuration&nbsp;&nbsp;<small><a href="#parallellinksconfiguration">&lt;-</a></small></h3>
<p>This example is similar in purpose to the single link, peer-to-peer example, except that a second pair of UM Routers is added as a backup route. You can set one of these as a secondary route by assigning a higher cost to portals along the path. In this case we set G3 and G4's portal costs to 5, forcing the lower route to be selected only if the upper (G1, G2) route fails.</p>
<p>Also note that we have configured the peer portals for the leftmost or odd-numbered UM Routers as initiators, and the rightmost or even-numbered UM Router peers as acceptors.</p>
<div class="image">
<img src="cfg_parallel.png" alt="cfg_parallel.png"/>
</div>
 <p><b>TRD1</b> <b>Configuration</b> </p>
<pre class="fragment">## TRD1 Configuration Options ##
context request_tcp_interface 10.29.3.0/24
context resolver_multicast_port 13965
context resolver_multicast_interface 10.29.3.0/24
context resolver_multicast_address 225.1.37.85
</pre><p><b>G1</b> <b>Configuration</b> </p>
<pre class="fragment">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;
&lt;tnw-gateway version="1.0"&gt;
    &lt;daemon&gt;
        &lt;log type="console"/&gt;
    &lt;/daemon&gt;
    &lt;portals&gt;
      &lt;endpoint&gt;
         &lt;name&gt;G1-TRD1&lt;/name&gt;
         &lt;domain-id&gt;1&lt;/domain-id&gt;
         &lt;cost&gt;2&lt;/cost&gt;
         &lt;lbm-config&gt;TRD1.cfg&lt;/lbm-config&gt;
      &lt;/endpoint&gt;
      &lt;peer&gt;
         &lt;name&gt;G1-G2&lt;/name&gt;
         &lt;cost&gt;2&lt;/cost&gt;
         &lt;single-tcp&gt;
            &lt;interface&gt;10.30.3.101&lt;/interface&gt;
            &lt;initiator&gt;
               &lt;address&gt;10.30.3.102&lt;/address&gt;
               &lt;port&gt;23745&lt;/port&gt;
            &lt;/initiator&gt;
         &lt;/single-tcp&gt;
      &lt;/peer&gt;
    &lt;/portals&gt;
&lt;/tnw-gateway&gt;
</pre><p><b>G2</b> <b>Configuration</b> </p>
<pre class="fragment">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;
&lt;tnw-gateway version="1.0"&gt;
    &lt;daemon&gt;
        &lt;log type="console"/&gt;
    &lt;/daemon&gt;
    &lt;portals&gt;
      &lt;peer&gt;
         &lt;name&gt;G2-G1&lt;/name&gt;
         &lt;cost&gt;2&lt;/cost&gt;
         &lt;single-tcp&gt;
            &lt;interface&gt;10.30.3.102&lt;/interface&gt;
            &lt;acceptor&gt;
               &lt;listen-port&gt;23745&lt;/listen-port&gt;
            &lt;/acceptor&gt;
         &lt;/single-tcp&gt;
      &lt;/peer&gt;
      &lt;endpoint&gt;
         &lt;name&gt;G2-TRD2&lt;/name&gt;
         &lt;domain-id&gt;2&lt;/domain-id&gt;
         &lt;cost&gt;2&lt;/cost&gt;
         &lt;lbm-config&gt;TRD2.cfg&lt;/lbm-config&gt;
      &lt;/endpoint&gt;
    &lt;/portals&gt;
&lt;/tnw-gateway&gt;
</pre><p><b>G3</b> <b>Configuration</b> </p>
<pre class="fragment">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;
&lt;tnw-gateway version="1.0"&gt;
    &lt;daemon&gt;
        &lt;log type="console"/&gt;
    &lt;/daemon&gt;
    &lt;portals&gt;
      &lt;endpoint&gt;
         &lt;name&gt;G3-TRD1&lt;/name&gt;
         &lt;domain-id&gt;1&lt;/domain-id&gt;
         &lt;cost&gt;5&lt;/cost&gt;
         &lt;lbm-config&gt;TRD1.cfg&lt;/lbm-config&gt;
      &lt;/endpoint&gt;
      &lt;peer&gt;
         &lt;name&gt;G3-G4&lt;/name&gt;
         &lt;cost&gt;5&lt;/cost&gt;
         &lt;single-tcp&gt;
            &lt;interface&gt;10.30.3.103&lt;/interface&gt;
            &lt;initiator&gt;
               &lt;address&gt;10.30.3.104&lt;/address&gt;
               &lt;port&gt;23746&lt;/port&gt;
            &lt;/initiator&gt;
         &lt;/single-tcp&gt;
      &lt;/peer&gt;
    &lt;/portals&gt;
&lt;/tnw-gateway&gt;
</pre><p><b>G4</b> <b>Configuration</b> </p>
<pre class="fragment">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;
&lt;tnw-gateway version="1.0"&gt;
    &lt;daemon&gt;
        &lt;log type="console"/&gt;
    &lt;/daemon&gt;
    &lt;portals&gt;
      &lt;peer&gt;
         &lt;name&gt;G4-G3&lt;/name&gt;
         &lt;cost&gt;5&lt;/cost&gt;
         &lt;single-tcp&gt;
            &lt;interface&gt;10.30.3.104&lt;/interface&gt;
            &lt;acceptor&gt;
               &lt;listen-port&gt;23746&lt;/listen-port&gt;
            &lt;/acceptor&gt;
         &lt;/single-tcp&gt;
      &lt;/peer&gt;
      &lt;endpoint&gt;
         &lt;name&gt;G4-TRD2&lt;/name&gt;
         &lt;domain-id&gt;2&lt;/domain-id&gt;
         &lt;cost&gt;5&lt;/cost&gt;
         &lt;lbm-config&gt;TRD2.cfg&lt;/lbm-config&gt;
      &lt;/endpoint&gt;
    &lt;/portals&gt;
&lt;/tnw-gateway&gt;
</pre><p><b>TRD2</b> <b>Configuration</b> </p>
<pre class="fragment">## TRD2 Configuration Options ##
context request_tcp_interface 10.29.3.0/24
context resolver_multicast_port 13965
context resolver_multicast_interface 10.29.3.0/24
context resolver_multicast_address 225.2.37.85
</pre><p><br />
 </p>
<h3><a class="anchor" id="loopandspurconfiguration"></a>
Loop and Spur Configuration&nbsp;&nbsp;<small><a href="#loopandspurconfiguration">&lt;-</a></small></h3>
<div class="image">
<img src="cfg_loop_spur.png" alt="cfg_loop_spur.png"/>
</div>
 <p><b>TRD1</b> <b>Configuration</b> </p>
<pre class="fragment">## Global Configuration Options ##
context request_tcp_interface 10.29.3.0/24
context resolver_multicast_port 13965
context resolver_multicast_interface 10.29.3.0/24
context resolver_multicast_address 225.1.37.85
</pre><p><b>G1</b> <b>Configuration</b> </p>
<pre class="fragment">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;
&lt;tnw-gateway version="1.0"&gt;
    &lt;daemon&gt;
        &lt;log type="console"/&gt;
    &lt;/daemon&gt;
    &lt;portals&gt;
      &lt;peer&gt;
         &lt;name&gt;G1_to_G3&lt;/name&gt;
         &lt;single-tcp&gt;
            &lt;initiator&gt;
               &lt;address&gt;55.55.10.27&lt;/address&gt;
               &lt;port&gt;23801&lt;/port&gt;
            &lt;/initiator&gt;
         &lt;/single-tcp&gt;
      &lt;/peer&gt;
      &lt;peer&gt;
         &lt;name&gt;G1_to_G2&lt;/name&gt;
         &lt;single-tcp&gt;
            &lt;initiator&gt;
               &lt;address&gt;55.55.10.26&lt;/address&gt;
               &lt;port&gt;23745&lt;/port&gt;
            &lt;/initiator&gt;
         &lt;/single-tcp&gt;
      &lt;/peer&gt;
      &lt;endpoint&gt;
         &lt;name&gt;G1_to_TRD1&lt;/name&gt;
         &lt;domain-id&gt;1&lt;/domain-id&gt;
         &lt;lbm-config&gt;TRD1.cfg&lt;/lbm-config&gt;
      &lt;/endpoint&gt;
    &lt;/portals&gt;
&lt;/tnw-gateway&gt;
</pre><p><b>G2</b> <b>Configuration</b> </p>
<pre class="fragment">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;
&lt;tnw-gateway version="1.0"&gt;
    &lt;daemon&gt;
        &lt;log type="console"/&gt;
    &lt;/daemon&gt;
    &lt;portals&gt;
      &lt;peer&gt;
         &lt;name&gt;G2_to_G4&lt;/name&gt;
         &lt;single-tcp&gt;
            &lt;initiator&gt;
               &lt;address&gt;55.55.10.28&lt;/address&gt;
               &lt;port&gt;23632&lt;/port&gt;
            &lt;/initiator&gt;
         &lt;/single-tcp&gt;
      &lt;/peer&gt;
      &lt;peer&gt;
         &lt;name&gt;G2_to_G1&lt;/name&gt;
         &lt;single-tcp&gt;
            &lt;acceptor&gt;
               &lt;listen-port&gt;23745&lt;/listen-port&gt;
            &lt;/acceptor&gt;
         &lt;/single-tcp&gt;
      &lt;/peer&gt;
      &lt;endpoint&gt;
         &lt;name&gt;G2_to_TRD2&lt;/name&gt;
         &lt;domain-id&gt;2&lt;/domain-id&gt;
         &lt;lbm-config&gt;TRD2.cfg&lt;/lbm-config&gt;
      &lt;/endpoint&gt;
    &lt;/portals&gt;
&lt;/tnw-gateway&gt;
</pre><p><b>TRD2</b> <b>Configuration</b> </p>
<pre class="fragment">## Global Configuration Options ##
context request_tcp_interface 10.29.3.0/24
context resolver_multicast_port 13965
context resolver_multicast_interface 10.29.3.0/24
context resolver_multicast_address 225.2.37.85
</pre><p><b>TRD3</b> <b>Configuration</b> </p>
<pre class="fragment">## Global Configuration Options ##
context request_tcp_interface 10.29.3.0/24
context resolver_multicast_port 13965
context resolver_multicast_interface 10.29.3.0/24
context resolver_multicast_address 225.3.37.85
</pre><p><b>G3</b> <b>Configuration</b> </p>
<pre class="fragment">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;
&lt;tnw-gateway version="1.0"&gt;
    &lt;daemon&gt;
        &lt;log type="console"/&gt;
    &lt;/daemon&gt;
    &lt;portals&gt;
      &lt;peer&gt;
         &lt;name&gt;G3_to_G4&lt;/name&gt;
         &lt;single-tcp&gt;
            &lt;initiator&gt;
               &lt;address&gt;55.55.10.28&lt;/address&gt;
               &lt;port&gt;23754&lt;/port&gt;
            &lt;/initiator&gt;
         &lt;/single-tcp&gt;
      &lt;/peer&gt;
      &lt;peer&gt;
         &lt;name&gt;G3_to_G1&lt;/name&gt;
         &lt;single-tcp&gt;
            &lt;acceptor&gt;
               &lt;listen-port&gt;23801&lt;/listen-port&gt;
            &lt;/acceptor&gt;
         &lt;/single-tcp&gt;
      &lt;/peer&gt;
      &lt;endpoint&gt;
         &lt;name&gt;G3_to_TRD3&lt;/name&gt;
         &lt;domain-id&gt;3&lt;/domain-id&gt;
         &lt;lbm-config&gt;TRD3.cfg&lt;/lbm-config&gt;
      &lt;/endpoint&gt;
    &lt;/portals&gt;
&lt;/tnw-gateway&gt;
</pre><p><b>G4</b> <b>Configuration</b> </p>
<pre class="fragment">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;
&lt;tnw-gateway version="1.0"&gt;
    &lt;daemon&gt;
        &lt;log type="console"/&gt;
    &lt;/daemon&gt;
    &lt;portals&gt;
      &lt;peer&gt;
         &lt;name&gt;G4_to_G3&lt;/name&gt;
         &lt;single-tcp&gt;
            &lt;acceptor&gt;
               &lt;listen-port&gt;23754&lt;/listen-port&gt;
            &lt;/acceptor&gt;
         &lt;/single-tcp&gt;
      &lt;/peer&gt;
      &lt;endpoint&gt;
         &lt;name&gt;G4_to_TRD4&lt;/name&gt;
         &lt;domain-id&gt;4&lt;/domain-id&gt;
         &lt;lbm-config&gt;TRD4.cfg&lt;/lbm-config&gt;
      &lt;/endpoint&gt;
      &lt;peer&gt;
         &lt;name&gt;G4_to_G2&lt;/name&gt;
         &lt;single-tcp&gt;
            &lt;acceptor&gt;
               &lt;listen-port&gt;23632&lt;/listen-port&gt;
            &lt;/acceptor&gt;
         &lt;/single-tcp&gt;
      &lt;/peer&gt;
      &lt;peer&gt;
         &lt;name&gt;G4_to_G5&lt;/name&gt;
         &lt;single-tcp&gt;
            &lt;initiator&gt;
               &lt;address&gt;55.55.10.29&lt;/address&gt;
               &lt;port&gt;23739&lt;/port&gt;
            &lt;/initiator&gt;
         &lt;/single-tcp&gt;
      &lt;/peer&gt;
    &lt;/portals&gt;
&lt;/tnw-gateway&gt;
</pre><p><b>TRD4</b> <b>Configuration</b> </p>
<pre class="fragment">## Global Configuration Options ##
context request_tcp_interface 10.29.3.0/24
context resolver_multicast_port 13965
context resolver_multicast_interface 10.29.3.0/24
context resolver_multicast_address 225.4.37.85
</pre><p><b>G5</b> <b>Configuration</b> </p>
<pre class="fragment">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;
&lt;tnw-gateway version="1.0"&gt;
    &lt;daemon&gt;
        &lt;log type="console"/&gt;
    &lt;/daemon&gt;
    &lt;portals&gt;
      &lt;endpoint&gt;
         &lt;name&gt;G5_to_TRD5&lt;/name&gt;
         &lt;domain-id&gt;5&lt;/domain-id&gt;
         &lt;lbm-config&gt;TRD5.cfg&lt;/lbm-config&gt;
      &lt;/endpoint&gt;
      &lt;peer&gt;
         &lt;name&gt;G5_to_G4&lt;/name&gt;
         &lt;single-tcp&gt;
            &lt;acceptor&gt;
               &lt;listen-port&gt;23739&lt;/listen-port&gt;
            &lt;/acceptor&gt;
         &lt;/single-tcp&gt;
      &lt;/peer&gt;
    &lt;/portals&gt;
&lt;/tnw-gateway&gt;
</pre><p><b>TRD5</b> <b>Configuration</b> </p>
<pre class="fragment">## Global Configuration Options ##
context request_tcp_interface 10.29.3.0/24
context resolver_multicast_port 13965
context resolver_multicast_interface 10.29.3.0/24
context resolver_multicast_address 225.5.37.85
</pre><p><br />
 </p>
<h3><a class="anchor" id="starconfiguration"></a>
Star Configuration&nbsp;&nbsp;<small><a href="#starconfiguration">&lt;-</a></small></h3>
<p>This network consists of four TRDs. Within each TRD, full multicast connectivity exists. However, no multicast connectivity exists between the four TRDs.</p>
<div class="image">
<img src="cfg_star.png" alt="cfg_star.png"/>
</div>
 <p><b>G1</b> <b>Configuration</b> </p>
<p>The configuration for this UM Router also has transport statistics monitoring and the WebMonitor turned on.</p>
<pre class="fragment">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;
&lt;!-- UM GW xml file- 3 endpoint portals --&gt;
&lt;tnw-gateway version="1.0"&gt;
  &lt;daemon&gt;
    &lt;log type="console"/&gt;
    &lt;lbm-license-file&gt;lic0014.txt&lt;/lbm-license-file&gt;
    &lt;monitor interval="5"&gt;
      &lt;transport-module module="lbm" options="config=trd1.cfg"/&gt;
    &lt;/monitor&gt;
    &lt;web-monitor&gt;*:15304&lt;/web-monitor&gt;
  &lt;/daemon&gt;
  &lt;portals&gt;
    &lt;endpoint&gt;
      &lt;name&gt;G1_to_TRD1&lt;/name&gt;
      &lt;domain-id&gt;1&lt;/domain-id&gt;
      &lt;lbm-config&gt;trd1.cfg&lt;/lbm-config&gt;
    &lt;/endpoint&gt;
    &lt;endpoint&gt;
      &lt;name&gt;G1_to_TRD2&lt;/name&gt;
      &lt;domain-id&gt;2&lt;/domain-id&gt;
      &lt;lbm-config&gt;trd2.cfg&lt;/lbm-config&gt;
    &lt;/endpoint&gt;
    &lt;endpoint&gt;
      &lt;name&gt;G1_to_TRD3&lt;/name&gt;
      &lt;domain-id&gt;3&lt;/domain-id&gt;
      &lt;lbm-config&gt;trd3.cfg&lt;/lbm-config&gt;
    &lt;/endpoint&gt;
    &lt;endpoint&gt;
      &lt;name&gt;G1_to_TRD4&lt;/name&gt;
      &lt;domain-id&gt;4&lt;/domain-id&gt;
      &lt;lbm-config&gt;trd4.cfg&lt;/lbm-config&gt;
    &lt;/endpoint&gt;
  &lt;/portals&gt;
&lt;/tnw-gateway&gt;
</pre><p><b>TRD1</b> <b>Configuration</b> </p>
<pre class="fragment">## Global Configuration Options ##
context request_tcp_interface 10.29.3.0/24
context resolver_multicast_port 13965
context resolver_multicast_interface 10.29.3.0/24
context resolver_multicast_address 225.1.37.85
</pre><p><b>TRD2</b> <b>Configuration</b> </p>
<pre class="fragment">## Global Configuration Options ##
context request_tcp_interface 10.29.3.0/24
context resolver_multicast_port 13965
context resolver_multicast_interface 10.29.3.0/24
context resolver_multicast_address 225.2.37.85
</pre><p><b>TRD3</b> <b>Configuration</b> </p>
<pre class="fragment">## Global Configuration Options ##
context request_tcp_interface 10.29.3.0/24
context resolver_multicast_port 13965
context resolver_multicast_interface 10.29.3.0/24
context resolver_multicast_address 225.3.37.85
</pre><p><b>TRD4</b> <b>Configuration</b> </p>
<pre class="fragment">## Global Configuration Options ##
context request_tcp_interface 10.29.3.0/24
context resolver_multicast_port 13965
context resolver_multicast_interface 10.29.3.0/24
context resolver_multicast_address 225.4.37.85
</pre><p><br />
 </p>
<h3><a class="anchor" id="meshconfiguration"></a>
Mesh Configuration&nbsp;&nbsp;<small><a href="#meshconfiguration">&lt;-</a></small></h3>
<p>The mesh topology utilizes many connections between many nodes, to provide a variety of alternate routes. However, meshes are not the best solution in many cases, as unneeded complexity can increase the chance for configuration errors or make it more difficult to trace problems.</p>
<div class="image">
<img src="cfg_mesh.png" alt="cfg_mesh.png"/>
</div>
 <p><b>TRD1</b> <b>Configuration</b> </p>
<pre class="fragment">### Global Configuration Options ##
context request_tcp_interface 10.29.3.0/24
context resolver_multicast_port 13965
context resolver_multicast_interface 10.29.3.0/24
context resolver_multicast_address 225.1.37.85
</pre><p><b>G1</b> <b>Configuration</b> </p>
<pre class="fragment">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;
&lt;tnw-gateway version="1.0"&gt;
    &lt;daemon&gt;
        &lt;log type="console"/&gt;
    &lt;/daemon&gt;
    &lt;portals&gt;
      &lt;peer&gt;
         &lt;name&gt;G1_to_G5&lt;/name&gt;
         &lt;single-tcp&gt;
            &lt;initiator&gt;
               &lt;address&gt;55.55.10.105&lt;/address&gt;
               &lt;port&gt;23880&lt;/port&gt;
            &lt;/initiator&gt;
         &lt;/single-tcp&gt;
      &lt;/peer&gt;
      &lt;peer&gt;
         &lt;name&gt;G1_to_G4&lt;/name&gt;
         &lt;single-tcp&gt;
            &lt;initiator&gt;
               &lt;address&gt;55.55.10.104&lt;/address&gt;
               &lt;port&gt;23801&lt;/port&gt;
            &lt;/initiator&gt;
         &lt;/single-tcp&gt;
      &lt;/peer&gt;
      &lt;endpoint&gt;
         &lt;name&gt;G1_to_TRD1&lt;/name&gt;
         &lt;domain-id&gt;1&lt;/domain-id&gt;
         &lt;lbm-config&gt;TRD1.cfg&lt;/lbm-config&gt;
      &lt;/endpoint&gt;
      &lt;endpoint&gt;
         &lt;name&gt;G1_to_TRD2&lt;/name&gt;
         &lt;domain-id&gt;2&lt;/domain-id&gt;
         &lt;lbm-config&gt;TRD2.cfg&lt;/lbm-config&gt;
      &lt;/endpoint&gt;
      &lt;peer&gt;
         &lt;name&gt;G1_to_G2&lt;/name&gt;
         &lt;single-tcp&gt;
            &lt;initiator&gt;
               &lt;address&gt;55.55.10.102&lt;/address&gt;
               &lt;port&gt;23745&lt;/port&gt;
            &lt;/initiator&gt;
         &lt;/single-tcp&gt;
      &lt;/peer&gt;
    &lt;/portals&gt;
&lt;/tnw-gateway&gt;
</pre><p><b>G2</b> <b>Configuration</b> </p>
<pre class="fragment">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;
&lt;tnw-gateway version="1.0"&gt;
    &lt;daemon&gt;
        &lt;log type="console"/&gt;
    &lt;/daemon&gt;
    &lt;portals&gt;
      &lt;peer&gt;
         &lt;name&gt;G2_to_G5&lt;/name&gt;
         &lt;single-tcp&gt;
            &lt;initiator&gt;
               &lt;address&gt;55.55.10.105&lt;/address&gt;
               &lt;port&gt;23608&lt;/port&gt;
            &lt;/initiator&gt;
         &lt;/single-tcp&gt;
      &lt;/peer&gt;
      &lt;peer&gt;
         &lt;name&gt;G2_to_G4&lt;/name&gt;
         &lt;single-tcp&gt;
            &lt;acceptor&gt;
               &lt;listen-port&gt;23831&lt;/listen-port&gt;
            &lt;/acceptor&gt;
         &lt;/single-tcp&gt;
      &lt;/peer&gt;
      &lt;peer&gt;
         &lt;name&gt;G2_to_G1&lt;/name&gt;
         &lt;single-tcp&gt;
            &lt;acceptor&gt;
               &lt;listen-port&gt;23745&lt;/listen-port&gt;
            &lt;/acceptor&gt;
         &lt;/single-tcp&gt;
      &lt;/peer&gt;
      &lt;peer&gt;
         &lt;name&gt;G2_to_G3&lt;/name&gt;
         &lt;single-tcp&gt;
            &lt;initiator&gt;
               &lt;address&gt;55.55.10.103&lt;/address&gt;
               &lt;port&gt;23632&lt;/port&gt;
            &lt;/initiator&gt;
         &lt;/single-tcp&gt;
      &lt;/peer&gt;
      &lt;endpoint&gt;
         &lt;name&gt;G2_to_TRD2&lt;/name&gt;
         &lt;domain-id&gt;2&lt;/domain-id&gt;
         &lt;lbm-config&gt;TRD2.cfg&lt;/lbm-config&gt;
      &lt;/endpoint&gt;
    &lt;/portals&gt;
&lt;/tnw-gateway&gt;
</pre><p><b>G3</b> <b>Configuration</b> </p>
<pre class="fragment">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;
&lt;tnw-gateway version="1.0"&gt;
    &lt;daemon&gt;
        &lt;log type="console"/&gt;
    &lt;/daemon&gt;
    &lt;portals&gt;
      &lt;peer&gt;
         &lt;name&gt;G3_to_G5&lt;/name&gt;
         &lt;single-tcp&gt;
            &lt;initiator&gt;
               &lt;address&gt;55.55.10.105&lt;/address&gt;
               &lt;port&gt;23739&lt;/port&gt;
            &lt;/initiator&gt;
         &lt;/single-tcp&gt;
      &lt;/peer&gt;
      &lt;peer&gt;
         &lt;name&gt;G3_to_G4&lt;/name&gt;
         &lt;single-tcp&gt;
            &lt;acceptor&gt;
               &lt;listen-port&gt;23754&lt;/listen-port&gt;
            &lt;/acceptor&gt;
         &lt;/single-tcp&gt;
      &lt;/peer&gt;
      &lt;peer&gt;
         &lt;name&gt;G3_to_G2&lt;/name&gt;
         &lt;single-tcp&gt;
            &lt;acceptor&gt;
               &lt;listen-port&gt;23632&lt;/listen-port&gt;
            &lt;/acceptor&gt;
         &lt;/single-tcp&gt;
      &lt;/peer&gt;
    &lt;/portals&gt;
&lt;/tnw-gateway&gt;
</pre><p><b>TRD2</b> <b>Configuration</b> </p>
<pre class="fragment">## Global Configuration Options ##
context request_tcp_interface 10.29.3.0/24
context resolver_multicast_port 13965
context resolver_multicast_interface 10.29.3.0/24
context resolver_multicast_address 225.2.37.85
</pre><p><b>TRD3</b> <b>Configuration</b> </p>
<pre class="fragment">## Global Configuration Options ##
context request_tcp_interface 10.29.3.0/24
context resolver_multicast_port 13965
context resolver_multicast_interface 10.29.3.0/24
context resolver_multicast_address 225.3.37.85
</pre><p><b>G4</b> <b>Configuration</b> </p>
<pre class="fragment">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;
&lt;tnw-gateway version="1.0"&gt;
    &lt;daemon&gt;
        &lt;log type="console"/&gt;
    &lt;/daemon&gt;
    &lt;portals&gt;
      &lt;peer&gt;
         &lt;name&gt;G4_to_G5&lt;/name&gt;
         &lt;single-tcp&gt;
            &lt;initiator&gt;
               &lt;address&gt;55.55.10.105&lt;/address&gt;
               &lt;port&gt;23580&lt;/port&gt;
            &lt;/initiator&gt;
         &lt;/single-tcp&gt;
      &lt;/peer&gt;
      &lt;endpoint&gt;
         &lt;name&gt;G4_to_TRD1&lt;/name&gt;
         &lt;domain-id&gt;1&lt;/domain-id&gt;
         &lt;lbm-config&gt;TRD1.cfg&lt;/lbm-config&gt;
      &lt;/endpoint&gt;
      &lt;endpoint&gt;
         &lt;name&gt;G4_to_TRD3&lt;/name&gt;
         &lt;domain-id&gt;3&lt;/domain-id&gt;
         &lt;lbm-config&gt;TRD3.cfg&lt;/lbm-config&gt;
      &lt;/endpoint&gt;
      &lt;peer&gt;
         &lt;name&gt;G4_to_G1&lt;/name&gt;
         &lt;single-tcp&gt;
            &lt;acceptor&gt;
               &lt;listen-port&gt;23801&lt;/listen-port&gt;
            &lt;/acceptor&gt;
         &lt;/single-tcp&gt;
      &lt;/peer&gt;
      &lt;peer&gt;
         &lt;name&gt;G4_to_G3&lt;/name&gt;
         &lt;single-tcp&gt;
            &lt;initiator&gt;
               &lt;address&gt;55.55.10.103&lt;/address&gt;
               &lt;port&gt;23754&lt;/port&gt;
            &lt;/initiator&gt;
         &lt;/single-tcp&gt;
      &lt;/peer&gt;
      &lt;peer&gt;
         &lt;name&gt;G4_to_G2&lt;/name&gt;
         &lt;single-tcp&gt;
            &lt;initiator&gt;
               &lt;address&gt;55.55.10.102&lt;/address&gt;
               &lt;port&gt;23831&lt;/port&gt;
            &lt;/initiator&gt;
         &lt;/single-tcp&gt;
      &lt;/peer&gt;
    &lt;/portals&gt;
&lt;/tnw-gateway&gt;
</pre><p><b>G5</b> <b>Configuration</b> </p>
<pre class="fragment">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;
&lt;tnw-gateway version="1.0"&gt;
    &lt;daemon&gt;
        &lt;log type="console"/&gt;
    &lt;/daemon&gt;
    &lt;portals&gt;
      &lt;peer&gt;
         &lt;name&gt;G5_to_G4&lt;/name&gt;
         &lt;single-tcp&gt;
            &lt;acceptor&gt;
               &lt;listen-port&gt;23580&lt;/listen-port&gt;
            &lt;/acceptor&gt;
         &lt;/single-tcp&gt;
      &lt;/peer&gt;
      &lt;peer&gt;
         &lt;name&gt;G5_to_G1&lt;/name&gt;
         &lt;single-tcp&gt;
            &lt;acceptor&gt;
               &lt;listen-port&gt;23880&lt;/listen-port&gt;
            &lt;/acceptor&gt;
         &lt;/single-tcp&gt;
      &lt;/peer&gt;
      &lt;peer&gt;
         &lt;name&gt;G5_to_G3&lt;/name&gt;
         &lt;single-tcp&gt;
            &lt;acceptor&gt;
               &lt;listen-port&gt;23739&lt;/listen-port&gt;
            &lt;/acceptor&gt;
         &lt;/single-tcp&gt;
      &lt;/peer&gt;
      &lt;peer&gt;
         &lt;name&gt;G5_to_G2&lt;/name&gt;
         &lt;single-tcp&gt;
            &lt;acceptor&gt;
               &lt;listen-port&gt;23608&lt;/listen-port&gt;
            &lt;/acceptor&gt;
         &lt;/single-tcp&gt;
      &lt;/peer&gt;
    &lt;/portals&gt;
&lt;/tnw-gateway&gt;
</pre><p><br />
 </p>
<h2><a class="anchor" id="usingumconfigurationfileswiththeumrouter"></a>
Using UM Configuration Files with the UM Router&nbsp;&nbsp;<small><a href="#usingumconfigurationfileswiththeumrouter">&lt;-</a></small></h2>
<p>Within the UM Router configuration file, the endpoint portal's <code>&lt;lbm-config&gt;</code> element lets you import configurations from either a plain text or XML UM configuration file. However, using the XML type of UM configuration files provides the following advantages over plain text UM configuration files:</p>
<ul>
<li>
You can apply UM attributes per topic and/or per context. </li>
<li>
You can apply attributes to all portals on a particular UM Router using a UM XML template (instead of individual portal settings). </li>
<li>
Using UM XML templates to set options for individual portals lets the UM Router process these settings in the <code>&lt;daemon&gt;</code> element instead of within each portal's configuration. </li>
</ul>
<p><br />
 </p>
<h3><a class="anchor" id="settingindividualendpointoptions"></a>
Setting Individual Endpoint Options&nbsp;&nbsp;<small><a href="#settingindividualendpointoptions">&lt;-</a></small></h3>
<p>When setting endpoint options, first name the context of each endpoint in the UM Router's XML configuration file.</p>
<pre class="fragment">&lt;portals&gt;
  &lt;endpoint&gt;
    &lt;name&gt;Endpoint_1&lt;/name&gt;
    &lt;domain-id&gt;1&lt;/domain-id&gt;
    &lt;source-context-name&gt;G1_E1&lt;/source-context-name&gt;
    &lt;lbm-attributes&gt;
      &lt;option name="request_tcp_interface" scope="context" value="10.29.4.0/24"/&gt;
    &lt;/lbm-attributes&gt;
  &lt;/endpoint&gt;
  &lt;endpoint&gt;
    &lt;name&gt;G1-TRD2&lt;/name&gt;
    &lt;domain-id&gt;2&lt;/domain-id&gt;
    &lt;receiver-context-name&gt;G1_E2&lt;/source-context-name&gt;
    &lt;lbm-attributes&gt;
      &lt;option name="request_tcp_interface" scope="context" value="10.29.5.0/24" /&gt;
    &lt;/lbm-attributes&gt;
  &lt;/endpoint&gt;
&lt;/portals&gt;
</pre><p>Then assign configuration templates to those contexts in the UM XML configuration file.</p>
<pre class="fragment">&lt;application name="dro1" template="global"&gt;
  &lt;contexts&gt;
    &lt;context name="G1_E1" template="G1-E1-options"&gt;
      &lt;sources /&gt;
    &lt;/context&gt;
    &lt;context name="G1_E2" template="G1-E2-options"&gt;
      &lt;sources /&gt;
    &lt;/context&gt;
  &lt;/contexts&gt;
&lt;/application&gt;
</pre><p>You specify the unique options for each of this UM Router's two endpoints in the UM XML configuration <code>&lt;templates&gt;</code> section used for G1-E1-options and G1-E2-options.</p>
<p><br />
 </p>
<h3><a class="anchor" id="umrouterandumxmlconfigurationusecases"></a>
UM Router and UM XML Configuration Use Cases&nbsp;&nbsp;<small><a href="#umrouterandumxmlconfigurationusecases">&lt;-</a></small></h3>
<p>One advantage of using UM XML configuration files with the UM Router is the ability to assign unique UM attributes to the topics and contexts used for the proxy sources and receivers (which plain text UM configuration files cannot do). The following example shows how to assign a different LBTRM multicast address to a source based on its topic.</p>
<p>Create a new UM XML configuration template for the desired topic name.</p>
<pre class="fragment">&lt;template name="AAA-template"&gt;
  &lt;options type="source"&gt;
    &lt;option name="transport_lbtrm_multicast_address"
    default-value="225.2.37.88"/&gt;
  &lt;/options&gt;
&lt;/template&gt;
</pre><p>Then include this template in the <code>&lt;application&gt;</code> element associated with the UM Router.</p>
<pre class="fragment">&lt;application name="dro1" template="global-options"&gt;
  &lt;contexts&gt;
    &lt;context&gt;
      &lt;sources template="source-options"&gt;
        &lt;topic topicname="AAA" template="AAA-template" /&gt;
      &lt;/sources&gt;
    &lt;/context&gt;
  &lt;/contexts&gt;
&lt;/application&gt;
</pre><p>It is also possible to assign UM attributes directly in the <code>&lt;application&gt;</code> tag. For example, the following specifies that a particular topic should use an LBT-RU transport.</p>
<pre class="fragment">&lt;application name="dro1" template="dro1-common"&gt;
  &lt;contexts&gt;
    &lt;context&gt;
      &lt;sources template="source-template"&gt;
        &lt;topic topicname="LBTRU_TOPIC"&gt;
          &lt;options type="source"&gt;
            &lt;option name="transport" default-value="lbtru" /&gt;
            &lt;/options&gt;
        &lt;/topic&gt;
      &lt;/sources&gt;
    &lt;/context&gt;
  &lt;/contexts&gt;
&lt;/application&gt;
</pre><p><br />
 </p>
<h3><a class="anchor" id="sampleconfiguration"></a>
Sample Configuration&nbsp;&nbsp;<small><a href="#sampleconfiguration">&lt;-</a></small></h3>
<p>The following sample configuration incorporates many of the examples mentioned above. The UM Router applies options to all UM objects created. The UM XML configuration file overwrites these options for two specific topics. The first topic, LBTRM_TOPIC, uses a different template to change its transport from TCP to LBTRM, and to set an additional property. The second topic, LBTRU_TOPIC, also changes its transport from TCP to a new value. However, its new attributes are applied directly in its associated topic tag, instead of referencing a template. In addition, this sample configuration assigns the rm-source template to all sources and receivers associated with the context endpt_1.</p>
<p><br />
 </p>
<h3><a class="anchor" id="xmlumconfigurationfile"></a>
XML UM Configuration File&nbsp;&nbsp;<small><a href="#xmlumconfigurationfile">&lt;-</a></small></h3>
<pre class="fragment">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;
&lt;um-configuration version="1.0"&gt;
  &lt;templates&gt;
    &lt;template name="dro1-common"&gt;
      &lt;options type="source"&gt;
        &lt;option name="transport" default-value="tcp" /&gt;
      &lt;/options&gt;
      &lt;options type="context"&gt;
        &lt;option name="request_tcp_interface" default-value="10.29.5.6" /&gt;
        &lt;option name="transport_tcp_port_low" default-value="4400" /&gt;
        &lt;option name="transport_tcp_port_high" default-value="4500" /&gt;
        &lt;option name="resolver_multicast_address" default-value="225.2.37.88"/&gt;
      &lt;/options&gt;
    &lt;/template&gt;
    &lt;template name="rm-source"&gt;
      &lt;options type="source"&gt;
        &lt;option name="transport" default-value="lbtrm" /&gt;
        &lt;option name="transport_lbtrm_multicast_address" default-value="225.2.37.89"/&gt;
      &lt;/options&gt;
    &lt;/template&gt;
  &lt;/templates&gt;
  &lt;applications&gt;
    &lt;application name="dro1" template="dro1-common"&gt;
     &lt;contexts&gt;
        &lt;context&gt;
          &lt;sources&gt;
            &lt;topic topicname="LBTRM_TOPIC" template="rm-source" /&gt;
            &lt;topic topicname="LBTRU_TOPIC"&gt;
              &lt;options type="source"&gt;
                &lt;option name="transport" default-value="lbtru" /&gt;
                &lt;option name="resolver_unicast_daemon" default-value="10.29.5.1:1234" /&gt;
              &lt;/options&gt;
            &lt;/topic&gt;
          &lt;/sources&gt;
        &lt;/context&gt;
        &lt;context name="endpt_1"&gt;
          &lt;sources template="rm-source"/&gt;
        &lt;/context&gt;
      &lt;/contexts&gt;
    &lt;/application&gt;
  &lt;/applications&gt;
&lt;/um-configuration&gt;
</pre><p><br />
 </p>
<h3><a class="anchor" id="xmlumrouterconfigurationfile"></a>
XML UM Router Configuration File&nbsp;&nbsp;<small><a href="#xmlumrouterconfigurationfile">&lt;-</a></small></h3>
<p>This UM Router uses the above XML UM configuration file, sample-config.xml, to set its UM options. It has three endpoints, one of which has the context endpt_1.</p>
<pre class="fragment">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;
&lt;tnw-gateway version="1.0"&gt;
  &lt;daemon&gt;
    &lt;log type="console"/&gt;
    &lt;xml-config&gt;sample-config.xml&lt;/xml-config&gt;
  &lt;/daemon&gt;
  &lt;portals&gt;
    &lt;endpoint&gt;
      &lt;name&gt;Endpoint_1&lt;/name&gt;
      &lt;domain-id&gt;1&lt;/domain-id&gt;
      &lt;lbm-attributes&gt;
        &lt;option name="context_name" scope="context" value="endpt_1" /&gt;
        &lt;option name="request_tcp_interface" scope="context"
        value="10.29.4.0/24"/&gt;
      &lt;/lbm-attributes&gt;
    &lt;/endpoint&gt;
    &lt;endpoint&gt;
      &lt;name&gt;Endpoint_2&lt;/name&gt;
      &lt;domain-id&gt;2&lt;/domain-id&gt;
      &lt;lbm-attributes&gt;
        &lt;option name="request_tcp_interface" scope="context"
        value="10.29.5.0/24"/&gt;
      &lt;/lbm-attributes&gt;
    &lt;/endpoint&gt;
    &lt;endpoint&gt;
      &lt;name&gt;Endpoint_3&lt;/name&gt;
      &lt;domain-id&gt;3&lt;/domain-id&gt;
      &lt;lbm-attributes&gt;
        &lt;option name="request_tcp_interface" scope="context"
        value="10.29.6.0/24"/&gt;
      &lt;/lbm-attributes&gt;
    &lt;/endpoint&gt;
  &lt;/portals&gt;
&lt;/tnw-gateway&gt;
</pre><p><br />
 </p>
<h2><a class="anchor" id="runningtheumrouterdaemon"></a>
Running the UM Router Daemon&nbsp;&nbsp;<small><a href="#runningtheumrouterdaemon">&lt;-</a></small></h2>
<p>To run the UM Router, ensure the following:</p>
<ul>
<li>
Library environment variable paths are set correctly (LD_LIBRARY_PATH) </li>
<li>
The license environment variable LBM_LICENSE_FILENAME points to a valid UM Router license file. </li>
<li>
The configuration file is error free. </li>
</ul>
<p>Typically, you run the UM Router with one configuration file argument, for example:</p>
<pre class="fragment">tnwgd gw1-config.xml
</pre><p> (FYI: "tnwgd" stands for "Twenty Nine West Gateway Daemon", a historical name for the UM Router.)</p>
<p>The UM Router logs version information on startup. The following is an example of this information:</p>
<pre class="fragment">Version 6.0 Build: Sep 26 2012, 00:31:33 (UMS 6.0 [UMP-6.0] [UMQ-6.0] [64-bit] Build: Sep 26 2012, 00:27:17 ( DEBUG license LBT-RM LBT-RU LBT-IPC LBT-RDMA ) WC[PCRE 7.4 2007-09-21, regex, appcb] HRT[gettimeofday()])
</pre><p><br />
 </p>
<h1><a class="anchor" id="manpagesforumrouter"></a>
Man Pages for UM Router&nbsp;&nbsp;<small><a href="#manpagesforumrouter">&lt;-</a></small></h1>
<p>Help for the UM Router command line can be obtained by entering "tnwgd -h". Brief help for the UM Router configuration file can be obtained by entering "tnwgd -d", which prints the DTD contents. (FYI: "tnwgd" stands for "Twenty Nine West Gateway Daemon", a historical name for the UM Router.)</p>
<p>There are two executables for the UM Router, each with it's own man page: </p><ul>
<li>
<a class="el" href="index.html#tnwgdmanpage">Tnwgd Man Page</a> - Unix and Windows command-line interface. </li>
<li>
<a class="el" href="index.html#tnwgdsmanpage">Tnwgds Man Page</a> - Windows service interface. </li>
</ul>
<p><br />
 </p>
<h2><a class="anchor" id="tnwgdmanpage"></a>
Tnwgd Man Page&nbsp;&nbsp;<small><a href="#tnwgdmanpage">&lt;-</a></small></h2>
<p>The tnwgd executable can be run interactively from a command prompt or from a script/batch file. For use as a Windows Service, see <a class="el" href="index.html#tnwgdsmanpage">Tnwgds Man Page</a>.</p>
<pre class="fragment">Purpose: UM Gateway daemon
Usage: tnwgd [options] configfile
Available options:
  -d, --dump-dtd             dump the configuration DTD to stdout
  -h, --help                 display this help and exit
  -v, --validate             validate config-file then exit
  -f, --detach               detach from terminal</pre><dl class="section user"><dt><b>Description</b> </dt><dd>UM Router services are provided by tnwgd. (FYI: "tnwgd" stands for "Twenty Nine West Gateway Daemon", a historical name for the UM Router.) A UM Router configuration file is required. The contents and format of the configuration file are documented separately.</dd></dl>
<dl class="section user"><dt></dt><dd>The DTD used to validate a configuration file is dumped to standard output with <code>-d</code> or <code>--dump-dtd</code>. After dumping the DTD, tnwgd exits instead of providing UM Router services as usual. See <a class="el" href="index.html#umrouterconfigurationdtd">UM Router Configuration DTD</a> for the DTD with comments removed.</dd></dl>
<dl class="section user"><dt></dt><dd>To validate the configuration file, use either the <code>-v</code> or <code>--validate</code> options. After attempting validation, tnwgd exits instead of providing UM Router services as usual. The exit status will be 0 for a configuration file successfully validated by the DTD, and non-zero otherwise.</dd></dl>
<dl class="section user"><dt></dt><dd>Command line help is available with <code>-h</code> or <code>--help</code>.</dd></dl>
<dl class="section user"><dt><b>Unix</b> <b>Only</b> </dt><dd>Tnwgd normally remains attached to the controlling terminal and runs until interrupted. If the <code>-f</code> or <code>--detach</code> option is given on Unix, tnwgd instead forks and detaches the child process from the controlling terminal, and the parent exits immediately.</dd></dl>
<dl class="section user"><dt><b>Exit</b> <b>Status</b> </dt><dd>The exit status from tnwgd is 0 for success and some non-zero value for failure.</dd></dl>
<p><br />
 </p>
<h2><a class="anchor" id="tnwgdsmanpage"></a>
Tnwgds Man Page&nbsp;&nbsp;<small><a href="#tnwgdsmanpage">&lt;-</a></small></h2>
<p>The tnwgds executable is for use as a Windows Service. The service can be installed as a service by the Windows package installer.</p>
<p>Alternatively, the tnwgds executable can be run interactively from a command prompt to install the service or to change certain configuration elements. See <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.12_RC3/doc/Gateway/operations.tag:../../Operations/" href="../../Operations/startupshutdownprocedures.html#umdaemonsaswindowsservices">UM Daemons as Windows Services</a> for more details.</p>
<pre class="fragment">Purpose: UM Gateway daemon
Usage: tnwgds [options] [configfile]
Available options:
  -d, --dump-dtd             dump the configuration DTD to stdout
  -h, --help                 display this help and exit
  -v, --validate             validate config-file then exit
  -s, --service=install      install the service passing configfile
  -s, --service=remove       delete/remove the service
  -s, --service=config       update configfile info to use configfile passed
  -e, --event-log-level      Update/set service logging level.  This is the minimum logging
                             level to send to the Windows event log.  Valid values are:
                                NONE - Send no events
                                INFO
                                WARN - default
                                ERROR</pre><dl class="section user"><dt><b>Description</b> </dt><dd>UM Router services are provided by tnwgds Windows Service. (FYI: "tnwgds" stands for "Twenty Nine West Gateway Daemon Service", a historical name for the UM Router.) A UM Router configuration file is required. The contents and format of the configuration file are documented separately.</dd></dl>
<dl class="section user"><dt></dt><dd>The <code>configfile</code> parameter is used interactively to configure the UM Router's XML configuration file.</dd></dl>
<dl class="section user"><dt></dt><dd>The DTD used to validate a configuration file is dumped to standard output with <code>-d</code> or <code>--dump-dtd</code>. After dumping the DTD, tnwgd exits instead of providing UM Router services as usual. See <a class="el" href="index.html#umrouterconfigurationdtd">UM Router Configuration DTD</a> for the DTD with comments removed.</dd></dl>
<dl class="section user"><dt></dt><dd>To validate the configuration file, use either the <code>-v</code> or <code>--validate</code> options. After attempting validation, tnwgd exits instead of providing UM Router services as usual. The exit status will be 0 for a configuration file successfully validated by the DTD, and non-zero otherwise.</dd></dl>
<dl class="section user"><dt></dt><dd>The <code>-s</code> is used interactively to control the installation of the Windows service. The <code>-e</code> is used interactively to configure the logging threshold for writing to the Windows Event Log. See <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.12_RC3/doc/Gateway/operations.tag:../../Operations/" href="../../Operations/startupshutdownprocedures.html#umdaemonsaswindowsservices">UM Daemons as Windows Services</a> for more details.</dd></dl>
<dl class="section user"><dt></dt><dd>Command line help is available with <code>-h</code> or <code>--help</code>.</dd></dl>
<dl class="section user"><dt><b>Exit</b> <b>Status</b> </dt><dd>The exit status from tnwgd is 0 for success and some non-zero value for failure.</dd></dl>
<p><br />
 </p>
<h1><a class="anchor" id="xmlconfigurationreference"></a>
XML Configuration Reference&nbsp;&nbsp;<small><a href="#xmlconfigurationreference">&lt;-</a></small></h1>
<p>For controlling/configuring each UM Router, you use a XML UM Router configuration file, which also contains references to UM configuration files to extract needed information about the TRDs interfaced by endpoint portals. This chapter includes a lookup reference for the XML UM Router configuration file's elements and DTD.</p>
<p>An XML UM Router configuration file follows standard XML conventions. Element declarations or a pointer to a DTD file are not needed, as these are handled by the UM Router.</p>
<p><br />
 </p>
<h2><a class="anchor" id="filestructure"></a>
File Structure&nbsp;&nbsp;<small><a href="#filestructure">&lt;-</a></small></h2>
<p>An XML UM Router configuration file generally comprises two primary elements: <code>&lt;daemon&gt;</code> and <code>&lt;portals&gt;</code>. Organized and contained within these are option value assignments. <code>&lt;daemon&gt;</code> sub-containers let you set options global to the UM Router. <code>&lt;portals&gt;</code> sub-containers let you configure each portal in the UM Router individually.</p>
<p>XML UM Router configuration files use the high-level structure shown in the following example. This example includes only some container elements, and only some options.</p>
<pre class="fragment">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;
&lt;tnw-gateway version="1.0"&gt;
  &lt;daemon&gt;
    &lt;log type="console"/&gt;
    &lt;uid&gt;0&lt;/uid&gt;
    &lt;gid&gt;0&lt;/gid&gt;
    &lt;pidfile&gt;/path/file.pid&lt;/pidfile&gt;
    &lt;lbm-license-file&gt;/path/file.lic&lt;/lbm-license-file&gt;
    &lt;topicmap/&gt;
    &lt;patternmap/&gt;
    &lt;monitor&gt;
      &lt;transport-module/&gt;
      &lt;format-module/&gt;
    &lt;/monitor&gt;
    &lt;web-monitor&gt;*:21000&lt;/web-monitor&gt;
    &lt;propagation-delay/&gt;
    &lt;xml-config&gt;sample-config.xml&lt;/xml-config&gt;
  &lt;/daemon&gt;
  &lt;portals&gt;
    &lt;endpoint&gt;
      &lt;name&gt;Endpoint_1&lt;/name&gt;
      &lt;domain-id&gt;1&lt;/domain-id&gt;
      &lt;cost&gt;1&lt;/cost&gt;
      &lt;lbm-config&gt;endpoint2.cfg&lt;/lbm-config&gt;
      &lt;lbm-attributes&gt;
        &lt;option name="context_name" scope="context" value="endpt_1" /&gt;
      &lt;/lbm-attributes&gt;
      &lt;acl&gt;
        &lt;inbound&gt;
          &lt;ace match="accept"&gt;
            &lt;topic&gt;ABC123&lt;/topic&gt;
            &lt;pcre-pattern &gt;pattern&lt;/pcre-pattern &gt;
            &lt;regex-pattern &gt;pattern&lt;/regex-pattern &gt;
            &lt;transport/&gt;
            &lt;source-ip/&gt;
            &lt;multicast-group/&gt;
            &lt;udp-source-port/&gt;
            &lt;udp-destination-port/&gt;
            &lt;tcp-source-port/&gt;
            &lt;xport-id/&gt;
          &lt;/ace&gt;
        &lt;/inbound&gt;
        &lt;outbound&gt;
          &lt;ace match="accept"&gt;
            &lt;topic&gt;ABC123&lt;/topic&gt;
            &lt;pcre-pattern &gt;pattern&lt;/pcre-pattern &gt;
            &lt;regex-pattern &gt;pattern&lt;/regex-pattern &gt;
            &lt;transport/&gt;
            &lt;source-ip/&gt;
            &lt;multicast-group/&gt;
            &lt;udp-source-port/&gt;
            &lt;udp-destination-port/&gt;
            &lt;tcp-source-port/&gt;
            &lt;xport-id/&gt;
          &lt;/ace&gt;
        &lt;/outbound&gt;
      &lt;/acl&gt;
    &lt;/endpoint&gt;
    &lt;peer&gt;
      &lt;name&gt;Peer_1&lt;/name&gt;
      &lt;cost&gt;1&lt;/cost&gt;
      &lt;single-tcp&gt;
        &lt;interface&gt;
        &lt;receive-buffer&gt;
        &lt;send-buffer&gt;
        &lt;keepalive&gt;
        &lt;nodelay&gt;
        &lt;initiator&gt;
          &lt;address&gt;
          &lt;port&gt;
        &lt;/initiator&gt;
        &lt;acceptor&gt;
          &lt;listen-port&gt;
        &lt;/acceptor&gt;
      &lt;/single-tcp&gt;
      &lt;max-queue&gt;
      &lt;max-datagram&gt;
      &lt;batching&gt;
        &lt;min-length&gt;
        &lt;batch-interval&gt;
      &lt;/batching&gt;
      &lt;lbm-config&gt;peer1.cfg&lt;/lbm-config&gt;
      &lt;lbm-attributes&gt;
        &lt;option name="name" scope="scope" value="value" /&gt;
      &lt;/lbm-attributes&gt;
      &lt;acl&gt; (see above)
      &lt;topic-purge&gt;
      &lt;topic-interest-generate&gt;
      &lt;topic-domain-activity&gt;
      &lt;pattern-purge&gt;
      &lt;pattern-interest-generate&gt;
      &lt;pattern-domain-activity&gt;
      &lt;topic-use-check/&gt;
      &lt;pattern-use-check&gt;
      &lt;source-context-name&gt;
      &lt;receiver-context-name&gt;
      &lt;sqn-window&gt;
      &lt;context-query&gt;
      &lt;gateway-keepalive&gt;
    &lt;/peer&gt;
  &lt;/portals&gt;
&lt;/tnw-gateway&gt;
</pre><p><br />
 </p>
<h2><a class="anchor" id="elementsreference"></a>
Elements Reference&nbsp;&nbsp;<small><a href="#elementsreference">&lt;-</a></small></h2>
<p>Following are descriptions of the XML UM Router configuration file elements. For the children listings, + designates 1 or more, designates 0 or more, and ? designates 0 or 1. You must insert children in the order presented.</p>
<p><br />
 </p>
<h3><a class="anchor" id="drocfg_tnw-gateway"></a>
&lt;tnw-gateway&gt;&nbsp;&nbsp;<small><a href="#drocfg_tnw-gateway">&lt;-</a></small></h3>
<p>The <code>&lt;tnw-gateway&gt;</code> element is a required container for all options residing in the XML UM Router configuration file. This is the top-level element.</p>
<ul>
<li>
<b>Cardinality:</b> 1 </li>
<li>
<b>Parents:</b> None. </li>
<li>
<b>Children:</b> <code>&lt;daemon&gt;</code>?, <code>&lt;portals&gt;</code> </li>
</ul>
<p><b>XML</b> <b>Attributes:</b> </p>
<table class="doxtable">
<tr>
<th>XML Attribute </th><th>Description </th><th>Default Value </th></tr>
<tr>
<td>version </td><td>The version of the DTD, which is currently 1.0. (This is not the product version.) </td><td>none </td></tr>
</table>
<p><b>Example:</b> </p><pre class="fragment">&lt;tnw-gateway version="1.0"&gt;
  &lt;daemon&gt;
      . . .
      . . .
  &lt;/daemon&gt;
  &lt;portals&gt;
    &lt;endpoint&gt;
      . . .
      . . .
    &lt;/endpoint&gt;
  &lt;/portals&gt;
&lt;/tnw-gateway&gt;
</pre><p><br />
 </p>
<h3><a class="anchor" id="drocfg_daemon"></a>
&lt;daemon&gt;&nbsp;&nbsp;<small><a href="#drocfg_daemon">&lt;-</a></small></h3>
<p>The <code>&lt;daemon&gt;</code> element is a container for options common to the entire UM Router.</p>
<ul>
<li>
<b>Cardinality:</b> 0 or 1 </li>
<li>
<b>Parents:</b> <code>&lt;tnw-gateway&gt;</code> </li>
<li>
<b>Children:</b> <code>&lt;name&gt;</code>?, <code>&lt;log&gt;</code>?, <code>&lt;uid&gt;</code>?, <code>&lt;gid&gt;</code>?, <code>&lt;pidfile&gt;</code>?, <code>&lt;lbm-license-file&gt;</code>?, <code>&lt;topicmap&gt;</code>?, <code>&lt;patternmap&gt;</code>?, <code>&lt;monitor&gt;</code>?, <code>&lt;web-monitor&gt;</code>?, <code>&lt;daemon-monitor&gt;</code>? <code>&lt;propagation-delay&gt;</code>?, <code>&lt;xml-config&gt;</code>?, <code>&lt;route-info&gt;</code>? <code>&lt;route-recalculation&gt;</code>? </li>
</ul>
<p><b>XML</b> <b>Attributes:</b> None.</p>
<p><b>Example:</b> </p>
<pre class="fragment">&lt;tnw-gateway version="1.0"&gt;
  &lt;daemon&gt;
      . . .
      . . .
  &lt;/daemon&gt;
      . . .
      . . .
&lt;/tnw-gateway&gt;
</pre><p><br />
 </p>
<h3><a class="anchor" id="drocfg_name"></a>
&lt;name&gt;&nbsp;&nbsp;<small><a href="#drocfg_name">&lt;-</a></small></h3>
<p>The <code>&lt;name&gt;</code> element lets you set a name for this UM Router (do not duplicate for any other known UM Routers), or for the name of an endpoint or peer portal. Each portal name must be unique within the UM Router.</p>
<ul>
<li>
<b>Cardinality:</b> 1 </li>
<li>
<b>Parents:</b> <code>&lt;daemon&gt;</code>, <code>&lt;endpoint&gt;</code>, <code>&lt;peer&gt;</code> </li>
<li>
<b>Children:</b> None. </li>
</ul>
<p><b>XML</b> <b>Attributes:</b> None.</p>
<p><b>Example:</b> </p>
<pre class="fragment">&lt;tnw-gateway version="1.0"&gt;
  &lt;daemon&gt;
    &lt;name&gt;UM Router1&lt;/name&gt;
  &lt;/daemon&gt;
  &lt;portals&gt;
    &lt;endpoint&gt;
      &lt;name&gt;endpoint1&lt;/name&gt;
      . . .
      . . .
    &lt;/endpoint&gt;
  &lt;/portals&gt;      . . .
&lt;/tnw-gateway&gt;
</pre><p><br />
 </p>
<h3><a class="anchor" id="drocfg_log"></a>
&lt;log&gt;&nbsp;&nbsp;<small><a href="#drocfg_log">&lt;-</a></small></h3>
<p>The <code>&lt;log&gt;</code> element specifies the destination for UM Router log messages. If you set the type for file, use this element to contain the full pathname/filename.</p>
<ul>
<li>
<b>Cardinality:</b> 0 or 1 </li>
<li>
<b>Parents:</b> <code>&lt;daemon&gt;</code> </li>
<li>
<b>Children:</b> None. </li>
</ul>
<p><b>XML</b> <b>Attributes:</b> </p>
<table class="doxtable">
<tr>
<th>XML Attribute </th><th>Description </th><th>Default Value </th></tr>
<tr>
<td>type </td><td>file, syslog, console </td><td>console </td></tr>
<tr>
<td>size </td><td>Number of millions of bytes of file size to roll log file. E.g. a value of 1 rolls after 1000000 bytes. Maximum value is 4000. Value of 0 disables rolling by file size. Only applicable for <code>type="file"</code>. </td><td>0 </td></tr>
<tr>
<td>frequency </td><td>Frequency by which to roll log file. Choices are <br />
&#160;&#160;<code>daily</code> - Roll log file at midnight. <br />
&#160;&#160;<code>hourly</code> - Roll log file after approximately an hour, but is not exact and can drift significantly over a period of time. <br />
&#160;&#160;<code>test</code> - For internal Informatica testing and should not be used. <br />
&#160;&#160;<code>disable</code> - Do not roll log file by frequency. <br />
Only applicable for <code>type="file"</code> </td><td><code>disable</code> </td></tr>
<tr>
<td>xml:space </td><td>How whitespace is handled. <b>"default"</b>. trims leading and trailing whitespace (e.g., tabs, spaces, linefeeds, etc.), and compresses multiple whitespace characters into a single space character. <b>"preserve"</b>. preserves the whitespace exactly as read. </td><td><b>"default"</b> </td></tr>
</table>
<p><b>Example:</b> </p>
<pre class="fragment">&lt;tnw-gateway version="1.0"&gt;
  &lt;daemon&gt;
    &lt;log type="syslog"/&gt;
  &lt;/daemon&gt;
      . . .
      . . .
&lt;/tnw-gateway&gt;
</pre><p><br />
 </p>
<h3><a class="anchor" id="drocfg_uid"></a>
&lt;uid&gt;&nbsp;&nbsp;<small><a href="#drocfg_uid">&lt;-</a></small></h3>
<p>The <code>&lt;uid&gt;</code> element specifies a User ID (UID) for the daemon process (if run as root).</p>
<ul>
<li>
<b>Cardinality:</b> 0 or 1 </li>
<li>
<b>Parents:</b> <code>&lt;daemon&gt;</code> </li>
<li>
<b>Children:</b> None. </li>
</ul>
<p><b>XML</b> <b>Attributes:</b> None.</p>
<p><b>Example:</b> </p>
<pre class="fragment">&lt;tnw-gateway version="1.0"&gt;
  &lt;daemon&gt;
    &lt;uid&gt;5555&lt;/uid&gt;
  &lt;/daemon&gt;
      . . .
      . . .
&lt;/tnw-gateway&gt;
</pre><p><br />
 </p>
<h3><a class="anchor" id="drocfg_gid"></a>
&lt;gid&gt;&nbsp;&nbsp;<small><a href="#drocfg_gid">&lt;-</a></small></h3>
<p>The <code>&lt;gid&gt;</code> element specifies a Group ID (GID) for daemon process (if run as root).</p>
<ul>
<li>
<b>Cardinality:</b> 0 or 1 </li>
<li>
<b>Parents:</b> <code>&lt;daemon&gt;</code> </li>
<li>
<b>Children:</b> None. </li>
</ul>
<p><b>XML</b> <b>Attributes:</b> None.</p>
<p><b>Example:</b> </p>
<pre class="fragment">&lt;tnw-gateway version="1.0"&gt;
  &lt;daemon&gt;
    &lt;gid&gt;1234&lt;/gid&gt;
  &lt;/daemon&gt;
      . . .
      . . .
&lt;/tnw-gateway&gt;
</pre><p><br />
 </p>
<h3><a class="anchor" id="drocfg_pidfile"></a>
&lt;pidfile&gt;&nbsp;&nbsp;<small><a href="#drocfg_pidfile">&lt;-</a></small></h3>
<p>The <code>&lt;pidfile&gt;</code> element contains the pathname for daemon process ID (PID) file.</p>
<ul>
<li>
<b>Cardinality:</b> 0 or 1 </li>
<li>
<b>Parents:</b> <code>&lt;daemon&gt;</code> </li>
<li>
<b>Children:</b> None. </li>
</ul>
<p><b>XML</b> <b>Attributes:</b> </p>
<table class="doxtable">
<tr>
<th>XML Attribute </th><th>Description </th><th>Default Value </th></tr>
<tr>
<td>xml:space </td><td>How whitespace is handled. <b>"default"</b> trims leading and trailing whitespace (e.g., tabs, spaces, linefeeds, etc.), and compresses multiple whitespace characters into a single space character. <b>"preserve"</b> preserves the whitespace exactly as read. </td><td><b>"default"</b> </td></tr>
</table>
<p><b>Example:</b> </p>
<pre class="fragment">&lt;tnw-gateway version="1.0"&gt;
  &lt;daemon&gt;
    &lt;pidfile&gt;/configs/stores/umestored1/umestored.pid&lt;/pidfile&gt;  . . .
  &lt;/daemon&gt;
      . . .
      . . .
&lt;/tnw-gateway&gt;
</pre><p><br />
 </p>
<h3><a class="anchor" id="drocfg_lbm-license-file"></a>
&lt;lbm-license-file&gt;&nbsp;&nbsp;<small><a href="#drocfg_lbm-license-file">&lt;-</a></small></h3>
<p>The <code>&lt;lbm-license-file&gt;</code> element specifies the UM license file's pathname/filename.</p>
<ul>
<li>
<b>Cardinality:</b> 0 or 1 </li>
<li>
<b>Parents:</b> <code>&lt;daemon&gt;</code> </li>
<li>
<b>Children:</b> None. </li>
</ul>
<p><b>XML</b> <b>Attributes:</b> </p>
<table class="doxtable">
<tr>
<th>XML Attribute </th><th>Description </th><th>Default Value </th></tr>
<tr>
<td>xml:space </td><td>How whitespace is handled. <b>"default"</b> trims leading and trailing whitespace (e.g., tabs, spaces, linefeeds, etc.), and compresses multiple whitespace characters into a single space character. <b>"preserve"</b> preserves the whitespace exactly as read. </td><td><b>"default"</b> </td></tr>
</table>
<p><b>Example:</b> </p>
<pre class="fragment">&lt;tnw-gateway version="1.0"&gt;
  &lt;daemon&gt;
      . . .
    &lt;lbm-license-file&gt;lic0014.txt&lt;/lbm-license-file&gt;
      . . .
  &lt;/daemon&gt;
      . . .
      . . .
&lt;/tnw-gateway&gt;
</pre><p><br />
 </p>
<h3><a class="anchor" id="drocfg_topicmap"></a>
&lt;topicmap/&gt;&nbsp;&nbsp;<small><a href="#drocfg_topicmap">&lt;-</a></small></h3>
<p>The <code>&lt;topicmap&gt;</code> element specifies characteristics of the internal topic maps.</p>
<ul>
<li>
<b>Cardinality:</b> 0 or 1 </li>
<li>
<b>Parents:</b> <code>&lt;daemon&gt;</code> </li>
<li>
<b>Children:</b> None. </li>
</ul>
<p><b>XML</b> <b>Attributes:</b> </p>
<table class="doxtable">
<tr>
<th>XML Attribute </th><th>Description </th><th>Default Value </th></tr>
<tr>
<td>hash-function </td><td>Topic map hash function to use. Choices are:<br />
 classic - A "classic" good string hash function. Works best when topic names have a constant prefix with a changing suffix.<br />
 djb2 - The Dan Bernstein algorithm from comp.lang.c. Works best when topic names have a changing prefix with a constant suffix.<br />
 sdbm - sdbm database library (used in Berkeley DB). A useful alternative to djb2.<br />
 murmur2 - Good all-around hash function by Austin Appleby. Best for medium to long topic strings.<br />
 </td><td>murmur2 </td></tr>
<tr>
<td>size </td><td>Number of entries in the topic map. </td><td>131111 </td></tr>
</table>
<p><b>Example:</b> </p>
<pre class="fragment">&lt;tnw-gateway version="1.0"&gt;
  &lt;daemon&gt;
    &lt; topicmap hash-function="djb2" size="5000"&gt;
  &lt;/daemon&gt;
      . . .
      . . .
&lt;/tnw-gateway&gt;
</pre><p><br />
 </p>
<h3><a class="anchor" id="drocfg_patternmap"></a>
&lt;patternmap/&gt;&nbsp;&nbsp;<small><a href="#drocfg_patternmap">&lt;-</a></small></h3>
<p>The <code>&lt;patternmap&gt;</code> element determines characteristics of the internal pattern maps.</p>
<ul>
<li>
<b>Cardinality:</b> 0 or 1 </li>
<li>
<b>Parents:</b> <code>&lt;daemon&gt;</code> </li>
<li>
<b>Children:</b> None. </li>
</ul>
<p><b>XML</b> <b>Attributes:</b> </p>
<table class="doxtable">
<tr>
<th>XML Attribute </th><th>Description </th><th>Default Value </th></tr>
<tr>
<td>hash-function </td><td>Pattern map hash function to use. Choices are <br />
classic - A "classic" good string hash function. Works best when topic names have a constant prefix with a changing suffix. <br />
djb2 - The Dan Bernstein algorithm from comp.lang.c. Works best when topic names have a changing prefix with a constant suffix. <br />
sdbm - sdbm database library (used in Berkeley DB). A useful alternative to djb2. <br />
murmur2 - Good all-around hash function by Austin Appleby. Best for medium to long topic strings. </td><td>murmur2 </td></tr>
<tr>
<td>size </td><td>Number of entries in the pattern map. </td><td>131111 </td></tr>
</table>
<p><b>Example:</b> </p>
<pre class="fragment">&lt;tnw-gateway version="1.0"&gt;
  &lt;daemon&gt;
    &lt;patternmap hash-function="djb2" size="5000"&gt;
  &lt;/daemon&gt;
      . . .
      . . .
&lt;/tnw-gateway&gt;
</pre><p><br />
 </p>
<h3><a class="anchor" id="drocfg_monitor"></a>
&lt;monitor&gt;&nbsp;&nbsp;<small><a href="#drocfg_monitor">&lt;-</a></small></h3>
<p>The <code>&lt;monitor&gt;</code> element is a container for monitoring configuration elements.</p>
<ul>
<li>
<b>Cardinality:</b> 0 or 1 </li>
<li>
<b>Parents:</b> <code>&lt;daemon&gt;</code> </li>
<li>
<b>Children:</b> <code>&lt;transport-module&gt;</code>?, <code>&lt;format-module&gt;</code> </li>
</ul>
<p><b>XML</b> <b>Attributes:</b> </p>
<table class="doxtable">
<tr>
<th>XML Attribute </th><th>Description </th><th>Default Value </th></tr>
<tr>
<td>interval </td><td>Monitoring interval, in seconds. 0 disables monitoring. </td><td>0 </td></tr>
</table>
<p><b>Example:</b> </p>
<pre class="fragment">&lt;tnw-gateway version="1.0"&gt;
  &lt;daemon&gt;
    &lt;monitor interval=30&gt;
      &lt;transport-module module="lbm" options="config=/cfgs/TD1.cfg;topic=stats"/&gt;
      &lt;format-module options="config=/cfgs/TD1.cfg;separator=|"/&gt;
    &lt;/monitor&gt;  
  &lt;/daemon&gt;
      . . .
      . . .
&lt;/tnw-gateway&gt;
</pre><p><br />
 </p>
<h3><a class="anchor" id="drocfg_transport-module"></a>
&lt;transport-module/&gt;&nbsp;&nbsp;<small><a href="#drocfg_transport-module">&lt;-</a></small></h3>
<p>The <code>&lt;transport-module&gt;</code> element specifies characteristics about the monitoring transport module used.</p>
<ul>
<li>
<b>Cardinality:</b> 0 or 1 </li>
<li>
<b>Parents:</b> <code>&lt;monitor&gt;</code> </li>
<li>
<b>Children:</b> None. </li>
</ul>
<p><b>XML</b> <b>Attributes:</b> </p>
<table class="doxtable">
<tr>
<th>XML Attribute </th><th>Description </th><th>Default Value </th></tr>
<tr>
<td>module </td><td>Specifies the monitoring transport module to use. Choices are lbm (LBMMON UMS), lbmsnmp (LBMMON SNMP), or udp (LBMMON UDP). </td><td>lbm </td></tr>
<tr>
<td>options </td><td>Option string to be passed to the transport module. Available options are config (configuration path and filename), topic (the topic name to use for sending and receiving statistics; default /29west/statistics), and wctopic (for monitor receivers only, a wildcard pattern). </td><td>none </td></tr>
</table>
<p><b>Example:</b> </p>
<pre class="fragment">&lt;tnw-gateway version="1.0"&gt;
  &lt;daemon&gt;
    &lt;monitor interval=30&gt;
      &lt;transport-module module="lbm" options="config=/cfgs/TD1.cfg;topic=stats"/&gt;
      &lt;format-module options="config=/cfgs/TD1.cfg;separator=|"/&gt;
    &lt;/monitor&gt;  
  &lt;/daemon&gt;
      . . .
      . . .
&lt;/tnw-gateway&gt;
</pre><p><b>Example</b> 2:</p>
<p>Monitoring configuration options can be supplied directly in the XML.</p>
<pre class="fragment">&lt;tnw-gateway version="1.0"&gt;
  &lt;daemon&gt;
    &lt;monitor interval=30&gt;
      &lt;transport-module module="lbm"
        options="config=/cfgs/TD1.cfg;context|request_tcp_interface=192.168.135.131"/&gt;
      &lt;format-module options="config=/cfgs/TD1.cfg;separator=|"/&gt;
    &lt;/monitor&gt;  
  &lt;/daemon&gt;
      . . .
      . . .
&lt;/tnw-gateway&gt;
</pre><p><br />
 </p>
<h3><a class="anchor" id="drocfg_format-module"></a>
&lt;format-module/&gt;&nbsp;&nbsp;<small><a href="#drocfg_format-module">&lt;-</a></small></h3>
<p>The <code>&lt;format-module&gt;</code> element provides specifics about the monitoring format module.</p>
<ul>
<li>
<b>Cardinality:</b> 0 or 1 </li>
<li>
<b>Parents:</b> <code>&lt;monitor&gt;</code> </li>
<li>
<b>Children:</b> None. </li>
</ul>
<p><b>XML</b> <b>Attributes:</b> </p>
<table class="doxtable">
<tr>
<th>XML Attribute </th><th>Description </th><th>Default Value </th></tr>
<tr>
<td>module </td><td>Currently, the one available choice is csv (comma-separated variables). </td><td>csv </td></tr>
<tr>
<td>options </td><td>Option string to be passed to the format module. The one available option is separator (field separator character). </td><td>none </td></tr>
</table>
<p><b>Example:</b> </p>
<pre class="fragment">&lt;tnw-gateway version="1.0"&gt;
  &lt;daemon&gt;
    &lt;monitor interval=30&gt;
      &lt;transport-module module="lbm" options="config=/cfgs/TD1.cfg;topic=stats"/&gt;
      &lt;format-module options="separator=|"/&gt;
    &lt;/monitor&gt;  
  &lt;/daemon&gt;
      . . .
      . . .
&lt;/tnw-gateway&gt;
</pre><p><br />
 </p>
<h3><a class="anchor" id="drocfg_web-monitor"></a>
&lt;web-monitor&gt;&nbsp;&nbsp;<small><a href="#drocfg_web-monitor">&lt;-</a></small></h3>
<p>The <code>&lt;web-monitor&gt;</code> element identifies the address for the web monitor, in the form of interface:port. You can use "*" to specify the local host.</p>
<p>Omit this element to disable the web monitor.</p>
<p>See <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.12_RC3/doc/Gateway/design.tag:../../Design/" href="../../Design/fundamentalconcepts.html#webmonsecurity">Webmon Security</a> for important security information.</p>
<ul>
<li>
<b>Cardinality:</b> 0 or 1 </li>
<li>
<b>Parents:</b> <code>&lt;daemon&gt;</code> </li>
<li>
<b>Children:</b> None. </li>
</ul>
<p><b>XML</b> <b>Attributes:</b> </p>
<table class="doxtable">
<tr>
<th>XML Attribute </th><th>Description </th><th>Default Value </th></tr>
<tr>
<td>xml:space </td><td>How whitespace is handled. <b>"default"</b> trims leading and trailing whitespace (e.g., tabs, spaces, linefeeds, etc.), and compresses multiple whitespace characters into a single space character. <b>"preserve"</b> preserves the whitespace exactly as read. </td><td><b>"default"</b> </td></tr>
</table>
<p><b>Example:</b> </p>
<pre class="fragment">&lt;tnw-gateway version="1.0"&gt;
  &lt;daemon&gt;
    &lt;web-monitor&gt;*:21001&lt;/web-monitor&gt;
  &lt;/daemon&gt;
      . . .
      . . .
&lt;/tnw-gateway&gt;
</pre><p><br />
 </p>
<h3><a class="anchor" id="drocfg_daemon-monitor"></a>
&lt;daemon-monitor&gt;&nbsp;&nbsp;<small><a href="#drocfg_daemon-monitor">&lt;-</a></small></h3>
<p>The <code>&lt;daemon-monitor&gt;</code> element configures the Daemon Statistics feature. See <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.12_RC3/doc/Gateway/design.tag:../../Design/" href="../../Design/umobjects.html#daemonstatistics">Daemon Statistics</a> for general information on Daemon Statistics.</p>
<ul>
<li>
<b>Cardinality:</b> 0 or 1 </li>
<li>
<b>Parents:</b> <code>&lt;daemon&gt;</code> </li>
<li>
<b>Children:</b> <code>&lt;lbm-config&gt;</code>?, <code>&lt;publishing-interval&gt;</code>?, <code>&lt;remote-snapshot-request&gt;</code>?, <code>&lt;remote-config-changes-request&gt;</code>? </li>
</ul>
<p><b>XML</b> <b>Attributes:</b> </p>
<table class="doxtable">
<tr>
<th>XML Attribute </th><th>Description </th><th>Default Value </th></tr>
<tr>
<td>topic </td><td>Topic name to use for publishing Daemon Statistics. </td><td><code>"tnwgd.monitor"</code> </td></tr>
</table>
<p><b>Example:</b> </p>
<pre class="fragment">&lt;tnw-gateway version="1.0"&gt;
  &lt;daemon&gt;
    &lt;daemon-monitor topic="umrouter.1"&gt;
      &lt;lbm-config&gt;/path/umrouter_monitor.cfg&lt;/lbm-config&gt;
      &lt;publishing-interval&gt;
        . . .
      &lt;/publishing-interval&gt;
      &lt;remote-snapshot-request allow="1"/&gt;
      &lt;remote-config-changes-request allow="0"/&gt;
    &lt;/daemon-monitor&gt;
  &lt;/daemon&gt;
      . . .
      . . .
&lt;/tnw-gateway&gt;
</pre><p><br />
 </p>
<h3><a class="anchor" id="drocfg_remote-snapshot-request"></a>
&lt;remote-snapshot-request&gt;&nbsp;&nbsp;<small><a href="#drocfg_remote-snapshot-request">&lt;-</a></small></h3>
<p>The <code>&lt;remote-snapshot-request&gt;</code> element configures whether the UM Router will respond to monitoring apps requests to send on-demand snapshots of daemon statistics. See <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.12_RC3/doc/Gateway/design.tag:../../Design/" href="../../Design/umobjects.html#daemonstatistics">Daemon Statistics</a> for general information on Daemon Statistics.</p>
<ul>
<li>
<b>Cardinality:</b> 0 or 1 </li>
<li>
<b>Parents:</b> <code>&lt;daemon-monitor&gt;</code> </li>
<li>
<b>Children:</b> none. </li>
</ul>
<p><b>XML</b> <b>Attributes:</b> </p>
<table class="doxtable">
<tr>
<th>XML Attribute </th><th>Description </th><th>Default Value </th></tr>
<tr>
<td>allow </td><td>Enable or disable snapshot requests. 1 means that the UM Router will respond to snapshot requests. 0 means that snapshot requests will be ignored. </td><td><code>0</code> </td></tr>
</table>
<p><b>Example:</b> </p>
<pre class="fragment">&lt;tnw-gateway version="1.0"&gt;
  &lt;daemon&gt;
    &lt;daemon-monitor topic="umrouter.1"&gt;
      &lt;lbm-config&gt;/path/umrouter_monitor.cfg&lt;/lbm-config&gt;
      &lt;publishing-interval&gt;
        . . .
      &lt;/publishing-interval&gt;
      &lt;remote-snapshot-request allow="1"/&gt;
      &lt;remote-config-changes-request allow="0"/&gt;
    &lt;/daemon-monitor&gt;
  &lt;/daemon&gt;
      . . .
      . . .
&lt;/tnw-gateway&gt;
</pre><p><br />
 </p>
<h3><a class="anchor" id="drocfg_remote-config-changes-request"></a>
&lt;remote-config-changes-request&gt;&nbsp;&nbsp;<small><a href="#drocfg_remote-config-changes-request">&lt;-</a></small></h3>
<p>The <code>&lt;remote-config-changes-request&gt;</code> element configures whether the UM Router will respond to monitoring apps requests to change the rate at which Daemon Statistics messages are published. See <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.12_RC3/doc/Gateway/design.tag:../../Design/" href="../../Design/umobjects.html#daemonstatistics">Daemon Statistics</a> for general information on Daemon Statistics.</p>
<ul>
<li>
<b>Cardinality:</b> 0 or 1 </li>
<li>
<b>Parents:</b> <code>&lt;daemon-monitor&gt;</code> </li>
<li>
<b>Children:</b> none. </li>
</ul>
<p><b>XML</b> <b>Attributes:</b> </p>
<table class="doxtable">
<tr>
<th>XML Attribute </th><th>Description </th><th>Default Value </th></tr>
<tr>
<td>allow </td><td>Enable or disable change requests. 1 means that the UM Router will respond to change requests. 0 means that change requests will be ignored. </td><td><code>0</code> </td></tr>
</table>
<p><b>Example:</b> </p>
<pre class="fragment">&lt;tnw-gateway version="1.0"&gt;
  &lt;daemon&gt;
    &lt;daemon-monitor topic="umrouter.1"&gt;
      &lt;lbm-config&gt;/path/umrouter_monitor.cfg&lt;/lbm-config&gt;
      &lt;publishing-interval&gt;
        . . .
      &lt;/publishing-interval&gt;
      &lt;remote-snapshot-request allow="1"/&gt;
      &lt;remote-config-changes-request allow="0"/&gt;
    &lt;/daemon-monitor&gt;
  &lt;/daemon&gt;
      . . .
      . . .
&lt;/tnw-gateway&gt;
</pre><p><br />
 </p>
<h3><a class="anchor" id="drocfg_xml-config"></a>
&lt;xml-config&gt;&nbsp;&nbsp;<small><a href="#drocfg_xml-config">&lt;-</a></small></h3>
<p>The <code>&lt;xml-config&gt;</code> element specifies the UM XML configuration file.</p>
<ul>
<li>
<b>Cardinality:</b> 0 or 1 </li>
<li>
<b>Parents:</b> <code>&lt;daemon&gt;</code> </li>
<li>
<b>Children:</b> None. </li>
</ul>
<p><b>XML</b> <b>Attributes:</b> </p>
<table class="doxtable">
<tr>
<th>XML Attribute </th><th>Description </th><th>Default Value </th></tr>
<tr>
<td>xml:space </td><td>How whitespace is handled. <b>"default"</b> trims leading and trailing whitespace (e.g., tabs, spaces, linefeeds, etc.), and compresses multiple whitespace characters into a single space character. <b>"preserve"</b> preserves the whitespace exactly as read. </td><td><b>"default"</b> </td></tr>
</table>
<p><b>Example:</b> </p>
<pre class="fragment">&lt;tnw-gateway version="1.0"&gt;
  &lt;daemon&gt;
    &lt;xml-config&gt;configfile.xml&lt;/xml-config&gt;
  &lt;/daemon&gt;
      . . .
      . . .
&lt;/tnw-gateway&gt;
</pre><p><br />
 </p>
<h3><a class="anchor" id="drocfg_route-info"></a>
&lt;route-info&gt;&nbsp;&nbsp;<small><a href="#drocfg_route-info">&lt;-</a></small></h3>
<p>The <code>&lt;route-info&gt;</code> element lets you set control parameters for UM Router initial route setup (or reroute) behavior.</p>
<ul>
<li>
<b>Cardinality:</b> 0 or 1 </li>
<li>
<b>Parents:</b> <code>&lt;daemon&gt;</code> </li>
<li>
<b>Children:</b> None. </li>
</ul>
<p><b>XML</b> <b>Attributes:</b> </p>
<table class="doxtable">
<tr>
<th>XML Attribute </th><th>Description </th><th>Default Value </th></tr>
<tr>
<td>propagation-interval </td><td>The time interval between route information messages that the UM Router sends to other UM Routers </td><td>1000 </td></tr>
<tr>
<td>check-interval </td><td>How often the UM Router checks to see if a route information message needs to be sent, a UM Router has timed out, and/or the routes need to be recalculated. </td><td>750 </td></tr>
<tr>
<td>timeout </td><td>How long a UM Router waits after receiving no route information messages from another UM Router before determining that that UM Router is out of service or unreachable. </td><td>4000 </td></tr>
<tr>
<td>max-hop-count </td><td>The maximum number of UM Routers a route information message can traverse before being discarded. </td><td>100 </td></tr>
<tr>
<td>xml:space </td><td>How whitespace is handled. <b>"default"</b> trims leading and trailing whitespace (e.g., tabs, spaces, linefeeds, etc.), and compresses multiple whitespace characters into a single space character. <b>"preserve"</b> preserves the whitespace exactly as read. </td><td><b>"default"</b> </td></tr>
</table>
<p><b>Example:</b> </p>
<pre class="fragment">&lt;tnw-gateway version="1.0"&gt;
  &lt;daemon&gt;
    &lt;route-info propagation-interval="1000" check-interval="750" timeout="4000" max-hop-count="100"/&gt;
  &lt;/daemon&gt;
      . . .
      . . .
&lt;/tnw-gateway&gt;
</pre><p><br />
 </p>
<h3><a class="anchor" id="drocfg_route-recalculation"></a>
&lt;route-recalculation&gt;&nbsp;&nbsp;<small><a href="#drocfg_route-recalculation">&lt;-</a></small></h3>
<p>The <code>&lt;route-recalculation&gt;</code> element lets you set timing parameters for UM Router rerouting route calculation behavior.</p>
<ul>
<li>
<b>Cardinality:</b> 0 or 1 </li>
<li>
<b>Parents:</b> <code>&lt;daemon&gt;</code> </li>
<li>
<b>Children:</b> None. </li>
</ul>
<p><b>XML</b> <b>Attributes:</b> </p>
<table class="doxtable">
<tr>
<th>XML Attribute </th><th>Description </th><th>Default Value </th></tr>
<tr>
<td>backoff-interval </td><td>How long, in milliseconds, the UM Router waits after the last detected change in topology before initiating a route recalculation </td><td>5000 </td></tr>
<tr>
<td>warning-interval </td><td>How long, in milliseconds, the UM Router waits before warning that a route recalculation is being held up due to a non-converging topology. </td><td>10000 </td></tr>
<tr>
<td>xml:space </td><td>How whitespace is handled. <b>"default"</b> trims leading and trailing whitespace (e.g., tabs, spaces, linefeeds, etc.), and compresses multiple whitespace characters into a single space character. <b>"preserve"</b> preserves the whitespace exactly as read. </td><td><b>"default"</b> </td></tr>
</table>
<p><b>Example:</b> </p>
<pre class="fragment">&lt;tnw-gateway version="1.0"&gt;
  &lt;daemon&gt;
    &lt;route-recalculation backoff-interval="5000" warning-interval="10000"/&gt;
  &lt;/daemon&gt;
      . . .
      . . .
&lt;/tnw-gateway&gt;
</pre><p><br />
 </p>
<h3><a class="anchor" id="drocfg_portals"></a>
&lt;portals&gt;&nbsp;&nbsp;<small><a href="#drocfg_portals">&lt;-</a></small></h3>
<p>The <code>&lt;portals&gt;</code> element is a container for all endpoint and peer portal configuration information.</p>
<ul>
<li>
<b>Cardinality:</b> 0 or 1 </li>
<li>
<b>Parents:</b> <code>&lt;daemon&gt;</code> </li>
<li>
<b>Children:</b> (<code>&lt;endpoint&gt;</code> | <code>&lt;peer&gt;</code>)+ </li>
</ul>
<p><b>XML</b> <b>Attributes:None</b>.</p>
<p><b>Example:</b> </p>
<pre class="fragment">&lt;tnw-gateway version="1.0"&gt;
      . . .
      . . .
  &lt;portals&gt;
    &lt;endpoint&gt;
      . . .
      . . .
    &lt;/endpoint&gt;
  &lt;/portals&gt;
&lt;/tnw-gateway&gt;
</pre><p><br />
 </p>
<h3><a class="anchor" id="drocfg_endpoint"></a>
&lt;endpoint&gt;&nbsp;&nbsp;<small><a href="#drocfg_endpoint">&lt;-</a></small></h3>
<p>The <code>&lt;endpoint&gt;</code> element is a container element for all configuration options of a single endpoint portal.</p>
<ul>
<li>
<b>Cardinality:0</b> or more </li>
<li>
<b>Parents:</b> <code>&lt;portals&gt;</code> </li>
<li>
<b>Children:</b> <code>&lt;name&gt;</code>, <code>&lt;domain-id&gt;</code>, <code>&lt;cost&gt;</code>?, <code>&lt;source-deletion-delay&gt;</code>?, <code>&lt;max-queue&gt;</code>?, <code>&lt;smart-batch&gt;</code>?, <code>&lt;lbm-config&gt;</code>?, <code>&lt;lbm-attributes&gt;</code>?, <code>&lt;acl&gt;</code>?, <code>&lt;topic-resolution&gt;</code>?, <code>&lt;late-join&gt;</code>?, <code>&lt;topic-purge&gt;</code>?, <code>&lt;topic-interest-generate&gt;</code>?, <code>&lt;topic-domain-activity&gt;</code>?, <code>&lt;pattern-purge&gt;</code>?, <code>&lt;pattern-interest-generate&gt;</code>?, <code>&lt;pattern-domain-activity&gt;</code>?, <code>&lt;remote-topic&gt;</code>?, <code>&lt;remote-pattern&gt;</code>?, <code>&lt;source-context-name&gt;</code>?, <code>&lt;receiver-context-name&gt;</code>?, <code>&lt;sqn-window&gt;</code>?, <code>&lt;context-query&gt;</code>?, <code>&lt;publishing-interval&gt;</code>? </li>
</ul>
<p><b>XML</b> <b>Attributes:</b> None.</p>
<p><b>Example:</b> </p>
<pre class="fragment">&lt;tnw-gateway version="1.0"&gt;
  &lt;daemon&gt;
      . . .
      . . .
  &lt;/daemon&gt;
  &lt;portals&gt;
    &lt;endpoint&gt;
      &lt;name&gt;E1&lt;/name&gt;
      &lt;domain-id&gt;1&lt;/domain-id&gt;
      &lt;cost&gt;1&lt;/cost&gt;
      . . .
      . . .
    &lt;/endpoint&gt;
  &lt;/portals&gt;
&lt;/tnw-gateway&gt;
</pre><p><br />
 </p>
<h3><a class="anchor" id="drocfg_domain-id"></a>
&lt;domain-id&gt;&nbsp;&nbsp;<small><a href="#drocfg_domain-id">&lt;-</a></small></h3>
<p>The <code>&lt;domain-id&gt;</code> element identifies the TRD for this endpoint portal. It must be unique within the UM Router (which means that for any TRD, you can assign only one endpoint portal per UM Router). Also, all endpoints interfacing a given TRD must have the same <code>&lt;domain-id&gt;</code> value.</p>
<ul>
<li>
<b>Cardinality:1</b> </li>
<li>
<b>Parents:</b> <code>&lt;endpoint&gt;</code> </li>
<li>
<b>Children:</b> None. </li>
</ul>
<p><b>XML</b> <b>Attributes:</b> None.</p>
<p><b>Example:</b> </p>
<pre class="fragment">&lt;tnw-gateway version="1.0"&gt;
  &lt;daemon&gt;
      . . .
      . . .
  &lt;/daemon&gt;
  &lt;portals&gt;
    &lt;endpoint&gt;
      &lt;name&gt;E1&lt;/name&gt;
      &lt;domain-id&gt;1&lt;/domain-id&gt;
      &lt;cost&gt;1&lt;/cost&gt;
      . . .
      . . .
    &lt;/endpoint&gt;
  &lt;/portals&gt;
&lt;/tnw-gateway&gt;
</pre><p><br />
 </p>
<h3><a class="anchor" id="drocfg_cost"></a>
&lt;cost&gt;&nbsp;&nbsp;<small><a href="#drocfg_cost">&lt;-</a></small></h3>
<p>The <code>&lt;cost&gt;</code> element assigns a positive non-zero integer cost to the portal. The default value is 1.</p>
<ul>
<li>
<b>Cardinality:</b> 0 or 1 </li>
<li>
<b>Parents:</b> <code>&lt;endpoint&gt;</code> <code>&lt;peer&gt;</code> </li>
<li>
<b>Children:</b> None. </li>
</ul>
<p><b>XML</b> <b>Attributes:</b> None.</p>
<p><b>Example:</b> </p>
<pre class="fragment">&lt;tnw-gateway version="1.0"&gt;
  &lt;daemon&gt;
      . . .
      . . .
  &lt;/daemon&gt;
  &lt;portals&gt;
    &lt;endpoint&gt;
      &lt;name&gt;E1&lt;/name&gt;
      &lt;domain-id&gt;1&lt;/domain-id&gt;
      &lt;cost&gt;25&lt;/cost&gt;
      . . .
      . . .
    &lt;/endpoint&gt;
  &lt;/portals&gt;
&lt;/tnw-gateway&gt;
</pre><p><br />
 </p>
<h3><a class="anchor" id="drocfg_source-deletion-delay"></a>
&lt;source-deletion-delay&gt;&nbsp;&nbsp;<small><a href="#drocfg_source-deletion-delay">&lt;-</a></small></h3>
<p>The <code>&lt;source-deletion-delay&gt;</code> element sets the time in milliseconds to wait after a route map change occurs before deleting a proxy source. Such a route map change could be due to failure of a UM Router or link within a network.</p>
<ul>
<li>
<b>Cardinality:</b> 0 or 1 </li>
<li>
<b>Parents:</b> <code>&lt;endpoint&gt;</code> </li>
<li>
<b>Children:</b> None. </li>
</ul>
<p><b>XML</b> <b>Attributes:</b> None.</p>
<p><b>Example:</b> </p>
<pre class="fragment">&lt;tnw-gateway version="1.0"&gt;
  &lt;daemon&gt;
      . . .
      . . .
  &lt;/daemon&gt;
  &lt;portals&gt;
    &lt;endpoint&gt;
      &lt;name&gt;E1&lt;/name&gt;
      &lt;domain-id&gt;1&lt;/domain-id&gt;
      &lt;source-deletion-delay&gt;500&lt;/source-deletion-delay&gt;
      . . .
      . . .
    &lt;/endpoint&gt;
  &lt;/portals&gt;
&lt;/tnw-gateway&gt;
</pre><p><br />
 </p>
<h3><a class="anchor" id="drocfg_max-queue"></a>
&lt;max-queue&gt;&nbsp;&nbsp;<small><a href="#drocfg_max-queue">&lt;-</a></small></h3>
<p>The <code>&lt;max-queue&gt;</code> element sets the maximum buffer size for blocking messages. If not specified, this defaults to 1000000 bytes.</p>
<ul>
<li>
<b>Cardinality:</b> 0 or 1 </li>
<li>
<b>Parents:</b> <code>&lt;endpoint&gt;</code> <code>&lt;peer&gt;</code> </li>
<li>
<b>Children:</b> None. </li>
</ul>
<p><b>XML</b> <b>Attributes:</b> None.</p>
<p><b>Example:</b> </p>
<pre class="fragment">&lt;tnw-gateway version="1.0"&gt;
  &lt;daemon&gt;
      . . .
      . . .
  &lt;/daemon&gt;
  &lt;portals&gt;
    &lt;endpoint&gt;
      &lt;name&gt;E1&lt;/name&gt;
      &lt;domain-id&gt;1&lt;/domain-id&gt;
      &lt;max-queue&gt;500000&lt;/max-queue&gt;
      . . .
      . . .
    &lt;/endpoint&gt;
  &lt;/portals&gt;
&lt;/tnw-gateway&gt;
</pre><p><br />
 </p>
<h3><a class="anchor" id="drocfg_lbm-config"></a>
&lt;lbm-config&gt;&nbsp;&nbsp;<small><a href="#drocfg_lbm-config">&lt;-</a></small></h3>
<p>The <code>&lt;lbm-config&gt;</code> element specifies the UM configuration file that contains configuration options associated with this portal.</p>
<ul>
<li>
<b>Cardinality:</b> 0 or 1 </li>
<li>
<b>Parents:</b> <code>&lt;endpoint&gt;</code> <code>&lt;peer&gt;</code> </li>
<li>
<b>Children:</b> None. </li>
</ul>
<p><b>XML</b> <b>Attributes:</b> </p>
<table class="doxtable">
<tr>
<th>XML Attribute </th><th>Description </th><th>Default Value </th></tr>
<tr>
<td>xml:space </td><td>How whitespace is handled. <b>"default"</b> trims leading and trailing whitespace (e.g., tabs, spaces, linefeeds, etc.), and compresses multiple whitespace characters into a single space character. <b>"preserve"</b> preserves the whitespace exactly as read. </td><td><b>"default"</b> </td></tr>
</table>
<p><b>Example:</b> </p>
<pre class="fragment">&lt;tnw-gateway version="1.0"&gt;
      . . .
      . . .
  &lt;portals&gt;
    &lt;endpoint&gt;
      &lt;name&gt;E2&lt;/name&gt;
      &lt;domain-id&gt;1&lt;/domain-id&gt;
      &lt;lbm-config&gt;/path/endpoint2.cfg&lt;/lbm-config&gt;
      . . .
      . . .
    &lt;/endpoint&gt;
  &lt;/portals&gt;
&lt;/tnw-gateway&gt;
</pre><p><br />
 </p>
<h3><a class="anchor" id="drocfg_lbm-attributes"></a>
&lt;lbm-attributes&gt;&nbsp;&nbsp;<small><a href="#drocfg_lbm-attributes">&lt;-</a></small></h3>
<p>The <code>&lt;lbm-attributes&gt;</code> element is a container for individual UM-option-setting elements. It lets you set individual UM attributes without referencing a UM configuration file. These values override any values set via files referenced by <code>&lt;lbm-config&gt;</code>.</p>
<ul>
<li>
<b>Cardinality:</b> 0 or 1 </li>
<li>
<b>Parents:</b> <code>&lt;endpoint&gt;</code> <code>&lt;peer&gt;</code> </li>
<li>
<b>Children:</b> <code>&lt;option&gt;</code>+ </li>
</ul>
<p><b>XML</b> <b>Attributes:None</b>.</p>
<p><b>Example:</b> </p>
<pre class="fragment">&lt;tnw-gateway version="1.0"&gt;
      . . .
      . . .
  &lt;portals&gt;
    &lt;endpoint&gt;
      &lt;name&gt;E2&lt;/name&gt;
      &lt;domain-id&gt;1&lt;/domain-id&gt;
      &lt;lbm-attributes&gt;
        &lt;option scope="context" name="request_tcp_interface" value="10.28.5.5" /&gt;
        &lt;option scope="context" name="response_tcp_interface" value="127.0.0.1" /&gt;
      &lt;/lbm-attributes&gt;      . . .
      . . .
    &lt;/endpoint&gt;
  &lt;/portals&gt;
&lt;/tnw-gateway&gt;
</pre><p><br />
 </p>
<h3><a class="anchor" id="drocfg_option"></a>
&lt;option/&gt;&nbsp;&nbsp;<small><a href="#drocfg_option">&lt;-</a></small></h3>
<p>The <code>&lt;option&gt;</code> element lets you set an individual UM configuration option without referencing a UM configuration file. This value overrides any values set via files referenced by <code>&lt;lbm-config&gt;</code>.</p>
<ul>
<li>
<b>Cardinality:</b> 1 or more </li>
<li>
<b>Parents:</b> <code>&lt;lbm-attributes&gt;</code> </li>
<li>
<b>Children:</b> None. </li>
</ul>
<p><b>XML</b> <b>Attributes:</b> </p>
<table class="doxtable">
<tr>
<th>XML Attribute </th><th>Description </th><th>Default Value </th></tr>
<tr>
<td>scope </td><td>The type of object to which an option can apply. Possible scopes are context, source, receiver, wildcard_receiver, event_queue, and hfx. </td><td>none </td></tr>
<tr>
<td>name </td><td>The name of the option. </td><td>none </td></tr>
<tr>
<td>value </td><td>The value of the option. </td><td>none </td></tr>
</table>
<dl class="section note"><dt>Note</dt><dd>Some UM options specify interfaces, which can be done by supplying the device name of the interface. Special care must be taken when supplying device names. See <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.12_RC3/doc/Gateway/config.tag:../../Config/" href="../../Config/generalconfigurationguidelines.html#interfacedevicenamesandxml">Interface Device Names and XML</a> for details.</dd></dl>
<p><b>Example:</b> </p>
<pre class="fragment">&lt;tnw-gateway version="1.0"&gt;
      . . .
      . . .
  &lt;portals&gt;
    &lt;endpoint&gt;
      &lt;name&gt;E2&lt;/name&gt;
      &lt;domain-id&gt;1&lt;/domain-id&gt;
      &lt;lbm-attributes&gt;
        &lt;option scope="context" name="request_tcp_interface" value="127.0.0.1" /&gt;
        &lt;option scope="context" name="response_tcp_interface" value="10.28.5.5" /&gt;
      &lt;/lbm-attributes&gt;      . . .
      . . .
    &lt;/endpoint&gt;
  &lt;/portals&gt;
&lt;/tnw-gateway&gt;
</pre><p><br />
 </p>
<h3><a class="anchor" id="drocfg_acl"></a>
&lt;acl&gt;&nbsp;&nbsp;<small><a href="#drocfg_acl">&lt;-</a></small></h3>
<p>The <code>&lt;acl&gt;</code> element contains elements (inbound and outbound ACEs) that describe how an ACL (Access Control List) filters messages.</p>
<ul>
<li>
<b>Cardinality:</b> 0 or 1 </li>
<li>
<b>Parents:</b> <code>&lt;endpoint&gt;</code> <code>&lt;peer&gt;</code> </li>
<li>
<b>Children:</b> <code>&lt;inbound&gt;</code>?, <code>&lt;outbound&gt;</code>? </li>
</ul>
<p><b>XML</b> <b>Attributes:</b> None.</p>
<p><b>Example:</b> </p>
<pre class="fragment">&lt;tnw-gateway version="1.0"&gt;
      . . .
      . . .
  &lt;portals&gt;
    &lt;endpoint&gt;
      &lt;acl&gt;
        &lt;inbound&gt;
          &lt;ace&gt;
            &lt;topic&gt;AAA&lt;/topic&gt;
          &lt;/ace&gt;
        &lt;/inbound&gt;
      &lt;/acl&gt;
    &lt;/endpoint&gt;
  &lt;/portals&gt;
&lt;/tnw-gateway&gt;
</pre><p><br />
 </p>
<h3><a class="anchor" id="drocfg_inbound"></a>
&lt;inbound&gt;&nbsp;&nbsp;<small><a href="#drocfg_inbound">&lt;-</a></small></h3>
<p>The <code>&lt;inbound&gt;</code> element is a container for ACE elements, to separate inbound ACEs from outbound ACEs.</p>
<ul>
<li>
<b>Cardinality:</b> 0 or 1 </li>
<li>
<b>Parents:</b> <code>&lt;acl&gt;</code> </li>
<li>
<b>Children:</b> <code>&lt;ace&gt;</code>+ </li>
</ul>
<p><b>XML</b> <b>Attributes:</b> None.</p>
<p><b>Example:</b> </p>
<pre class="fragment">&lt;tnw-gateway version="1.0"&gt;
      . . .
      . . .
  &lt;portals&gt;
    &lt;endpoint&gt;
      &lt;acl&gt;
        &lt;inbound&gt;
          &lt;ace&gt;
            &lt;topic&gt;AAA&lt;/topic&gt;
          &lt;/ace&gt;
        &lt;/inbound&gt;
      &lt;/acl&gt;
    &lt;/endpoint&gt;
  &lt;/portals&gt;
&lt;/tnw-gateway&gt;
</pre><p><br />
 </p>
<h3><a class="anchor" id="drocfg_outbound"></a>
&lt;outbound&gt;&nbsp;&nbsp;<small><a href="#drocfg_outbound">&lt;-</a></small></h3>
<p>The <code>&lt;outbound&gt;</code> element is a container for ACE elements, to separate outbound ACEs from inbound ACEs.</p>
<ul>
<li>
<b>Cardinality:</b> 0 or 1 </li>
<li>
<b>Parents:</b> <code>&lt;acl&gt;</code> </li>
<li>
<b>Children:</b> <code>&lt;ace&gt;</code>+ </li>
</ul>
<p><b>XML</b> <b>Attributes:</b> None.</p>
<p><b>Example:</b> </p>
<pre class="fragment">&lt;tnw-gateway version="1.0"&gt;
      . . .
      . . .
  &lt;portals&gt;
    &lt;endpoint&gt;
      &lt;acl&gt;
        &lt;outbound&gt;
          &lt;ace&gt;
            &lt;pcre-pattern&gt;A[AB]A&lt;/pcre-pattern&gt;
          &lt;/ace&gt;
        &lt;/outbound&gt;
      &lt;/acl&gt;
    &lt;/endpoint&gt;
  &lt;/portals&gt;
&lt;/tnw-gateway&gt;
</pre><p><br />
 </p>
<h3><a class="anchor" id="drocfg_ace"></a>
&lt;ace&gt;&nbsp;&nbsp;<small><a href="#drocfg_ace">&lt;-</a></small></h3>
<p>Within an inbound or outbound ACL, you can have one or more <code>&lt;ace&gt;</code> elements. Each ACE (Access Control Entry). lets you match and accept or reject messages based on access control condition elements, which are the elements contained within an <code>&lt;ace&gt;</code> element.</p>
<ul>
<li>
<b>Cardinality:</b> 0 or 1 </li>
<li>
<b>Parents:</b> <code>&lt;inbound&gt;</code> <code>&lt;outbound&gt;</code> </li>
<li>
<b>Children:</b> (<code>&lt;topic&gt;</code> | <code>&lt;pcre-pattern&gt;</code> | <code>&lt;regex-pattern&gt;</code> | <code>&lt;transport&gt;</code> | <code>&lt;source-ip&gt;</code> | <code>&lt;multicast-group&gt;</code> | <code>&lt;udp-source-port&gt;</code> | <code>&lt;udp-destination-port&gt;</code> | <code>&lt;tcp-source-port&gt;</code> | <code>&lt;xport-id&gt;</code>)+ </li>
</ul>
<p><b>XML</b> <b>Attributes:</b> </p>
<table class="doxtable">
<tr>
<th>XML Attribute </th><th>Description </th><th>Default Value </th></tr>
<tr>
<td>match </td><td>This required attribute determines what to do with matched messages. Possible values are accept or reject. </td><td>none </td></tr>
</table>
<p><b>Example:</b> </p>
<pre class="fragment">&lt;tnw-gateway version="1.0"&gt;
  &lt;portals&gt;
    &lt;endpoint&gt;
      &lt;name&gt;LAN1&lt;/name&gt;
      &lt;lbm-config&gt;lan1.cfg&lt;/lbm-config&gt;
      &lt;domain-id&gt;1&lt;/domain-id&gt;
        &lt;acl&gt;
          &lt;inbound&gt;
            &lt;ace match="accept"&gt;
              &lt;topic&gt;ABC&lt;/topic&gt;
            &lt;/ace&gt;
            &lt;ace match="accept"&gt;
              &lt;topic&gt;DEF&lt;/topic&gt;
              &lt;transport value=lbt-rm comparison=eq/&gt;
            &lt;/ace&gt;
            &lt;ace match="accept"&gt;
              &lt;topic&gt;GHI&lt;/topic&gt;
            &lt;/ace&gt;
          &lt;/inbound&gt;
        &lt;/acl&gt;
    &lt;/endpoint&gt;
      . . .
      . . .
</pre><p><br />
 </p>
<h3><a class="anchor" id="drocfg_topic"></a>
&lt;topic&gt;&nbsp;&nbsp;<small><a href="#drocfg_topic">&lt;-</a></small></h3>
<p>The <code>&lt;topic&gt;</code> element defines a condition used in an ACE. Specifically, this is a match pattern for a topic name.</p>
<ul>
<li>
<b>Cardinality:</b> 0 or more </li>
<li>
<b>Parents:</b> <code>&lt;ace&gt;</code> (inbound only) </li>
<li>
<b>Children:</b> None. </li>
</ul>
<p><b>XML</b> <b>Attributes:</b> </p>
<table class="doxtable">
<tr>
<th>XML Attribute </th><th>Description </th><th>Default Value </th></tr>
<tr>
<td>xml:space </td><td>How whitespace is handled. <b>"default"</b> trims leading and trailing whitespace (e.g., tabs, spaces, linefeeds, etc.), and compresses multiple whitespace characters into a single space character. <b>"preserve"</b> preserves the whitespace exactly as read. </td><td><b>"default"</b> </td></tr>
</table>
<p><b>Example:</b> </p>
<pre class="fragment">            &lt;ace match="accept"&gt;
              &lt;topic&gt;ABC&lt;/topic&gt;
            &lt;/ace&gt;
</pre><p><br />
 </p>
<h3><a class="anchor" id="drocfg_pcre-pattern"></a>
&lt;pcre-pattern&gt;&nbsp;&nbsp;<small><a href="#drocfg_pcre-pattern">&lt;-</a></small></h3>
<p>The <code>&lt;pcre-pattern&gt;</code> element defines a condition used in an ACE. Specifically, this is a match pattern for a PCRE regular expression matched in the message.</p>
<ul>
<li>
<b>Cardinality:</b> 0 or more </li>
<li>
<b>Parents:</b> <code>&lt;ace&gt;</code> </li>
<li>
<b>Children:</b> None. </li>
</ul>
<p><b>XML</b> <b>Attributes:</b> </p>
<table class="doxtable">
<tr>
<th>XML Attribute </th><th>Description </th><th>Default Value </th></tr>
<tr>
<td>xml:space </td><td>How whitespace is handled. <b>"default"</b> trims leading and trailing whitespace (e.g., tabs, spaces, linefeeds, etc.), and compresses multiple whitespace characters into a single space character. <b>"preserve"</b> preserves the whitespace exactly as read. </td><td><b>"default"</b> </td></tr>
</table>
<p><b>Example:</b> </p>
<pre class="fragment">            &lt;ace match="accept"&gt;
              &lt;pcre-pattern&gt;ABC&lt;/pcre-pattern&gt;
            &lt;/ace&gt;
</pre><p><br />
 </p>
<h3><a class="anchor" id="drocfg_regex-pattern"></a>
&lt;regex-pattern&gt;&nbsp;&nbsp;<small><a href="#drocfg_regex-pattern">&lt;-</a></small></h3>
<p>The <code>&lt;regex-pattern&gt;</code> element defines a condition used in an ACE. Specifically, this is a match pattern for a RegEx regular expression matched in the message.</p>
<p>This element is deprecated.</p>
<ul>
<li>
<b>Cardinality:</b> 0 or more </li>
<li>
<b>Parents:</b> <code>&lt;ace&gt;</code> </li>
<li>
<b>Children:</b> None. </li>
</ul>
<p><b>XML</b> <b>Attributes:</b> </p>
<table class="doxtable">
<tr>
<th>XML Attribute </th><th>Description </th><th>Default Value </th></tr>
<tr>
<td>xml:space </td><td>How whitespace is handled. <b>"default"</b> trims leading and trailing whitespace (e.g., tabs, spaces, linefeeds, etc.), and compresses multiple whitespace characters into a single space character. <b>"preserve"</b> preserves the whitespace exactly as read. </td><td><b>"default"</b> </td></tr>
</table>
<p><b>Example:</b> </p>
<pre class="fragment">            &lt;ace match="accept"&gt;
              &lt;regex-pattern&gt;ABC&lt;/regex-pattern&gt;
            &lt;/ace&gt;
</pre><p><br />
 </p>
<h3><a class="anchor" id="drocfg_transport"></a>
&lt;transport/&gt;&nbsp;&nbsp;<small><a href="#drocfg_transport">&lt;-</a></small></h3>
<p>The <code>&lt;transport&gt;</code> element defines a condition used in an ACE. Specifically, this is a match pattern for a UM transport type.</p>
<ul>
<li>
<b>Cardinality:</b> 0 or more </li>
<li>
<b>Parents:</b> <code>&lt;ace&gt;</code> (inbound only) </li>
<li>
<b>Children:</b> None. </li>
</ul>
<p><b>XML</b> <b>Attributes:</b> </p>
<table class="doxtable">
<tr>
<th>XML Attribute </th><th>Description </th><th>Default Value </th></tr>
<tr>
<td>comparison </td><td>Defines a match condition. Choices are equal (eq or equal) or not equal (ne or notequal). </td><td>none </td></tr>
<tr>
<td>value </td><td>The value to be matched via the comparison. Choices are: tcp, lbt-rm, lbt-ru, lbt-ipc. Also acceptable are lbtrm, lbtru, lbtipc. </td><td>none </td></tr>
</table>
<p><b>Example:</b> </p>
<pre class="fragment">            &lt;ace match="accept"&gt;
              &lt;transport comparison="equal" value="lbtrm"/&gt;
            &lt;/ace&gt;
</pre><p><br />
 </p>
<h3><a class="anchor" id="drocfg_source-ip"></a>
&lt;source-ip/&gt;&nbsp;&nbsp;<small><a href="#drocfg_source-ip">&lt;-</a></small></h3>
<p>The <code>&lt;source-ip&gt;</code> element defines a condition used in an ACE. Specifically, this is a match pattern for the message source IP address. This applies only to TCP, LBT-RM, and LBT-RU transports.</p>
<ul>
<li>
<b>Cardinality:</b> 0 or more </li>
<li>
<b>Parents:</b> <code>&lt;ace&gt;</code> (inbound only) </li>
<li>
<b>Children:</b> None. </li>
</ul>
<p><b>XML</b> <b>Attributes:</b> </p>
<table class="doxtable">
<tr>
<th>XML Attribute </th><th>Description </th><th>Default Value </th></tr>
<tr>
<td>comparison </td><td>Defines a match condition. Choices are equal (eq or equal) or not equal (ne or notequal), less than (lt or lessthan), less than or equal (le or lessthanequal), greater than (gt or greaterthan), or greater than or equal (ge or greaterthanequal </td><td>none </td></tr>
<tr>
<td>value </td><td>The source IP address as a dotted-decimal value to be matched via the comparison. </td><td>none </td></tr>
</table>
<p><b>Example:</b> </p>
<pre class="fragment">            &lt;ace match="accept"&gt;
              &lt;source-ip comparison="equal" value="127.0.0.1"/&gt;
            &lt;/ace&gt;
</pre><p><br />
 </p>
<h3><a class="anchor" id="drocfg_multicast-group"></a>
&lt;multicast-group/&gt;&nbsp;&nbsp;<small><a href="#drocfg_multicast-group">&lt;-</a></small></h3>
<p>The <code>&lt;multicast-group&gt;</code> element defines a condition used in an ACE. Specifically, this is a match pattern for the message's multicast group address. This applies only to LBT-RM transports.</p>
<ul>
<li>
<b>Cardinality:</b> 0 or more </li>
<li>
<b>Parents:</b> <code>&lt;ace&gt;</code> (inbound only) </li>
<li>
<b>Children:</b> None. </li>
</ul>
<p><b>XML</b> <b>Attributes:</b> </p>
<table class="doxtable">
<tr>
<th>XML Attribute </th><th>Description </th><th>Default Value </th></tr>
<tr>
<td>comparison </td><td>Defines a match condition. Choices are equal (eq or equal) or not equal (ne or notequal), less than (lt or lessthan), less than or equal (le or lessthanequal), greater than (gt or greaterthan), or greater than or equal (ge or greaterthanequal </td><td>none </td></tr>
<tr>
<td>value </td><td>The multicast group IP address as a dotted-decimal value to be matched via the comparison. </td><td>none </td></tr>
</table>
<p><b>Example:</b> </p>
<pre class="fragment">            &lt;ace match="accept"&gt;
              &lt;multicast-group comparison="equal" value="239.101.1.1"/&gt;
            &lt;/ace&gt;
</pre><p><br />
 </p>
<h3><a class="anchor" id="drocfg_udp-source-port"></a>
&lt;udp-source-port/&gt;&nbsp;&nbsp;<small><a href="#drocfg_udp-source-port">&lt;-</a></small></h3>
<p>The <code>&lt;udp-source-port&gt;</code> element defines a condition used in an ACE. Specifically, this is a match pattern for the message's UDP source port number. This applies only to LBT-RM and LBT-RU transports.</p>
<ul>
<li>
<b>Cardinality:</b> 0 or more </li>
<li>
<b>Parents:</b> <code>&lt;ace&gt;</code> (inbound only) </li>
<li>
<b>Children:</b> None. </li>
</ul>
<p><b>XML</b> <b>Attributes:</b> </p>
<table class="doxtable">
<tr>
<th>XML Attribute </th><th>Description </th><th>Default Value </th></tr>
<tr>
<td>comparison </td><td>Defines a match condition. Choices are equal (eq or equal) or not equal (ne or notequal), less than (lt or lessthan), less than or equal (le or lessthanequal), greater than (gt or greaterthan), or greater than or equal (ge or greaterthanequal </td><td>none </td></tr>
<tr>
<td>value </td><td>The UDP source port number. </td><td>none </td></tr>
</table>
<p><b>Example:</b> </p>
<pre class="fragment">            &lt;ace match="accept"&gt;
              &lt;udp-source-port comparison="equal" value="1234"/&gt;
            &lt;/ace&gt;
</pre><p><br />
 </p>
<h3><a class="anchor" id="drocfg_udp-destination-port"></a>
&lt;udp-destination-port/&gt;&nbsp;&nbsp;<small><a href="#drocfg_udp-destination-port">&lt;-</a></small></h3>
<p>The <code>&lt;udp-destination-port&gt;</code> element defines a condition used in an ACE. Specifically, this is a match pattern for the message's UDP destination port number. This applies only to LBT-RM transports.</p>
<ul>
<li>
<b>Cardinality:</b> 0 or more </li>
<li>
<b>Parents:</b> <code>&lt;ace&gt;</code> (inbound only) </li>
<li>
<b>Children:</b> None. </li>
</ul>
<p><b>XML</b> <b>Attributes:</b> </p>
<table class="doxtable">
<tr>
<th>XML Attribute </th><th>Description </th><th>Default Value </th></tr>
<tr>
<td>comparison </td><td>Defines a match condition. Choices are equal (eq or equal) or not equal (ne or notequal), less than (lt or lessthan), less than or equal (le or lessthanequal), greater than (gt or greaterthan), or greater than or equal (ge or greaterthanequal </td><td>none </td></tr>
<tr>
<td>value </td><td>The UDP destination port number. </td><td>none </td></tr>
</table>
<p><b>Example:</b> </p>
<pre class="fragment">            &lt;ace match="accept"&gt;
              &lt;udp-destination-port comparison="equal" value="1234"/&gt;
            &lt;/ace&gt;
</pre><p><br />
 </p>
<h3><a class="anchor" id="drocfg_tcp-source-port"></a>
&lt;tcp-source-port/&gt;&nbsp;&nbsp;<small><a href="#drocfg_tcp-source-port">&lt;-</a></small></h3>
<p>The <code>&lt;tcp-source-port&gt;</code> element defines a condition used in an ACE. Specifically, this is a match pattern for the message's TCP source port number. This applies only to TCP transports.</p>
<ul>
<li>
<b>Cardinality:</b> 0 or more </li>
<li>
<b>Parents:</b> <code>&lt;ace&gt;</code> (inbound only) </li>
<li>
<b>Children:</b> None. </li>
</ul>
<p><b>XML</b> <b>Attributes:</b> </p>
<table class="doxtable">
<tr>
<th>XML Attribute </th><th>Description </th><th>Default Value </th></tr>
<tr>
<td>comparison </td><td>Defines a match condition. Choices are equal (eq or equal) or not equal (ne or notequal), less than (lt or lessthan), less than or equal (le or lessthanequal), greater than (gt or greaterthan), or greater than or equal (ge or greaterthanequal </td><td>none </td></tr>
<tr>
<td>value </td><td>The TCP source port number. </td><td>none </td></tr>
</table>
<p><b>Example:</b> </p>
<pre class="fragment">            &lt;ace match="accept"&gt;
              &lt;tcp-source-port comparison="equal" value="1234"/&gt;
            &lt;/ace&gt;
</pre><p><br />
 </p>
<h3><a class="anchor" id="drocfg_xport-id"></a>
&lt;xport-id/&gt;&nbsp;&nbsp;<small><a href="#drocfg_xport-id">&lt;-</a></small></h3>
<p>The <code>&lt;xport-id&gt;</code> element defines a condition used in an ACE. Specifically, this is a match pattern for the message's xport ID number. This applies only to LBT-IPC transports.</p>
<ul>
<li>
<b>Cardinality:</b> 0 or more </li>
<li>
<b>Parents:</b> <code>&lt;ace&gt;</code> (inbound only) </li>
<li>
<b>Children:</b> None. </li>
</ul>
<p><b>XML</b> <b>Attributes:</b> </p>
<table class="doxtable">
<tr>
<th>XML Attribute </th><th>Description </th><th>Default Value </th></tr>
<tr>
<td>comparison </td><td>Defines a match condition. Choices are equal (eq or equal) or not equal (ne or notequal), less than (lt or lessthan), less than or equal (le or lessthanequal), greater than (gt or greaterthan), or greater than or equal (ge or greaterthanequal </td><td>none </td></tr>
<tr>
<td>value </td><td>The xport ID number. </td><td>none </td></tr>
</table>
<p><b>Example:</b> </p>
<pre class="fragment">            &lt;ace match="accept"&gt;
              &lt;xport-id comparison="equal" value="1234"/&gt;
            &lt;/ace&gt;
</pre><p><br />
 </p>
<h3><a class="anchor" id="drocfg_topic-resolution"></a>
&lt;topic-resolution&gt;&nbsp;&nbsp;<small><a href="#drocfg_topic-resolution">&lt;-</a></small></h3>
<p>The <code>&lt;topic-resolution&gt;</code> element is a container for UM Router topic resolution behavior options.</p>
<ul>
<li>
<b>Cardinality:</b> 0 or 1 </li>
<li>
<b>Parents:</b> <code>&lt;endpoint&gt;</code> </li>
<li>
<b>Children:</b> <code>&lt;topic-use-query&gt;</code>?, <code>&lt;pattern-use-query&gt;</code>?, <code>&lt;remote-topic-interest&gt;</code>?, <code>&lt;remote-pattern-interest&gt;</code>?, <code>&lt;domain-route&gt;</code>?, <code>&lt;initial-request&gt;</code>? </li>
</ul>
<p><b>XML</b> <b>Attributes:</b> None.</p>
<p><b>Example:</b> </p>
<pre class="fragment">&lt;tnw-gateway version="1.0"&gt;
      . . .
      . . .
  &lt;portals&gt;
    &lt;endpoint&gt;
      &lt;topic-resolution&gt;
        &lt;initial-request&gt;
          &lt;rate-limit/&gt;
        &lt;/initial-request&gt;
      &lt;/topic-resolution&gt;
    &lt;/endpoint&gt;
  &lt;/portals&gt;
&lt;/tnw-gateway&gt;
</pre><p><br />
 </p>
<h3><a class="anchor" id="drocfg_initial-request"></a>
&lt;initial-request/&gt;&nbsp;&nbsp;<small><a href="#drocfg_initial-request">&lt;-</a></small></h3>
<p>The <code>&lt;initial-request&gt;</code> element sets interval and duration for initial topic resolution requests.</p>
<ul>
<li>
<b>Cardinality:</b> 0 or 1 </li>
<li>
<b>Parents:</b> <code>&lt;topic-resolution&gt;</code> </li>
<li>
<b>Children:</b> None. </li>
</ul>
<p><b>XML</b> <b>Attributes:</b> </p>
<table class="doxtable">
<tr>
<th>XML Attribute </th><th>Description </th><th>Default Value </th></tr>
<tr>
<td>duration </td><td>The minimum duration for which the initial topic resolution requests are sent. Before changing the value of this option, please contact Informatica Support. </td><td>10 </td></tr>
<tr>
<td>periodic-interval </td><td>The interval at which the initial topic resolution requests are sent. Before changing the value of this option, please contact Informatica Support </td><td>1000 </td></tr>
</table>
<p><b>Example:</b> </p>
<pre class="fragment">&lt;tnw-gateway version="1.0"&gt;
      . . .
      . . .
  &lt;portals&gt;
    &lt;endpoint&gt;
      &lt;topic-resolution&gt;
        &lt;initial-request duration="15" periodic-interval="800"/&gt;
        &lt;/topic-use-query&gt;
      &lt;/topic-resolution&gt;
    &lt;/endpoint&gt;
  &lt;/portals&gt;
&lt;/tnw-gateway&gt;
</pre><p><br />
 </p>
<h3><a class="anchor" id="drocfg_topic-use-query"></a>
&lt;topic-use-query&gt;&nbsp;&nbsp;<small><a href="#drocfg_topic-use-query">&lt;-</a></small></h3>
<p>The <code>&lt;topic-use-query&gt;</code> element sets parameters for when and how often this endpoint portal sends topic use queries.</p>
<ul>
<li>
<b>Cardinality:</b> 0 or 1 </li>
<li>
<b>Parents:</b> <code>&lt;topic-resolution&gt;</code> </li>
<li>
<b>Children:</b> <code>&lt;rate-limit&gt;</code> </li>
</ul>
<p><b>XML</b> <b>Attributes:</b> </p>
<table class="doxtable">
<tr>
<th>XML Attribute </th><th>Description </th><th>Default Value </th></tr>
<tr>
<td>max </td><td>Maximum number of topic use queries to send for a given topic, each separated by the timeout value before giving up and removing the topic from the topic list. Before changing the value of this option, please contact Informatica Support. </td><td>5 </td></tr>
<tr>
<td>periodic-interval </td><td>The interval, in milliseconds, between periodic topic use queries being sent for each topic the portal has interest in. Before changing the value of this option, please contact Informatica Support. </td><td>300000 </td></tr>
<tr>
<td>timeout </td><td>The maximum time, in milliseconds, to wait for a topic use response. Before changing the value of this option, please contact Informatica Support. </td><td>3000 </td></tr>
</table>
<p><b>Example:</b> </p>
<pre class="fragment">&lt;tnw-gateway version="1.0"&gt;
      . . .
      . . .
  &lt;portals&gt;
    &lt;endpoint&gt;
      &lt;topic-resolution&gt;
        &lt;topic-use-query max="6" periodic-interval="250000" timeout="4000"&gt;
          &lt;rate-limit/&gt;
        &lt;/topic-use-query&gt;
      &lt;/topic-resolution&gt;
    &lt;/endpoint&gt;
  &lt;/portals&gt;
&lt;/tnw-gateway&gt;
</pre><p><br />
 </p>
<h3><a class="anchor" id="drocfg_rate-limit"></a>
&lt;rate-limit/&gt;&nbsp;&nbsp;<small><a href="#drocfg_rate-limit">&lt;-</a></small></h3>
<p>The <code>&lt;rate-limit&gt;</code> element sets rate limits for topic resolution data sent over the network.</p>
<p>You can set rate limits individually for each of the following topic resolution message types:</p>
<ul>
<li>
topic use query </li>
<li>
pattern use query </li>
<li>
topic interest </li>
<li>
pattern interest </li>
<li>
domain route </li>
</ul>
<ul>
<li>
<b>Cardinality:</b> 0 or 1 </li>
<li>
<b>Parents:</b> <code>&lt;topic-use-query&gt;</code> <code>&lt;pattern-use-query&gt;</code> <code>&lt;remote-topic-interest&gt;</code> <code>&lt;remote-pattern-interest&gt;</code> <code>&lt;domain-route&gt;</code> </li>
<li>
<b>Children:</b> None. </li>
</ul>
<p><b>XML</b> <b>Attributes:</b> You can set a limit in bps, objects per second, or both. The UM Router begins limiting when the lower of these attributes is reached.</p>
<table class="doxtable">
<tr>
<th>XML Attribute </th><th>Description </th><th>Default Value </th></tr>
<tr>
<td>bps </td><td>The limit in Bits per Second that data will be sent on the network. A value of 0 disables limiting by bits per second. Before changing the value of this option, please contact Informatica Support. </td><td>For use queries and interest messages: 500000 <br />
For domain route messages: 0 </td></tr>
<tr>
<td>objects-per-second </td><td>The limit in Objects per Second that data will be sent on the network. A value of 0 disables limiting by objects per second. Before changing the value of this option, please contact Informatica Support. </td><td>For use queries:500 <br />
For interest messages: 0 <br />
For domain route messages: 50 </td></tr>
</table>
<p><b>Example:</b> </p>
<pre class="fragment">&lt;tnw-gateway version="1.0"&gt;
      . . .
      . . .
  &lt;portals&gt;
    &lt;endpoint&gt;
      &lt;topic-resolution&gt;
        &lt;topic-use-query max="6" periodic-interval="250000" timeout="4000"/&gt;
          &lt;rate-limit bps="550000" objects-per-second="0"/&gt;
        &lt;/topic-use-query&gt;
      &lt;/topic-resolution&gt;
    &lt;/endpoint&gt;
  &lt;/portals&gt;
&lt;/tnw-gateway&gt;
</pre><p><br />
 </p>
<h3><a class="anchor" id="drocfg_pattern-use-query"></a>
&lt;pattern-use-query&gt;&nbsp;&nbsp;<small><a href="#drocfg_pattern-use-query">&lt;-</a></small></h3>
<p>The <code>&lt;pattern-use-query&gt;</code> element sets parameters for when and how often this endpoint portal sends pattern use queries.</p>
<ul>
<li>
<b>Cardinality:</b> 0 or 1 </li>
<li>
<b>Parents:</b> <code>&lt;topic-resolution&gt;</code> </li>
<li>
<b>Children:</b> <code>&lt;rate-limit&gt;</code> </li>
</ul>
<p><b>XML</b> <b>Attributes:</b> </p>
<table class="doxtable">
<tr>
<th>XML Attribute </th><th>Description </th><th>Default Value </th></tr>
<tr>
<td>max </td><td>Maximum number of pattern use queries to send for a given pattern, each separated by the timeout value before giving up and removing the topic from the topic list. Before changing the value of this option, please contact Informatica Support. </td><td>5 </td></tr>
<tr>
<td>periodic-interval </td><td>The interval, in milliseconds, between periodic pattern use queries being sent for each pattern the portal has interest in. Before changing the value of this option, please contact Informatica Support. </td><td>300000 </td></tr>
<tr>
<td>timeout </td><td>The maximum time, in milliseconds, to wait for a pattern use response. Before changing the value of this option, please contact Informatica Support. </td><td>3000 </td></tr>
</table>
<p><b>Example:</b> </p>
<pre class="fragment">&lt;tnw-gateway version="1.0"&gt;
      . . .
      . . .
  &lt;portals&gt;
    &lt;endpoint&gt;
      &lt;topic-resolution&gt;
        &lt;pattern-use-query max="6" periodic-interval="250000" timeout="4000"&gt;
          &lt;rate-limit/&gt;
        &lt;/topic-use-query&gt;
      &lt;/topic-resolution&gt;
    &lt;/endpoint&gt;
  &lt;/portals&gt;
&lt;/tnw-gateway&gt;
</pre><p><br />
 </p>
<h3><a class="anchor" id="drocfg_remote-topic-interest"></a>
&lt;remote-topic-interest&gt;&nbsp;&nbsp;<small><a href="#drocfg_remote-topic-interest">&lt;-</a></small></h3>
<p>The <code>&lt;remote-topic-interest&gt;</code> element sets parameters for when and how often this endpoint portal sends topic interest messages.</p>
<ul>
<li>
<b>Cardinality:</b> 0 or 1 </li>
<li>
<b>Parents:</b> <code>&lt;topic-resolution&gt;</code> </li>
<li>
<b>Children:</b> <code>&lt;rate-limit&gt;</code> </li>
</ul>
<p><b>XML</b> <b>Attributes:</b> </p>
<table class="doxtable">
<tr>
<th>XML Attribute </th><th>Description </th><th>Default Value </th></tr>
<tr>
<td>min-interval </td><td>The minimum interval, in milliseconds, between topic interest messages being sent for each topic the portal has interest in. </td><td>1000 </td></tr>
<tr>
<td>max-interval </td><td>The maximum interval, in milliseconds, between topic interest messages being sent for each topic the portal has interest in. </td><td>60000 </td></tr>
</table>
<p><b>Example:</b> </p>
<pre class="fragment">&lt;tnw-gateway version="1.0"&gt;
      . . .
      . . .
  &lt;portals&gt;
    &lt;endpoint&gt;
      &lt;topic-resolution&gt;
        &lt;remote-topic-interest min-interval="1000" max-interval="90000"&gt;
          &lt;rate-limit/&gt;
        &lt;/remote-topic-interest&gt;
      &lt;/topic-resolution&gt;
    &lt;/endpoint&gt;
  &lt;/portals&gt;
&lt;/tnw-gateway&gt;
</pre><p><br />
 </p>
<h3><a class="anchor" id="drocfg_remote-pattern-interest"></a>
&lt;remote-pattern-interest&gt;&nbsp;&nbsp;<small><a href="#drocfg_remote-pattern-interest">&lt;-</a></small></h3>
<p>The <code>&lt;remote-pattern-interest&gt;</code> element sets parameters for when and how often this endpoint portal sends pattern interest messages.</p>
<ul>
<li>
<b>Cardinality:</b> 0 or 1 </li>
<li>
<b>Parents:</b> <code>&lt;topic-resolution&gt;</code> </li>
<li>
<b>Children:</b> <code>&lt;rate-limit&gt;</code> </li>
</ul>
<p><b>XML</b> <b>Attributes:</b> </p>
<table class="doxtable">
<tr>
<th>XML Attribute </th><th>Description </th><th>Default Value </th></tr>
<tr>
<td>min-interval </td><td>The minimum interval, in milliseconds, between pattern interest messages being sent for each pattern the portal has interest in. </td><td>1000 </td></tr>
<tr>
<td>max-interval </td><td>The maximum interval, in milliseconds, between pattern interest messages being sent for each pattern the portal has interest in. </td><td>60000 </td></tr>
</table>
<p><b>Example:</b> </p>
<pre class="fragment">&lt;tnw-gateway version="1.0"&gt;
      . . .
      . . .
  &lt;portals&gt;
    &lt;endpoint&gt;
      &lt;topic-resolution&gt;
        &lt;remote-pattern-interest min-interval="1000" max-interval="90000"&gt;
          &lt;rate-limit/&gt;
        &lt;/remote-pattern-interest&gt;
      &lt;/topic-resolution&gt;
    &lt;/endpoint&gt;
  &lt;/portals&gt;
&lt;/tnw-gateway&gt;
</pre><p><br />
 </p>
<h3><a class="anchor" id="drocfg_domain-route"></a>
&lt;domain-route&gt;&nbsp;&nbsp;<small><a href="#drocfg_domain-route">&lt;-</a></small></h3>
<p>The <code>&lt;domain-route&gt;</code> element sets maximum and minimum limits for the interval between periodic domain route messages being sent for each remote domain that the portal is servicing.</p>
<ul>
<li>
<b>Cardinality:</b> 0 or 1 </li>
<li>
<b>Parents:</b> <code>&lt;topic-resolution&gt;</code> </li>
<li>
<b>Children:</b> <code>&lt;rate-limit&gt;</code> </li>
</ul>
<p><b>XML</b> <b>Attributes:</b> </p>
<table class="doxtable">
<tr>
<th>XML Attribute </th><th>Description </th><th>Default Value </th></tr>
<tr>
<td>min-interval </td><td>The minimum interval, in milliseconds, between domain route messages being sent for each domain. </td><td>100 </td></tr>
<tr>
<td>max-interval </td><td>The maximum interval, in milliseconds, between domain route messages being sent for each domain. </td><td>1000 </td></tr>
</table>
<p><b>Example:</b> </p>
<pre class="fragment">&lt;tnw-gateway version="1.0"&gt;
      . . .
      . . .
  &lt;portals&gt;
    &lt;endpoint&gt;
      &lt;topic-resolution&gt;
        &lt;domain-route min-interval="100" max-interval="1000"&gt;
          &lt;rate-limit bps="0" objects-per-second="50"/&gt;
        &lt;/domain-route&gt;
      &lt;/topic-resolution&gt;
    &lt;/endpoint&gt;
  &lt;/portals&gt;
&lt;/tnw-gateway&gt;
</pre><p><br />
 </p>
<h3><a class="anchor" id="drocfg_remote-topic"></a>
&lt;remote-topic/&gt;&nbsp;&nbsp;<small><a href="#drocfg_remote-topic">&lt;-</a></small></h3>
<p>The <code>&lt;remote-topic&gt;</code> element determines timings and limits for determination of continued topic interest at this portal.</p>
<ul>
<li>
<b>Cardinality:</b> 0 or 1 </li>
<li>
<b>Parents:</b> <code>&lt;endpoint&gt;</code> <code>&lt;peer&gt;</code> </li>
<li>
<b>Children:</b> None. </li>
</ul>
<p><b>XML</b> <b>Attributes:</b> </p>
<table class="doxtable">
<tr>
<th>XML Attribute </th><th>Description </th><th>Default Value </th></tr>
<tr>
<td>check-interval </td><td>Interval (in milliseconds) between checking individual topics for continued interest. Before changing the value of this option, please contact Informatica Support. </td><td>90000 </td></tr>
<tr>
<td>max-topics </td><td>Maximum number of topics to check at a time. Before changing the value of this option, please contact Informatica Support. </td><td>100 </td></tr>
<tr>
<td>timeout </td><td>Minimum time (in milliseconds) remote interest for a topic must be refreshed before interest is removed for that domain. Before changing the value of this option, please contact Informatica Support. </td><td>300000 </td></tr>
</table>
<p><b>Example:</b> </p>
<pre class="fragment">&lt;tnw-gateway version="1.0"&gt;
      . . .
      . . .
  &lt;portals&gt;
    &lt;endpoint&gt;
      &lt;remote-topic check-interval="80000" max-topics="80" timeout="250000"/&gt;
    &lt;/endpoint&gt;                 
  &lt;/portals&gt;
&lt;/tnw-gateway&gt;
</pre><p><br />
 </p>
<h3><a class="anchor" id="drocfg_remote-pattern"></a>
&lt;remote-pattern/&gt;&nbsp;&nbsp;<small><a href="#drocfg_remote-pattern">&lt;-</a></small></h3>
<p>The <code>&lt;remote-pattern&gt;</code> element determines timings and limits for determination of continued pattern interest at this portal.</p>
<ul>
<li>
<b>Cardinality:</b> 0 or 1 </li>
<li>
<b>Parents:</b> <code>&lt;endpoint&gt;</code> <code>&lt;peer&gt;</code> </li>
<li>
<b>Children:</b> None. </li>
</ul>
<p><b>XML</b> <b>Attributes:</b> </p>
<table class="doxtable">
<tr>
<th>XML Attribute </th><th>Description </th><th>Default Value </th></tr>
<tr>
<td>check-interval </td><td>Interval (in milliseconds) between checking individual patterns for continued interest. Before changing the value of this option, please contact Informatica Support. </td><td>90000 </td></tr>
<tr>
<td>max-topics </td><td>Maximum number of patterns to check at a time. Before changing the value of this option, please contact Informatica Support. </td><td>100 </td></tr>
<tr>
<td>timeout </td><td>Minimum time (in milliseconds) remote interest for a pattern must be refreshed before interest is removed for that domain. Before changing the value of this option, please contact Informatica Support. </td><td>300000 </td></tr>
</table>
<p><b>Example:</b> </p>
<pre class="fragment">&lt;tnw-gateway version="1.0"&gt;
      . . .
      . . .
  &lt;portals&gt;
    &lt;endpoint&gt;
      &lt;remote-pattern check-interval="80000" max-topics="80" timeout="250000"/&gt;
    &lt;/endpoint&gt;
  &lt;/portals&gt;
&lt;/tnw-gateway&gt;
</pre><p><br />
 </p>
<h3><a class="anchor" id="drocfg_source-context-name"></a>
&lt;source-context-name&gt;&nbsp;&nbsp;<small><a href="#drocfg_source-context-name">&lt;-</a></small></h3>
<p>The <code>&lt;source-context-name&gt;</code> element specifies the portal source context name.</p>
<ul>
<li>
<b>Cardinality:</b> 0 or 1 </li>
<li>
<b>Parents:</b> <code>&lt;endpoint&gt;</code> <code>&lt;peer&gt;</code> </li>
<li>
<b>Children:</b> None. </li>
</ul>
<p><b>XML</b> <b>Attributes:</b> </p>
<table class="doxtable">
<tr>
<th>XML Attribute </th><th>Description </th><th>Default Value </th></tr>
<tr>
<td>xml:space </td><td>How whitespace is handled. <b>"default"</b> trims leading and trailing whitespace (e.g., tabs, spaces, linefeeds, etc.), and compresses multiple whitespace characters into a single space character. <b>"preserve"</b> preserves the whitespace exactly as read. </td><td><b>"default"</b> </td></tr>
</table>
<p><b>Example:</b> </p>
<pre class="fragment">&lt;tnw-gateway version="1.0"&gt;
      . . .
      . . .
  &lt;portals&gt;
    &lt;endpoint&gt;
      &lt;source-context-name&gt;SourceContext01&lt;/source-context-name&gt;
    &lt;/endpoint&gt;                 
  &lt;/portals&gt;
&lt;/tnw-gateway&gt;
</pre><p><br />
 </p>
<h3><a class="anchor" id="drocfg_receiver-context-name"></a>
&lt;receiver-context-name&gt;&nbsp;&nbsp;<small><a href="#drocfg_receiver-context-name">&lt;-</a></small></h3>
<p>The <code>&lt;receiver-context-name&gt;</code> element specifies the portal receiver context name.</p>
<ul>
<li>
<b>Cardinality:</b> 0 or 1 </li>
<li>
<b>Parents:</b> <code>&lt;endpoint&gt;</code> <code>&lt;peer&gt;</code> </li>
<li>
<b>Children:</b> None. </li>
</ul>
<p><b>XML</b> <b>Attributes:</b> </p>
<table class="doxtable">
<tr>
<th>XML Attribute </th><th>Description </th><th>Default Value </th></tr>
<tr>
<td>xml:space </td><td>How whitespace is handled. <b>"default"</b> trims leading and trailing whitespace (e.g., tabs, spaces, linefeeds, etc.), and compresses multiple whitespace characters into a single space character. <b>"preserve"</b> preserves the whitespace exactly as read. </td><td><b>"default"</b> </td></tr>
</table>
<p><b>Example:</b> </p>
<pre class="fragment">&lt;tnw-gateway version="1.0"&gt;
      . . .
      . . .
  &lt;portals&gt;
    &lt;endpoint&gt;
      &lt;receiver-context-name&gt;RcvrContext01&lt;/source-context-name&gt;
    &lt;/endpoint&gt;                 
  &lt;/portals&gt;
&lt;/tnw-gateway&gt;
</pre><p><br />
 </p>
<h3><a class="anchor" id="drocfg_sqn-window"></a>
&lt;sqn-window/&gt;&nbsp;&nbsp;<small><a href="#drocfg_sqn-window">&lt;-</a></small></h3>
<p>The <code>&lt;sqn-window&gt;</code> (sequence number window) element specifies the portal's awareness of received message sequence numbers, for the purpose of detecting duplicates.</p>
<ul>
<li>
<b>Cardinality:</b> 0 or 1 </li>
<li>
<b>Parents:</b> <code>&lt;endpoint&gt;</code> <code>&lt;peer&gt;</code> </li>
<li>
<b>Children:</b> None. </li>
</ul>
<p><b>XML</b> <b>Attributes:</b> </p>
<table class="doxtable">
<tr>
<th>XML Attribute </th><th>Description </th><th>Default Value </th></tr>
<tr>
<td>increment </td><td>Determines the minimum increment, in topic (fragment) sequence numbers, by which the sequence number window is moved when the window size (below) is exceeded. Must be a multiple of 8, an even divisor of the window size, and less the window size. Before changing the value of this option, please contact Informatica Support. </td><td>2048 </td></tr>
<tr>
<td>size </td><td>Determines the maximum number of topic (fragment) sequence numbers maintained in the window, for any given source. Must be a multiple of 8. Before changing the value of this option, please contact Informatica Support. </td><td>16384 </td></tr>
</table>
<p><b>Example:</b> </p>
<pre class="fragment">&lt;tnw-gateway version="1.0"&gt;
      . . .
      . . .
  &lt;portals&gt;
    &lt;endpoint&gt;
      &lt;sqn-window size="1024" increment="512"/&gt;
    &lt;/endpoint&gt;
  &lt;/portals&gt;
&lt;/tnw-gateway&gt;
</pre><p><br />
 </p>
<h3><a class="anchor" id="drocfg_context-query"></a>
&lt;context-query/&gt;&nbsp;&nbsp;<small><a href="#drocfg_context-query">&lt;-</a></small></h3>
<p>The <code>&lt;context-query&gt;</code> element determines timing characteristics for context name queries generated at this portal.</p>
<ul>
<li>
<b>Cardinality:</b> 0 or 1 </li>
<li>
<b>Parents:</b> <code>&lt;endpoint&gt;</code> <code>&lt;peer&gt;</code> </li>
<li>
<b>Children:</b> None. </li>
</ul>
<p><b>XML</b> <b>Attributes:</b> </p>
<table class="doxtable">
<tr>
<th>XML Attribute </th><th>Description </th><th>Default Value </th></tr>
<tr>
<td>interval </td><td>Interval (in milliseconds) between groups of context queries. Before changing the value of this option, please contact Informatica Support. </td><td>200 </td></tr>
<tr>
<td>max-contexts </td><td>Maximum number of contexts for which queries are generated at one time. Before changing the value of this option, please contact Informatica Support. </td><td>20 </td></tr>
<tr>
<td>periodic-interval </td><td>Interval (in milliseconds) at which context queries are generated. Before changing the value of this option, please contact Informatica Support. </td><td>300000 </td></tr>
<tr>
<td>timeout </td><td>Minimum time (in seconds) a context query must be unanswered before it is removed for the portal. Before changing the value of this option, please contact Informatica Support. </td><td>900 </td></tr>
</table>
<p><b>Example:</b> </p>
<pre class="fragment">&lt;tnw-gateway version="1.0"&gt;
      . . .
      . . .
  &lt;portals&gt;
    &lt;endpoint&gt;
      &lt;context-query periodic-interval="25000" max-contexts="15" interval="180" timeout="875"/&gt;
    &lt;/endpoint&gt;
  &lt;/portals&gt;
&lt;/tnw-gateway&gt;
</pre><p><br />
 </p>
<h3><a class="anchor" id="drocfg_peer"></a>
&lt;peer&gt;&nbsp;&nbsp;<small><a href="#drocfg_peer">&lt;-</a></small></h3>
<p>The <code>&lt;peer&gt;</code> element is a container element for all configuration options of a single peer portal.</p>
<ul>
<li>
<b>Cardinality:0</b> or more </li>
<li>
<b>Parents:</b> <code>&lt;portals&gt;</code> </li>
<li>
<b>Children:</b> <code>&lt;name&gt;</code>, <code>&lt;cost&gt;</code>?, <code>&lt;sourcemap&gt;</code>?, (<code>&lt;tcp&gt;</code> | <code>&lt;single-tcp&gt;</code>), <code>&lt;source-deletion-delay&gt;</code>?, <code>&lt;max-queue&gt;</code>?, <code>&lt;max-datagram&gt;</code>?, <code>&lt;smart-batch&gt;</code>?, <code>&lt;batching&gt;</code>?, <code>&lt;lbm-config&gt;</code>?, <code>&lt;lbm-attributes&gt;</code>?, <code>&lt;acl&gt;</code>?, <code>&lt;topic-purge&gt;</code>?, <code>&lt;topic-interest-generate&gt;</code>?, <code>&lt;topic-domain-activity&gt;</code>?, <code>&lt;pattern-purge&gt;</code>?, <code>&lt;pattern-interest-generate&gt;</code>?, <code>&lt;pattern-domain-activity&gt;</code>?, <code>&lt;topic-use-check&gt;</code>?, <code>&lt;pattern-use-check&gt;</code>?, <code>&lt;source-context-name&gt;</code>?, <code>&lt;receiver-context-name&gt;</code>?, <code>&lt;sqn-window&gt;</code>?, <code>&lt;context-query&gt;</code>?, <code>&lt;gateway-keepalive&gt;</code>? </li>
</ul>
<p><b>XML</b> <b>Attributes:</b> None.</p>
<p><b>Example:</b> </p>
<pre class="fragment">&lt;tnw-gateway version="1.0"&gt;
  &lt;daemon&gt;
      . . .
      . . .
  &lt;/daemon&gt;
  &lt;portals&gt;
    &lt;peer&gt;
      &lt;name&gt;P1&lt;/name&gt;
      &lt;cost&gt;1&lt;/cost&gt;
      . . .
      . . .
    &lt;/peer&gt;
  &lt;/portals&gt;
&lt;/tnw-gateway&gt;
</pre><p><br />
 </p>
<h3><a class="anchor" id="drocfg_sourcemap"></a>
&lt;sourcemap/&gt;&nbsp;&nbsp;<small><a href="#drocfg_sourcemap">&lt;-</a></small></h3>
<p>The <code>&lt;sourcemap&gt;</code> element sets the size of the peer portal's source map.</p>
<ul>
<li>
<b>Cardinality:</b> 0 or 1 </li>
<li>
<b>Parents:</b> <code>&lt;peer&gt;</code> </li>
<li>
<b>Children:</b> None. </li>
</ul>
<p><b>XML</b> <b>Attributes:</b> </p>
<table class="doxtable">
<tr>
<th>XML Attribute </th><th>Description </th><th>Default Value </th></tr>
<tr>
<td>size </td><td>Number of entries in the source map. Must be able to be factorized by all 2s (e.g., 1024, 2048, etc.). </td><td>131072 </td></tr>
</table>
<p><b>Example:</b> </p>
<pre class="fragment">&lt;tnw-gateway version="1.0"&gt;
      . . .
      . . .
  &lt;portals&gt;
    &lt;peer&gt;
      &lt;sourcemap size="131072"/&gt;
      . . .
      . . .
    &lt;/peer&gt;
  &lt;/portals&gt;
&lt;/tnw-gateway&gt;
</pre><p><br />
 </p>
<h3><a class="anchor" id="drocfg_tcp"></a>
&lt;tcp&gt;&nbsp;&nbsp;<small><a href="#drocfg_tcp">&lt;-</a></small></h3>
<p>DEPRECATED AS OF UM 6.10. DO NOT USE. The <code>&lt;tcp&gt;</code> element contains elements for a peer portal's "dual TCP" settings. As of UM 6.10, dual TCP is no longer supported. Please use <code>&lt;single-tcp&gt;</code> instead.</p>
<ul>
<li>
<b>Cardinality:</b> 0 or 1 </li>
<li>
<b>Parents:</b> <code>&lt;peer&gt;</code> </li>
<li>
<b>Children:</b> <code>&lt;interface&gt;</code>?, <code>&lt;listen-port&gt;</code>, <code>&lt;receive-buffer&gt;</code>?, <code>&lt;send-buffer&gt;</code>?, <code>&lt;keepalive&gt;</code>?, <code>&lt;nodelay&gt;</code>?, <code>&lt;compression&gt;</code>?, <code>&lt;tls&gt;</code>?, <code>&lt;companion&gt;</code> </li>
</ul>
<p><b>XML</b> <b>Attributes:</b> None.</p>
<p><b>Example:</b> </p>
<pre class="fragment">&lt;tnw-gateway version="1.0"&gt;
      . . .
      . . .
  &lt;portals&gt;
    &lt;peer&gt;
      &lt;tcp&gt;
        &lt;interface&gt;10.28.5.5/24&lt;/interface&gt;
        &lt;listen-port&gt;
      . . .
      . . .
      &lt;/tcp&gt;
    &lt;/peer&gt;
  &lt;/portals&gt;
&lt;/tnw-gateway&gt;
</pre><p><br />
 </p>
<h3><a class="anchor" id="drocfg_interface"></a>
&lt;interface&gt;&nbsp;&nbsp;<small><a href="#drocfg_interface">&lt;-</a></small></h3>
<p>The <code>&lt;interface&gt;</code> element contains the IP host or network address for this peer portal, specified in dotted-decimal or CIDR format.</p>
<ul>
<li>
<b>Cardinality:</b> 0 or 1 </li>
<li>
<b>Parents:</b> <code>&lt;tcp&gt;</code> <code>&lt;single-tcp&gt;</code> </li>
<li>
<b>Children:</b> None. </li>
</ul>
<p><b>XML</b> <b>Attributes:</b> None.</p>
<p><b>Example:</b> </p>
<pre class="fragment">&lt;tnw-gateway version="1.0"&gt;
      . . .
      . . .
  &lt;portals&gt;
    &lt;peer&gt;
      &lt;single-tcp&gt;
        &lt;interface&gt;10.28.5.5/24&lt;/interface&gt;
      . . .
      . . .
      &lt;/single-tcp&gt;
    &lt;/peer&gt;
  &lt;/portals&gt;
&lt;/tnw-gateway&gt;
</pre><p><br />
 </p>
<h3><a class="anchor" id="drocfg_listen-port"></a>
&lt;listen-port&gt;&nbsp;&nbsp;<small><a href="#drocfg_listen-port">&lt;-</a></small></h3>
<p>The <code>&lt;listen-port&gt;</code> element contains port number on which an acceptor peer portal listens for connections from the initiating peer portal. The initiating peer portal configuration must specify this port as its initiator port.</p>
<ul>
<li>
<b>Cardinality:1</b> </li>
<li>
<b>Parents:</b> <code>&lt;tcp&gt;</code> <code>&lt;acceptor&gt;</code> </li>
<li>
<b>Children:</b> None. </li>
</ul>
<p><b>XML</b> <b>Attributes:</b> None.</p>
<p><b>Example:</b> </p>
<pre class="fragment">&lt;tnw-gateway version="1.0"&gt;
      . . .
      . . .
  &lt;portals&gt;
    &lt;peer&gt;
      &lt;single-tcp&gt;
        &lt;acceptor&gt;
          &lt;listen-port&gt;46000&lt;/listen-port&gt;
        &lt;/acceptor&gt;
      . . .
      . . .
      &lt;/single-tcp&gt;
    &lt;/peer&gt;
  &lt;/portals&gt;
&lt;/tnw-gateway&gt;
</pre><p><br />
 </p>
<h3><a class="anchor" id="drocfg_receive-buffer"></a>
&lt;receive-buffer&gt;&nbsp;&nbsp;<small><a href="#drocfg_receive-buffer">&lt;-</a></small></h3>
<p>The <code>&lt;receive-buffer&gt;</code> element contains the size of the TCP receive buffer. If not specified, the UM Router uses the system default size.</p>
<ul>
<li>
<b>Cardinality:</b> 0 or 1 </li>
<li>
<b>Parents:</b> <code>&lt;tcp&gt;</code> <code>&lt;single-tcp&gt;</code> </li>
<li>
<b>Children:</b> None. </li>
</ul>
<p><b>XML</b> <b>Attributes:</b> None.</p>
<p><b>Example:</b> </p>
<pre class="fragment">&lt;tnw-gateway version="1.0"&gt;
      . . .
      . . .
  &lt;portals&gt;
    &lt;peer&gt;
      &lt;single-tcp&gt;
        &lt;receive-buffer&gt;128000&lt;/receive-buffer&gt;
      . . .
      . . .
      &lt;/single-tcp&gt;
    &lt;/peer&gt;
  &lt;/portals&gt;
&lt;/tnw-gateway&gt;
</pre><p><br />
 </p>
<h3><a class="anchor" id="drocfg_send-buffer"></a>
&lt;send-buffer&gt;&nbsp;&nbsp;<small><a href="#drocfg_send-buffer">&lt;-</a></small></h3>
<p>The <code>&lt;send-buffer&gt;</code> element contains the size of the TCP send buffer. If not specified, the UM Router uses the system default size.</p>
<ul>
<li>
<b>Cardinality:</b> 0 or 1 </li>
<li>
<b>Parents:</b> <code>&lt;tcp&gt;</code> <code>&lt;single-tcp&gt;</code> </li>
<li>
<b>Children:</b> None. </li>
</ul>
<p><b>XML</b> <b>Attributes:</b> None.</p>
<p><b>Example:</b> </p>
<pre class="fragment">&lt;tnw-gateway version="1.0"&gt;
      . . .
      . . .
  &lt;portals&gt;
    &lt;peer&gt;
      &lt;single-tcp&gt;
        &lt;send-buffer&gt;128000&lt;/send-buffer&gt;
      . . .
      . . .
      &lt;/single-tcp&gt;
    &lt;/peer&gt;
  &lt;/portals&gt;
&lt;/tnw-gateway&gt;
</pre><p><br />
 </p>
<h3><a class="anchor" id="drocfg_keepalive"></a>
&lt;keepalive/&gt;&nbsp;&nbsp;<small><a href="#drocfg_keepalive">&lt;-</a></small></h3>
<p>The <code>&lt;keepalive&gt;</code> element, when present, enables a TCP keepalive signal transmission, which is disabled by default.</p>
<ul>
<li>
<b>Cardinality:</b> 0 or 1 </li>
<li>
<b>Parents:</b> <code>&lt;tcp&gt;</code> <code>&lt;single-tcp&gt;</code> </li>
<li>
<b>Children:</b> None. </li>
</ul>
<p><b>XML</b> <b>Attributes:</b> None.</p>
<p><b>Example:</b> </p>
<pre class="fragment">&lt;tnw-gateway version="1.0"&gt;
      . . .
      . . .
  &lt;portals&gt;
    &lt;peer&gt;
      &lt;single-tcp&gt;
        &lt;keepalive/&gt;
      . . .
      . . .
      &lt;/single-tcp&gt;
    &lt;/peer&gt;
  &lt;/portals&gt;
&lt;/tnw-gateway&gt;
</pre><p><br />
 </p>
<h3><a class="anchor" id="drocfg_nodelay"></a>
&lt;nodelay/&gt;&nbsp;&nbsp;<small><a href="#drocfg_nodelay">&lt;-</a></small></h3>
<p>The <code>&lt;nodelay&gt;</code> element, when present, allows immediate sending of messages without waiting for the batching send buffer to fill. This is disabled by default.</p>
<ul>
<li>
<b>Cardinality:</b> 0 or 1 </li>
<li>
<b>Parents:</b> <code>&lt;tcp&gt;</code> <code>&lt;single-tcp&gt;</code> </li>
<li>
<b>Children:</b> None. </li>
</ul>
<p><b>XML</b> <b>Attributes:</b> None.</p>
<p><b>Example:</b> </p>
<pre class="fragment">&lt;tnw-gateway version="1.0"&gt;
      . . .
      . . .
  &lt;portals&gt;
    &lt;peer&gt;
      &lt;single-tcp&gt;
        &lt;nodelay/&gt;
      . . .
      . . .
      &lt;/single-tcp&gt;
    &lt;/peer&gt;
  &lt;/portals&gt;
&lt;/tnw-gateway&gt;
</pre><p><br />
 </p>
<h3><a class="anchor" id="drocfg_compression"></a>
&lt;compression&gt;&nbsp;&nbsp;<small><a href="#drocfg_compression">&lt;-</a></small></h3>
<p>The <code>&lt;compression&gt;</code> element enables compression and sets the desired data compression algorithm for the peer link. Currently, only LZ4 lossless data compression is supported.</p>
<ul>
<li>
<b>Cardinality:</b> 0 or 1 </li>
<li>
<b>Parents:</b> <code>&lt;tcp&gt;</code> <code>&lt;single-tcp&gt;</code> </li>
<li>
<b>Children:</b> None. </li>
</ul>
<p><b>XML</b> <b>Attributes:</b> None.</p>
<p><b>Example:</b> </p>
<pre class="fragment">&lt;tnw-gateway version="1.0"&gt;
      . . .
      . . .
  &lt;portals&gt;
    &lt;peer&gt;
      &lt;single-tcp&gt;
        &lt;compression&gt;LZ4&lt;/compression&gt;
      . . .
      . . .
      &lt;/single-tcp&gt;
    &lt;/peer&gt;
  &lt;/portals&gt;
&lt;/tnw-gateway&gt;
</pre><p><br />
 </p>
<h3><a class="anchor" id="drocfg_tls"></a>
&lt;tls&gt;&nbsp;&nbsp;<small><a href="#drocfg_tls">&lt;-</a></small></h3>
<p>The <code>&lt;tls&gt;</code> element contains elements to configure peer link encryption.</p>
<ul>
<li>
<b>Cardinality:</b> 0 or 1 </li>
<li>
<b>Parents:</b> <code>&lt;tcp&gt;</code> <code>&lt;single-tcp&gt;</code> </li>
<li>
<b>Children:</b> <code>&lt;certificate&gt;</code>, <code>&lt;certificate-key&gt;</code>, <code>&lt;certificate-key-password&gt;</code>?, <code>&lt;trusted-certificates&gt;</code>?, <code>&lt;cipher-suites&gt;</code>? </li>
</ul>
<p><b>XML</b> <b>Attributes:</b> None.</p>
<p><b>Example:</b> </p>
<pre class="fragment">&lt;tnw-gateway version="1.0"&gt;
      . . .
      . . .
  &lt;portals&gt;
    &lt;peer&gt;
      &lt;single-tcp&gt;
        &lt;tls&gt;
          &lt;certificate&gt;test.crt&lt;certificate&gt;
          &lt;certificate-key&gt;test.key&lt;certificate-key&gt;
          &lt;certificate-key-password&gt;
            CorrectHorseBatteryStaple
          &lt;/certificate-key-password&gt;
          &lt;trusted-certificates&gt;peers.crt&lt;trusted-certificates&gt;
        &lt;/tls&gt;
      . . .
      . . .
      &lt;/single-tcp&gt;
    &lt;/peer&gt;
  &lt;/portals&gt;
&lt;/tnw-gateway&gt;
</pre><p>Note that in this example, the final &lt;cipher-suites&gt; element is omitted. The default is recommended.</p>
<p><br />
 </p>
<h3><a class="anchor" id="drocfg_certificate"></a>
&lt;certificate&gt;&nbsp;&nbsp;<small><a href="#drocfg_certificate">&lt;-</a></small></h3>
<p>The <code>&lt;certificate&gt;</code> element specifies the path to a file containing an OpenSSL-compatible PEM-formatted certificate that will be presented as the TLS server certificate when a TLS connection is established by a client.</p>
<ul>
<li>
<b>Cardinality:</b> 0 or 1 </li>
<li>
<b>Parents:</b> <code>&lt;tls&gt;</code> </li>
<li>
<b>Children:</b> None. </li>
</ul>
<p><b>XML</b> <b>Attributes:</b> None.</p>
<p><b>Example:</b> </p>
<pre class="fragment">&lt;tnw-gateway version="1.0"&gt;
      . . .
      . . .
  &lt;portals&gt;
    &lt;peer&gt;
      &lt;single-tcp&gt;
        &lt;tls&gt;
          &lt;certificate&gt;test.crt&lt;certificate&gt;
          . . .
          . . .
        &lt;/tls&gt;
      . . .
      . . .
      &lt;/single-tcp&gt;
    &lt;/peer&gt;
  &lt;/portals&gt;
&lt;/tnw-gateway&gt;
</pre><p><br />
 </p>
<h3><a class="anchor" id="drocfg_certificate-key"></a>
&lt;certificate-key&gt;&nbsp;&nbsp;<small><a href="#drocfg_certificate-key">&lt;-</a></small></h3>
<p>The <code>&lt;certificate-key&gt;</code> element specifies the path to a file containing the private key associated with the "server" certificate specified by <code>&lt;certificate&gt;</code>. Note that this private key must be protected from intruders. For that reason, when the certificate and private key files are generated, the private key file is typically encrypted with a passphrase. The passphrase is supplied using <code>&lt;certificate-key-password&gt;</code>.</p>
<ul>
<li>
<b>Cardinality:</b> 0 or 1 </li>
<li>
<b>Parents:</b> <code>&lt;tls&gt;</code> </li>
<li>
<b>Children:</b> None. </li>
</ul>
<p><b>XML</b> <b>Attributes:</b> None.</p>
<p><b>Example:</b> </p>
<pre class="fragment">&lt;tnw-gateway version="1.0"&gt;
      . . .
      . . .
  &lt;portals&gt;
    &lt;peer&gt;
      &lt;single-tcp&gt;
        &lt;tls&gt;
          &lt;certificate-key&gt;test.key&lt;certificate-key&gt;
          . . .
          . . .
        &lt;/tls&gt;
      . . .
      . . .
      &lt;/single-tcp&gt;
    &lt;/peer&gt;
  &lt;/portals&gt;
&lt;/tnw-gateway&gt;
</pre><p><br />
 </p>
<h3><a class="anchor" id="drocfg_certificate-key-password"></a>
&lt;certificate-key-password&gt;&nbsp;&nbsp;<small><a href="#drocfg_certificate-key-password">&lt;-</a></small></h3>
<p>The <code>&lt;certificate-key-password&gt;</code> element specifies the passphrase needed to decrypt the server private key file specified by <code>&lt;tls-certificate-key&gt;</code>.</p>
<ul>
<li>
<b>Cardinality:</b> 0 or 1 </li>
<li>
<b>Parents:</b> <code>&lt;tls&gt;</code> </li>
<li>
<b>Children:</b> None. </li>
</ul>
<p><b>XML</b> <b>Attributes:</b> None.</p>
<p><b>Example:</b> </p>
<pre class="fragment">&lt;tnw-gateway version="1.0"&gt;
      . . .
      . . .
  &lt;portals&gt;
    &lt;peer&gt;
      &lt;single-tcp&gt;
        &lt;tls&gt;
          &lt;certificate-key-password&gt;
            CorrectHorseBatteryStaple
          &lt;/certificate-key-password&gt;
          . . .
          . . .
        &lt;/tls&gt;
      . . .
      . . .
      &lt;/single-tcp&gt;
    &lt;/peer&gt;
  &lt;/portals&gt;
&lt;/tnw-gateway&gt;
</pre><p><br />
 </p>
<h3><a class="anchor" id="drocfg_trusted-certificates"></a>
&lt;trusted-certificates&gt;&nbsp;&nbsp;<small><a href="#drocfg_trusted-certificates">&lt;-</a></small></h3>
<p>The <code>&lt;trusted-certificates&gt;</code> element specifies the path to a file containing one or more OpenSSL-compatible PEM-formatted TLS client certificates and certificate authorities. If this element is not supplied, the default behavior is to use the system-level trusted certificates and certificate authorities (operating-system dependent). The TLS server uses these trusted certificates to verify the identity of connecting clients. If a client connects and presents a certificate which is not in the server's trusted certificates file, the connection will be canceled.</p>
<ul>
<li>
<b>Cardinality:</b> 0 or 1 </li>
<li>
<b>Parents:</b> <code>&lt;tls&gt;</code> </li>
<li>
<b>Children:</b> None. </li>
</ul>
<p><b>XML</b> <b>Attributes:</b> None.</p>
<p><b>Example:</b> </p>
<pre class="fragment">&lt;tnw-gateway version="1.0"&gt;
      . . .
      . . .
  &lt;portals&gt;
    &lt;peer&gt;
      &lt;single-tcp&gt;
        &lt;tls&gt;
          &lt;trusted-certificates&gt;peers.crt&lt;trusted-certificates&gt;
          . . .
          . . .
        &lt;/tls&gt;
      . . .
      . . .
      &lt;/single-tcp&gt;
    &lt;/peer&gt;
  &lt;/portals&gt;
&lt;/tnw-gateway&gt;
</pre><p><br />
 </p>
<h3><a class="anchor" id="drocfg_cipher-suites"></a>
&lt;cipher-suites&gt;&nbsp;&nbsp;<small><a href="#drocfg_cipher-suites">&lt;-</a></small></h3>
<p>The <code>&lt;cipher-suites&gt;</code> element defines the list of one or more (comma separated) names of cipher suites that are acceptable to this context. The names are in OpenSSL format; see <a href="https://www.openssl.org/docs/manmaster/apps/ciphers.html#TLS-v1.2-cipher-suites">https://www.openssl.org/docs/manmaster/apps/ciphers.html#TLS-v1.2-cipher-suites</a> for a list of valid suite names (the ones with dashes) and the equivalent IANA names (with underscores). If more than suite name one is supplied, they should be in descending order of preference. When a remote context negotiates encrypted TCP, the two sides must find a cipher suite in common, otherwise the connection will be canceled. The default, TLS_DHE_RSA_WITH_AES_256_GCM_SHA384, is highly secure and is recommended.</p>
<ul>
<li>
<b>Cardinality:</b> 0 or 1 </li>
<li>
<b>Parents:</b> <code>&lt;tls&gt;</code> </li>
<li>
<b>Children:</b> None. </li>
</ul>
<p><b>XML</b> <b>Attributes:</b> None.</p>
<p><b>Example:</b> </p>
<pre class="fragment">&lt;tnw-gateway version="1.0"&gt;
      . . .
      . . .
  &lt;portals&gt;
    &lt;peer&gt;
      &lt;single-tcp&gt;
        &lt;tls&gt;
          &lt;cipher-suites&gt;TLS_DHE_RSA_WITH_AES_256_GCM_SHA384&lt;cipher-suites&gt;
          . . .
          . . .
        &lt;/tls&gt;
      . . .
      . . .
      &lt;/single-tcp&gt;
    &lt;/peer&gt;
  &lt;/portals&gt;
&lt;/tnw-gateway&gt;
</pre><p><br />
 </p>
<h3><a class="anchor" id="drocfg_companion"></a>
&lt;companion&gt;&nbsp;&nbsp;<small><a href="#drocfg_companion">&lt;-</a></small></h3>
<p>DEPRECATED AS OF UM 6.10. DO NOT USE. The <code>&lt;companion&gt;</code> element contains the IP address and the port of the companion peer portal on another UM Router, to which this peer is connected via "dual TCP". As of UM 6.10, dual TCP (<code>&lt;tcp&gt;</code>) is no longer supported. Please use <code>&lt;single-tcp&gt;</code> instead.</p>
<ul>
<li>
<b>Cardinality:</b> 0 or 1 </li>
<li>
<b>Parents:</b> <code>&lt;tcp&gt;</code> </li>
<li>
<b>Children:</b> <code>&lt;address&gt;</code>, <code>&lt;port&gt;</code> </li>
</ul>
<p><b>XML</b> <b>Attributes:</b> None.</p>
<p><b>Example:</b> </p>
<pre class="fragment">&lt;tnw-gateway version="1.0"&gt;
      . . .
      . . .
  &lt;portals&gt;
    &lt;peer&gt;
      &lt;tcp&gt;
        &lt;companion&gt;
          &lt;address&gt;10.28.3.91&lt;/address&gt;
          &lt;port&gt;25000&lt;/port&gt;
        &lt;/companion&gt;
      . . .
      . . .
      &lt;/tcp&gt;
    &lt;/peer&gt;
  &lt;/portals&gt;
&lt;/tnw-gateway&gt;
</pre><p><br />
 </p>
<h3><a class="anchor" id="drocfg_address"></a>
&lt;address&gt;&nbsp;&nbsp;<small><a href="#drocfg_address">&lt;-</a></small></h3>
<p>The <code>&lt;address&gt;</code> element contains the IP address of the acceptor peer portal on another UM Router, to which this initiator peer is connected via "single TCP". (As of UM 6.10, dual TCP (<code>&lt;tcp&gt;</code>) is no longer supported.)</p>
<ul>
<li>
<b>Cardinality:</b> 0 or 1 </li>
<li>
<b>Parents:</b> <code>&lt;companion&gt;</code> <code>&lt;initiator&gt;</code> </li>
<li>
<b>Children:</b> None. </li>
</ul>
<p><b>XML</b> <b>Attributes:</b> None.</p>
<p><b>Example:</b> </p>
<pre class="fragment">&lt;tnw-gateway version="1.0"&gt;
      . . .
      . . .
  &lt;portals&gt;
    &lt;peer&gt;
      &lt;single-tcp&gt;
        &lt;initiator&gt;
          &lt;address&gt;10.28.3.91&lt;/address&gt;
          &lt;port&gt;25000&lt;/port&gt;
        &lt;/initiator&gt;
      . . .
      . . .
      &lt;/single-tcp&gt;
    &lt;/peer&gt;
  &lt;/portals&gt;
&lt;/tnw-gateway&gt;
</pre><p><br />
 </p>
<h3><a class="anchor" id="drocfg_port"></a>
&lt;port&gt;&nbsp;&nbsp;<small><a href="#drocfg_port">&lt;-</a></small></h3>
<p>The <code>&lt;port&gt;</code> element contains the IP port of the acceptor peer portal on another UM Router, to which this initiator peer is connected. (As of UM 6.10, dual TCP (<code>&lt;tcp&gt;</code>) is no longer supported.)</p>
<ul>
<li>
<b>Cardinality:</b> 0 or 1 </li>
<li>
<b>Parents:</b> <code>&lt;companion&gt;</code> <code>&lt;initiator&gt;</code> </li>
<li>
<b>Children:</b> None. </li>
</ul>
<p><b>XML</b> <b>Attributes:</b> None.</p>
<p><b>Example:</b> </p>
<pre class="fragment">&lt;tnw-gateway version="1.0"&gt;
      . . .
      . . .
  &lt;portals&gt;
    &lt;peer&gt;
      &lt;single-tcp&gt;
        &lt;initiator&gt;
          &lt;address&gt;10.28.3.91&lt;/address&gt;
          &lt;port&gt;25000&lt;/port&gt;
        &lt;/initiator&gt;
      . . .
      . . .
      &lt;/single-tcp&gt;
    &lt;/peer&gt;
  &lt;/portals&gt;
&lt;/tnw-gateway&gt;
</pre><p><br />
 </p>
<h3><a class="anchor" id="drocfg_single-tcp"></a>
&lt;single-tcp&gt;&nbsp;&nbsp;<small><a href="#drocfg_single-tcp">&lt;-</a></small></h3>
<p>The <code>&lt;single-tcp&gt;</code> element contains elements for a peer portal's tcp settings, when configuring the peer for single-tcp operation.</p>
<ul>
<li>
<b>Cardinality:</b> 0 or 1 </li>
<li>
<b>Parents:</b> <code>&lt;peer&gt;</code> </li>
<li>
<b>Children:</b> <code>&lt;interface&gt;</code>?, <code>&lt;receive-buffer&gt;</code>?, <code>&lt;send-buffer&gt;</code>?, <code>&lt;keepalive&gt;</code>?, <code>&lt;nodelay&gt;</code>?, <code>&lt;compression&gt;</code>?, <code>&lt;tls&gt;</code>?, (<code>&lt;initiator&gt;</code> | <code>&lt;acceptor&gt;</code>) </li>
</ul>
<p><b>XML</b> <b>Attributes:</b> None.</p>
<p><b>Example:</b> </p>
<pre class="fragment">&lt;tnw-gateway version="1.0"&gt;
      . . .
      . . .
  &lt;portals&gt;
    &lt;peer&gt;
      &lt;single-tcp&gt;
        &lt;interface&gt;10.28.5.5/24&lt;/interface&gt;
        &lt;acceptor&gt;
          &lt;listen-port&gt;23746&lt;/listen-port&gt;
        &lt;/acceptor&gt;
        . . .
        . . .
      &lt;/single-tcp&gt;
    &lt;/peer&gt;
  &lt;/portals&gt;
&lt;/tnw-gateway&gt;
</pre><p><br />
 </p>
<h3><a class="anchor" id="drocfg_initiator"></a>
&lt;initiator&gt;&nbsp;&nbsp;<small><a href="#drocfg_initiator">&lt;-</a></small></h3>
<p>The <code>&lt;initiator&gt;</code> element contains the IP address and the port of the corresponding acceptor peer portal on another UM Router, to which this peer is connected. This element is used in single-tcp configurations.</p>
<ul>
<li>
<b>Cardinality:</b> 0 or 1 </li>
<li>
<b>Parents:</b> <code>&lt;single-tcp&gt;</code> </li>
<li>
<b>Children:</b> <code>&lt;address&gt;</code>, <code>&lt;port&gt;</code> </li>
</ul>
<p><b>XML</b> <b>Attributes:</b> </p>
<table class="doxtable">
<tr>
<th>XML Attribute </th><th>Description </th><th>Default Value </th></tr>
<tr>
<td>reconnect-interval </td><td>The time interval, in milliseconds, to wait before reconnecting to the companion portal if this connection is interrupted. </td><td>5000 </td></tr>
</table>
<p><b>Example:</b> </p>
<pre class="fragment">&lt;tnw-gateway version="1.0"&gt;
      . . .
      . . .
  &lt;portals&gt;
    &lt;peer&gt;
      &lt;single-tcp&gt;
        &lt;initiator&gt;
          &lt;address&gt;10.28.3.91&lt;/address&gt;
          &lt;port&gt;25000&lt;/port&gt;
        &lt;/initiator&gt;
      . . .
      . . .
      &lt;/single-tcp&gt;
    &lt;/peer&gt;
  &lt;/portals&gt;
&lt;/tnw-gateway&gt;
</pre><p><br />
 </p>
<h3><a class="anchor" id="drocfg_acceptor"></a>
&lt;acceptor&gt;&nbsp;&nbsp;<small><a href="#drocfg_acceptor">&lt;-</a></small></h3>
<p>The <code>&lt;acceptor&gt;</code> element contains the listen port address of the corresponding acceptor peer portal on another UM Router, to which this peer is connected. This element is used in single-tcp configurations.</p>
<ul>
<li>
<b>Cardinality:</b> 0 or 1 </li>
<li>
<b>Parents:</b> <code>&lt;single-tcp&gt;</code> </li>
<li>
<b>Children:</b> <code>&lt;listen-port&gt;</code> </li>
</ul>
<p><b>XML</b> <b>Attributes:</b> None.</p>
<p><b>Example:</b> </p>
<pre class="fragment">&lt;tnw-gateway version="1.0"&gt;
      . . .
      . . .
  &lt;portals&gt;
    &lt;peer&gt;
      &lt;single-tcp&gt;
        &lt;acceptor&gt;
          &lt;listen-port&gt;25000&lt;/port&gt;
        &lt;/acceptor&gt;
      . . .
      . . .
      &lt;/single-tcp&gt;
    &lt;/peer&gt;
  &lt;/portals&gt;
&lt;/tnw-gateway&gt;
</pre><p><br />
 </p>
<h3><a class="anchor" id="drocfg_max-datagram"></a>
&lt;max-datagram&gt;&nbsp;&nbsp;<small><a href="#drocfg_max-datagram">&lt;-</a></small></h3>
<p>The <code>&lt;max-datagram&gt;</code> element specifies the maximum size a peer portal will allow an outgoing datagram to be before fragmenting it.</p>
<ul>
<li>
<b>Cardinality:</b> 0 or 1 </li>
<li>
<b>Parents:</b> <code>&lt;peer&gt;</code> </li>
<li>
<b>Children:</b> None. </li>
</ul>
<p><b>XML</b> <b>Attributes:</b> None.</p>
<p><b>Example:</b> </p>
<pre class="fragment">&lt;tnw-gateway version="1.0"&gt;
      . . .
      . . .
  &lt;portals&gt;
    &lt;peer&gt;
      &lt;max-datagram&gt;50000&lt;/max-datagram&gt;
    &lt;/peer&gt;
  &lt;/portals&gt;
&lt;/tnw-gateway&gt;
</pre><p><br />
 </p>
<h3><a class="anchor" id="drocfg_smart-batch"></a>
&lt;smart-batch&gt;&nbsp;&nbsp;<small><a href="#drocfg_smart-batch">&lt;-</a></small></h3>
<p>The <code>&lt;smart-batch&gt;</code> element enables the smart batching algorithm used by the UM Router when forwarding messages from one portal to another. In general, batching algorithms are used to increase throughput, but many such algorithms can produce latency outliers. The Smart Batching algorithm is designed to ensure low latencies by flushing the batching buffer when no more messages are waiting to be sent out the portal. Smart batching works with both endpoint and peer portals. For endpoint portals, a UM configuration file may be provided to set the implicit_batching_minimum_length (source) option to a large value. For peer portals, the <code>&lt;batching&gt;</code> element may be used to set the <code>&lt;min-length&gt;</code> to a large value. In either case, large values are recommended and will not produce significant latency outliers.</p>
<ul>
<li>
<b>Cardinality:</b> 0 or 1 </li>
<li>
<b>Parents:</b> <code>&lt;endpoint&gt;</code>, <code>&lt;peer&gt;</code> </li>
<li>
<b>Children:</b> None. </li>
</ul>
<p><b>XML</b> <b>Attributes:</b> None.</p>
<p><b>Example:</b> </p>
<pre class="fragment">&lt;tnw-gateway version="1.0"&gt;
      . . .
      . . .
  &lt;portals&gt;
    &lt;peer&gt;
      &lt;smart-batch&gt;1&lt;/smart-batch&gt;
      &lt;batching&gt;
        &lt;min-length&gt;4096&lt;/min-length&gt;
      &lt;/batching&gt;
    &lt;/peer&gt;
  &lt;/portals&gt;
&lt;/tnw-gateway&gt;
</pre><p><br />
 </p>
<h3><a class="anchor" id="drocfg_batching"></a>
&lt;batching&gt;&nbsp;&nbsp;<small><a href="#drocfg_batching">&lt;-</a></small></h3>
<p>The <code>&lt;batching&gt;</code> element contains batching size and timing parameters for peer link implicit batching. This applies to data messages only: the UM Router sends control messages immediately (flushing any batched data messages). Note: worst-case latency can be dramatically reduced by combining batching with <code>&lt;smart-batch&gt;</code>.</p>
<ul>
<li>
<b>Cardinality:</b> 0 or 1 </li>
<li>
<b>Parents:</b> <code>&lt;peer&gt;</code> </li>
<li>
<b>Children:</b> <code>&lt;min-length&gt;</code> ?, <code>&lt;batch-interval&gt;</code>? </li>
</ul>
<p><b>XML</b> <b>Attributes:</b> None.</p>
<p><b>Example:</b> </p>
<pre class="fragment">&lt;tnw-gateway version="1.0"&gt;
      . . .
      . . .
  &lt;portals&gt;
    &lt;peer&gt;
      &lt;batching&gt;
        &lt;min-length&gt;4096&lt;/min-length&gt;
        &lt;batch-interval&gt;500&lt;/batch-interval&gt;
      &lt;/batching&gt;
    &lt;/peer&gt;
  &lt;/portals&gt;
&lt;/tnw-gateway&gt;
</pre><p><br />
 </p>
<h3><a class="anchor" id="drocfg_min-length"></a>
&lt;min-length&gt;&nbsp;&nbsp;<small><a href="#drocfg_min-length">&lt;-</a></small></h3>
<p>The <code>&lt;min-length&gt;</code> element specifies the minimum length of a set of batched messages. When the total length of the batched messages reaches or exceeds this value, the batch is sent. If not specified, it defaults to 8192 bytes.</p>
<ul>
<li>
<b>Cardinality:</b> 0 or 1 </li>
<li>
<b>Parents:</b> <code>&lt;batching&gt;</code> </li>
<li>
<b>Children:</b> None. </li>
</ul>
<p><b>XML</b> <b>Attributes:</b> None.</p>
<p><b>Example:</b> </p>
<pre class="fragment">&lt;tnw-gateway version="1.0"&gt;
      . . .
      . . .
  &lt;portals&gt;
    &lt;peer&gt;
      &lt;batching&gt;
        &lt;min-length&gt;4096&lt;/min-length&gt;
        &lt;batch-interval&gt;500&lt;/batch-interval&gt;
      &lt;/batching&gt;
    &lt;/peer&gt;
  &lt;/portals&gt;
&lt;/tnw-gateway&gt;
</pre><p><br />
 </p>
<h3><a class="anchor" id="drocfg_batch-interval"></a>
&lt;batch-interval&gt;&nbsp;&nbsp;<small><a href="#drocfg_batch-interval">&lt;-</a></small></h3>
<p>The <code>&lt;batch-interval&gt;</code> element specifies the maximum interval (in milliseconds) between when the first message of a batch is queued until the batch is sent. A message stays in the batch queue until this value or <code>&lt;min-length&gt;</code> is met or exceeded (whichever occurs first). If not specified, it defaults to 200 milliseconds. The minimum allowed value is 3 milliseconds.</p>
<ul>
<li>
<b>Cardinality:</b> 0 or 1 </li>
<li>
<b>Parents:</b> <code>&lt;peer&gt;</code> </li>
<li>
<b>Children:</b> None. </li>
</ul>
<p><b>XML</b> <b>Attributes:</b> None.</p>
<p><b>Example:</b> </p>
<pre class="fragment">&lt;tnw-gateway version="1.0"&gt;
      . . .
      . . .
  &lt;portals&gt;
    &lt;peer&gt;
      &lt;batching&gt;
        &lt;min-length&gt;4096&lt;/min-length&gt;
        &lt;batch-interval&gt;500&lt;/batch-interval&gt;
      &lt;/batching&gt;
    &lt;/peer&gt;
  &lt;/portals&gt;
&lt;/tnw-gateway&gt;
</pre><p><br />
 </p>
<h3><a class="anchor" id="drocfg_gateway-keepalive"></a>
&lt;gateway-keepalive/&gt;&nbsp;&nbsp;<small><a href="#drocfg_gateway-keepalive">&lt;-</a></small></h3>
<p>The <code>&lt;gateway-keepalive&gt;</code> element contains parameters for the keepalive signals sent from this peer portal. This is a UM Router-level keepalive, not to be confused with the TCP-level <code>&lt;keepalive&gt;</code> element.</p>
<ul>
<li>
<b>Cardinality:</b> 0 or 1 </li>
<li>
<b>Parents:</b> <code>&lt;peer&gt;</code> </li>
<li>
<b>Children:</b> None. </li>
</ul>
<p><b>XML</b> <b>Attributes:</b> </p>
<table class="doxtable">
<tr>
<th>XML Attribute </th><th>Description </th><th>Default Value </th></tr>
<tr>
<td>idle </td><td>Determines if UM Router keepalives should be sent only if no traffic has been sent or received in the last interval. Possible values are yes or no. </td><td>yes </td></tr>
<tr>
<td>interval </td><td>Minimum interval, in milliseconds, between keepalive messages sent. We recommend setting this to 2000 or greater. A value of 0 (zero) disables keepalives. </td><td>5000 </td></tr>
<tr>
<td>timeout </td><td>Maximum time, in milliseconds, a peer can receive nothing from the companion before determining the connection is dead and disconnecting. We recommend setting this to 3 times the interval value. </td><td>15000 </td></tr>
</table>
<p><b>Example:</b> </p>
<pre class="fragment">&lt;tnw-gateway version="1.0"&gt;
      . . .
      . . .
  &lt;portals&gt;
    &lt;peer&gt;
      &lt;gateway-keepalive idle="no" interval="1000"/&gt;
    &lt;/peer&gt;
  &lt;/portals&gt;
&lt;/tnw-gateway&gt;
</pre><p><br />
 </p>
<h2><a class="anchor" id="deprecatedelements"></a>
Deprecated Elements&nbsp;&nbsp;<small><a href="#deprecatedelements">&lt;-</a></small></h2>
<p>The following option elements are deprecated, and provided only for UM Gateway configuration file backward compatibility. Values assigned to them have no effect on the operation of the UM Router.</p>
<p><br />
 </p>
<h3><a class="anchor" id="propagation-delay"></a>
&lt;propagation-delay/&gt;&nbsp;&nbsp;<small><a href="#propagation-delay">&lt;-</a></small></h3>
<p>The <code>&lt;propagation-delay&gt;</code> element specifies the difference between the shortest and longest propagation delays in the network.</p>
<p>This element is deprecated.</p>
<ul>
<li>
<b>Cardinality:</b> 0 or 1 </li>
<li>
<b>Parents:</b> <code>&lt;daemon&gt;</code> </li>
<li>
<b>Children:</b> None. </li>
</ul>
<p><b>XML</b> <b>Attributes:</b> </p>
<table class="doxtable">
<tr>
<th>XML Attribute </th><th>Description </th><th>Default Value </th></tr>
<tr>
<td>delta </td><td>The difference, in milliseconds, between the shortest and longest propagation delays in the network. </td><td>0 </td></tr>
</table>
<p><b>Example:</b> </p>
<pre class="fragment">&lt;tnw-gateway version="1.0"&gt;
  &lt;daemon&gt;
    &lt;propagation-delay delta=50/&gt;
  &lt;/daemon&gt;
      . . .
      . . .
&lt;/tnw-gateway&gt;
</pre><p><br />
 </p>
<h3><a class="anchor" id="late-join"></a>
&lt;late-join/&gt;&nbsp;&nbsp;<small><a href="#late-join">&lt;-</a></small></h3>
<p>The <code>&lt;late-join&gt;</code> element determines how Late Join is handled by this endpoint portal.</p>
<p>This element is deprecated.</p>
<ul>
<li>
<b>Cardinality:</b> 0 or 1 </li>
<li>
<b>Parents:</b> <code>&lt;endpoint&gt;</code> </li>
<li>
<b>Children:</b> None. </li>
</ul>
<p><b>XML</b> <b>Attributes:</b> </p>
<table class="doxtable">
<tr>
<th>XML Attribute </th><th>Description </th><th>Default Value </th></tr>
<tr>
<td>forward </td><td>If late join retransmission requests to a source on the portal are unable to be filled locally, determines if requests are forwarded to the original source. Choices are yes or no. <br />
 This only applies to sources created on the portal with late join support. </td><td>yes </td></tr>
<tr>
<td>provide </td><td>Determines whether sources created on a portal should provide late join to receivers. Allowable values are: <br />
source - Provide late join only if the original source provides late join. <br />
always - Always provide late join, even if the original source does not. <br />
never - Never provide late join, even if the original source does. <br />
The UM configuration specified for the portal determines the late join configuration. </td><td>source </td></tr>
</table>
<p><b>Example:</b> </p>
<pre class="fragment">&lt;tnw-gateway version="1.0"&gt;
      . . .
      . . .
  &lt;portals&gt;
    &lt;endpoint&gt;
      &lt;late-join provide="source" forward="yes"/&gt;
    &lt;/endpoint&gt;
  &lt;/portals&gt;
&lt;/tnw-gateway&gt; 
</pre><p><br />
 </p>
<h3><a class="anchor" id="topic-purge"></a>
&lt;topic-purge/&gt;&nbsp;&nbsp;<small><a href="#topic-purge">&lt;-</a></small></h3>
<p>The <code>&lt;topic-purge&gt;</code> element determines when this portal's proxy receivers can purge topics. This element is deprecated.</p>
<ul>
<li>
<b>Cardinality:</b> 0 or 1 </li>
<li>
<b>Parents:</b> <code>&lt;endpoint&gt;</code> <code>&lt;peer&gt;</code> </li>
<li>
<b>Children:</b> None. </li>
</ul>
<p><b>XML</b> <b>Attributes:</b> </p>
<table class="doxtable">
<tr>
<th>XML Attribute </th><th>Description </th><th>Default Value </th></tr>
<tr>
<td>periodic-interval </td><td>Interval (in milliseconds) at which receiver topics are checked to determine if they can be purged. </td><td>6000 </td></tr>
</table>
<p><b>Example:</b> </p>
<pre class="fragment">&lt;tnw-gateway version="1.0"&gt;
      . . .
      . . .
  &lt;portals&gt;
    &lt;endpoint&gt;
      &lt;topic-purge periodic-interval="5000"/&gt;
    &lt;/endpoint&gt;
  &lt;/portals&gt;
&lt;/tnw-gateway&gt;
</pre><p><br />
 </p>
<h3><a class="anchor" id="topic-interest-generate"></a>
&lt;topic-interest-generate/&gt;&nbsp;&nbsp;<small><a href="#topic-interest-generate">&lt;-</a></small></h3>
<p>The <code>&lt;topic-interest-generate&gt;</code> element determines timing characteristics for interest message generation at this portal.</p>
<p>This element is deprecated.</p>
<ul>
<li>
<b>Cardinality:</b> 0 or 1 </li>
<li>
<b>Parents:</b> <code>&lt;endpoint&gt;</code> <code>&lt;peer&gt;</code> </li>
<li>
<b>Children:</b> None. </li>
</ul>
<p><b>XML</b> <b>Attributes:</b> </p>
<table class="doxtable">
<tr>
<th>XML Attribute </th><th>Description </th><th>Default Value </th></tr>
<tr>
<td>interval </td><td>Interval (in milliseconds) between groups of topics. </td><td>200 </td></tr>
<tr>
<td>max-topics </td><td>Maximum topics for which interest is generated at one time. </td><td>20 </td></tr>
<tr>
<td>periodic-interval </td><td>Interval (in milliseconds) at which topic interest is generated. </td><td>300000 </td></tr>
</table>
<p><b>Example:</b> </p>
<pre class="fragment">&lt;tnw-gateway version="1.0"&gt;
      . . .
      . . .
  &lt;portals&gt;
    &lt;endpoint&gt;
      &lt;topic-interest-generate periodic-interval="250000"/&gt;
    &lt;/endpoint&gt;
  &lt;/portals&gt;
&lt;/tnw-gateway&gt;
</pre><p><br />
 </p>
<h3><a class="anchor" id="topic-domain-activity"></a>
&lt;topic-domain-activity/&gt;&nbsp;&nbsp;<small><a href="#topic-domain-activity">&lt;-</a></small></h3>
<p>The <code>&lt;topic-domain-activity&gt;</code> element determines how long a domain remains quiescent until it is determined inactive.</p>
<p>This element is deprecated.</p>
<ul>
<li>
<b>Cardinality:</b> 0 or 1 </li>
<li>
<b>Parents:</b> <code>&lt;endpoint&gt;</code> <code>&lt;peer&gt;</code> </li>
<li>
<b>Children:</b> None. </li>
</ul>
<p><b>XML</b> <b>Attributes:</b> </p>
<table class="doxtable">
<tr>
<th>XML Attribute </th><th>Description </th><th>Default Value </th></tr>
<tr>
<td>timeout </td><td>Minimum time (in seconds) domain interest for a topic must be refreshed before interest is removed for that domain. </td><td>900 </td></tr>
</table>
<p><b>Example:</b> </p>
<pre class="fragment">&lt;tnw-gateway version="1.0"&gt;
      . . .
      . . .
  &lt;portals&gt;
    &lt;endpoint&gt;
      &lt;topic-domain-activity timeout="800"/&gt;
    &lt;/endpoint&gt;
  &lt;/portals&gt;
&lt;/tnw-gateway&gt;
</pre><p><br />
 </p>
<h3><a class="anchor" id="pattern-purge"></a>
&lt;pattern-purge/&gt;&nbsp;&nbsp;<small><a href="#pattern-purge">&lt;-</a></small></h3>
<p>The <code>&lt;pattern-purge&gt;</code> element determines when this portal's proxy receivers can purge pattern.</p>
<p>This element is deprecated.</p>
<ul>
<li>
<b>Cardinality:</b> 0 or 1 </li>
<li>
<b>Parents:</b> <code>&lt;endpoint&gt;</code> <code>&lt;peer&gt;</code> </li>
<li>
<b>Children:</b> None. </li>
</ul>
<p><b>XML</b> <b>Attributes:</b> </p>
<table class="doxtable">
<tr>
<th>XML Attribute </th><th>Description </th><th>Default Value </th></tr>
<tr>
<td>periodic-interval </td><td>Interval (in milliseconds) at which receiver patterns are checked to determine if they can be purged. </td><td>6000 </td></tr>
</table>
<p><b>Example:</b> </p>
<pre class="fragment">&lt;tnw-gateway version="1.0"&gt;
      . . .
      . . .
  &lt;portals&gt;
    &lt;endpoint&gt;
      &lt;pattern-purge periodic-interval="5000"/&gt;
    &lt;/endpoint&gt;
  &lt;/portals&gt;
&lt;/tnw-gateway&gt;
</pre><p><br />
 </p>
<h3><a class="anchor" id="pattern-interest-generate"></a>
&lt;pattern-interest-generate/&gt;&nbsp;&nbsp;<small><a href="#pattern-interest-generate">&lt;-</a></small></h3>
<p>The <code>&lt;pattern-interest-generate&gt;</code> element determines timing characteristics for interest message generation at this portal.</p>
<p>This element is deprecated.</p>
<ul>
<li>
<b>Cardinality:</b> 0 or 1 </li>
<li>
<b>Parents:</b> <code>&lt;endpoint&gt;</code> <code>&lt;peer&gt;</code> </li>
<li>
<b>Children:</b> None. </li>
</ul>
<p><b>XML</b> <b>Attributes:</b> </p>
<table class="doxtable">
<tr>
<th>XML Attribute </th><th>Description </th><th>Default Value </th></tr>
<tr>
<td>interval </td><td>Interval (in milliseconds) between groups of patterns. </td><td>200 </td></tr>
<tr>
<td>max-patterns </td><td>Maximum patterns for which interest is generated at one time. </td><td>300000 </td></tr>
<tr>
<td>periodic-interval </td><td>Interval (in milliseconds) at which pattern interest is generated. </td><td>300000 </td></tr>
</table>
<p><b>Example:</b> </p>
<pre class="fragment">&lt;tnw-gateway version="1.0"&gt;
      . . .
      . . .
  &lt;portals&gt;
    &lt;endpoint&gt;
      &lt;pattern-interest-generate periodic-interval="250000"/&gt;
    &lt;/endpoint&gt;
  &lt;/portals&gt;
&lt;/tnw-gateway&gt;
</pre><p><br />
 </p>
<h3><a class="anchor" id="pattern-domain-activity"></a>
&lt;pattern-domain-activity/&gt;&nbsp;&nbsp;<small><a href="#pattern-domain-activity">&lt;-</a></small></h3>
<p>The <code>&lt;pattern-domain-activity&gt;</code> element determines how long a domain remains quiescent until it is determined inactive.</p>
<p>This element is deprecated.</p>
<ul>
<li>
<b>Cardinality:</b> 0 or 1 </li>
<li>
<b>Parents:</b> <code>&lt;endpoint&gt;</code> <code>&lt;peer&gt;</code> </li>
<li>
<b>Children:</b> None. </li>
</ul>
<p><b>XML</b> <b>Attributes:</b> </p>
<table class="doxtable">
<tr>
<th>XML Attribute </th><th>Description </th><th>Default Value </th></tr>
<tr>
<td>timeout </td><td>Minimum time (in seconds) domain interest for a pattern must be refreshed before interest is removed for that domain. </td><td>900 </td></tr>
</table>
<p><b>Example:</b> </p>
<pre class="fragment">&lt;tnw-gateway version="1.0"&gt;
      . . .
      . . .
  &lt;portals&gt;
    &lt;endpoint&gt;
      &lt;pattern-domain-activity timeout="800"/&gt;
    &lt;/endpoint&gt;
  &lt;/portals&gt;
&lt;/tnw-gateway&gt;
</pre><p><br />
 </p>
<h3><a class="anchor" id="topic-use-check"></a>
&lt;topic-use-check/&gt;&nbsp;&nbsp;<small><a href="#topic-use-check">&lt;-</a></small></h3>
<p>The <code>&lt;topic-use-check&gt;</code> element checks for interest in topics at periodic intervals.</p>
<p>This element is deprecated.</p>
<ul>
<li>
<b>Cardinality:</b> 0 or 1 </li>
<li>
<b>Parents:</b> <code>&lt;peer&gt;</code> </li>
<li>
<b>Children:</b> None. </li>
</ul>
<p><b>XML</b> <b>Attributes:</b> </p>
<table class="doxtable">
<tr>
<th>XML Attribute </th><th>Description </th><th>Default Value </th></tr>
<tr>
<td>periodic-interval </td><td>The interval (in milliseconds) at which source topics are checked to determine if there is no more interest. Before changing the value of this option, please contact Informatica Support. </td><td>300000 </td></tr>
</table>
<p><b>Example:</b> </p>
<pre class="fragment">&lt;tnw-gateway version="1.0"&gt;
      . . .
      . . .
  &lt;portals&gt;
    &lt;peer&gt;
      &lt;topic-use-check periodic-interval="1000"/&gt;
    &lt;/peer&gt;
  &lt;/portals&gt;
&lt;/tnw-gateway&gt;
</pre><p><br />
 </p>
<h3><a class="anchor" id="pattern-use-check"></a>
&lt;pattern-use-check/&gt;&nbsp;&nbsp;<small><a href="#pattern-use-check">&lt;-</a></small></h3>
<p>The <code>&lt;pattern-use-check&gt;</code> element checks for interest in patterns at periodic intervals.</p>
<p>This element is deprecated.</p>
<ul>
<li>
<b>Cardinality:</b> 0 or 1 </li>
<li>
<b>Parents:</b> <code>&lt;peer&gt;</code> </li>
<li>
<b>Children:</b> None. </li>
</ul>
<p><b>XML</b> <b>Attributes:</b> </p>
<table class="doxtable">
<tr>
<th>XML Attribute </th><th>Description </th><th>Default Value </th></tr>
<tr>
<td>periodic-interval </td><td>The interval (in milliseconds) at which source pattern are checked to determine if there is no more interest. Before changing the value of this option, please contact Informatica Support. </td><td>300000 </td></tr>
</table>
<p><b>Example:</b> </p>
<pre class="fragment">&lt;tnw-gateway version="1.0"&gt;
      . . .
      . . .
  &lt;portals&gt;
    &lt;peer&gt;
      &lt;topic-use-check periodic-interval="1000"/&gt;
    &lt;/peer&gt;
  &lt;/portals&gt;
&lt;/tnw-gateway&gt;
</pre><p><br />
 </p>
<h3><a class="anchor" id="drocfg_publishing-interval"></a>
&lt;publishing-interval&gt;&nbsp;&nbsp;<small><a href="#drocfg_publishing-interval">&lt;-</a></small></h3>
<p>The <code>&lt;publishing-interval&gt;</code> element configures the rate at which Daemon Statistics messages are published. See <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.12_RC3/doc/Gateway/design.tag:../../Design/" href="../../Design/umobjects.html#daemonstatistics">Daemon Statistics</a> for general information on Daemon Statistics.</p>
<ul>
<li>
<b>Cardinality:</b> 0 or 1 </li>
<li>
<b>Parents:</b> <code>&lt;daemon-monitor&gt;</code>, <code>&lt;endpoint&gt;</code>, <code>&lt;peer&gt;</code> </li>
<li>
<b>Children:</b> <code>&lt;group&gt;</code> </li>
</ul>
<p><b>XML</b> <b>Attributes:</b> None.</p>
<p><b>Example:</b> </p>
<pre class="fragment">&lt;tnw-gateway version="1.0"&gt;
  &lt;daemon&gt;
    &lt;daemon-monitor topic="umrouter.1"&gt;
      &lt;lbm-config&gt;/path/umrouter_monitor.cfg&lt;/lbm-config&gt;
      &lt;publishing-interval&gt;
        &lt;group name="default" ivl="5"&gt;
        &lt;group name="gateway-config" ivl="30"&gt;
        &lt;group name="portal-config" ivl="30"&gt;
      &lt;/publishing-interval&gt;
      . . .
    &lt;/daemon-monitor&gt;
  &lt;/daemon&gt;
      . . .
      . . .
&lt;/tnw-gateway&gt;
</pre><p><br />
 </p>
<h3><a class="anchor" id="drocfg_group"></a>
&lt;group&gt;&nbsp;&nbsp;<small><a href="#drocfg_group">&lt;-</a></small></h3>
<p>The <code>&lt;group&gt;</code> element configures the rate at which one particular grouping of Daemon Statistics messages are published. See <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.12_RC3/doc/Gateway/design.tag:../../Design/" href="../../Design/umobjects.html#daemonstatistics">Daemon Statistics</a> for general information on Daemon Statistics.</p>
<ul>
<li>
<b>Cardinality:</b> 0 or 1 </li>
<li>
<b>Parents:</b> <code>&lt;publishing-interval&gt;</code> </li>
<li>
<b>Children:</b> none. </li>
</ul>
<p><b>XML</b> <b>Attributes:</b> None.</p>
<p><b>Example:</b> </p>
<pre class="fragment">&lt;tnw-gateway version="1.0"&gt;
  &lt;daemon&gt;
    &lt;daemon-monitor topic="umrouter.1"&gt;
      &lt;lbm-config&gt;/path/umrouter_monitor.cfg&lt;/lbm-config&gt;
      &lt;publishing-interval&gt;
        &lt;group name="default" ivl="5"&gt;
        &lt;group name="gateway-config" ivl="30"&gt;
        &lt;group name="portal-config" ivl="30"&gt;
      &lt;/publishing-interval&gt;
      . . .
    &lt;/daemon-monitor&gt;
  &lt;/daemon&gt;
      . . .
      . . .
&lt;/tnw-gateway&gt;
</pre><p><br />
 </p>
<h2><a class="anchor" id="umrouterconfigurationdtd"></a>
UM Router Configuration DTD&nbsp;&nbsp;<small><a href="#umrouterconfigurationdtd">&lt;-</a></small></h2>
<p>Here is the XML configuration DTD with the comments removed. To see the DTD with comments included, enter <code>tnwgd --dump-dtd</code>.</p>
<pre class="fragment">&lt;!ELEMENT tnw-gateway (daemon?, portals)&gt;
&lt;!ATTLIST tnw-gateway
          version (1.0) #REQUIRED
&gt;
&lt;!ELEMENT daemon (name?, log?, uid?, gid?, pidfile?, lbm-license-file?, topicmap?, patternmap?, monitor?, web-monitor?, daemon-monitor?, propagation-delay?, xml-config?, route-info?, route-recalculation?)&gt;
&lt;!ELEMENT log ( #PCDATA )&gt;
&lt;!ATTLIST log
          type (file | syslog | console) "console"
          frequency (disable | daily | hourly | test) "disable"
          size CDATA "0"
          xml:space (default | preserve) "default"
&gt;
&lt;!ELEMENT pidfile ( #PCDATA )&gt;
&lt;!ATTLIST pidfile xml:space (default | preserve) "default"&gt;
&lt;!ELEMENT uid ( #PCDATA )&gt;
&lt;!ELEMENT gid ( #PCDATA )&gt;
&lt;!ELEMENT lbm-license-file ( #PCDATA )&gt;
&lt;!ATTLIST lbm-license-file xml:space (default | preserve) "default"&gt;
&lt;!ELEMENT topicmap EMPTY&gt;
&lt;!ATTLIST topicmap
          hash-function ( classic | djb2 | sdbm | murmur2 ) "murmur2"
          size CDATA "131111"
&gt;
&lt;!ELEMENT patternmap EMPTY&gt;
&lt;!ATTLIST patternmap
          hash-function ( classic | djb2 | sdbm | murmur2 ) "murmur2"
          size CDATA "131111"
&gt;
&lt;!ELEMENT portals (endpoint | peer)+&gt;
&lt;!ELEMENT endpoint (name, domain-id, cost?, source-deletion-delay?, max-queue?, smart-batch?, lbm-config?, lbm-attributes?, acl?, topic-resolution?, late-join?, topic-purge?, topic-interest-generate?, topic-domain-activity?, pattern-purge?, pattern-interest-generate?, pattern-domain-activity?, remote-topic?, remote-pattern?, source-context-name?, receiver-context-name?, sqn-window?, context-query?, publishing-interval? )&gt;
&lt;!ELEMENT peer (name, cost?, sourcemap?, (tcp | single-tcp), source-deletion-delay?, max-queue?, smart-batch?, max-datagram?, batching?, lbm-config?, lbm-attributes?, acl?, topic-purge?, topic-interest-generate?, topic-domain-activity?, pattern-purge?, pattern-interest-generate?, pattern-domain-activity?, topic-use-check?, pattern-use-check?, source-context-name?, receiver-context-name?, sqn-window?, context-query?, gateway-keepalive?, publishing-interval? )&gt;
&lt;!ELEMENT name ( #PCDATA )&gt;
&lt;!ATTLIST name xml:space (default | preserve) "default"&gt;
&lt;!ELEMENT domain-id ( #PCDATA )&gt;
&lt;!ELEMENT cost ( #PCDATA )&gt;
&lt;!ELEMENT source-deletion-delay ( #PCDATA )&gt;
&lt;!ELEMENT sourcemap EMPTY&gt;
&lt;!ATTLIST sourcemap
          size CDATA "131072"
&gt;
&lt;!ELEMENT tcp (interface?, listen-port, receive-buffer?, send-buffer?, keepalive?, nodelay?, compression?, tls?, companion )&gt;
&lt;!ELEMENT interface ( #PCDATA )&gt;
&lt;!ELEMENT listen-port ( #PCDATA )&gt;
&lt;!ELEMENT receive-buffer ( #PCDATA )&gt;
&lt;!ELEMENT send-buffer ( #PCDATA )&gt;
&lt;!ELEMENT keepalive EMPTY &gt;
&lt;!ELEMENT nodelay EMPTY &gt;
&lt;!ELEMENT companion (address, port)&gt;
&lt;!ELEMENT compression ( #PCDATA )&gt;
&lt;!ELEMENT tls (certificate, certificate-key, certificate-key-password?, trusted-certificates?, cipher-suites? )&gt;
&lt;!ELEMENT certificate ( #PCDATA )&gt;
&lt;!ELEMENT certificate-key ( #PCDATA )&gt;
&lt;!ELEMENT certificate-key-password ( #PCDATA )&gt;
&lt;!ELEMENT trusted-certificates ( #PCDATA )&gt;
&lt;!ELEMENT cipher-suites ( #PCDATA )&gt;
&lt;!ATTLIST companion
          reconnect-interval CDATA "5000"
&gt;
&lt;!ELEMENT address ( #PCDATA )&gt;
&lt;!ELEMENT port ( #PCDATA )&gt;
&lt;!ELEMENT single-tcp (interface?, receive-buffer?, send-buffer?, keepalive?, nodelay?, compression?, tls?, (initiator | acceptor ) )&gt;
&lt;!ELEMENT initiator (address, port)&gt;
&lt;!ATTLIST initiator
          reconnect-interval CDATA "5000"
&gt;
&lt;!ELEMENT acceptor (listen-port)&gt;
&lt;!ELEMENT max-queue ( #PCDATA )&gt;
&lt;!ELEMENT smart-batch ( #PCDATA )&gt;
&lt;!ELEMENT max-datagram ( #PCDATA )&gt;
&lt;!ELEMENT batching (min-length?, batch-interval?)&gt;
&lt;!ELEMENT min-length ( #PCDATA )&gt;
&lt;!ELEMENT batch-interval ( #PCDATA )&gt;
&lt;!ELEMENT lbm-config ( #PCDATA )&gt;
&lt;!ATTLIST lbm-config xml:space (default | preserve) "default"&gt;
&lt;!ELEMENT lbm-attributes (option+)&gt;
&lt;!ELEMENT option EMPTY&gt;
&lt;!ATTLIST option
          scope (receiver | context | source | wildcard_receiver | event_queue) #REQUIRED
          name CDATA #REQUIRED
          value CDATA #REQUIRED
&gt;
&lt;!ELEMENT acl (inbound?, outbound?)&gt;
&lt;!ELEMENT inbound (ace+)&gt;
&lt;!ELEMENT outbound (ace+)&gt;
&lt;!ELEMENT ace (topic | pcre-pattern | regex-pattern | transport | source-ip | multicast-group | udp-source-port | udp-destination-port | tcp-source-port | xport-id)+ &gt;
&lt;!ATTLIST ace match (accept | reject) #REQUIRED &gt;
&lt;!ELEMENT topic ( #PCDATA )&gt;
&lt;!ATTLIST topic
          xml:space (default | preserve) "default"
&gt;
&lt;!ELEMENT pcre-pattern ( #PCDATA )&gt;
&lt;!ATTLIST pcre-pattern
          xml:space (default | preserve) "default"
&gt;
&lt;!ELEMENT regex-pattern ( #PCDATA )&gt;
&lt;!ATTLIST regex-pattern
          xml:space (default | preserve) "default"
&gt;
&lt;!ELEMENT transport EMPTY&gt;
&lt;!ATTLIST transport
          value (tcp | lbt-rm | lbtrm | lbt-ru | lbtru | lbt-ipc | lbtipc) #REQUIRED
          comparison (eq | equal | ne | notequal) #REQUIRED
&gt;
&lt;!ELEMENT source-ip EMPTY&gt;
&lt;!ATTLIST source-ip
          value CDATA #REQUIRED
          comparison (eq | equal | ne | notequal | lt | lessthan | le | lessthanequal | gt | greaterthan | ge | greaterthanequal) #REQUIRED
&gt;
&lt;!ELEMENT multicast-group EMPTY&gt;
&lt;!ATTLIST multicast-group
          value CDATA #REQUIRED
          comparison (eq | equal | ne | notequal | lt | lessthan | le | lessthanequal | gt | greaterthan | ge | greaterthanequal) #REQUIRED
&gt;
&lt;!ELEMENT udp-source-port EMPTY&gt;
&lt;!ATTLIST udp-source-port
          value CDATA #REQUIRED
          comparison (eq | equal | ne | notequal | lt | lessthan | le | lessthanequal | gt | greaterthan | ge | greaterthanequal) #REQUIRED
&gt;
&lt;!ELEMENT udp-destination-port EMPTY&gt;
&lt;!ATTLIST udp-destination-port
          value CDATA #REQUIRED
          comparison (eq | equal | ne | notequal | lt | lessthan | le | lessthanequal | gt | greaterthan | ge | greaterthanequal) #REQUIRED
&gt;
&lt;!ELEMENT tcp-source-port EMPTY&gt;
&lt;!ATTLIST tcp-source-port
          value CDATA #REQUIRED
          comparison (eq | equal | ne | notequal | lt | lessthan | le | lessthanequal | gt | greaterthan | ge | greaterthanequal) #REQUIRED
&gt;
&lt;!ELEMENT xport-id EMPTY&gt;
&lt;!ATTLIST xport-id
          value CDATA #REQUIRED
          comparison (eq | equal | ne | notequal | lt | lessthan | le | lessthanequal | gt | greaterthan | ge | greaterthanequal) #REQUIRED
&gt;
&lt;!ELEMENT topic-resolution (topic-use-query?, pattern-use-query?, remote-topic-interest?, remote-pattern-interest?, domain-route?, initial-request? )&gt;
&lt;!ELEMENT topic-use-query (rate-limit? ) &gt;
&lt;!ATTLIST topic-use-query
          timeout CDATA "3000"
          max CDATA "5"
          periodic-interval CDATA "300000"
&gt;
&lt;!ELEMENT pattern-use-query (rate-limit? ) &gt;
&lt;!ATTLIST pattern-use-query
          timeout CDATA "3000"
          max CDATA "5"
          periodic-interval CDATA "300000"
&gt;
&lt;!ELEMENT remote-topic-interest (rate-limit? ) &gt;
&lt;!ATTLIST remote-topic-interest
          min-interval CDATA "1000"
          max-interval CDATA "60000"
&gt;
&lt;!ELEMENT remote-pattern-interest (rate-limit? ) &gt;
&lt;!ATTLIST remote-pattern-interest
          min-interval CDATA "1000"
          max-interval CDATA "60000"
&gt;
&lt;!ELEMENT domain-route (rate-limit? ) &gt;
&lt;!ATTLIST domain-route
          min-interval CDATA "100"
          max-interval CDATA "1000"
&gt;
&lt;!ELEMENT rate-limit EMPTY&gt;
&lt;!ATTLIST rate-limit
          bps CDATA #IMPLIED
          objects-per-second CDATA #IMPLIED
&gt;
&lt;!ELEMENT initial-request EMPTY&gt;
&lt;!ATTLIST initial-request
          periodic-interval CDATA "1000"
          duration CDATA "10"
&gt;
&lt;!ELEMENT late-join EMPTY&gt;
&lt;!ATTLIST late-join
          provide ( source | always | never ) "source"
          forward ( yes | no ) "yes"
&gt;
&lt;!ELEMENT topic-purge EMPTY&gt;
&lt;!ATTLIST topic-purge periodic-interval CDATA #IMPLIED&gt;
&lt;!ELEMENT topic-interest-generate EMPTY&gt;
&lt;!ATTLIST topic-interest-generate
          periodic-interval CDATA #IMPLIED
          max-topics CDATA #IMPLIED
          interval CDATA #IMPLIED
&gt;
&lt;!ELEMENT topic-domain-activity EMPTY&gt;
&lt;!ATTLIST topic-domain-activity timeout CDATA #IMPLIED&gt;
&lt;!ELEMENT pattern-purge EMPTY&gt;
&lt;!ATTLIST pattern-purge periodic-interval CDATA #IMPLIED&gt;
&lt;!ELEMENT pattern-interest-generate EMPTY&gt;
&lt;!ATTLIST pattern-interest-generate
          periodic-interval CDATA #IMPLIED
          max-patterns CDATA #IMPLIED
          interval CDATA #IMPLIED
&gt;
&lt;!ELEMENT pattern-domain-activity EMPTY&gt;
&lt;!ATTLIST pattern-domain-activity timeout CDATA #IMPLIED&gt;
&lt;!ELEMENT remote-topic EMPTY&gt;
&lt;!ATTLIST remote-topic
          check-interval CDATA "90000"
          max-topics CDATA "100"
          timeout CDATA "300000"
&gt;
&lt;!ELEMENT remote-pattern EMPTY&gt;
&lt;!ATTLIST remote-pattern
          check-interval CDATA "90000"
          max-patterns CDATA "100"
          timeout CDATA "300000"
&gt;
&lt;!ELEMENT topic-use-check EMPTY&gt;
&lt;!ATTLIST topic-use-check periodic-interval CDATA #IMPLIED&gt;
&lt;!ELEMENT pattern-use-check EMPTY&gt;
&lt;!ATTLIST pattern-use-check periodic-interval CDATA #IMPLIED&gt;
&lt;!ELEMENT monitor (transport-module?, format-module?)&gt;
&lt;!ATTLIST monitor
          interval CDATA "0"
&gt;
&lt;!ELEMENT transport-module EMPTY&gt;
&lt;!ATTLIST transport-module
          module (lbm | lbmsnmp | udp) "lbm"
          options CDATA #IMPLIED
&gt;
&lt;!ELEMENT format-module EMPTY&gt;
&lt;!ATTLIST format-module
          module (csv) "csv"
          options CDATA #IMPLIED
&gt;
&lt;!ELEMENT web-monitor ( #PCDATA )&gt;
&lt;!ATTLIST web-monitor xml:space (default | preserve) "default"&gt;
&lt;!ELEMENT propagation-delay EMPTY&gt;
&lt;!ATTLIST propagation-delay delta CDATA #IMPLIED&gt;
&lt;!ELEMENT xml-config ( #PCDATA )&gt;
&lt;!ATTLIST xml-config xml:space (default | preserve) "default"&gt;
&lt;!ELEMENT source-context-name ( #PCDATA )&gt;
&lt;!ATTLIST source-context-name xml:space (default | preserve) "default"&gt;
&lt;!ELEMENT receiver-context-name ( #PCDATA )&gt;
&lt;!ATTLIST receiver-context-name xml:space (default | preserve) "default"&gt;
&lt;!ELEMENT sqn-window EMPTY&gt;
&lt;!ATTLIST sqn-window
          size CDATA "16384"
          increment CDATA "2048"
&gt;
&lt;!ELEMENT context-query EMPTY&gt;
&lt;!ATTLIST context-query
          periodic-interval CDATA #IMPLIED
          max-contexts CDATA #IMPLIED
          interval CDATA #IMPLIED
          timeout CDATA #IMPLIED
&gt;
&lt;!ELEMENT gateway-keepalive EMPTY&gt;
&lt;!ATTLIST gateway-keepalive
          idle ( yes | no ) "yes"
          interval CDATA "5000"
          timeout CDATA "15000"
&gt;
&lt;!ELEMENT route-info EMPTY&gt;
&lt;!ATTLIST route-info
          propagation-interval CDATA "1000"
          check-interval CDATA "750"
          timeout CDATA "4000"
          max-hop-count CDATA "100"
&gt;
&lt;!ELEMENT route-recalculation EMPTY&gt;
&lt;!ATTLIST route-recalculation
          backoff-interval CDATA "5000"
          warning-interval CDATA "10000"
&gt;
&lt;!ELEMENT daemon-monitor (lbm-config?, publishing-interval?, remote-snapshot-request?, remote-config-changes-request?)&gt;
&lt;!ATTLIST daemon-monitor topic CDATA "tnwgd.monitor"&gt;
&lt;!ELEMENT publishing-interval (group+)&gt;
&lt;!ELEMENT group EMPTY&gt;
&lt;!ATTLIST group name (default | gateway-config | route-manager-topology | malloc-info | portal-config | portal-stats ) #REQUIRED&gt;
&lt;!ATTLIST group ivl CDATA #REQUIRED&gt;
&lt;!ELEMENT remote-snapshot-request EMPTY&gt;
&lt;!ATTLIST remote-snapshot-request allow (0 | 1) "0"&gt;
&lt;!ELEMENT remote-config-changes-request EMPTY&gt;
&lt;!ATTLIST remote-config-changes-request allow (0 | 1) "0"&gt;</pre><p><br />
 </p>
<h1><a class="anchor" id="umrouterdaemonstatistics"></a>
UM Router Daemon Statistics&nbsp;&nbsp;<small><a href="#umrouterdaemonstatistics">&lt;-</a></small></h1>
<p>This section contains details on the UM Router's Daemon Statistics feature. <b>You should already be familiar with the general information contained in <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.12_RC3/doc/Gateway/design.tag:../../Design/" href="../../Design/umobjects.html#daemonstatistics">Daemon Statistics</a>.</b></p>
<p><br />
 </p>
<h2><a class="anchor" id="umrouterdaemonstatisticsstructures"></a>
UM Router Daemon Statistics Structures&nbsp;&nbsp;<small><a href="#umrouterdaemonstatisticsstructures">&lt;-</a></small></h2>
<p>The different message types are:</p>
<ul>
<li>
<a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.12_RC3/doc/Gateway/api.tag:../../API/" href="../../API/tnwgdmonmsgs_8h.html#a3d4c9c51b7c6c951f9bb30fc01985443">TNWG_DSTATTYPE_MALLINFO</a> </li>
<li>
<a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.12_RC3/doc/Gateway/api.tag:../../API/" href="../../API/tnwgdmonmsgs_8h.html#a219110ebfcf129991d124c7c4b958b5f">TNWG_DSTATTYPE_GATEWAYCFG</a> </li>
<li>
<a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.12_RC3/doc/Gateway/api.tag:../../API/" href="../../API/tnwgdmonmsgs_8h.html#aa6d1797deea435e8b48b6296bc0725a1">TNWG_DSTATTYPE_PORTCFG</a> </li>
<li>
<a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.12_RC3/doc/Gateway/api.tag:../../API/" href="../../API/tnwgdmonmsgs_8h.html#a8f8364505ea12a843de27bd08f781742">TNWG_DSTATTYPE_RM_LOCAL</a> </li>
<li>
<a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.12_RC3/doc/Gateway/api.tag:../../API/" href="../../API/tnwgdmonmsgs_8h.html#a42c3c613d145e1468643a3e82cd4d831">TNWG_DSTATTYPE_RM_PORTAL</a> </li>
<li>
<a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.12_RC3/doc/Gateway/api.tag:../../API/" href="../../API/tnwgdmonmsgs_8h.html#ac5224b9528702e4517b7ca3c0e98ce44">TNWG_DSTATTYPE_RM_OTHERGW</a> </li>
<li>
<a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.12_RC3/doc/Gateway/api.tag:../../API/" href="../../API/tnwgdmonmsgs_8h.html#a63eb677c1dedb172db3a4d4fd74bed5e">TNWG_DSTATTYPE_RM_OTHERGW_NBR</a> </li>
<li>
<a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.12_RC3/doc/Gateway/api.tag:../../API/" href="../../API/tnwgdmonmsgs_8h.html#a753f815bd1b3d81710769ebc11ead975">TNWG_DSTATTYPE_PORTSTAT</a> </li>
</ul>
<p>Each one has a specific structure associated with it, as detailed in the file <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.12_RC3/doc/Gateway/api.tag:../../API/" href="../../API/tnwgdmonmsgs_8h.html">tnwgdmonmsgs.h</a>.</p>
<p>Note that message types ending with "CFG" are in the config category. All others are in the stats category. See <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.12_RC3/doc/Gateway/design.tag:../../Design/" href="../../Design/umobjects.html#daemonstatisticsstructures">Daemon Statistics Structures</a> for information on how the two categories are handled differently.</p>
<p><br />
 </p>
<h3><a class="anchor" id="umrouterdaemonstatisticsbyteswapping"></a>
UM Router Daemon Statistics Byte Swapping&nbsp;&nbsp;<small><a href="#umrouterdaemonstatisticsbyteswapping">&lt;-</a></small></h3>
<p>A monitoring application receiving these messages must detect if there is an endian mismatch (see <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.12_RC3/doc/Gateway/design.tag:../../Design/" href="../../Design/umobjects.html#daemonstatisticsbinarydata">Daemon Statistics Binary Data</a>). The header structure <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.12_RC3/doc/Gateway/api.tag:../../API/" href="../../API/tnwgdmonmsgs_8h.html#adede0ed30cc9a1511a0d354012f935fe">tnwg_dstat_msg_hdr_t</a> contains a 16-bit field named <code>magic</code> which is set equal to <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.12_RC3/doc/Gateway/api.tag:../../API/" href="../../API/tnwgdmonmsgs_8h.html#a564f67a429dc4f223eb22141c217eb13">LBM_TNWG_DAEMON_MAGIC</a>. The receiving application should compare it to <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.12_RC3/doc/Gateway/api.tag:../../API/" href="../../API/tnwgdmonmsgs_8h.html#a564f67a429dc4f223eb22141c217eb13">LBM_TNWG_DAEMON_MAGIC</a> and <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.12_RC3/doc/Gateway/api.tag:../../API/" href="../../API/tnwgdmonmsgs_8h.html#a5b2b012ee57b0466b70e249b41234b0d">LBM_TNWG_DAEMON_ANTIMAGIC</a>. Anything else would represent a serious problem.</p>
<p>If the receiving app sees: </p><pre class="fragment">  magic == LBM_TNWG_DAEMON_MAGIC
</pre><p> then it can simply access the binary fields directly. However, if it sees: </p><pre class="fragment">  magic == LBM_TNWG_DAEMON_ANTIMAGIC
</pre><p> then <em>most</em> (but not all) binary fields need to be byte-swapped. See <a href="../../example/tnwgdmon.c">tnwgdmon.c</a> for an example, paying special attention to the macros <code>COND_SWAPxx</code> (which <em>conditionally</em> swaps based on the magic test) and the functions <code>byte_swapXX()</code> (which performs the byte swapping).</p>
<p><br />
 </p>
<h3><a class="anchor" id="umrouterdaemonstatisticsstructuresstringbuffers"></a>
UM Router Daemon Statistics String Buffers&nbsp;&nbsp;<small><a href="#umrouterdaemonstatisticsstructuresstringbuffers">&lt;-</a></small></h3>
<p>UM Router Daemon Statistics data structures sometimes contain string buffers. Strings in these data structures are always null-terminated. These messages are generally sent as fixed-length equal to the sizes of the structures, and therefore include all of the declared bytes of the string fields, even if the contained string uses fewer bytes than declared. For example, the structure <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.12_RC3/doc/Gateway/api.tag:../../API/" href="../../API/tnwgdmonmsgs_8h.html#a4e8d3cbad4fc3907e6875a867f778cd7">tnwg_dstat_record_hdr_t</a> contains the field <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.12_RC3/doc/Gateway/api.tag:../../API/" href="../../API/structtnwg__dstat__record__hdr__t__stct.html#a259dca70e2e2d30e16f6959ac899fd78">tnwg_dstat_record_hdr_t_stct::portal_name</a> which is a <code>char</code> array of size <code>TNWG_DSTAT_MAX_PORTAL_NAME_LEN</code>. If <code>portal_name</code> is set to "p1", then only 3 bytes of the buffer are used (including the null string terminator). However, all <code>TNWG_DSTAT_MAX_PORTAL_NAME_LEN</code> bytes will be sent in the <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.12_RC3/doc/Gateway/api.tag:../../API/" href="../../API/tnwgdmonmsgs_8h.html#a42c3c613d145e1468643a3e82cd4d831">TNWG_DSTATTYPE_RM_PORTAL</a> message type.</p>
<p>Contrast this with <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.12_RC3/doc/Gateway/ume.tag:../../UME/" href="../../UME/storedaemonstatistics.html#storedaemonstatisticsstructuresstringbuffers">Store Daemon Statistics String Buffers</a>.</p>
<p>There are two exceptions to this rule: <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.12_RC3/doc/Gateway/api.tag:../../API/" href="../../API/tnwgdmonmsgs_8h.html#aa6d1797deea435e8b48b6296bc0725a1">TNWG_DSTATTYPE_PORTCFG</a> and <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.12_RC3/doc/Gateway/api.tag:../../API/" href="../../API/tnwgdmonmsgs_8h.html#a219110ebfcf129991d124c7c4b958b5f">TNWG_DSTATTYPE_GATEWAYCFG</a>.</p>
<p>The <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.12_RC3/doc/Gateway/api.tag:../../API/" href="../../API/tnwgdmonmsgs_8h.html#aa6d1797deea435e8b48b6296bc0725a1">TNWG_DSTATTYPE_PORTCFG</a> message is of type <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.12_RC3/doc/Gateway/api.tag:../../API/" href="../../API/tnwgdmonmsgs_8h.html#ad401470ed9be21b3ebca145fb79459b3">tnwg_pcfg_stat_grp_msg_t</a> and has the field <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.12_RC3/doc/Gateway/api.tag:../../API/" href="../../API/structtnwg__pcfg__stat__grp__msg__t__stct.html#a7887eff4d4e78540e53ea5a5a2521193">tnwg_pcfg_stat_grp_msg_t_stct::data</a>. This field is a variable-length string buffer which contains one or more null-terminated strings. The total length of the <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.12_RC3/doc/Gateway/api.tag:../../API/" href="../../API/tnwgdmonmsgs_8h.html#aa6d1797deea435e8b48b6296bc0725a1">TNWG_DSTATTYPE_PORTCFG</a> message is the sum of the length of its sub-structures plus the number of bytes of string data (characters plus string-terminating nulls). The number of strings in <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.12_RC3/doc/Gateway/api.tag:../../API/" href="../../API/structtnwg__pcfg__stat__grp__msg__t__stct.html#a7887eff4d4e78540e53ea5a5a2521193">tnwg_pcfg_stat_grp_msg_t_stct::data</a> is given by <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.12_RC3/doc/Gateway/api.tag:../../API/" href="../../API/structtnwg__pcfg__stat__grp__msg__t__stct.html#a278f4ace28e25468a5b5cff658847b7d">tnwg_pcfg_stat_grp_msg_t_stct::rechdr</a>-&gt;num_options. The monitoring application must step through the string buffer that many times to find each string. For an example of how to do this, see <a href="../../example/tnwgdmon.c">tnwgdmon.c</a> in the code following, "`case TNWG_DSTATTYPE_PORTCFG:`".</p>
<p>The <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.12_RC3/doc/Gateway/api.tag:../../API/" href="../../API/tnwgdmonmsgs_8h.html#a219110ebfcf129991d124c7c4b958b5f">TNWG_DSTATTYPE_GATEWAYCFG</a> message is of type <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.12_RC3/doc/Gateway/api.tag:../../API/" href="../../API/tnwgdmonmsgs_8h.html#a9d9ec1a3f772ba37b376ace807eb5fb5">tnwg_dstat_gatewaycfg_msg_t</a> and has the field <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.12_RC3/doc/Gateway/api.tag:../../API/" href="../../API/structtnwg__dstat__gatewaycfg__msg__t__stct.html#a4f72360cd45b5191a11b608e7a3ce052">tnwg_dstat_gatewaycfg_msg_t_stct::data</a>. This field is a variable-length string buffer which contains exactly one null-terminated string. This string contains the entirety of the UM Router's configuration file. The individual lines contain the normal line-ending character(s). The total length of the <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.12_RC3/doc/Gateway/api.tag:../../API/" href="../../API/tnwgdmonmsgs_8h.html#a219110ebfcf129991d124c7c4b958b5f">TNWG_DSTATTYPE_GATEWAYCFG</a> message is the length of its sub-structure plus the number of bytes of string data (characters plus string-terminating nulls).</p>
<p><br />
 </p>
<h2><a class="anchor" id="umrouterdaemonstatisticsconfiguration"></a>
UM Router Daemon Statistics Configuration&nbsp;&nbsp;<small><a href="#umrouterdaemonstatisticsconfiguration">&lt;-</a></small></h2>
<p>There are three places in the UM Router configuration file that Daemon Statistics are configured: </p><ul>
<li>
The <a class="el" href="index.html#drocfg_daemon-monitor">&lt;daemon-monitor&gt;</a> element inside the <code>&lt;daemon&gt;</code> definition. Configures all aspects of the Store Daemon Statistics feature, including publishing intervals. </li>
<li>
The <a class="el" href="index.html#drocfg_publishing-interval">&lt;publishing-interval&gt;</a> element inside the <code>&lt;peer&gt;</code> definition. Configures only the publishing intervals on a peer portal basis. </li>
<li>
The <a class="el" href="index.html#drocfg_publishing-interval">&lt;publishing-interval&gt;</a> element inside the <code>&lt;endpoint&gt;</code> definition. Configures only the publishing intervals on an endpoint portal basis. </li>
</ul>
<p>Here is an example of configuring daemon statistics.</p>
<pre class="fragment">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;
&lt;!-- G1 xml file- 2 endpoint portals --&gt;
&lt;tnw-gateway version="1.0"&gt;
  &lt;daemon&gt;
    ...
    &lt;publishing-interval&gt;
      &lt;group name="default" ivl="3"/&gt;
      &lt;group name="gateway-config" ivl="120"&gt;
      &lt;group name="portal-config" ivl="120"&gt;
    &lt;/publishing-interval&gt;
    &lt;remote-snapshot-request allow="1"/&gt;
    &lt;remote-config-changes-request allow="1"/&gt;
  &lt;/daemon&gt;
  &lt;portals&gt;
    &lt;endpoint&gt;
      &lt;name&gt;G1-TRD1&lt;/name&gt;
      ...
      &lt;publishing-interval&gt;
        &lt;group name="default" ivl="6"/&gt;
        &lt;group name="gateway-config" ivl="120"&gt;
        &lt;group name="portal-config" ivl="120"&gt;
      &lt;/publishing-interval&gt;
    &lt;/endpoint&gt;
    ...
  &lt;/portals&gt;
&lt;/tnw-gateway&gt;
</pre><p>In this example, all stats-type messages are (conditionally) published on a 3-second interval, except those of portal G1-TRD1, which are published (conditionally) on a 6-second interval. All config-type messages are published (unconditionally) on a 120-second interval.</p>
<p><br />
 </p>
<h2><a class="anchor" id="umrouterdaemonstatisticsrequests"></a>
UM Router Daemon Statistics Requests&nbsp;&nbsp;<small><a href="#umrouterdaemonstatisticsrequests">&lt;-</a></small></h2>
<p>The UM Router Daemon supports a monitoring application to send a specific set of requests to control the operation of Daemon Statistics. The <a class="el" href="index.html#drocfg_remote-snapshot-request">remote-snapshot-request</a> and <a class="el" href="index.html#drocfg_remote-config-changes-request">remote-config-changes-request</a> configuration elements control whether the Store enables this request feature (defaults to disabled).</p>
<p>If enabled, the monitoring application can send a command message to the UM Router in the form of a topicless unicast immediate "request" message (see <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.12_RC3/doc/Gateway/api.tag:../../API/" href="../../API/lbm_8h.html#ae011c7a66e1db1f012d7f9633dbd321d">lbm_unicast_immediate_request()</a> with NULL for topic). The format of the message is a simple ascii string, with or without null termination. Due to the simple format of the message, no data structure is defined for it.</p>
<p>When the UM Router receives and validates the command, it sends a UM response message back to the requesting application containing a status message (which is <em>not</em> null-terminated). If the status was OK, the Store also performs the requested action.</p>
<p>The example program <a href="../../example/tnwgdcmd.c">tnwgdcmd.c</a> demonstrates the correct way to send the messages and receive the responses.</p>
<p><b>Commands enabled by <a class="el" href="index.html#drocfg_remote-snapshot-request">remote-snapshot-request</a>:</b></p>
<dl class="section user"><dt>version</dt><dd>The UM Router returns in its command response the value of <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.12_RC3/doc/Gateway/api.tag:../../API/" href="../../API/umedmonmsgs_8h.html#af43ca32ea1917897c4ff1310d214c20b">LBM_UMESTORE_DMON_VERSION</a>. No daemon statistics messages are published.</dd></dl>
<dl class="section user"><dt>snap mallinfo</dt><dd>The UM Router immediately publishes the memory allocation usage message of type <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.12_RC3/doc/Gateway/api.tag:../../API/" href="../../API/tnwgdmonmsgs_8h.html#a3d4c9c51b7c6c951f9bb30fc01985443">TNWG_DSTATTYPE_MALLINFO</a>.</dd></dl>
<dl class="section user"><dt>snap pstat</dt><dd>The UM Router immediately publishes the portal statistics message(s) of type <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.12_RC3/doc/Gateway/api.tag:../../API/" href="../../API/tnwgdmonmsgs_8h.html#a753f815bd1b3d81710769ebc11ead975">TNWG_DSTATTYPE_PORTSTAT</a>.</dd></dl>
<dl class="section user"><dt>snap ri</dt><dd>The UM Router immediately publishes the route information message(s) of types <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.12_RC3/doc/Gateway/api.tag:../../API/" href="../../API/tnwgdmonmsgs_8h.html#a8f8364505ea12a843de27bd08f781742">TNWG_DSTATTYPE_RM_LOCAL</a>, <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.12_RC3/doc/Gateway/api.tag:../../API/" href="../../API/tnwgdmonmsgs_8h.html#a42c3c613d145e1468643a3e82cd4d831">TNWG_DSTATTYPE_RM_PORTAL</a> <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.12_RC3/doc/Gateway/api.tag:../../API/" href="../../API/tnwgdmonmsgs_8h.html#ac5224b9528702e4517b7ca3c0e98ce44">TNWG_DSTATTYPE_RM_OTHERGW</a>, and <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.12_RC3/doc/Gateway/api.tag:../../API/" href="../../API/tnwgdmonmsgs_8h.html#a63eb677c1dedb172db3a4d4fd74bed5e">TNWG_DSTATTYPE_RM_OTHERGW_NBR</a>.</dd></dl>
<dl class="section user"><dt>snap gcfg</dt><dd>The UM Router immediately publishes the gateway configuration message <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.12_RC3/doc/Gateway/api.tag:../../API/" href="../../API/tnwgdmonmsgs_8h.html#a219110ebfcf129991d124c7c4b958b5f">TNWG_DSTATTYPE_GATEWAYCFG</a>.</dd></dl>
<dl class="section user"><dt>snap pcfg</dt><dd>The UM Router immediately publishes the portal configuration message(s) <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.12_RC3/doc/Gateway/api.tag:../../API/" href="../../API/tnwgdmonmsgs_8h.html#aa6d1797deea435e8b48b6296bc0725a1">TNWG_DSTATTYPE_PORTCFG</a>.</dd></dl>
<p><b>Commands enabled by <a class="el" href="index.html#drocfg_remote-config-changes-request">remote-config-changes-request</a>:</b></p>
<dl class="section user"><dt>mallinfo N</dt><dd>Set the publishing interval for memory allocation usage. <br />
For example: <code>mallinfo 5</code></dd></dl>
<dl class="section user"><dt>ri N</dt><dd>Set the publishing interval for the route information messages. <br />
For example: <code>ri 5</code></dd></dl>
<dl class="section user"><dt>gcfg N</dt><dd>Set the publishing interval for the gateway configuration message. <br />
For example: <code>gcfg 5</code></dd></dl>
<dl class="section user"><dt>pstat N</dt><dd>Set the publishing interval for the portal statistics messages. This command can be preceded by a portal name in double quote marks to only set the publishing interval for that portal. <br />
For example: <code>"G1-TRD1" pstat 5</code></dd></dl>
<dl class="section user"><dt>pcfg N</dt><dd>Set the publishing interval for the portal configuration messages. This command can be preceded by a portal name in double quote marks to only set the publishing interval for that portal. <br />
For example: <code>"G1-TRD1" pcfg 5</code></dd></dl>
<p><br />
 </p>
<h1><a class="anchor" id="umroutermonitoring"></a>
UM Router Monitoring&nbsp;&nbsp;<small><a href="#umroutermonitoring">&lt;-</a></small></h1>
<p><br />
 </p>
<h2><a class="anchor" id="umrouterwebmonitor"></a>
UM Router Web Monitor&nbsp;&nbsp;<small><a href="#umrouterwebmonitor">&lt;-</a></small></h2>
<p>The built-in web monitor (configured in the tnwgd XML configuration file; see <a class="el" href="index.html#xmlconfigurationreference">XML Configuration Reference</a>) provides valuable statistics about the UM Router and its portals, for which, the Web Monitor separates into receive statistics and send statistics. The Web Monitor provides a page for each endpoint and peer portal.</p>
<dl class="section warning"><dt>Warning</dt><dd>The UM Router's web monitor is not designed to be a highly-secure feature. Anybody with access to the network can access the web monitor pages.</dd></dl>
<p>Users are expected to prevent unauthorized access to the web monitor through normal firewalling methods. Users who are unable to limit access to a level consistent with their overall security needs should disable the store web monitor (using <a class="el" href="index.html#drocfg_web-monitor">&lt;web-monitor&gt;</a>). See <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.12_RC3/doc/Gateway/design.tag:../../Design/" href="../../Design/fundamentalconcepts.html#webmonsecurity">Webmon Security</a> for more information.</p>
<dl class="section note"><dt>Note</dt><dd>the UM daemon designs are evolving away from simple web-based monitoring and towards a publish/subscribe model of distributing monitoring events and statistics.</dd></dl>
<p><br />
 </p>
<h3><a class="anchor" id="mainpage"></a>
Main Page&nbsp;&nbsp;<small><a href="#mainpage">&lt;-</a></small></h3>
<p>This page displays general information about the UM Router, and also provides the following links to more detailed statistical and configuration information.</p>
<dl class="section user"><dt><b>UM</b> <b>Router</b> <b>Configuration</b> </dt><dd>Displays the UM Router XML configuration file used by this UM Router.</dd></dl>
<dl class="section user"><dt><b>Portals</b> </dt><dd>Displays portal statistics and information, one portal per page. The Portals page allows you to link to any of the Peer or Endpoint portals configured for the UM Router.</dd></dl>
<dl class="section user"><dt><b>Topology</b> <b>Info</b> </dt><dd>This links to a page that displays UM Router network connectivity information from the perspective of this UM Router.</dd></dl>
<dl class="section user"><dt><b>Path</b> <b>Info</b> </dt><dd>This lets you query and display a hop path that messages will take between any two TRDs.</dd></dl>
<p>On some platforms, the Main page may include a link (GNU malloc info) to a memory allocation display page that displays the following:</p>
<dl class="section user"><dt><b>arena</b> </dt><dd>Non-mmapped space allocated (bytes)</dd></dl>
<dl class="section user"><dt><b>ordblks</b> </dt><dd>Number of free chunks</dd></dl>
<dl class="section user"><dt><b>hblks</b> </dt><dd>Number of mmapped regions</dd></dl>
<dl class="section user"><dt><b>hblkhd</b> </dt><dd>Space allocated in mmapped regions (bytes)</dd></dl>
<dl class="section user"><dt><b>uordblks</b> </dt><dd>Total allocated space (bytes)</dd></dl>
<dl class="section user"><dt><b>fordblks</b> </dt><dd>Total free space (bytes)</dd></dl>
<p><br />
 </p>
<h3><a class="anchor" id="endpointportalpage"></a>
Endpoint Portal Page&nbsp;&nbsp;<small><a href="#endpointportalpage">&lt;-</a></small></h3>
<p>The Endpoint Portal Page displays Receive and Send statistics for the selected endpoint portal. Receive statistics pertain to messages entering the portal from its connected TRD. Send statistics pertain to messages sent out to the TRD.</p>
<p>Click on any of the links at the top of the page to review configuration option values for the portal's UM topic resolution domain. The two columns provide different units of measure for a given statistic type, where the first column is typically in fragments or messages (depending on the statistic type), and the second column is in bytes.</p>
<p><br />
 <b>Endpoint Portal <em>name</em></b></p>
<dl class="section user"><dt><b>Domain</b> <b>ID</b> </dt><dd>The ID for the Topic Resolution Domain (TRD) to which this portal is connected.</dd></dl>
<dl class="section user"><dt><b>Portal</b> <b>Cost</b> </dt><dd>The cost value assigned to this portal.</dd></dl>
<dl class="section user"><dt><b>Local</b> <b>Interest</b> </dt><dd>Totals (listed below) for topics and patterns in this portal's interest list that originated from receivers in the immediately adjacent TRD.</dd></dl>
<dl class="section user"><dt><b>Topics</b> </dt><dd>Of the local interest total, the number of topics.</dd></dl>
<dl class="section user"><dt><b>PCRE</b> <b>patterns</b> </dt><dd>Of the local interest total, the number of wildcard patterns, using PCRE pattern matching.</dd></dl>
<dl class="section user"><dt><b>REGEX</b> <b>patterns</b> </dt><dd>Of the local interest total, the number of wildcard patterns, using REGEX pattern matching.</dd></dl>
<dl class="section user"><dt><b>Remote</b> <b>Interest</b> </dt><dd>Totals (listed below) for topics and patterns in this portal's interest list that originated from receivers beyond and downstream from the immediately adjacent TRD.</dd></dl>
<dl class="section user"><dt><b>Topics</b> </dt><dd>Of the remote interest total, the number of topics.</dd></dl>
<dl class="section user"><dt><b>PCRE</b> <b>patterns</b> </dt><dd>Of the remote interest total, the number of wildcard patterns, using PCRE pattern matching.</dd></dl>
<dl class="section user"><dt><b>REGEX</b> <b>patterns</b> </dt><dd>Of the remote interest total, the number of wildcard patterns, using REGEX pattern matching.</dd></dl>
<dl class="section user"><dt><b>Proxy</b> <b>Receivers</b> </dt><dd>The number of proxy receivers active in this portal.</dd></dl>
<dl class="section user"><dt><b>Receiver</b> <b>Topics</b> </dt><dd>The number of topics in which the other portals in the UM Router have detected current interest and summarily propagated to this portal.</dd></dl>
<dl class="section user"><dt><b>Receiver</b> <b>PCRE</b> <b>patterns</b> </dt><dd>The number of wildcard patterns, using PCRE pattern matching, in which the other portals in the UM Router have detected current interest and summarily propagated to this portal.</dd></dl>
<dl class="section user"><dt><b>Receiver</b> <b>REGEX</b> <b>patterns</b> </dt><dd>The number of wildcard patterns, using REGEX pattern matching, in which the other portals in the UM Router have detected current interest and summarily propagated to this portal.</dd></dl>
<dl class="section user"><dt><b>Proxy</b> <b>Sources</b> </dt><dd>The number of proxy sources active in this portal.</dd></dl>
<p><br />
 <b>Endpoint Receive Statistics</b></p>
<dl class="section user"><dt><b>Transport</b> <b>topic</b> <b>fragments/bytes</b> <b>received</b> </dt><dd>The total transport-based topic-related traffic of messages containing user data received by this portal from a TRD. The first column counts the number of fragments (or whole messages for messages that were not fragmented).</dd></dl>
<dl class="section user"><dt><b>Transport</b> <b>topic</b> <b>request</b> <b>fragments/bytes</b> <b>received</b> </dt><dd>Topic messages received that are request messages, i.e., messages send via lbm_send_request*() rather than lbm_src_send*().</dd></dl>
<dl class="section user"><dt><b>Transport</b> <b>topic</b> <b>control</b> <b>msgs/bytes</b> <b>received</b> </dt><dd>The total transport-based topic-related traffic received by this portal from a TRD. These are supervisory messages, which include TSNIs, SRIs., etc. The first column counts the number of messages.</dd></dl>
<dl class="section user"><dt><b>Immediate</b> <b>topic</b> <b>fragments/bytes</b> <b>received</b> </dt><dd>The total number of Multicast Immediate Messaging (MIM) messages or message fragments, and bytes (second column), that have a topic, received at this portal.</dd></dl>
<dl class="section user"><dt><b>Immediate</b> <b>topic</b> <b>request</b> <b>fragments/bytes</b> <b>received</b> </dt><dd>Of the MIM topic messages received, this is the amount of those that are requests.</dd></dl>
<dl class="section user"><dt><b>Immediate</b> <b>topicless</b> <b>fragments/bytes</b> <b>received</b> </dt><dd>The total number of MIM messages or message fragments, and bytes (second column), with null topics, received by his portal.</dd></dl>
<dl class="section user"><dt><b>Immediate</b> <b>topicless</b> <b>request</b> <b>fragments/bytes</b> <b>received</b> </dt><dd>Of the MIM topicless messages received, this is the amount of those that are requests.</dd></dl>
<dl class="section user"><dt><b>Unicast</b> <b>data</b> <b>messages/bytes</b> <b>received</b> </dt><dd>The total number of Unicast Immediate Messaging (UIM) messages (and bytes, second column) containing user data, received by this portal.</dd></dl>
<dl class="section user"><dt><b>Duplicate</b> <b>unicast</b> <b>data</b> <b>messages/bytes</b> <b>dropped</b> </dt><dd>UIM data messages discarded because they were duplicates of messages already received.</dd></dl>
<dl class="section user"><dt><b>Unicast</b> <b>data</b> <b>messages/bytes</b> <b>received</b> <b>with</b> <b>no</b> <b>stream</b> <b>info</b> </dt><dd>UIM data messages discarded because they were from an earlier, incompatible version of UM. This tally should stay at 0; otherwise, contact Informatica Support.</dd></dl>
<dl class="section user"><dt><b>Unicast</b> <b>data</b> <b>messages/bytes</b> <b>received</b> <b>with</b> <b>no</b> <b>route</b> <b>to</b> <b>destination</b> </dt><dd>UIM data messages that are on a wrong path, possibly due to a route recalculation. This tally should stay at 0, though it may increment a few messages at the time of a topology change.</dd></dl>
<dl class="section user"><dt><b>Unicast</b> <b>control</b> <b>messages/bytes</b> <b>received</b> </dt><dd>The total number of Unicast Immediate Messaging (UIM) supervisory (non-data) messages (and bytes, second column) received by this portal.</dd></dl>
<dl class="section user"><dt><b>Duplicate</b> <b>unicast</b> <b>control</b> <b>messages/bytes</b> <b>dropped</b> </dt><dd>Supervisory UIMs dropped because they were duplicates of messages already received.</dd></dl>
<dl class="section user"><dt><b>Unicast</b> <b>control</b> <b>messages/bytes</b> <b>received</b> <b>with</b> <b>no</b> <b>stream</b> <b>info</b> </dt><dd>Supervisory UIMs dropped because they were from an earlier, incompatible version of UM. This tally should stay at 0; otherwise, contact Informatica Support.</dd></dl>
<dl class="section user"><dt><b>Unicast</b> <b>control</b> <b>messages/bytes</b> <b>received</b> <b>with</b> <b>no</b> <b>route</b> <b>to</b> <b>destination</b> </dt><dd>Supervisory UIM messages that are on a wrong path, possibly due to a route recalculation. This tally should stay at 0, though it may increment a few messages at the time of a topology change.</dd></dl>
<p><br />
 <b>Endpoint Send Statistics</b></p>
<dl class="section user"><dt><b>Transport</b> <b>topic</b> <b>fragments/bytes</b> <b>forwarded</b> </dt><dd>The total transport-based topic-related traffic forwarded to this portal from other portals in this UM Router. This could include user messages, TSNIs, SRIs, etc. The first column counts the number of fragments (or whole messages for messages that were not fragmented).</dd></dl>
<dl class="section user"><dt><b>Transport</b> <b>topic</b> <b>fragments/bytes</b> <b>sent</b> </dt><dd>Of the transport topic traffic forwarded, this is the amount of traffic sent out to the TRD.</dd></dl>
<dl class="section user"><dt><b>Transport</b> <b>topic</b> <b>request</b> <b>fragments/bytes</b> <b>sent</b> </dt><dd>Of the messages sent, this is the amount of those that are requests.</dd></dl>
<dl class="section user"><dt><b>Duplicate</b> <b>transport</b> <b>topic</b> <b>fragments/bytes</b> <b>dropped</b> </dt><dd>Of the messages forwarded to this portal, this is the total of those that were discarded because they were duplicates of messages already received.</dd></dl>
<dl class="section user"><dt><b>Transport</b> <b>topic</b> <b>fragments/bytes</b> <b>dropped</b> <b>due</b> <b>to</b> <b>blocking</b> </dt><dd>Of the messages forwarded to this portal, this is the amount of those that were discarded because they were blocked from sending, and were unable to be buffered. Message rates on other portals probably exceeded the rate controller limit on this portal.</dd></dl>
<dl class="section user"><dt><b>Transport</b> <b>topic</b> <b>fragments/bytes</b> <b>dropped</b> <b>due</b> <b>to</b> <b>error</b> </dt><dd>Of the messages forwarded to this portal, this is the total of those that were discarded due to an application or network connection failure.</dd></dl>
<dl class="section user"><dt><b>Transport</b> <b>topic</b> <b>fragments/bytes</b> <b>dropped</b> <b>due</b> <b>to</b> <b>fragment</b> <b>size</b> <b>error</b> </dt><dd>Of the messages forwarded to this portal, this is the total of those that were discarded possibly because of a configuration error. If this count is not at or near 0, verify that maximum datagram size for all transports is the same throughout the network.</dd></dl>
<dl class="section user"><dt><b>Immediate</b> <b>topic</b> <b>fragments/bytes</b> <b>forwarded</b> </dt><dd>The total number of Multicast Immediate Messaging (MIM) messages or message fragments, and bytes (second column), forwarded to this portal from other portals in this UM Router.</dd></dl>
<dl class="section user"><dt><b>Immediate</b> <b>topic</b> <b>fragments/bytes</b> <b>sent</b> </dt><dd>Of the MIM topic messages forwarded to this portal, this is the amount of traffic sent out to the TRD.</dd></dl>
<dl class="section user"><dt><b>Immediate</b> <b>topic</b> <b>request</b> <b>fragments</b> <b>sent</b> </dt><dd>Of the MIM topic messages sent, this is the amount of those that are requests.</dd></dl>
<dl class="section user"><dt><b>Immediate</b> <b>topic</b> <b>fragments/bytes</b> <b>dropped</b> <b>due</b> <b>to</b> <b>blocking</b> </dt><dd>Of the MIM topic messages forwarded to this portal, this is the amount of those that were discarded because they were blocked from sending, and were unable to be buffered. Message rates on other portals probably exceeded the rate controller limit on this portal.</dd></dl>
<dl class="section user"><dt><b>Immediate</b> <b>topic</b> <b>fragments/bytes</b> <b>dropped</b> <b>due</b> <b>to</b> <b>error</b> </dt><dd>Of the MIM topic messages forwarded to this portal, those that were discarded due to an application or network connection failure.</dd></dl>
<dl class="section user"><dt><b>Immediate</b> <b>topic</b> <b>fragments/bytes</b> <b>dropped</b> <b>due</b> <b>to</b> <b>fragment</b> <b>size</b> <b>error</b> </dt><dd>Of the MIM topic messages forwarded to this portal, those that were dropped possibly because of a configuration error. If this count is not at or near 0, verify that maximum datagram size for all transports is the same throughout the network.</dd></dl>
<dl class="section user"><dt><b>Immediate</b> <b>topicless</b> <b>fragments/bytes</b> <b>forwarded</b> </dt><dd>The total number of Multicast Immediate Messaging (MIM) messages or message fragments, and bytes (second column), with null topics, forwarded to this portal from other portals in this UM Router.</dd></dl>
<dl class="section user"><dt><b>Immediate</b> <b>topicless</b> <b>fragments/bytes</b> <b>sent</b> </dt><dd>Of the MIM topicless messages forwarded to this portal, this is the amount of traffic sent out to the TRD.</dd></dl>
<dl class="section user"><dt><b>Immediate</b> <b>topicless</b> <b>request</b> <b>fragments</b> <b>sent</b> </dt><dd>Of the MIM topicless messages sent, this is the amount of those that are requests.</dd></dl>
<dl class="section user"><dt><b>Immediate</b> <b>topicless</b> <b>fragments/bytes</b> <b>dropped</b> <b>due</b> <b>to</b> <b>blocking</b> </dt><dd>Of the MIM topicless messages forwarded to this portal, this is the amount of those that were discarded because they were blocked from sending, and were unable to be buffered. Message rates on other portals probably exceeded the rate controller limit on this portal.</dd></dl>
<dl class="section user"><dt><b>Immediate</b> <b>topicless</b> <b>fragments/bytes</b> <b>dropped</b> <b>due</b> <b>to</b> <b>error</b> </dt><dd>Of the MIM topicless messages forwarded to this portal, those that were discarded due to an application or network connection failure.</dd></dl>
<dl class="section user"><dt><b>Immediate</b> <b>topicless</b> <b>fragments/bytes</b> <b>dropped</b> <b>due</b> <b>to</b> <b>fragment</b> <b>size</b> <b>error</b> </dt><dd>Of the MIM topicless messages forwarded to this portal, those that were dropped possibly because of a configuration error. If this count is not at or near 0, verify that maximum datagram size for all transports is the same throughout the network.</dd></dl>
<dl class="section user"><dt><b>Unicast</b> <b>messages/bytes</b> <b>forwarded</b> </dt><dd>The total number of Unicast Immediate Messaging (UIM) messages (and bytes, second column), both control and containing user data, forwarded to this portal.</dd></dl>
<dl class="section user"><dt><b>Unicast</b> <b>messages/bytes</b> <b>sent</b> </dt><dd>Of the UIM data messages forwarded to this portal, this is the amount of traffic sent out to the TRD.</dd></dl>
<dl class="section user"><dt><b>Unicast</b> <b>messages/bytes</b> <b>dropped</b> <b>due</b> <b>to</b> <b>error</b> </dt><dd>Of the UIM data messages forwarded to this portal, those that were discarded due to an application or network connection failure.</dd></dl>
<dl class="section user"><dt><b>Current/maximum</b> <b>data</b> <b>bytes</b> <b>enqueued</b> <b></b>(limit: <b>n</b>)</dt><dd>For bytes in this portal's send buffer (due to a blocking send), the first column is a snapshot of the current amount, and the second column is a high-water mark. The displayed limit (n) is the configuration value for option &lt;max-queue&gt;.</dd></dl>
<p><br />
 </p>
<h3><a class="anchor" id="peerportalpage"></a>
Peer Portal Page&nbsp;&nbsp;<small><a href="#peerportalpage">&lt;-</a></small></h3>
<p>This page allows you to see Receive and Send statistics for the selected peer portal. Click on any of the links at the top of the page to review configuration option values for the portal's UM topic resolution domain.</p>
<p>The peer portal page displays the following statistics:</p>
<p><br />
 <b>Peer Portal <em>name</em></b></p>
<dl class="section user"><dt><b>Portal</b> <b>Cost</b> </dt><dd>The cost value assigned to this portal.</dd></dl>
<dl class="section user"><dt><b>Interest</b> </dt><dd>Totals (listed below) for topics and patterns in this portal's interest list that originated from receivers beyond and downstream from the immediately adjacent UM Router.</dd></dl>
<dl class="section user"><dt><b>Topics</b> </dt><dd>Of the interest total, the number of topics.</dd></dl>
<dl class="section user"><dt><b>PCRE</b> <b>patterns</b> </dt><dd>Of the interest total, the number of wildcard patterns, using PCRE pattern matching.</dd></dl>
<dl class="section user"><dt><b>REGEX</b> <b>patterns</b> </dt><dd>Of the interest total, the number of wildcard patterns, using REGEX pattern matching.</dd></dl>
<dl class="section user"><dt><b>Proxy</b> <b>Receivers</b> </dt><dd>The number of proxy receivers active in this portal.</dd></dl>
<dl class="section user"><dt><b>Receiver</b> <b>topics</b> </dt><dd>All topics in which the other portals in the UM Router have detected current interest and summarily propagated to this portal.</dd></dl>
<dl class="section user"><dt><b>Receiver</b> <b>PCRE</b> <b>patterns</b> </dt><dd>All wildcard patterns, using PCRE pattern matching, in which the other portals in the UM Router have detected current interest and summarily propagated to this portal.</dd></dl>
<dl class="section user"><dt><b>Receiver</b> <b>REGEX</b> <b>patterns</b> </dt><dd>All wildcard patterns, using REGEX pattern matching, in which the other portals in the UM Router have detected current interest and summarily propagated to this portal.</dd></dl>
<dl class="section user"><dt><b>Proxy</b> <b>Sources</b> </dt><dd>The number of proxy sources active in this portal.</dd></dl>
<p><br />
 <b>Peer Receive Statistics</b></p>
<dl class="section user"><dt><b>Data</b> <b>messages/bytes</b> <b>received</b> </dt><dd>The total of messages containing data received at this portal. The first column counts the number of fragments (or whole messages for messages that were not fragmented).</dd></dl>
<dl class="section user"><dt><b>Transport</b> <b>topic</b> <b>fragment</b> <b>data</b> <b>messages/bytes</b> <b>received</b> </dt><dd>The total of user-data messages received on any topic resolved through this portal. The first column counts the number of fragments (or whole messages for messages that were not fragmented).</dd></dl>
<dl class="section user"><dt><b>Transport</b> <b>topic</b> <b>fragment</b> <b>data</b> <b>messages/bytes</b> <b>received</b> <b>with</b> <b>unknown</b> <b>source</b> </dt><dd>Topic messages received whose source this UM Router has not seen before.</dd></dl>
<dl class="section user"><dt><b>Transport</b> <b>topic</b> <b>request</b> <b>fragment</b> <b>data</b> <b>messages/bytes</b> <b>received</b> </dt><dd>These are topic messages received that are request messages, i.e., messages send via lbm_send_request*() rather than lbm_src_send*().</dd></dl>
<dl class="section user"><dt><b>Transport</b> <b>topic</b> <b>request</b> <b>fragment</b> <b>data</b> <b>messages/bytes</b> <b>received</b> <b>with</b> <b>unknown</b> <b>source</b> </dt><dd>Of the request messages received, the topic messages received whose source this UM Router has not seen before.</dd></dl>
<dl class="section user"><dt><b>Immediate</b> <b>topic</b> <b>fragments/bytes</b> <b>received</b> </dt><dd>The total number of Multicast Immediate Messaging (MIM) messages or message fragments, and bytes (second column), that have a topic, received by all proxy receivers at this portal.</dd></dl>
<p>Immediate topic request fragments/bytes received Of the MIM topic messages received, this is the total of those that are requests.</p>
<dl class="section user"><dt><b>Immediate</b> <b>topicless</b> <b>fragments/bytes</b> <b>received</b> </dt><dd>The total number of MIM messages or message fragments, and bytes (second column), with null topics, received by all proxy receivers at this portal.</dd></dl>
<dl class="section user"><dt><b>Immediate</b> <b>topicless</b> <b>request</b> <b>fragments/bytes</b> <b>received</b> </dt><dd>Of the MIM topicless messages received, this is the total of those that are requests.</dd></dl>
<dl class="section user"><dt><b>Unicast</b> <b>data</b> <b>messages/bytes</b> <b>received</b> </dt><dd>The total number of Unicast Immediate Messaging (UIM) messages (and bytes, second column) containing user data, received by this portal.</dd></dl>
<dl class="section user"><dt><b>Unicast</b> <b>data</b> <b>messages/bytes</b> <b>received</b> <b>with</b> <b>no</b> <b>stream</b> <b>information</b> </dt><dd>UIM data messages discarded because they were from an earlier, incompatible version of UM. This tally should stay at 0; otherwise, contact Informatica Support.</dd></dl>
<dl class="section user"><dt><b>Unicast</b> <b>data</b> <b>messages/bytes</b> <b>received</b> <b>with</b> <b>no</b> <b>route</b> <b>to</b> <b>destination</b> </dt><dd>UIM data messages that are on a wrong path, possibly due to a route recalculation. This tally should stay at 0, though it may increment a few messages at the time of a topology change.</dd></dl>
<dl class="section user"><dt><b>Control</b> <b>messages/bytes</b> <b>received</b> </dt><dd>The total of supervisory messages (containing no data) received at this portal.</dd></dl>
<dl class="section user"><dt><b>Transport</b> <b>topic</b> <b>control</b> <b>messages/bytes</b> <b>received</b> </dt><dd>Of the control messages received, those that are transport/topic based (such as TSNIs, SRIs., etc.).</dd></dl>
<dl class="section user"><dt><b>Transport</b> <b>topic</b> <b>control</b> <b>messages/bytes</b> <b>received</b> <b>with</b> <b>unknown</b> <b>source</b> </dt><dd>Of the transport/topic control messages received whose source this UM Router has not seen before.</dd></dl>
<dl class="section user"><dt><b>Unicast</b> <b>control</b> <b>messages/bytes</b> <b>received</b> </dt><dd>The total number of Unicast Immediate Messaging (UIM) supervisory (non-data) messages (and bytes, second column) received by this portal.</dd></dl>
<dl class="section user"><dt><b>Retransmission</b> <b>requests/bytes</b> <b>received</b> </dt><dd>Supervisory UIMs that are requests for retransmission of lost (or Late Join) messages.</dd></dl>
<dl class="section user"><dt><b>Control</b> <b>messages/bytes</b> <b>received</b> <b>with</b> <b>no</b> <b>stream</b> <b>info</b> </dt><dd>Supervisory UIMs discarded because they were from an earlier, incompatible version of UM. This tally should stay at 0; otherwise, contact Informatica Support.</dd></dl>
<dl class="section user"><dt><b>Control</b> <b>messages/bytes</b> <b>received</b> <b>with</b> <b>no</b> <b>route</b> <b>to</b> <b>destination</b> </dt><dd>Supervisory UIM messages that are on a wrong path, possibly due to a route recalculation.</dd></dl>
<dl class="section user"><dt><b>Gateway</b> <b>control</b> <b>messages/bytes</b> <b>received</b> </dt><dd>The total of UM Router-only, peer-to-peer supervisory messages received at this portal.</dd></dl>
<dl class="section user"><dt><b>Unhandled</b> <b>control</b> <b>messages/bytes</b> <b>received</b> </dt><dd>Supervisory UIMs discarded because, though they are well-formed, they have no valid action request. This tally should stay at 0; otherwise, contact Informatica Support.</dd></dl>
<p><br />
 <b>Peer Send Statistics</b></p>
<dl class="section user"><dt><b>Transport</b> <b>topic</b> <b>fragments/bytes</b> <b>forwarded</b> </dt><dd>The total transport-based topic-related traffic forwarded to this portal from other portals in this UM Router. This could include user messages, TSNIs, SRIs., etc. The first column counts the number of fragments (or whole messages for messages that were not fragmented).</dd></dl>
<dl class="section user"><dt><b>Transport</b> <b>topic</b> <b>fragments/bytes</b> <b>sent</b> </dt><dd>Of transport topic messages forwarded to this portal, the amount of traffic sent to the adjacent UM Router.</dd></dl>
<dl class="section user"><dt><b>Transport</b> <b>topic</b> <b>request</b> <b>fragments/bytes</b> <b>sent</b> </dt><dd>Of transport topic messages sent, those that were request messages.</dd></dl>
<dl class="section user"><dt><b>Transport</b> <b>topic</b> <b>fragments/bytes</b> <b>dropped</b> <b></b>(duplicate)</dt><dd>Of transport topic messages forwarded to this portal, messages discarded because they were duplicates of messages already received.</dd></dl>
<dl class="section user"><dt><b>Transport</b> <b>topic</b> <b>fragments/bytes</b> <b>dropped</b> <b></b>(blocking)</dt><dd>Of transport topic messages forwarded to this portal, this is the amount of those that were discarded because they were blocked from sending, probably due to TCP flow control, and were unable to be buffered. The UM Router's XML configuration file may need to be adjusted.</dd></dl>
<dl class="section user"><dt><b>Transport</b> <b>topic</b> <b>fragments/bytes</b> <b>dropped</b> <b></b>(not <b>operational</b>)</dt><dd>Of transport topic messages forwarded to this portal, messages discarded because the peer link is down.</dd></dl>
<dl class="section user"><dt><b>Transport</b> <b>topic</b> <b>fragments/bytes</b> <b>dropped</b> <b></b>(queue <b>failure</b>)</dt><dd>Of transport topic messages forwarded to this portal, messages discarded due to a memory allocation failure.</dd></dl>
<dl class="section user"><dt><b>Unicast</b> <b>messages/bytes</b> <b>forwarded</b> </dt><dd>The total number of supervisory (no data payloads) Unicast Immediate Messaging (UIM) messages (and bytes, second column) forwarded to this portal from other portals in this UM Router. These messages can be either control (supervisory) messages or contain user data.</dd></dl>
<dl class="section user"><dt><b>Unicast</b> <b>messages/bytes</b> <b>sent</b> </dt><dd>Of the UIMs forwarded to this portal, the amount of traffic sent to the adjacent UM Router.</dd></dl>
<dl class="section user"><dt><b>Unicast</b> <b>messages/bytes</b> <b>dropped</b> <b></b>(blocking)</dt><dd>Of the UIMs forwarded to this portal, this is the amount of those that were discarded because they were blocked from sending, probably due to TCP flow control, and were unable to be buffered. The UM Router's XML configuration file may need to be adjusted.</dd></dl>
<dl class="section user"><dt><b>Unicast</b> <b>messages/bytes</b> <b>dropped</b> <b></b>(not <b>operational</b>)</dt><dd>Of the UIMs forwarded to this portal, messages discarded because the peer link is down.</dd></dl>
<dl class="section user"><dt><b>Unicast</b> <b>messages/bytes</b> <b>dropped</b> <b></b>(queue <b>failure</b>)</dt><dd>Of the UIMs forwarded to this portal, messages discarded due to a memory allocation failure.</dd></dl>
<dl class="section user"><dt><b>Gateway</b> <b>control</b> <b>messages/bytes</b> <b>sent</b> </dt><dd>The total number of UM Router supervisory messages (and bytes, second column), generated at this portal.</dd></dl>
<p>Gateway control messages/bytes sent Of the UM Router supervisory messages generated, the number sent to the adjacent UM Router.</p>
<p>Gateway control messages/bytes dropped (blocking) The amount of UM Router supervisory messages that were discarded because they were blocked from sending, probably due to TCP flow control, and were unable to be buffered. The UM Router's XML configuration file may need to be adjusted.</p>
<dl class="section user"><dt><b>Gateway</b> <b>control</b> <b>messages/bytes</b> <b>dropped</b> <b></b>(not <b>operational</b>)</dt><dd>The amount of UM Router supervisory messages that were discarded because the peer link was down.</dd></dl>
<dl class="section user"><dt><b>Gateway</b> <b>control</b> <b>messages/bytes</b> <b>dropped</b> <b></b>(queue <b>failure</b>)</dt><dd>The amount of UM Router supervisory messages that were discarded due to a memory allocation failure.</dd></dl>
<dl class="section user"><dt><b>Batches</b> </dt><dd>The number of times messages were batched.</dd></dl>
<dl class="section user"><dt><b>Minimum</b> <b>messages/bytes</b> <b>per</b> <b>batch</b> </dt><dd>The lowest recorded number of messages in a batch, and the number of bytes in that batch.</dd></dl>
<dl class="section user"><dt><b>Average</b> <b>messages/bytes</b> <b>per</b> <b>batch</b> </dt><dd>The average number of messages in a batch, and the number of bytes in that average batch.</dd></dl>
<dl class="section user"><dt><b>Maximum</b> <b>messages/bytes</b> <b>per</b> <b>batch</b> </dt><dd>The highest recorded number of messages in a batch, and the number of bytes in that batch.</dd></dl>
<dl class="section user"><dt><b>Current/maximum</b> <b>data</b> <b>bytes</b> <b>enqueued</b> </dt><dd>For bytes in this portal's send buffer (due to a blocking send), the first column is a snapshot of the current amount, and the second column is a high-water mark. The displayed limit is the configuration value for option <code>&lt;max-queue&gt;</code>.</dd></dl>
<dl class="section user"><dt><b>Keepalive/RTT</b> <b>samples</b> </dt><dd>The number of keepalive messages that have been set to the other UM Router's portal and responded to.</dd></dl>
<dl class="section user"><dt><b>Minimum</b> <b>RTT</b> <b></b>(microseconds)</dt><dd>Of the keepalives sent and responded to, the lowest recorded round-trip time.</dd></dl>
<dl class="section user"><dt><b>Mean</b> <b>RTT</b> <b></b>(microseconds)</dt><dd>Of the keepalives sent and responded to, the mean recorded round-trip time.</dd></dl>
<dl class="section user"><dt><b>Maximum</b> <b>RTT</b> <b></b>(microseconds)</dt><dd>Of the keepalives sent and responded to, the highest recorded round-trip time.</dd></dl>
<dl class="section user"><dt><b>Last</b> <b>keepalive</b> <b>responded</b> <b>to</b> </dt><dd>The send timestamp (date and time) of the last sent keepalive message that was responded to.</dd></dl>
<p><br />
 </p>
<h3><a class="anchor" id="topologyinfopage"></a>
Topology Info Page&nbsp;&nbsp;<small><a href="#topologyinfopage">&lt;-</a></small></h3>
<p>This page allows you to see UM Router network connectivity information from the perspective of this UM Router. The <em>Other UM Routers</em> section (below) provides information in the same format as is used for the local UM Router.</p>
<dl class="section user"><dt><b>Local</b> <b>UM</b> <b>Router</b> <b>Name</b> </dt><dd>The UM Router name as assigned via configuration.</dd></dl>
<dl class="section user"><dt><b>Local</b> <b>UM</b> <b>Router</b> <b>ID</b> </dt><dd>A unique value that the UM Router assigns to itself automatically.</dd></dl>
<dl class="section user"><dt><b>Self</b> <b>Version</b> </dt><dd>A configuration version for this UM Router, as seen collectively by the UM Router network.</dd></dl>
<dl class="section user"><dt><b>Topology</b> <b>Signature</b> </dt><dd>An identifier for the "map" of this UM Router network's routes. This value should be the same for all UM Routers.</dd></dl>
<dl class="section user"><dt><b>Last</b> <b>recalc</b> <b>duration</b> </dt><dd>The amount of time in seconds that it took this UM Router to perform its most recent route recalculation.</dd></dl>
<dl class="section user"><dt><b>Graph</b> <b>Version</b> </dt><dd>The number of times this UM Router has updated its view of the topology.</dd></dl>
<dl class="section user"><dt><b>UM</b> <b>Router</b> <b>Count</b> </dt><dd>The number of UM Routers in this UM Router network.</dd></dl>
<dl class="section user"><dt><b>Topic</b> <b>Resolution</b> <b>Domain</b> <b>Count</b> </dt><dd>The number of TRDs in this UM Router network.</dd></dl>
<p><br />
 <b>Portal (endpoint or peer)</b></p>
<p>This display is repeated for each portal of this UM Router.</p>
<dl class="section user"><dt><b>Portal</b> <b>Name</b> </dt><dd>The portal's name as assigned via configuration.</dd></dl>
<dl class="section user"><dt><b>Adjacent</b> <b>Domain/UM</b> <b>Router</b> <b>ID</b> </dt><dd>For an endpoint portal, this is the configured &lt;domain-id&gt; for the connected TRD. For a peer portal, this is an automatically assigned unique identifier for the connected UM Router.</dd></dl>
<dl class="section user"><dt><b>Cost</b> </dt><dd>This portal's configured cost.</dd></dl>
<dl class="section user"><dt><b>Last</b> <b>interest</b> <b>recalc</b> <b>duration</b> </dt><dd>The amount of time in seconds that it took this UM Router to perform a recalculation that resulted in an update to the interest status for this portal.</dd></dl>
<dl class="section user"><dt><b>Last</b> <b>proxy</b> <b>receiver</b> <b>recalc</b> <b>duration</b> </dt><dd>The amount of time in seconds that it took this UM Router to perform recalculation that resulted in an update to the status of proxy receivers (create, maintain, or destroy) for this portal.</dd></dl>
<p><br />
 <b>Other UM Routers</b></p>
<p>This display is repeated for each other UM Router in this UM Router's network.</p>
<dl class="section user"><dt><b>UM</b> <b>Router</b> <b>Name</b> </dt><dd>The UM Router name as assigned via configuration.</dd></dl>
<dl class="section user"><dt><b>UM</b> <b>Router</b> <b>ID</b> </dt><dd>A unique value that the UM Router assigns to itself automatically.</dd></dl>
<dl class="section user"><dt><b>Version</b> </dt><dd>A configuration version for the UM Router, as seen collectively by the UM Router network.</dd></dl>
<dl class="section user"><dt><b>Topology</b> <b>Signature</b> </dt><dd>An identifier for the "map" of this UM Router network's routes. This value should be the same for all UM Routers.</dd></dl>
<dl class="section user"><dt><b>Last</b> <b>Activity</b> <b>n</b> <b>seconds</b> <b>ago</b> </dt><dd>How long since the last time this local UM Router received a route info packet from the designated "other" UM Router.</dd></dl>
<dl class="section user"><dt><b>Adjacent</b> <b>Domain</b> <b>ID</b> </dt><dd>The configured ID of one of this "other" UM Router's connected TRD, plus the cost assigned to the associate endpoint portal. If there are more than one endpoint portals in the UM Router, this line is repeated for each.</dd></dl>
<dl class="section user"><dt><b>Adjacent</b> <b>UM</b> <b>Router</b> <b>ID</b> </dt><dd>The automatically assigned ID of one of this "other" UM Router's connected UM Router, plus the cost assigned to the associate peer portal. If there are more than one peer portals in the UM Router, this line is repeated for each.</dd></dl>
<p><br />
 </p>
<h3><a class="anchor" id="pathinfo"></a>
Path Info&nbsp;&nbsp;<small><a href="#pathinfo">&lt;-</a></small></h3>
<p>The Path Info page lets you query and display a hop path that messages will take between any two TRDs that you enter into the Domain ID 1 and Domain ID 2 text boxes. Fill in the boxes and click the Calculate Shortest Path button, and you see the following fields:</p>
<dl class="section user"><dt><b>Hop</b> <b>Count</b> </dt><dd>The number of hops from none node to the next along the displayed route, where a node can be either a UM Router or a TRD.</dd></dl>
<dl class="section user"><dt><b>Aggregate</b> <b>Cost</b> </dt><dd>A sum of the cost values of all portals along the displayed path.</dd></dl>
<dl class="section user"><dt><b>Path</b> </dt><dd>A display of the UM Router and TRD hops listed in route order from the starting TRD to the ending TRD.</dd></dl>
<p><br />
 </p>
<h2><a class="anchor" id="umrouterlogmessages"></a>
UM Router Log Messages&nbsp;&nbsp;<small><a href="#umrouterlogmessages">&lt;-</a></small></h2>
<p>The UM Router daemon generates log messages that are used to monitor its health and operation. You can configure these to be directed to "console" (standard output), "syslog", or a specified log "file", via the <a class="el" href="index.html#drocfg_log">&lt;log&gt;</a> configuration element. Normally "console" is only used during testing, as a persistent log file is preferred for production use. The UM Router does not over-write log files on startup, but instead appends them.</p>
<p><br />
 </p>
<h3><a class="anchor" id="umrouterrollinglogs"></a>
UM Router Rolling Logs&nbsp;&nbsp;<small><a href="#umrouterrollinglogs">&lt;-</a></small></h3>
<p>To prevent unbounded disk file growth, the UM Router supports rolling log files. When the log file rolls, the file is renamed according to the model: <br />
&#160;&#160;<em>CONFIGUREDNAME</em><code>_</code><em>PID</em><code>.</code><em>DATE</em><code>.</code><em>SEQNUM</em> <br />
where: </p><ul>
<li>
<em>CONFIGUREDNAME</em> - Root name of log file, as configured by user. </li>
<li>
<em>PID</em> - Process ID of the UM Router daemon process. </li>
<li>
<em>DATE</em> - Date that the log file was rolled, in YYYY-MM-DD format. </li>
<li>
<em>SEQNUM</em> - Sequence number, starting at 1 when the process starts, and incrementing each time the log file rolls. </li>
</ul>
<p>For example: <code>umrouterlog_9867.2017-08-20.2</code></p>
<p>The user can configure when the log file is eligible to roll over by either or both of two criteria: size and frequency. The size criterion is in millions of bytes. The frequency criterion can be daily or hourly. Once one or both criteria are met, the next message written to the log will trigger a roll operation. These criteria are supplied as attributes to the <a class="el" href="index.html#drocfg_log">&lt;log&gt;</a> configuration element.</p>
<p>If both criteria are supplied, then the first one to be reached will trigger a roll. For example, consider the setting: </p><pre class="fragment">  &lt;log type="file" size="23" frequency="daily"&gt;store.log&lt;/log&gt;
</pre><p> Let say that the log file grows at 1 million bytes per hour. At 11:00 pm, the log file will reach 23 million bytes, and will roll. Then, at 12:00 midnight, the log file will roll again, even though it is only 1 million bytes in size.</p>
<dl class="section note"><dt>Note</dt><dd>The rolling logs cannot be configured to automatically overwrite old logs. Thus, the amount of disk space consumed by log files will grow without bound. The user must implement a desired process of archiving or deleting older log files according to the user's preference.</dd></dl>
<p><br />
 </p>
<h3><a class="anchor" id="importantumrouterlogmessages"></a>
Important UM Router Log Messages&nbsp;&nbsp;<small><a href="#importantumrouterlogmessages">&lt;-</a></small></h3>
<p><b>Connection Failure Messages</b></p>
<pre class="fragment">peer portal [name] failed to connect to peer at [IP:port] via [interface] [err]: reason
peer portal [name] failed to accept connection (accept) [err]: reason
</pre><p><b>Lost Connection Messages</b></p>
<pre class="fragment">peer portal [name] lost connection to peer at [IP:port] via [interface]
peer portal [name] connection destroyed due to socket failure
peer portal [name] detected dropped inbound connection (read) [err]: reason
peer portal [name] detected dropped inbound connection (zero-len read)
</pre><p><b>Endpoint Messages</b></p>
<p>If a UMP store is adjacent to the UM Router, and the UM Router has been restarted, you typically see messages of the form:</p>
<pre class="fragment">endpoint portal [name] has no forwarding entry for destination ctxinst [string], dropping msg (lbmc cntl ume)
</pre><p>These messages are normal, and cease when the UM Router has established the forwarding information for the given context.</p>
<p><b>Peer Messages</b></p>
<pre class="fragment">Acceptor: peer portal [name] received connection from [IP:port]
Initiator: peer portal [name] connected to [IP:port ]
</pre><p><br />
 </p>
<h2><a class="anchor" id="umroutertransportstats"></a>
UM Router Transport Stats&nbsp;&nbsp;<small><a href="#umroutertransportstats">&lt;-</a></small></h2>
<p>Using the <code>&lt;monitor&gt;</code> element in a UM Router's XML configuration file and the UMS Monitoring feature, you can monitor the transport activity between the UM Router and its Topic Resolution Domain. The configuration also provides Context and Event Queue statistics. The statistics output identifies individual portals by name.</p>
<p><br />
 </p>
<h1><a class="anchor" id="umrouterglossary"></a>
UM Router Glossary&nbsp;&nbsp;<small><a href="#umrouterglossary">&lt;-</a></small></h1>
<dl class="section user"><dt><b>Access</b> <b>Control</b> <b>List</b> <b></b>(ACL)</dt><dd>A portal configuration you can use to filter out messages based on a variety of criteria.</dd></dl>
<dl class="section user"><dt><b>forwarding</b> <b>cost</b> </dt><dd>A value assigned to a portal to help determine best-path routing selection.</dd></dl>
<dl class="section user"><dt><b>UM</b> <b>Router</b> <b>keepalive</b> </dt><dd>Control messages exchanged between UM Routers to confirm that UM Routers are still running.</dd></dl>
<dl class="section user"><dt><b>Interest</b> <b>Message</b> </dt><dd>Control messages exchanged between UM Routers to confirm that UM Routers are still running.</dd></dl>
<dl class="section user"><dt><b>Originating</b> <b>Transport</b> <b>ID</b> <b></b>(OTID)</dt><dd>Unique identifier of a message's transport session at the originating source.</dd></dl>
<dl class="section user"><dt><b>portal</b> </dt><dd>A TCP/IP interface (socket) on a UM Router through which the UM Router passes data. Endpoint portals interface TRDs, and peer portals interface peer portals of other UM Routers.</dd></dl>
<dl class="section user"><dt><b>Topic</b> <b>Resolution</b> <b>Domain</b> <b></b>(TRD)</dt><dd>The realm of UDP multicast or unicast connectivity that allows UM topic resolution to occur. Blocking of this UDP connectivity (for example, by a firewall or a restrictive WAN link) defines a TRD's boundaries. Contexts within a TRD must have the same topic resolution configuration option settings (multicast group IP address/port and resolver interface full or CIDR address).</dd></dl>
<dl class="section user"><dt><b>Use</b> <b>Query</b> </dt><dd>A periodic control message distributed to all members of a TRD to verify the continued presence of receivers for a given topic or pattern.</dd></dl>
<dl class="section user"><dt><b>web</b> <b>monitor</b> </dt><dd>A web-based real-time UM Router statistics and configuration display.</dd></dl>
<p><br />
 </p>
<h1><a class="anchor" id="comparisontopre60umgateway"></a>
Comparison to Pre-6.0 UM Gateway&nbsp;&nbsp;<small><a href="#comparisontopre60umgateway">&lt;-</a></small></h1>
<p>With the release of Ultra Messaging 6.0, the UM Gateway feature is discontinued and replaced by the Ultra Messaging Dynamic Routing Option (also referred to as the UM Router).</p>
<p>The UM Router's primary improvement over the UM Gateway is its ability to intelligently select efficient traffic routes from multiple path choices on a dynamic topic-by-topic basis.</p>
<dl class="section note"><dt>Note</dt><dd>This release of the UM Router is not backward compatible with earlier versions of the UM Gateway in the sense that you cannot have UM Routers and UM Gateways in the same network.</dd></dl>
<p><br />
 </p>
<h2><a class="anchor" id="addedfeaturesanddifferences"></a>
Added Features and Differences&nbsp;&nbsp;<small><a href="#addedfeaturesanddifferences">&lt;-</a></small></h2>
<p>In addition to routing functionality, the following are features of the UM Router that were not provided in the UM Gateway:</p>
<ul>
<li>
Multi-path, ring, or mesh topologies </li>
<li>
Interoperability with MIM and Persistence (see UM Feature Compatibility for complete feature interoperability information) </li>
<li>
Ability to restart the UM Router within a transport's activity timeout period </li>
<li>
Reduced topic resolution traffic via more efficient use of Use Queries and Use Query Responses </li>
<li>
The default value for the portal <code>&lt;cost&gt;</code> is 1 (one). 0 (zero) is not a valid cost value. </li>
<li>
The UM Router daemon (tnwgd) logs version information on startup. </li>
<li>
Compression and/or encryption may now be applied to peer links. </li>
</ul>
<p>The following configuration options exist in the UM Router but not the UM Gateway. See <a class="el" href="index.html#xmlconfigurationreference">XML Configuration Reference</a> for more information on these options.</p>
<ul>
<li>
<code>&lt;name&gt;</code> (as a <code>&lt;daemon&gt;</code> child) </li>
<li>
<code>&lt;route-info&gt;</code> </li>
<li>
<code>&lt;route-recalculation&gt;</code> </li>
<li>
<code>&lt;source-deletion-delay&gt;</code> </li>
<li>
<code>&lt;max-queue&gt;</code> </li>
<li>
<code>&lt;remote-topic-interest&gt;</code> </li>
<li>
<code>&lt;remote-pattern-interest&gt;</code> </li>
<li>
<code>&lt;rate-limit&gt;</code> </li>
<li>
<code>&lt;domain-route&gt;</code> </li>
<li>
<code>&lt;remote-topic&gt;</code> </li>
<li>
<code>&lt;remote-pattern&gt;</code> </li>
<li>
<code>&lt;sourcemap&gt;</code> </li>
<li>
<code>&lt;compression&gt;</code> </li>
<li>
<code>&lt;tls&gt;</code> </li>
</ul>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.11-->
</body>
</html>
