<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Dynamic Routing Guide: DRO Implementation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen_manual.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Dynamic Routing Guide
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('umrouterimplementation.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">DRO Implementation </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><br />
 </p>
<h1><a class="anchor" id="umrouterconfigurationoverview"></a>
DRO Configuration Overview&nbsp;&nbsp;<small><a href="#umrouterconfigurationoverview">&lt;-</a></small></h1>
<p>When the DRO daemon launches, it uses configuration option settings to determine its behavior and expectations. You specify option values in an XML configuration file, and reference the file from a command line argument.</p>
<p>Typically, you have a separate XML configuration file for each DRO, which contains structured configuration elements that describe aspects of the DRO. Within this XML configuration file, each endpoint portal definition points to a UM configuration file, which allow the portal to properly connect to its TRD.</p>
<p><br />
 </p>
<h1><a class="anchor" id="creatingapplicationsforumroutercompatibility"></a>
Creating Applications for DRO Compatibility&nbsp;&nbsp;<small><a href="#creatingapplicationsforumroutercompatibility">&lt;-</a></small></h1>
<p>When developing messaging applications that use Ultra Messaging and, in particular, the DRO, please observe the following guidelines.</p>
<p><br />
 </p>
<h2><a class="anchor" id="namingandidentification"></a>
Naming and Identification&nbsp;&nbsp;<small><a href="#namingandidentification">&lt;-</a></small></h2>
<p>An important part to successfully implementing DROs is prudent and error-free naming of TRDs, DROs, portals, etc., as well as correct identification of IP addresses and ports. It is good practice to first design the DRO network by defining all connections and uniquely naming all DROs, portals, and TRDs. This works well as a diagram similar to some examples presented in this document. Include the following names and parameters in your design diagram:</p>
<ul>
<li>
TRD names and IDs </li>
<li>
DRO names </li>
<li>
Portal names </li>
<li>
Portal costs </li>
</ul>
<p>For example, a well-prepared DRO design could look like the following figure.</p>
<div class="image">
<img src="design_diagram.png" alt="design_diagram.png"/>
</div>
 <p><br />
 </p>
<h2><a class="anchor" id="portalcosts"></a>
Portal Costs&nbsp;&nbsp;<small><a href="#portalcosts">&lt;-</a></small></h2>
<p>A network of DROs uses forwarding cost as the criterion for determining the best (lowest cost) path over which to resolve a topic and route data. Forwarding cost is simply the sum of all portal costs along a multi-DRO path. Thus, total cost for the single path in the above example is 34. (Note that this is a non-real-world example, since costs are pointless without alternate routes to compare to.) You assign portal costs via the <code>&lt;cost&gt;</code> configuration option.</p>
<p>After the DRO network calculates its paths, if a new lower-cost source becomes available, receivers switch to that path.</p>
<p><br />
 </p>
<h2><a class="anchor" id="accesscontrollistsacl"></a>
Access Control Lists (ACL)&nbsp;&nbsp;<small><a href="#accesscontrollistsacl">&lt;-</a></small></h2>
<p>In the DRO, an Access Control List (ACL) is a method of blocking traffic from being forwarded from one TRD to another.</p>
<p>Typical applications for this feature are: </p><ul>
<li>
Prevent unauthorized access to sensitive messages. </li>
<li>
Prevent overloading of bandwidth-limited WAN links, even in the face of accidental use of overly-permissive wildcard receivers. </li>
<li>
ACLs can be used to limit the amount of Topic Resolution traffic for topics on TRDs that don't need those topics. However, the use of wildcard receivers can result in TR traffic even for topics which are blocked from being forwarded. </li>
</ul>
<p>You can apply Access Control Lists to one or more of a DRO's portals to filter traffic by topic, transport, transport session, etc. You configure an ACL in a DRO's XML configuration's <a class="el" href="xmlconfigurationreference.html#droelementacl">&lt;acl&gt;</a> element, as a child of an <a class="el" href="xmlconfigurationreference.html#droelementendpoint">&lt;endpoint&gt;</a> or <a class="el" href="xmlconfigurationreference.html#droelementpeer">&lt;peer&gt;</a> portal. As messages are processed by the DRO, the portals use the ACLs to decide whether to reject the the messages or accept them.</p>
<p><b>Inbound vs. Outbound</b></p>
<p>There are two types of ACLs: inbound and outbound.</p>
<div class="image">
<img src="acl.png" alt="acl.png"/>
</div>
 <p>An inbound ACL tests messages from a source TRD on their way into a DRO portal, and decides whether to reject or accept them. If accepted, the messages can be forwarded to the appropriate destination portal(s).</p>
<p>An outbound ACL tests messages on their way out of a DRO portal, and decides whether to reject them, or transmit them to the destination TRD.</p>
<p>This distinction becomes especially important when a DRO has more than two portals. Messages rejected <em>inbound</em> cannot be forwarded at all. Messages rejected <em>outbound</em> can allow messages to be forwarded out some portals but not others.</p>
<p>An ACL contains one or more Access Control Entries (ACEs).</p>
<p><b>Access Control Entry (ACE)</b></p>
<p>An ACE specifies a set of message matching criteria, and an action to perform based on successful matches. The action is either accept (the message is made available for forwarding, based on interest) or reject (the message is dropped).</p>
<p>When more than one ACE is supplied in an ACL, messages are tested against each ACE in the order defined until a match is found, at which point the ACE specifies what to do (reject or accept).</p>
<p>An ACE contains one or more conditional elements.</p>
<p><b>Conditional Elements</b></p>
<p>Conditional elements do the work of testing various characteristics of messages to determine if they should be rejected or accepted (made available for forwarding).</p>
<p>When more than one conditional element is supplied in an ACE, received messages are tested against all of them to determine if the ACE should be applied.</p>
<p>There are two classes of conditional elements: </p><ul>
<li>
Topic conditionals, which test the topic string of a message. </li>
<li>
Transport session conditionals, which test network transport session characteristics of a message. </li>
</ul>
<p>Topic conditionals can be included on both inbound and outbound ACLs. The topic conditionals are: </p><ul>
<li>
<a class="el" href="xmlconfigurationreference.html#droelementtopic">&lt;topic&gt;</a> - tests for a specific topic name of messages, </li>
<li>
<a class="el" href="xmlconfigurationreference.html#droelementpcrepattern">&lt;pcre-pattern&gt;</a> - matches a group of topics according to a regular expression pattern, </li>
<li>
<a class="el" href="xmlconfigurationreference.html#droelementregexpattern">&lt;regex-pattern&gt;</a> - deprecated, use <a class="el" href="xmlconfigurationreference.html#droelementpcrepattern">&lt;pcre-pattern&gt;</a> instead. </li>
</ul>
<p>Transport session conditionals only apply to inbound ACLs (they are ignored for outbound). The transport session conditionals are: </p><ul>
<li>
<a class="el" href="xmlconfigurationreference.html#droelementtransport">&lt;transport&gt;</a> - tests the transport type of messages. </li>
<li>
<a class="el" href="xmlconfigurationreference.html#droelementsourceip">&lt;source-ip&gt;</a> - tests the IP address of the source or proxy source of messages. </li>
<li>
<a class="el" href="xmlconfigurationreference.html#droelementmulticastgroup">&lt;multicast-group&gt;</a> - tests the destination multicast group of LBT-RM messages. </li>
<li>
<a class="el" href="xmlconfigurationreference.html#droelementudpdestinationport">&lt;udp-destination-port&gt;</a> - tests the destination port of LBT-RM messages. </li>
<li>
<a class="el" href="xmlconfigurationreference.html#droelementudpsourceport">&lt;udp-source-port&gt;</a> - tests the source port of LBT-RM and LBT-RU messages. </li>
<li>
<a class="el" href="xmlconfigurationreference.html#droelementtcpsourceport">&lt;tcp-source-port&gt;</a> - tests the source port of TCP messages. </li>
<li>
<a class="el" href="xmlconfigurationreference.html#droelementxportid">&lt;xport-id&gt;</a> - tests the transport ID of LBT-IPC messages. </li>
</ul>
<p>Conditional elements are children of the <a class="el" href="xmlconfigurationreference.html#droelementace">&lt;ace&gt;</a> element. If you place multiple conditions within an ACE, the DRO performs an "and" operation with them. That is, all relevant conditions in the ACE must be true for the ACE to be applied to a message.</p>
<p>A portal will silently ignore conditional elements that don't apply. For example, if a transport conditional is used on an outbound ACL, or if a UDP-based conditional is present and a TCP message is received.</p>
<p><b>Reject by Default</b></p>
<p>An implicit "reject all" is at the end of every ACL, so the DRO rejects any topic not matched by any ACE. When an ACL is configured for a portal, rejection is the default behavior.</p>
<p>For example, to accept and forward only messages for topic ABC and reject all others: </p><div class="fragment"><div class="line">&lt;acl&gt;</div><div class="line">  &lt;inbound&gt;</div><div class="line">    &lt;ace match=<span class="stringliteral">&quot;accept&quot;</span>&gt;</div><div class="line">      &lt;topic&gt;ABC&lt;/topic&gt;</div><div class="line">    &lt;/ace&gt;</div><div class="line">  &lt;/inbound&gt;</div><div class="line">&lt;/acl&gt;</div></div><!-- fragment --><p> No "reject" ACE is needed since rejection is the default.</p>
<p>In contrast, to accept all messages <em>except</em> for topic ABC: </p><div class="fragment"><div class="line">&lt;acl&gt;</div><div class="line">  &lt;inbound&gt;</div><div class="line">    &lt;ace match=<span class="stringliteral">&quot;reject&quot;</span>&gt;</div><div class="line">      &lt;topic&gt;ABC&lt;/topic&gt;</div><div class="line">    &lt;/ace&gt;</div><div class="line">    &lt;ace match=<span class="stringliteral">&quot;accept&quot;</span>&gt;</div><div class="line">      &lt;topic&gt;.*&lt;/topic&gt;</div><div class="line">    &lt;/ace&gt;</div><div class="line">  &lt;/inbound&gt;</div><div class="line">&lt;/acl&gt;</div></div><!-- fragment --><p> The second ACE is used as a "match all", which effectively changes the default behavior to "accept".</p>
<p><b>ACE Ordering</b></p>
<p>Since the behavior for multiple ACEs is to test them in the order defined, ACEs should be ordered from specific to general.</p>
<p>In the example below, a user named "user1" is assigned to the LAN1 TRD. It is desired to forward all non-user-specific messages, but restrict user-specific message to only that user.</p>
<p>By ordering the ACEs as shown, messages for USER.user1 will be forwarded by the first ACE, but messages for USER.user2, etc. will be rejected due to the second ACE. Messages for topics not starting with "USER." will be forwarded by the third ACE.</p>
<div class="fragment"><div class="line">&lt;endpoint&gt;</div><div class="line">  &lt;name&gt;LAN1&lt;/name&gt;</div><div class="line">  &lt;lbm-config&gt;lan1.cfg&lt;/lbm-config&gt;</div><div class="line">  &lt;domain-<span class="keywordtype">id</span>&gt;1&lt;/domain-<span class="keywordtype">id</span>&gt;</div><div class="line">    &lt;acl&gt;</div><div class="line">      &lt;inbound&gt;</div><div class="line">        &lt;ace match=<span class="stringliteral">&quot;accept&quot;</span>&gt;</div><div class="line">          &lt;topic&gt;USER.user1&lt;/topic&gt;</div><div class="line">        &lt;/ace&gt;</div><div class="line">        &lt;ace match=<span class="stringliteral">&quot;reject&quot;</span>&gt;</div><div class="line">          &lt;pcre-pattern&gt;^USER\..*&lt;/pcre-pattern&gt;</div><div class="line">        &lt;/ace&gt;</div><div class="line">        &lt;ace match=<span class="stringliteral">&quot;accept&quot;</span>&gt;</div><div class="line">          &lt;pcre-pattern&gt;.*&lt;/pcre-pattern&gt;</div><div class="line">        &lt;/ace&gt;</div><div class="line">      &lt;/inbound&gt;</div><div class="line">    &lt;/acl&gt;</div><div class="line">&lt;/endpoint&gt;</div></div><!-- fragment --><p>Note that the string in "&lt;topic&gt;USER.user1&lt;/topic&gt;" is not a regular expression pattern, and therefore does not need any special escaping or meta characters. The "&lt;pcre-pattern&gt;^USER\..*&lt;/pcre-pattern&gt;" is a regular expression, and therefore needs the "^" anchor and the "\." escape sequence.</p>
<p><br />
 </p>
<h2><a class="anchor" id="timersandintervals"></a>
Timers and Intervals&nbsp;&nbsp;<small><a href="#timersandintervals">&lt;-</a></small></h2>
<p>The DRO offers a wide choice of timer and interval options to fine tune its behavior and performance. There are interactions and dependencies between some of these, and if misconfigured, they may cause race or failure conditions.</p>
<p>This manual's description of configuration options (see <a class="el" href="xmlconfigurationreference.html">DRO Configuration Reference</a>), includes identification of such relationships. Please heed them.</p>
<p><br />
 </p>
<h2><a class="anchor" id="multicastimmediatemessagingconsiderations"></a>
Multicast Immediate Messaging Considerations&nbsp;&nbsp;<small><a href="#multicastimmediatemessagingconsiderations">&lt;-</a></small></h2>
<p>Multicast Immediate Messages (MIMs) may pass through the DRO. You cannot filter MIMs with Access Control Lists (ACL)-MIMs are forwarded to all TRDs. Informatica does not recommend using MIM for messaging traffic across the DRO. MIM is intended for short-lived topics and applications that cannot tolerate a delay between source creation and the sending of the first message. See also <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.17_RC3/doc/Gateway/design.tag:../Design/" href="../Design/umfeatures.html#multicastimmediatemessaging">Multicast Immediate Messaging</a>.</p>
<p><br />
 </p>
<h2><a class="anchor" id="persistenceovertheumrouter"></a>
Persistence Over the DRO&nbsp;&nbsp;<small><a href="#persistenceovertheumrouter">&lt;-</a></small></h2>
<p>The DRO supports UMP persistence by routing all necessary control and retransmission channels along with transport and topic resolution traffic. A typical implementation places the UMP persistent store in the same TRD as its registered source, as shown in the following figure.</p>
<div class="image">
<img src="persist_1.png" alt="persist_1.png"/>
</div>
 <p>The DRO also supports UMP implementations with the store located in a receiver's TRD, as shown in the following figure.</p>
<div class="image">
<img src="persist_2.png" alt="persist_2.png"/>
</div>
 <p>Note: For more reliable operation when using UMP with DROs, Informatica recommends enabling OTR.</p>
<p><br />
 </p>
<h2><a class="anchor" id="latejoinandofftransportrecovery"></a>
Late Join and Off-Transport Recovery&nbsp;&nbsp;<small><a href="#latejoinandofftransportrecovery">&lt;-</a></small></h2>
<p>The DRO supports sources and receivers configured for Late Join and/or Off-Transport Recovery (OTR). Retransmission requests and subsequent retransmissions are conducted across the entire path through the DRO network. A DRO's proxy sources do not have Late-Join/OTR retention buffers and hence, are not able to provide recovered messages.</p>
<p><br />
 </p>
<h2><a class="anchor" id="topicresolutionreliability"></a>
Topic Resolution Reliability&nbsp;&nbsp;<small><a href="#topicresolutionreliability">&lt;-</a></small></h2>
<p>Topic resolution can sometimes remain in a quiescent phase due to link interruption, preventing needed re-subscription topic resolution activity. Two ways you can address this are:</p>
<ul>
<li>
For isolated incidents, call <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.17_RC3/doc/Gateway/api.tag:../API/" href="../API/lbm_8h.html#ae6dd7c56acf916ef66658cc1ebc7a525">lbm_context_topic_resolution_request()</a> (see example lbmtrreq.c). This restarts the sustaining phase. </li>
<li>
For more chronic problems, such as a DRO link (especially an endpoint link) over a WAN of questionable reliability, consider configuring Topic resolution to stay in the sustaining phase (options <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.17_RC3/doc/Gateway/config.tag:../Config/" href="../Config/grpudpbasedresolveroperation.html#resolveradvertisementminimumsustaindurationsource">resolver_advertisement_minimum_sustain_duration (source)</a> and <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.17_RC3/doc/Gateway/config.tag:../Config/" href="../Config/grpudpbasedresolveroperation.html#resolverqueryminimumsustaindurationreceiver">resolver_query_minimum_sustain_duration (receiver)</a>). </li>
</ul>
<p><br />
 </p>
<h2><a class="anchor" id="bosandeosbehaviorovertheumrouter"></a>
BOS and EOS Behavior Over the DRO&nbsp;&nbsp;<small><a href="#bosandeosbehaviorovertheumrouter">&lt;-</a></small></h2>
<p>Through a network of DROs, a topic traverses a separate session for each link along its path. Thus, the DRO reports BOS/EOSs based on the activity between the proxy source transport and its associated receiver. There is no end-to-end, application-to-application reporting of the data path state. Also, in the case of multiple topics being assigned to multiple sessions, topics may find themselves with different session mates from hop to hop. Of course, this all influences when, and for which transport session, a topic's BOSs and EOSs are issued.</p>
<p><br />
 </p>
<h2><a class="anchor" id="umrouterreliableloss"></a>
DRO Reliable Loss&nbsp;&nbsp;<small><a href="#umrouterreliableloss">&lt;-</a></small></h2>
<p>The DRO can create a situation where a "reliable" transport (TCP or LBT-IPC) can experience out-of-order message delivery.</p>
<p>The DRO can perform a "protocol conversion" function. I.e. an originating source can use a UDP-based protocol (LBT-RM or LBT-RU), but the proxy source for a remote receiver can use a "reliable" protocol (TCP or LBT-IPC). With a UDP-based protocol, messages can arrive to the DRO network out of order, usually due to packet loss and recovery. However, when those out-of-order messages are forwarded across a "reliable" protocol (TCP or LBT-IPC), the receiver does not expect the sequence number gap, and immediately declares the out-of-order messages as unrecoverable loss. This, in spite of the fact that the missing message arrives shortly thereafter.</p>
<p>Starting in UM version 6.12, there are two new configuration options: <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.17_RC3/doc/Gateway/config.tag:../Config/" href="../Config/grptransporttcpoperation.html#transporttcpdrolossrecoverytimeoutreceiver">transport_tcp_dro_loss_recovery_timeout (receiver)</a> and <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.17_RC3/doc/Gateway/config.tag:../Config/" href="../Config/grptransportlbtipcoperation.html#transportlbtipcdrolossrecoverytimeoutreceiver">transport_lbtipc_dro_loss_recovery_timeout (receiver)</a>, which modify the receiver's behavior. Instead of declaring a gap immediately unrecoverable, a delay is introduced which is similar to what a UDP-based receiver uses to wait for lost and retransmitted datagrams. If the missing message arrives within the delay time, the messages are delivered to application without loss.</p>
<p>Be aware that this functionality is only used with "reliable" protocols published by a DRO's proxy source. If this delay feature is enabled, it will <em>not</em> apply to a "reliable" protocol that is received directly from the originating source.</p>
<p>Note however that you can get genuine gaps in the "reliable" data stream <em>without</em> recovery. For example, an overloaded DRO can drop messages. Or a DRO's proxy receiver can experience unrecoverable loss. In that case, the delay will have to expire before the missing messages are declared unrecoverable and subsequent data is delivered.</p>
<dl class="section attention"><dt>Attention</dt><dd>The delay times default to 0, which retains the pre-6.12 behavior of immediately declaring sequence number gaps unrecoverable. If you want this new behavior, you must configure the appropriate option.</dd></dl>
<p><br />
 </p>
<h1><a class="anchor" id="topologyconfigurationexamples"></a>
Topology Configuration Examples&nbsp;&nbsp;<small><a href="#topologyconfigurationexamples">&lt;-</a></small></h1>
<p>Following are example configurations for a variety of DRO topologies. These are the topology examples presented <a class="el" href="umrouterconcepts.html#routingtopologies">Routing Topologies</a>.</p>
<p>In a real-world situation, you would have DRO XML configuration files with their portal interfaces referencing complete UM configuration files. However, for these examples, the referred domain configuration files are simplified to contain only information relevant to the applicable DRO. As part of this simplification, domain configuration files show interfaces for only one or two transport types.</p>
<p>Also, IP addresses are provided in some cases and omitted in other cases. This is because initiator peer portals need to know the IP addresses (and port numbers) of their corresponding acceptor portals to establish connections, whereas endpoint portals communicate via topic resolution and thus, do not need to know IP addresses.</p>
<dl class="section note"><dt>Note</dt><dd>Before designing any DRO implementations based on configurations or examples other than the types presented in this document, please <a href="https://ultramessaging.github.io/UM_Support.html">contact UM Support</a>.</dd></dl>
<p><br />
 </p>
<h2><a class="anchor" id="directlinkconfiguration"></a>
Direct Link Configuration&nbsp;&nbsp;<small><a href="#directlinkconfiguration">&lt;-</a></small></h2>
<p>This example uses a DRO to connect two topic resolution domain LANs.</p>
<div class="image">
<img src="cfg_direct_link.png" alt="cfg_direct_link.png"/>
</div>
 <p><b>TRD1</b> <b>Configuration</b> </p>
<p>This UM configuration file, trd1.cfg, describes TRD1 and is referenced in the DRO configuration file.</p>
<div class="fragment"><div class="line"><span class="preprocessor">## Global Configuration Options ##</span></div><div class="line">context request_tcp_interface 10.29.3.0/24</div><div class="line">context resolver_multicast_port 13965</div><div class="line">context resolver_multicast_interface 10.29.3.0/24</div><div class="line">context resolver_multicast_address 225.1.37.85</div></div><!-- fragment --><p><b>G1</b> <b>Configuration</b> </p>
<p>This DRO configuration file defines two endpoint portals. In the daemon section, we have turned on monitoring for the all endpoint portals in the DRO. The configuration specifies that all statistics be collected every 5 seconds and uses the lbm transport module to send statistics to your monitoring application, which runs in TRD1. See also UM Concepts, Monitoring UMS. The Web Monitor has also been turned on (port 15304) to monitor the performance of the DRO.</p>
<div class="fragment"><div class="line">&lt;?xml version=<span class="stringliteral">&quot;1.0&quot;</span> encoding=<span class="stringliteral">&quot;UTF-8&quot;</span> ?&gt;</div><div class="line">&lt;!-- G1 xml file- 2 endpoint portals --&gt;</div><div class="line">&lt;tnw-gateway version=<span class="stringliteral">&quot;1.0&quot;</span>&gt;</div><div class="line">  &lt;daemon&gt;</div><div class="line">    &lt;log type=<span class="stringliteral">&quot;console&quot;</span>/&gt;</div><div class="line">    &lt;lbm-license-file&gt;lic0014.txt&lt;/lbm-license-file&gt;</div><div class="line">    &lt;monitor interval=<span class="stringliteral">&quot;5&quot;</span>&gt;</div><div class="line">      &lt;transport-module module=<span class="stringliteral">&quot;lbm&quot;</span> options=<span class="stringliteral">&quot;config=trd1.cfg&quot;</span>/&gt;</div><div class="line">    &lt;/monitor&gt;</div><div class="line">    &lt;web-monitor&gt;*:15304&lt;/web-monitor&gt;</div><div class="line">  &lt;/daemon&gt;</div><div class="line">  &lt;portals&gt;</div><div class="line">    &lt;endpoint&gt;</div><div class="line">      &lt;name&gt;G1-TRD1&lt;/name&gt;</div><div class="line">      &lt;domain-<span class="keywordtype">id</span>&gt;1&lt;/domain-<span class="keywordtype">id</span>&gt;</div><div class="line">      &lt;lbm-config&gt;trd1.cfg&lt;/lbm-config&gt;</div><div class="line">    &lt;/endpoint&gt;</div><div class="line">    &lt;endpoint&gt;</div><div class="line">      &lt;name&gt;G1-TRD2&lt;/name&gt;</div><div class="line">      &lt;domain-<span class="keywordtype">id</span>&gt;2&lt;/domain-<span class="keywordtype">id</span>&gt;</div><div class="line">      &lt;lbm-config&gt;trd2.cfg&lt;/lbm-config&gt;</div><div class="line">    &lt;/endpoint&gt;</div><div class="line">  &lt;/portals&gt;</div><div class="line">&lt;/tnw-gateway&gt;</div></div><!-- fragment --><p><b>TRD2</b> <b>Configuration</b> </p>
<p>The configuration file trd2.cfg could look something like this.</p>
<div class="fragment"><div class="line"><span class="preprocessor"># Global Configuration Options ##</span></div><div class="line">context request_tcp_interface 10.29.3.0/24</div><div class="line">context resolver_multicast_port 13965</div><div class="line">context resolver_multicast_interface 10.29.3.0/24</div><div class="line">context resolver_multicast_address 225.2.37.85</div></div><!-- fragment --><p><br />
 </p>
<h2><a class="anchor" id="peerlinkconfiguration"></a>
Peer Link Configuration&nbsp;&nbsp;<small><a href="#peerlinkconfiguration">&lt;-</a></small></h2>
<p>In cases where the DRO connection between two TRDs must tunnel through a WAN or TCP/IP network, you can implement a DRO at each end, as shown in the example below.</p>
<div class="image">
<img src="cfg_single_link.png" alt="cfg_single_link.png"/>
</div>
 <p><b>TRD1</b> <b>Configuration</b> </p>
<div class="fragment"><div class="line"><span class="preprocessor">## Global Configuration Options ##</span></div><div class="line">context request_tcp_interface 10.29.3.0/24</div><div class="line">context resolver_multicast_port 13965</div><div class="line">context resolver_multicast_interface 10.29.3.0/24</div><div class="line">context resolver_multicast_address 225.1.37.85</div></div><!-- fragment --><p><b>G1</b> <b>Configuration</b> </p>
<p>Following is an example of two companion peer portals (on different DROs) configured via DRO XML configuration file for a TCP-only setup. Note that one must be an initiator and the other, an acceptor.</p>
<div class="fragment"><div class="line">&lt;?xml version=<span class="stringliteral">&quot;1.0&quot;</span> encoding=<span class="stringliteral">&quot;UTF-8&quot;</span> ?&gt;</div><div class="line">&lt;tnw-gateway version=<span class="stringliteral">&quot;1.0&quot;</span>&gt;</div><div class="line">    &lt;daemon&gt;</div><div class="line">       &lt;log type=<span class="stringliteral">&quot;console&quot;</span>/&gt;</div><div class="line">    &lt;/daemon&gt;</div><div class="line">    &lt;portals&gt;</div><div class="line">       &lt;endpoint&gt;</div><div class="line">          &lt;name&gt;G1-TRD1&lt;/name&gt;</div><div class="line">          &lt;domain-<span class="keywordtype">id</span>&gt;1&lt;/domain-<span class="keywordtype">id</span>&gt;</div><div class="line">          &lt;lbm-config&gt;TRD1.cfg&lt;/lbm-config&gt;</div><div class="line">       &lt;/endpoint&gt;</div><div class="line">       &lt;peer&gt;</div><div class="line">          &lt;name&gt;G1-G2&lt;/name&gt;</div><div class="line">          &lt;single-tcp&gt;</div><div class="line">             &lt;interface&gt;10.30.3.100&lt;/interface&gt;</div><div class="line">             &lt;initiator&gt;</div><div class="line">                &lt;address&gt;10.30.3.102&lt;/address&gt;</div><div class="line">                &lt;port&gt;26123&lt;/port&gt;</div><div class="line">             &lt;/initiator&gt;</div><div class="line">          &lt;/single-tcp&gt;</div><div class="line">       &lt;/peer&gt;</div><div class="line">    &lt;/portals&gt;</div><div class="line">&lt;/tnw-gateway&gt;</div></div><!-- fragment --><p><b>G2</b> <b>Configuration</b> </p>
<div class="fragment"><div class="line">&lt;?xml version=<span class="stringliteral">&quot;1.0&quot;</span> encoding=<span class="stringliteral">&quot;UTF-8&quot;</span> ?&gt;</div><div class="line">&lt;tnw-gateway version=<span class="stringliteral">&quot;1.0&quot;</span>&gt;</div><div class="line">    &lt;daemon&gt;</div><div class="line">        &lt;log type=<span class="stringliteral">&quot;console&quot;</span>/&gt;</div><div class="line">    &lt;/daemon&gt;</div><div class="line">    &lt;portals&gt;</div><div class="line">      &lt;peer&gt;</div><div class="line">         &lt;name&gt;G2-G1&lt;/name&gt;</div><div class="line">         &lt;single-tcp&gt;</div><div class="line">           &lt;interface&gt;10.30.3.102&lt;/interface&gt;</div><div class="line">           &lt;acceptor&gt;</div><div class="line">             &lt;listen-port&gt;26123&lt;/listen-port&gt;</div><div class="line">           &lt;/acceptor&gt;</div><div class="line">         &lt;/single-tcp&gt;</div><div class="line">      &lt;/peer&gt;</div><div class="line">      &lt;endpoint&gt;</div><div class="line">         &lt;name&gt;G2-TRD2&lt;/name&gt;</div><div class="line">         &lt;domain-<span class="keywordtype">id</span>&gt;2&lt;/domain-<span class="keywordtype">id</span>&gt;</div><div class="line">         &lt;lbm-config&gt;TRD2.cfg&lt;/lbm-config&gt;</div><div class="line">      &lt;/endpoint&gt;</div><div class="line">    &lt;/portals&gt;</div><div class="line">&lt;/tnw-gateway&gt;</div></div><!-- fragment --><p><b>TRD2</b> <b>Configuration</b> </p>
<div class="fragment"><div class="line"><span class="preprocessor">## LAN2 Configuration Options ##</span></div><div class="line">context request_tcp_interface 10.33.3.0/24</div><div class="line">context resolver_multicast_port 13965</div></div><!-- fragment --><p><br />
 </p>
<h2><a class="anchor" id="transittrdlinkconfiguration"></a>
Transit TRD Link Configuration&nbsp;&nbsp;<small><a href="#transittrdlinkconfiguration">&lt;-</a></small></h2>
<p>This example, like the previous one, configures two localized DROs tunneling a connection between two TRDs, however, the DROs in this example are tunneling through an intermediate TRD. This has the added effect of connecting three TRDs.</p>
<div class="image">
<img src="cfg_transit_trd.png" alt="cfg_transit_trd.png"/>
</div>
 <p><b>TRD1</b> <b>Configuration</b> </p>
<div class="fragment"><div class="line"><span class="preprocessor">## TRD1 Configuration Options ##</span></div><div class="line">context request_tcp_interface 10.29.3.0/24</div><div class="line">context resolver_multicast_port 13965</div><div class="line">context resolver_multicast_interface 10.29.3.0/24</div><div class="line">context resolver_multicast_address 225.2.37.85</div></div><!-- fragment --><p><b>G1</b> <b>Configuration</b> </p>
<p>Following is an example of two companion peer portals (on different DROs) configured via DRO XML configuration file for a TCP-only setup. Note that one must be an initiator and the other, an acceptor.</p>
<div class="fragment"><div class="line">&lt;?xml version=<span class="stringliteral">&quot;1.0&quot;</span> encoding=<span class="stringliteral">&quot;UTF-8&quot;</span> ?&gt;</div><div class="line">&lt;tnw-gateway version=<span class="stringliteral">&quot;1.0&quot;</span>&gt;</div><div class="line">    &lt;daemon&gt;</div><div class="line">        &lt;log type=<span class="stringliteral">&quot;console&quot;</span>/&gt;</div><div class="line">    &lt;/daemon&gt;</div><div class="line">    &lt;portals&gt;</div><div class="line">      &lt;endpoint&gt;</div><div class="line">         &lt;name&gt;G1-TRD1&lt;/name&gt;</div><div class="line">         &lt;domain-<span class="keywordtype">id</span>&gt;1&lt;/domain-<span class="keywordtype">id</span>&gt;</div><div class="line">         &lt;lbm-config&gt;TRD1.cfg&lt;/lbm-config&gt;</div><div class="line">      &lt;/endpoint&gt;</div><div class="line">      &lt;endpoint&gt;</div><div class="line">         &lt;name&gt;G1-TRD2&lt;/name&gt;</div><div class="line">         &lt;domain-<span class="keywordtype">id</span>&gt;2&lt;/domain-<span class="keywordtype">id</span>&gt;</div><div class="line">         &lt;lbm-config&gt;TRD2.cfg&lt;/lbm-config&gt;</div><div class="line">      &lt;/endpoint&gt;</div><div class="line">    &lt;/portals&gt;</div><div class="line">&lt;/tnw-gateway&gt;</div></div><!-- fragment --><p><b>TRD2</b> <b>Configuration</b> </p>
<div class="fragment"><div class="line"><span class="preprocessor">## TRD2 Configuration Options ##</span></div><div class="line">context request_tcp_interface 10.29.3.0/24</div><div class="line">context resolver_multicast_port 13965</div><div class="line">context resolver_multicast_interface 10.29.3.0/24</div><div class="line">context resolver_multicast_address 225.2.37.85</div></div><!-- fragment --><p><b>G2</b> <b>Configuration</b> </p>
<div class="fragment"><div class="line">&lt;?xml version=<span class="stringliteral">&quot;1.0&quot;</span> encoding=<span class="stringliteral">&quot;UTF-8&quot;</span> ?&gt;</div><div class="line">&lt;tnw-gateway version=<span class="stringliteral">&quot;1.0&quot;</span>&gt;</div><div class="line">    &lt;daemon&gt;</div><div class="line">        &lt;log type=<span class="stringliteral">&quot;console&quot;</span>/&gt;</div><div class="line">    &lt;/daemon&gt;</div><div class="line">    &lt;portals&gt;</div><div class="line">      &lt;endpoint&gt;</div><div class="line">         &lt;name&gt;G2-TRD2&lt;/name&gt;</div><div class="line">         &lt;domain-<span class="keywordtype">id</span>&gt;2&lt;/domain-<span class="keywordtype">id</span>&gt;</div><div class="line">         &lt;lbm-config&gt;TRD2.cfg&lt;/lbm-config&gt;</div><div class="line">      &lt;/endpoint&gt;</div><div class="line">      &lt;endpoint&gt;</div><div class="line">         &lt;name&gt;G2-TRD3&lt;/name&gt;</div><div class="line">         &lt;domain-<span class="keywordtype">id</span>&gt;3&lt;/domain-<span class="keywordtype">id</span>&gt;</div><div class="line">         &lt;lbm-config&gt;TRD3.cfg&lt;/lbm-config&gt;</div><div class="line">      &lt;/endpoint&gt;</div><div class="line">    &lt;/portals&gt;</div><div class="line">&lt;/tnw-gateway&gt;</div></div><!-- fragment --><p><b>TRD3</b> <b>Configuration</b> </p>
<div class="fragment"><div class="line"><span class="preprocessor">## TRD3 Configuration Options ##</span></div><div class="line">context request_tcp_interface 10.29.3.0/24</div><div class="line">context resolver_multicast_port 13965</div><div class="line">context resolver_multicast_interface 10.29.3.0/24</div><div class="line">context resolver_multicast_address 225.3.37.85</div></div><!-- fragment --><p><br />
 </p>
<h2><a class="anchor" id="parallellinksconfiguration"></a>
Parallel Links Configuration&nbsp;&nbsp;<small><a href="#parallellinksconfiguration">&lt;-</a></small></h2>
<p>This example is similar in purpose to the single link, peer-to-peer example, except that a second pair of DROs is added as a backup route. You can set one of these as a secondary route by assigning a higher cost to portals along the path. In this case we set G3 and G4's portal costs to 5, forcing the lower route to be selected only if the upper (G1, G2) route fails.</p>
<p>Also note that we have configured the peer portals for the leftmost or odd-numbered DROs as initiators, and the rightmost or even-numbered DRO peers as acceptors.</p>
<div class="image">
<img src="cfg_parallel.png" alt="cfg_parallel.png"/>
</div>
 <p><b>TRD1</b> <b>Configuration</b> </p>
<div class="fragment"><div class="line"><span class="preprocessor">## TRD1 Configuration Options ##</span></div><div class="line">context request_tcp_interface 10.29.3.0/24</div><div class="line">context resolver_multicast_port 13965</div><div class="line">context resolver_multicast_interface 10.29.3.0/24</div><div class="line">context resolver_multicast_address 225.1.37.85</div></div><!-- fragment --><p><b>G1</b> <b>Configuration</b> </p>
<div class="fragment"><div class="line">&lt;?xml version=<span class="stringliteral">&quot;1.0&quot;</span> encoding=<span class="stringliteral">&quot;UTF-8&quot;</span> ?&gt;</div><div class="line">&lt;tnw-gateway version=<span class="stringliteral">&quot;1.0&quot;</span>&gt;</div><div class="line">    &lt;daemon&gt;</div><div class="line">        &lt;log type=<span class="stringliteral">&quot;console&quot;</span>/&gt;</div><div class="line">    &lt;/daemon&gt;</div><div class="line">    &lt;portals&gt;</div><div class="line">      &lt;endpoint&gt;</div><div class="line">         &lt;name&gt;G1-TRD1&lt;/name&gt;</div><div class="line">         &lt;domain-<span class="keywordtype">id</span>&gt;1&lt;/domain-<span class="keywordtype">id</span>&gt;</div><div class="line">         &lt;cost&gt;2&lt;/cost&gt;</div><div class="line">         &lt;lbm-config&gt;TRD1.cfg&lt;/lbm-config&gt;</div><div class="line">      &lt;/endpoint&gt;</div><div class="line">      &lt;peer&gt;</div><div class="line">         &lt;name&gt;G1-G2&lt;/name&gt;</div><div class="line">         &lt;cost&gt;2&lt;/cost&gt;</div><div class="line">         &lt;single-tcp&gt;</div><div class="line">            &lt;interface&gt;10.30.3.101&lt;/interface&gt;</div><div class="line">            &lt;initiator&gt;</div><div class="line">               &lt;address&gt;10.30.3.102&lt;/address&gt;</div><div class="line">               &lt;port&gt;23745&lt;/port&gt;</div><div class="line">            &lt;/initiator&gt;</div><div class="line">         &lt;/single-tcp&gt;</div><div class="line">      &lt;/peer&gt;</div><div class="line">    &lt;/portals&gt;</div><div class="line">&lt;/tnw-gateway&gt;</div></div><!-- fragment --><p><b>G2</b> <b>Configuration</b> </p>
<div class="fragment"><div class="line">&lt;?xml version=<span class="stringliteral">&quot;1.0&quot;</span> encoding=<span class="stringliteral">&quot;UTF-8&quot;</span> ?&gt;</div><div class="line">&lt;tnw-gateway version=<span class="stringliteral">&quot;1.0&quot;</span>&gt;</div><div class="line">    &lt;daemon&gt;</div><div class="line">        &lt;log type=<span class="stringliteral">&quot;console&quot;</span>/&gt;</div><div class="line">    &lt;/daemon&gt;</div><div class="line">    &lt;portals&gt;</div><div class="line">      &lt;peer&gt;</div><div class="line">         &lt;name&gt;G2-G1&lt;/name&gt;</div><div class="line">         &lt;cost&gt;2&lt;/cost&gt;</div><div class="line">         &lt;single-tcp&gt;</div><div class="line">            &lt;interface&gt;10.30.3.102&lt;/interface&gt;</div><div class="line">            &lt;acceptor&gt;</div><div class="line">               &lt;listen-port&gt;23745&lt;/listen-port&gt;</div><div class="line">            &lt;/acceptor&gt;</div><div class="line">         &lt;/single-tcp&gt;</div><div class="line">      &lt;/peer&gt;</div><div class="line">      &lt;endpoint&gt;</div><div class="line">         &lt;name&gt;G2-TRD2&lt;/name&gt;</div><div class="line">         &lt;domain-<span class="keywordtype">id</span>&gt;2&lt;/domain-<span class="keywordtype">id</span>&gt;</div><div class="line">         &lt;cost&gt;2&lt;/cost&gt;</div><div class="line">         &lt;lbm-config&gt;TRD2.cfg&lt;/lbm-config&gt;</div><div class="line">      &lt;/endpoint&gt;</div><div class="line">    &lt;/portals&gt;</div><div class="line">&lt;/tnw-gateway&gt;</div></div><!-- fragment --><p><b>G3</b> <b>Configuration</b> </p>
<div class="fragment"><div class="line">&lt;?xml version=<span class="stringliteral">&quot;1.0&quot;</span> encoding=<span class="stringliteral">&quot;UTF-8&quot;</span> ?&gt;</div><div class="line">&lt;tnw-gateway version=<span class="stringliteral">&quot;1.0&quot;</span>&gt;</div><div class="line">    &lt;daemon&gt;</div><div class="line">        &lt;log type=<span class="stringliteral">&quot;console&quot;</span>/&gt;</div><div class="line">    &lt;/daemon&gt;</div><div class="line">    &lt;portals&gt;</div><div class="line">      &lt;endpoint&gt;</div><div class="line">         &lt;name&gt;G3-TRD1&lt;/name&gt;</div><div class="line">         &lt;domain-<span class="keywordtype">id</span>&gt;1&lt;/domain-<span class="keywordtype">id</span>&gt;</div><div class="line">         &lt;cost&gt;5&lt;/cost&gt;</div><div class="line">         &lt;lbm-config&gt;TRD1.cfg&lt;/lbm-config&gt;</div><div class="line">      &lt;/endpoint&gt;</div><div class="line">      &lt;peer&gt;</div><div class="line">         &lt;name&gt;G3-G4&lt;/name&gt;</div><div class="line">         &lt;cost&gt;5&lt;/cost&gt;</div><div class="line">         &lt;single-tcp&gt;</div><div class="line">            &lt;interface&gt;10.30.3.103&lt;/interface&gt;</div><div class="line">            &lt;initiator&gt;</div><div class="line">               &lt;address&gt;10.30.3.104&lt;/address&gt;</div><div class="line">               &lt;port&gt;23746&lt;/port&gt;</div><div class="line">            &lt;/initiator&gt;</div><div class="line">         &lt;/single-tcp&gt;</div><div class="line">      &lt;/peer&gt;</div><div class="line">    &lt;/portals&gt;</div><div class="line">&lt;/tnw-gateway&gt;</div></div><!-- fragment --><p><b>G4</b> <b>Configuration</b> </p>
<div class="fragment"><div class="line">&lt;?xml version=<span class="stringliteral">&quot;1.0&quot;</span> encoding=<span class="stringliteral">&quot;UTF-8&quot;</span> ?&gt;</div><div class="line">&lt;tnw-gateway version=<span class="stringliteral">&quot;1.0&quot;</span>&gt;</div><div class="line">    &lt;daemon&gt;</div><div class="line">        &lt;log type=<span class="stringliteral">&quot;console&quot;</span>/&gt;</div><div class="line">    &lt;/daemon&gt;</div><div class="line">    &lt;portals&gt;</div><div class="line">      &lt;peer&gt;</div><div class="line">         &lt;name&gt;G4-G3&lt;/name&gt;</div><div class="line">         &lt;cost&gt;5&lt;/cost&gt;</div><div class="line">         &lt;single-tcp&gt;</div><div class="line">            &lt;interface&gt;10.30.3.104&lt;/interface&gt;</div><div class="line">            &lt;acceptor&gt;</div><div class="line">               &lt;listen-port&gt;23746&lt;/listen-port&gt;</div><div class="line">            &lt;/acceptor&gt;</div><div class="line">         &lt;/single-tcp&gt;</div><div class="line">      &lt;/peer&gt;</div><div class="line">      &lt;endpoint&gt;</div><div class="line">         &lt;name&gt;G4-TRD2&lt;/name&gt;</div><div class="line">         &lt;domain-<span class="keywordtype">id</span>&gt;2&lt;/domain-<span class="keywordtype">id</span>&gt;</div><div class="line">         &lt;cost&gt;5&lt;/cost&gt;</div><div class="line">         &lt;lbm-config&gt;TRD2.cfg&lt;/lbm-config&gt;</div><div class="line">      &lt;/endpoint&gt;</div><div class="line">    &lt;/portals&gt;</div><div class="line">&lt;/tnw-gateway&gt;</div></div><!-- fragment --><p><b>TRD2</b> <b>Configuration</b> </p>
<div class="fragment"><div class="line"><span class="preprocessor">## TRD2 Configuration Options ##</span></div><div class="line">context request_tcp_interface 10.29.3.0/24</div><div class="line">context resolver_multicast_port 13965</div><div class="line">context resolver_multicast_interface 10.29.3.0/24</div><div class="line">context resolver_multicast_address 225.2.37.85</div></div><!-- fragment --><p><br />
 </p>
<h2><a class="anchor" id="loopandspurconfiguration"></a>
Loop and Spur Configuration&nbsp;&nbsp;<small><a href="#loopandspurconfiguration">&lt;-</a></small></h2>
<div class="image">
<img src="cfg_loop_spur.png" alt="cfg_loop_spur.png"/>
</div>
 <p><b>TRD1</b> <b>Configuration</b> </p>
<div class="fragment"><div class="line"><span class="preprocessor">## Global Configuration Options ##</span></div><div class="line">context request_tcp_interface 10.29.3.0/24</div><div class="line">context resolver_multicast_port 13965</div><div class="line">context resolver_multicast_interface 10.29.3.0/24</div><div class="line">context resolver_multicast_address 225.1.37.85</div></div><!-- fragment --><p><b>G1</b> <b>Configuration</b> </p>
<div class="fragment"><div class="line">&lt;?xml version=<span class="stringliteral">&quot;1.0&quot;</span> encoding=<span class="stringliteral">&quot;UTF-8&quot;</span> ?&gt;</div><div class="line">&lt;tnw-gateway version=<span class="stringliteral">&quot;1.0&quot;</span>&gt;</div><div class="line">    &lt;daemon&gt;</div><div class="line">        &lt;log type=<span class="stringliteral">&quot;console&quot;</span>/&gt;</div><div class="line">    &lt;/daemon&gt;</div><div class="line">    &lt;portals&gt;</div><div class="line">      &lt;peer&gt;</div><div class="line">         &lt;name&gt;G1_to_G3&lt;/name&gt;</div><div class="line">         &lt;single-tcp&gt;</div><div class="line">            &lt;initiator&gt;</div><div class="line">               &lt;address&gt;55.55.10.27&lt;/address&gt;</div><div class="line">               &lt;port&gt;23801&lt;/port&gt;</div><div class="line">            &lt;/initiator&gt;</div><div class="line">         &lt;/single-tcp&gt;</div><div class="line">      &lt;/peer&gt;</div><div class="line">      &lt;peer&gt;</div><div class="line">         &lt;name&gt;G1_to_G2&lt;/name&gt;</div><div class="line">         &lt;single-tcp&gt;</div><div class="line">            &lt;initiator&gt;</div><div class="line">               &lt;address&gt;55.55.10.26&lt;/address&gt;</div><div class="line">               &lt;port&gt;23745&lt;/port&gt;</div><div class="line">            &lt;/initiator&gt;</div><div class="line">         &lt;/single-tcp&gt;</div><div class="line">      &lt;/peer&gt;</div><div class="line">      &lt;endpoint&gt;</div><div class="line">         &lt;name&gt;G1_to_TRD1&lt;/name&gt;</div><div class="line">         &lt;domain-<span class="keywordtype">id</span>&gt;1&lt;/domain-<span class="keywordtype">id</span>&gt;</div><div class="line">         &lt;lbm-config&gt;TRD1.cfg&lt;/lbm-config&gt;</div><div class="line">      &lt;/endpoint&gt;</div><div class="line">    &lt;/portals&gt;</div><div class="line">&lt;/tnw-gateway&gt;</div></div><!-- fragment --><p><b>G2</b> <b>Configuration</b> </p>
<div class="fragment"><div class="line">&lt;?xml version=<span class="stringliteral">&quot;1.0&quot;</span> encoding=<span class="stringliteral">&quot;UTF-8&quot;</span> ?&gt;</div><div class="line">&lt;tnw-gateway version=<span class="stringliteral">&quot;1.0&quot;</span>&gt;</div><div class="line">    &lt;daemon&gt;</div><div class="line">        &lt;log type=<span class="stringliteral">&quot;console&quot;</span>/&gt;</div><div class="line">    &lt;/daemon&gt;</div><div class="line">    &lt;portals&gt;</div><div class="line">      &lt;peer&gt;</div><div class="line">         &lt;name&gt;G2_to_G4&lt;/name&gt;</div><div class="line">         &lt;single-tcp&gt;</div><div class="line">            &lt;initiator&gt;</div><div class="line">               &lt;address&gt;55.55.10.28&lt;/address&gt;</div><div class="line">               &lt;port&gt;23632&lt;/port&gt;</div><div class="line">            &lt;/initiator&gt;</div><div class="line">         &lt;/single-tcp&gt;</div><div class="line">      &lt;/peer&gt;</div><div class="line">      &lt;peer&gt;</div><div class="line">         &lt;name&gt;G2_to_G1&lt;/name&gt;</div><div class="line">         &lt;single-tcp&gt;</div><div class="line">            &lt;acceptor&gt;</div><div class="line">               &lt;listen-port&gt;23745&lt;/listen-port&gt;</div><div class="line">            &lt;/acceptor&gt;</div><div class="line">         &lt;/single-tcp&gt;</div><div class="line">      &lt;/peer&gt;</div><div class="line">      &lt;endpoint&gt;</div><div class="line">         &lt;name&gt;G2_to_TRD2&lt;/name&gt;</div><div class="line">         &lt;domain-<span class="keywordtype">id</span>&gt;2&lt;/domain-<span class="keywordtype">id</span>&gt;</div><div class="line">         &lt;lbm-config&gt;TRD2.cfg&lt;/lbm-config&gt;</div><div class="line">      &lt;/endpoint&gt;</div><div class="line">    &lt;/portals&gt;</div><div class="line">&lt;/tnw-gateway&gt;</div></div><!-- fragment --><p><b>TRD2</b> <b>Configuration</b> </p>
<div class="fragment"><div class="line"><span class="preprocessor">## Global Configuration Options ##</span></div><div class="line">context request_tcp_interface 10.29.3.0/24</div><div class="line">context resolver_multicast_port 13965</div><div class="line">context resolver_multicast_interface 10.29.3.0/24</div><div class="line">context resolver_multicast_address 225.2.37.85</div></div><!-- fragment --><p><b>TRD3</b> <b>Configuration</b> </p>
<div class="fragment"><div class="line"><span class="preprocessor">## Global Configuration Options ##</span></div><div class="line">context request_tcp_interface 10.29.3.0/24</div><div class="line">context resolver_multicast_port 13965</div><div class="line">context resolver_multicast_interface 10.29.3.0/24</div><div class="line">context resolver_multicast_address 225.3.37.85</div></div><!-- fragment --><p><b>G3</b> <b>Configuration</b> </p>
<div class="fragment"><div class="line">&lt;?xml version=<span class="stringliteral">&quot;1.0&quot;</span> encoding=<span class="stringliteral">&quot;UTF-8&quot;</span> ?&gt;</div><div class="line">&lt;tnw-gateway version=<span class="stringliteral">&quot;1.0&quot;</span>&gt;</div><div class="line">    &lt;daemon&gt;</div><div class="line">        &lt;log type=<span class="stringliteral">&quot;console&quot;</span>/&gt;</div><div class="line">    &lt;/daemon&gt;</div><div class="line">    &lt;portals&gt;</div><div class="line">      &lt;peer&gt;</div><div class="line">         &lt;name&gt;G3_to_G4&lt;/name&gt;</div><div class="line">         &lt;single-tcp&gt;</div><div class="line">            &lt;initiator&gt;</div><div class="line">               &lt;address&gt;55.55.10.28&lt;/address&gt;</div><div class="line">               &lt;port&gt;23754&lt;/port&gt;</div><div class="line">            &lt;/initiator&gt;</div><div class="line">         &lt;/single-tcp&gt;</div><div class="line">      &lt;/peer&gt;</div><div class="line">      &lt;peer&gt;</div><div class="line">         &lt;name&gt;G3_to_G1&lt;/name&gt;</div><div class="line">         &lt;single-tcp&gt;</div><div class="line">            &lt;acceptor&gt;</div><div class="line">               &lt;listen-port&gt;23801&lt;/listen-port&gt;</div><div class="line">            &lt;/acceptor&gt;</div><div class="line">         &lt;/single-tcp&gt;</div><div class="line">      &lt;/peer&gt;</div><div class="line">      &lt;endpoint&gt;</div><div class="line">         &lt;name&gt;G3_to_TRD3&lt;/name&gt;</div><div class="line">         &lt;domain-<span class="keywordtype">id</span>&gt;3&lt;/domain-<span class="keywordtype">id</span>&gt;</div><div class="line">         &lt;lbm-config&gt;TRD3.cfg&lt;/lbm-config&gt;</div><div class="line">      &lt;/endpoint&gt;</div><div class="line">    &lt;/portals&gt;</div><div class="line">&lt;/tnw-gateway&gt;</div></div><!-- fragment --><p><b>G4</b> <b>Configuration</b> </p>
<div class="fragment"><div class="line">&lt;?xml version=<span class="stringliteral">&quot;1.0&quot;</span> encoding=<span class="stringliteral">&quot;UTF-8&quot;</span> ?&gt;</div><div class="line">&lt;tnw-gateway version=<span class="stringliteral">&quot;1.0&quot;</span>&gt;</div><div class="line">    &lt;daemon&gt;</div><div class="line">        &lt;log type=<span class="stringliteral">&quot;console&quot;</span>/&gt;</div><div class="line">    &lt;/daemon&gt;</div><div class="line">    &lt;portals&gt;</div><div class="line">      &lt;peer&gt;</div><div class="line">         &lt;name&gt;G4_to_G3&lt;/name&gt;</div><div class="line">         &lt;single-tcp&gt;</div><div class="line">            &lt;acceptor&gt;</div><div class="line">               &lt;listen-port&gt;23754&lt;/listen-port&gt;</div><div class="line">            &lt;/acceptor&gt;</div><div class="line">         &lt;/single-tcp&gt;</div><div class="line">      &lt;/peer&gt;</div><div class="line">      &lt;endpoint&gt;</div><div class="line">         &lt;name&gt;G4_to_TRD4&lt;/name&gt;</div><div class="line">         &lt;domain-<span class="keywordtype">id</span>&gt;4&lt;/domain-<span class="keywordtype">id</span>&gt;</div><div class="line">         &lt;lbm-config&gt;TRD4.cfg&lt;/lbm-config&gt;</div><div class="line">      &lt;/endpoint&gt;</div><div class="line">      &lt;peer&gt;</div><div class="line">         &lt;name&gt;G4_to_G2&lt;/name&gt;</div><div class="line">         &lt;single-tcp&gt;</div><div class="line">            &lt;acceptor&gt;</div><div class="line">               &lt;listen-port&gt;23632&lt;/listen-port&gt;</div><div class="line">            &lt;/acceptor&gt;</div><div class="line">         &lt;/single-tcp&gt;</div><div class="line">      &lt;/peer&gt;</div><div class="line">      &lt;peer&gt;</div><div class="line">         &lt;name&gt;G4_to_G5&lt;/name&gt;</div><div class="line">         &lt;single-tcp&gt;</div><div class="line">            &lt;initiator&gt;</div><div class="line">               &lt;address&gt;55.55.10.29&lt;/address&gt;</div><div class="line">               &lt;port&gt;23739&lt;/port&gt;</div><div class="line">            &lt;/initiator&gt;</div><div class="line">         &lt;/single-tcp&gt;</div><div class="line">      &lt;/peer&gt;</div><div class="line">    &lt;/portals&gt;</div><div class="line">&lt;/tnw-gateway&gt;</div></div><!-- fragment --><p><b>TRD4</b> <b>Configuration</b> </p>
<div class="fragment"><div class="line"><span class="preprocessor">## Global Configuration Options ##</span></div><div class="line">context request_tcp_interface 10.29.3.0/24</div><div class="line">context resolver_multicast_port 13965</div><div class="line">context resolver_multicast_interface 10.29.3.0/24</div><div class="line">context resolver_multicast_address 225.4.37.85</div></div><!-- fragment --><p><b>G5</b> <b>Configuration</b> </p>
<div class="fragment"><div class="line">&lt;?xml version=<span class="stringliteral">&quot;1.0&quot;</span> encoding=<span class="stringliteral">&quot;UTF-8&quot;</span> ?&gt;</div><div class="line">&lt;tnw-gateway version=<span class="stringliteral">&quot;1.0&quot;</span>&gt;</div><div class="line">    &lt;daemon&gt;</div><div class="line">        &lt;log type=<span class="stringliteral">&quot;console&quot;</span>/&gt;</div><div class="line">    &lt;/daemon&gt;</div><div class="line">    &lt;portals&gt;</div><div class="line">      &lt;endpoint&gt;</div><div class="line">         &lt;name&gt;G5_to_TRD5&lt;/name&gt;</div><div class="line">         &lt;domain-<span class="keywordtype">id</span>&gt;5&lt;/domain-<span class="keywordtype">id</span>&gt;</div><div class="line">         &lt;lbm-config&gt;TRD5.cfg&lt;/lbm-config&gt;</div><div class="line">      &lt;/endpoint&gt;</div><div class="line">      &lt;peer&gt;</div><div class="line">         &lt;name&gt;G5_to_G4&lt;/name&gt;</div><div class="line">         &lt;single-tcp&gt;</div><div class="line">            &lt;acceptor&gt;</div><div class="line">               &lt;listen-port&gt;23739&lt;/listen-port&gt;</div><div class="line">            &lt;/acceptor&gt;</div><div class="line">         &lt;/single-tcp&gt;</div><div class="line">      &lt;/peer&gt;</div><div class="line">    &lt;/portals&gt;</div><div class="line">&lt;/tnw-gateway&gt;</div></div><!-- fragment --><p><b>TRD5</b> <b>Configuration</b> </p>
<div class="fragment"><div class="line"><span class="preprocessor">## Global Configuration Options ##</span></div><div class="line">context request_tcp_interface 10.29.3.0/24</div><div class="line">context resolver_multicast_port 13965</div><div class="line">context resolver_multicast_interface 10.29.3.0/24</div><div class="line">context resolver_multicast_address 225.5.37.85</div></div><!-- fragment --><p><br />
 </p>
<h2><a class="anchor" id="starconfiguration"></a>
Star Configuration&nbsp;&nbsp;<small><a href="#starconfiguration">&lt;-</a></small></h2>
<p>This network consists of four TRDs. Within each TRD, full multicast connectivity exists. However, no multicast connectivity exists between the four TRDs.</p>
<div class="image">
<img src="cfg_star.png" alt="cfg_star.png"/>
</div>
 <p><b>G1</b> <b>Configuration</b> </p>
<p>The configuration for this DRO also has transport statistics monitoring and the WebMonitor turned on.</p>
<div class="fragment"><div class="line">&lt;?xml version=<span class="stringliteral">&quot;1.0&quot;</span> encoding=<span class="stringliteral">&quot;UTF-8&quot;</span> ?&gt;</div><div class="line">&lt;!-- UM GW xml file- 3 endpoint portals --&gt;</div><div class="line">&lt;tnw-gateway version=<span class="stringliteral">&quot;1.0&quot;</span>&gt;</div><div class="line">  &lt;daemon&gt;</div><div class="line">    &lt;log type=<span class="stringliteral">&quot;console&quot;</span>/&gt;</div><div class="line">    &lt;lbm-license-file&gt;lic0014.txt&lt;/lbm-license-file&gt;</div><div class="line">    &lt;monitor interval=<span class="stringliteral">&quot;5&quot;</span>&gt;</div><div class="line">      &lt;transport-module module=<span class="stringliteral">&quot;lbm&quot;</span> options=<span class="stringliteral">&quot;config=trd1.cfg&quot;</span>/&gt;</div><div class="line">    &lt;/monitor&gt;</div><div class="line">    &lt;web-monitor&gt;*:15304&lt;/web-monitor&gt;</div><div class="line">  &lt;/daemon&gt;</div><div class="line">  &lt;portals&gt;</div><div class="line">    &lt;endpoint&gt;</div><div class="line">      &lt;name&gt;G1_to_TRD1&lt;/name&gt;</div><div class="line">      &lt;domain-<span class="keywordtype">id</span>&gt;1&lt;/domain-<span class="keywordtype">id</span>&gt;</div><div class="line">      &lt;lbm-config&gt;trd1.cfg&lt;/lbm-config&gt;</div><div class="line">    &lt;/endpoint&gt;</div><div class="line">    &lt;endpoint&gt;</div><div class="line">      &lt;name&gt;G1_to_TRD2&lt;/name&gt;</div><div class="line">      &lt;domain-<span class="keywordtype">id</span>&gt;2&lt;/domain-<span class="keywordtype">id</span>&gt;</div><div class="line">      &lt;lbm-config&gt;trd2.cfg&lt;/lbm-config&gt;</div><div class="line">    &lt;/endpoint&gt;</div><div class="line">    &lt;endpoint&gt;</div><div class="line">      &lt;name&gt;G1_to_TRD3&lt;/name&gt;</div><div class="line">      &lt;domain-<span class="keywordtype">id</span>&gt;3&lt;/domain-<span class="keywordtype">id</span>&gt;</div><div class="line">      &lt;lbm-config&gt;trd3.cfg&lt;/lbm-config&gt;</div><div class="line">    &lt;/endpoint&gt;</div><div class="line">    &lt;endpoint&gt;</div><div class="line">      &lt;name&gt;G1_to_TRD4&lt;/name&gt;</div><div class="line">      &lt;domain-<span class="keywordtype">id</span>&gt;4&lt;/domain-<span class="keywordtype">id</span>&gt;</div><div class="line">      &lt;lbm-config&gt;trd4.cfg&lt;/lbm-config&gt;</div><div class="line">    &lt;/endpoint&gt;</div><div class="line">  &lt;/portals&gt;</div><div class="line">&lt;/tnw-gateway&gt;</div></div><!-- fragment --><p><b>TRD1</b> <b>Configuration</b> </p>
<div class="fragment"><div class="line"><span class="preprocessor">## Global Configuration Options ##</span></div><div class="line">context request_tcp_interface 10.29.3.0/24</div><div class="line">context resolver_multicast_port 13965</div><div class="line">context resolver_multicast_interface 10.29.3.0/24</div><div class="line">context resolver_multicast_address 225.1.37.85</div></div><!-- fragment --><p><b>TRD2</b> <b>Configuration</b> </p>
<div class="fragment"><div class="line"><span class="preprocessor">## Global Configuration Options ##</span></div><div class="line">context request_tcp_interface 10.29.3.0/24</div><div class="line">context resolver_multicast_port 13965</div><div class="line">context resolver_multicast_interface 10.29.3.0/24</div><div class="line">context resolver_multicast_address 225.2.37.85</div></div><!-- fragment --><p><b>TRD3</b> <b>Configuration</b> </p>
<div class="fragment"><div class="line"><span class="preprocessor">## Global Configuration Options ##</span></div><div class="line">context request_tcp_interface 10.29.3.0/24</div><div class="line">context resolver_multicast_port 13965</div><div class="line">context resolver_multicast_interface 10.29.3.0/24</div><div class="line">context resolver_multicast_address 225.3.37.85</div></div><!-- fragment --><p><b>TRD4</b> <b>Configuration</b> </p>
<div class="fragment"><div class="line"><span class="preprocessor">## Global Configuration Options ##</span></div><div class="line">context request_tcp_interface 10.29.3.0/24</div><div class="line">context resolver_multicast_port 13965</div><div class="line">context resolver_multicast_interface 10.29.3.0/24</div><div class="line">context resolver_multicast_address 225.4.37.85</div></div><!-- fragment --><p><br />
 </p>
<h2><a class="anchor" id="meshconfiguration"></a>
Mesh Configuration&nbsp;&nbsp;<small><a href="#meshconfiguration">&lt;-</a></small></h2>
<p>The mesh topology utilizes many connections between many nodes, to provide a variety of alternate routes. However, meshes are not the best solution in many cases, as unneeded complexity can increase the chance for configuration errors or make it more difficult to trace problems.</p>
<div class="image">
<img src="cfg_mesh.png" alt="cfg_mesh.png"/>
</div>
 <p><b>TRD1</b> <b>Configuration</b> </p>
<div class="fragment"><div class="line"><span class="preprocessor">### Global Configuration Options ##</span></div><div class="line">context request_tcp_interface 10.29.3.0/24</div><div class="line">context resolver_multicast_port 13965</div><div class="line">context resolver_multicast_interface 10.29.3.0/24</div><div class="line">context resolver_multicast_address 225.1.37.85</div></div><!-- fragment --><p><b>G1</b> <b>Configuration</b> </p>
<div class="fragment"><div class="line">&lt;?xml version=<span class="stringliteral">&quot;1.0&quot;</span> encoding=<span class="stringliteral">&quot;UTF-8&quot;</span> ?&gt;</div><div class="line">&lt;tnw-gateway version=<span class="stringliteral">&quot;1.0&quot;</span>&gt;</div><div class="line">    &lt;daemon&gt;</div><div class="line">        &lt;log type=<span class="stringliteral">&quot;console&quot;</span>/&gt;</div><div class="line">    &lt;/daemon&gt;</div><div class="line">    &lt;portals&gt;</div><div class="line">      &lt;peer&gt;</div><div class="line">         &lt;name&gt;G1_to_G5&lt;/name&gt;</div><div class="line">         &lt;single-tcp&gt;</div><div class="line">            &lt;initiator&gt;</div><div class="line">               &lt;address&gt;55.55.10.105&lt;/address&gt;</div><div class="line">               &lt;port&gt;23880&lt;/port&gt;</div><div class="line">            &lt;/initiator&gt;</div><div class="line">         &lt;/single-tcp&gt;</div><div class="line">      &lt;/peer&gt;</div><div class="line">      &lt;peer&gt;</div><div class="line">         &lt;name&gt;G1_to_G4&lt;/name&gt;</div><div class="line">         &lt;single-tcp&gt;</div><div class="line">            &lt;initiator&gt;</div><div class="line">               &lt;address&gt;55.55.10.104&lt;/address&gt;</div><div class="line">               &lt;port&gt;23801&lt;/port&gt;</div><div class="line">            &lt;/initiator&gt;</div><div class="line">         &lt;/single-tcp&gt;</div><div class="line">      &lt;/peer&gt;</div><div class="line">      &lt;endpoint&gt;</div><div class="line">         &lt;name&gt;G1_to_TRD1&lt;/name&gt;</div><div class="line">         &lt;domain-<span class="keywordtype">id</span>&gt;1&lt;/domain-<span class="keywordtype">id</span>&gt;</div><div class="line">         &lt;lbm-config&gt;TRD1.cfg&lt;/lbm-config&gt;</div><div class="line">      &lt;/endpoint&gt;</div><div class="line">      &lt;endpoint&gt;</div><div class="line">         &lt;name&gt;G1_to_TRD2&lt;/name&gt;</div><div class="line">         &lt;domain-<span class="keywordtype">id</span>&gt;2&lt;/domain-<span class="keywordtype">id</span>&gt;</div><div class="line">         &lt;lbm-config&gt;TRD2.cfg&lt;/lbm-config&gt;</div><div class="line">      &lt;/endpoint&gt;</div><div class="line">      &lt;peer&gt;</div><div class="line">         &lt;name&gt;G1_to_G2&lt;/name&gt;</div><div class="line">         &lt;single-tcp&gt;</div><div class="line">            &lt;initiator&gt;</div><div class="line">               &lt;address&gt;55.55.10.102&lt;/address&gt;</div><div class="line">               &lt;port&gt;23745&lt;/port&gt;</div><div class="line">            &lt;/initiator&gt;</div><div class="line">         &lt;/single-tcp&gt;</div><div class="line">      &lt;/peer&gt;</div><div class="line">    &lt;/portals&gt;</div><div class="line">&lt;/tnw-gateway&gt;</div></div><!-- fragment --><p><b>G2</b> <b>Configuration</b> </p>
<div class="fragment"><div class="line">&lt;?xml version=<span class="stringliteral">&quot;1.0&quot;</span> encoding=<span class="stringliteral">&quot;UTF-8&quot;</span> ?&gt;</div><div class="line">&lt;tnw-gateway version=<span class="stringliteral">&quot;1.0&quot;</span>&gt;</div><div class="line">    &lt;daemon&gt;</div><div class="line">        &lt;log type=<span class="stringliteral">&quot;console&quot;</span>/&gt;</div><div class="line">    &lt;/daemon&gt;</div><div class="line">    &lt;portals&gt;</div><div class="line">      &lt;peer&gt;</div><div class="line">         &lt;name&gt;G2_to_G5&lt;/name&gt;</div><div class="line">         &lt;single-tcp&gt;</div><div class="line">            &lt;initiator&gt;</div><div class="line">               &lt;address&gt;55.55.10.105&lt;/address&gt;</div><div class="line">               &lt;port&gt;23608&lt;/port&gt;</div><div class="line">            &lt;/initiator&gt;</div><div class="line">         &lt;/single-tcp&gt;</div><div class="line">      &lt;/peer&gt;</div><div class="line">      &lt;peer&gt;</div><div class="line">         &lt;name&gt;G2_to_G4&lt;/name&gt;</div><div class="line">         &lt;single-tcp&gt;</div><div class="line">            &lt;acceptor&gt;</div><div class="line">               &lt;listen-port&gt;23831&lt;/listen-port&gt;</div><div class="line">            &lt;/acceptor&gt;</div><div class="line">         &lt;/single-tcp&gt;</div><div class="line">      &lt;/peer&gt;</div><div class="line">      &lt;peer&gt;</div><div class="line">         &lt;name&gt;G2_to_G1&lt;/name&gt;</div><div class="line">         &lt;single-tcp&gt;</div><div class="line">            &lt;acceptor&gt;</div><div class="line">               &lt;listen-port&gt;23745&lt;/listen-port&gt;</div><div class="line">            &lt;/acceptor&gt;</div><div class="line">         &lt;/single-tcp&gt;</div><div class="line">      &lt;/peer&gt;</div><div class="line">      &lt;peer&gt;</div><div class="line">         &lt;name&gt;G2_to_G3&lt;/name&gt;</div><div class="line">         &lt;single-tcp&gt;</div><div class="line">            &lt;initiator&gt;</div><div class="line">               &lt;address&gt;55.55.10.103&lt;/address&gt;</div><div class="line">               &lt;port&gt;23632&lt;/port&gt;</div><div class="line">            &lt;/initiator&gt;</div><div class="line">         &lt;/single-tcp&gt;</div><div class="line">      &lt;/peer&gt;</div><div class="line">      &lt;endpoint&gt;</div><div class="line">         &lt;name&gt;G2_to_TRD2&lt;/name&gt;</div><div class="line">         &lt;domain-<span class="keywordtype">id</span>&gt;2&lt;/domain-<span class="keywordtype">id</span>&gt;</div><div class="line">         &lt;lbm-config&gt;TRD2.cfg&lt;/lbm-config&gt;</div><div class="line">      &lt;/endpoint&gt;</div><div class="line">    &lt;/portals&gt;</div><div class="line">&lt;/tnw-gateway&gt;</div></div><!-- fragment --><p><b>G3</b> <b>Configuration</b> </p>
<div class="fragment"><div class="line">&lt;?xml version=<span class="stringliteral">&quot;1.0&quot;</span> encoding=<span class="stringliteral">&quot;UTF-8&quot;</span> ?&gt;</div><div class="line">&lt;tnw-gateway version=<span class="stringliteral">&quot;1.0&quot;</span>&gt;</div><div class="line">    &lt;daemon&gt;</div><div class="line">        &lt;log type=<span class="stringliteral">&quot;console&quot;</span>/&gt;</div><div class="line">    &lt;/daemon&gt;</div><div class="line">    &lt;portals&gt;</div><div class="line">      &lt;peer&gt;</div><div class="line">         &lt;name&gt;G3_to_G5&lt;/name&gt;</div><div class="line">         &lt;single-tcp&gt;</div><div class="line">            &lt;initiator&gt;</div><div class="line">               &lt;address&gt;55.55.10.105&lt;/address&gt;</div><div class="line">               &lt;port&gt;23739&lt;/port&gt;</div><div class="line">            &lt;/initiator&gt;</div><div class="line">         &lt;/single-tcp&gt;</div><div class="line">      &lt;/peer&gt;</div><div class="line">      &lt;peer&gt;</div><div class="line">         &lt;name&gt;G3_to_G4&lt;/name&gt;</div><div class="line">         &lt;single-tcp&gt;</div><div class="line">            &lt;acceptor&gt;</div><div class="line">               &lt;listen-port&gt;23754&lt;/listen-port&gt;</div><div class="line">            &lt;/acceptor&gt;</div><div class="line">         &lt;/single-tcp&gt;</div><div class="line">      &lt;/peer&gt;</div><div class="line">      &lt;peer&gt;</div><div class="line">         &lt;name&gt;G3_to_G2&lt;/name&gt;</div><div class="line">         &lt;single-tcp&gt;</div><div class="line">            &lt;acceptor&gt;</div><div class="line">               &lt;listen-port&gt;23632&lt;/listen-port&gt;</div><div class="line">            &lt;/acceptor&gt;</div><div class="line">         &lt;/single-tcp&gt;</div><div class="line">      &lt;/peer&gt;</div><div class="line">    &lt;/portals&gt;</div><div class="line">&lt;/tnw-gateway&gt;</div></div><!-- fragment --><p><b>TRD2</b> <b>Configuration</b> </p>
<div class="fragment"><div class="line"><span class="preprocessor">## Global Configuration Options ##</span></div><div class="line">context request_tcp_interface 10.29.3.0/24</div><div class="line">context resolver_multicast_port 13965</div><div class="line">context resolver_multicast_interface 10.29.3.0/24</div><div class="line">context resolver_multicast_address 225.2.37.85</div></div><!-- fragment --><p><b>TRD3</b> <b>Configuration</b> </p>
<div class="fragment"><div class="line"><span class="preprocessor">## Global Configuration Options ##</span></div><div class="line">context request_tcp_interface 10.29.3.0/24</div><div class="line">context resolver_multicast_port 13965</div><div class="line">context resolver_multicast_interface 10.29.3.0/24</div><div class="line">context resolver_multicast_address 225.3.37.85</div></div><!-- fragment --><p><b>G4</b> <b>Configuration</b> </p>
<div class="fragment"><div class="line">&lt;?xml version=<span class="stringliteral">&quot;1.0&quot;</span> encoding=<span class="stringliteral">&quot;UTF-8&quot;</span> ?&gt;</div><div class="line">&lt;tnw-gateway version=<span class="stringliteral">&quot;1.0&quot;</span>&gt;</div><div class="line">    &lt;daemon&gt;</div><div class="line">        &lt;log type=<span class="stringliteral">&quot;console&quot;</span>/&gt;</div><div class="line">    &lt;/daemon&gt;</div><div class="line">    &lt;portals&gt;</div><div class="line">      &lt;peer&gt;</div><div class="line">         &lt;name&gt;G4_to_G5&lt;/name&gt;</div><div class="line">         &lt;single-tcp&gt;</div><div class="line">            &lt;initiator&gt;</div><div class="line">               &lt;address&gt;55.55.10.105&lt;/address&gt;</div><div class="line">               &lt;port&gt;23580&lt;/port&gt;</div><div class="line">            &lt;/initiator&gt;</div><div class="line">         &lt;/single-tcp&gt;</div><div class="line">      &lt;/peer&gt;</div><div class="line">      &lt;endpoint&gt;</div><div class="line">         &lt;name&gt;G4_to_TRD1&lt;/name&gt;</div><div class="line">         &lt;domain-<span class="keywordtype">id</span>&gt;1&lt;/domain-<span class="keywordtype">id</span>&gt;</div><div class="line">         &lt;lbm-config&gt;TRD1.cfg&lt;/lbm-config&gt;</div><div class="line">      &lt;/endpoint&gt;</div><div class="line">      &lt;endpoint&gt;</div><div class="line">         &lt;name&gt;G4_to_TRD3&lt;/name&gt;</div><div class="line">         &lt;domain-<span class="keywordtype">id</span>&gt;3&lt;/domain-<span class="keywordtype">id</span>&gt;</div><div class="line">         &lt;lbm-config&gt;TRD3.cfg&lt;/lbm-config&gt;</div><div class="line">      &lt;/endpoint&gt;</div><div class="line">      &lt;peer&gt;</div><div class="line">         &lt;name&gt;G4_to_G1&lt;/name&gt;</div><div class="line">         &lt;single-tcp&gt;</div><div class="line">            &lt;acceptor&gt;</div><div class="line">               &lt;listen-port&gt;23801&lt;/listen-port&gt;</div><div class="line">            &lt;/acceptor&gt;</div><div class="line">         &lt;/single-tcp&gt;</div><div class="line">      &lt;/peer&gt;</div><div class="line">      &lt;peer&gt;</div><div class="line">         &lt;name&gt;G4_to_G3&lt;/name&gt;</div><div class="line">         &lt;single-tcp&gt;</div><div class="line">            &lt;initiator&gt;</div><div class="line">               &lt;address&gt;55.55.10.103&lt;/address&gt;</div><div class="line">               &lt;port&gt;23754&lt;/port&gt;</div><div class="line">            &lt;/initiator&gt;</div><div class="line">         &lt;/single-tcp&gt;</div><div class="line">      &lt;/peer&gt;</div><div class="line">      &lt;peer&gt;</div><div class="line">         &lt;name&gt;G4_to_G2&lt;/name&gt;</div><div class="line">         &lt;single-tcp&gt;</div><div class="line">            &lt;initiator&gt;</div><div class="line">               &lt;address&gt;55.55.10.102&lt;/address&gt;</div><div class="line">               &lt;port&gt;23831&lt;/port&gt;</div><div class="line">            &lt;/initiator&gt;</div><div class="line">         &lt;/single-tcp&gt;</div><div class="line">      &lt;/peer&gt;</div><div class="line">    &lt;/portals&gt;</div><div class="line">&lt;/tnw-gateway&gt;</div></div><!-- fragment --><p><b>G5</b> <b>Configuration</b> </p>
<div class="fragment"><div class="line">&lt;?xml version=<span class="stringliteral">&quot;1.0&quot;</span> encoding=<span class="stringliteral">&quot;UTF-8&quot;</span> ?&gt;</div><div class="line">&lt;tnw-gateway version=<span class="stringliteral">&quot;1.0&quot;</span>&gt;</div><div class="line">    &lt;daemon&gt;</div><div class="line">        &lt;log type=<span class="stringliteral">&quot;console&quot;</span>/&gt;</div><div class="line">    &lt;/daemon&gt;</div><div class="line">    &lt;portals&gt;</div><div class="line">      &lt;peer&gt;</div><div class="line">         &lt;name&gt;G5_to_G4&lt;/name&gt;</div><div class="line">         &lt;single-tcp&gt;</div><div class="line">            &lt;acceptor&gt;</div><div class="line">               &lt;listen-port&gt;23580&lt;/listen-port&gt;</div><div class="line">            &lt;/acceptor&gt;</div><div class="line">         &lt;/single-tcp&gt;</div><div class="line">      &lt;/peer&gt;</div><div class="line">      &lt;peer&gt;</div><div class="line">         &lt;name&gt;G5_to_G1&lt;/name&gt;</div><div class="line">         &lt;single-tcp&gt;</div><div class="line">            &lt;acceptor&gt;</div><div class="line">               &lt;listen-port&gt;23880&lt;/listen-port&gt;</div><div class="line">            &lt;/acceptor&gt;</div><div class="line">         &lt;/single-tcp&gt;</div><div class="line">      &lt;/peer&gt;</div><div class="line">      &lt;peer&gt;</div><div class="line">         &lt;name&gt;G5_to_G3&lt;/name&gt;</div><div class="line">         &lt;single-tcp&gt;</div><div class="line">            &lt;acceptor&gt;</div><div class="line">               &lt;listen-port&gt;23739&lt;/listen-port&gt;</div><div class="line">            &lt;/acceptor&gt;</div><div class="line">         &lt;/single-tcp&gt;</div><div class="line">      &lt;/peer&gt;</div><div class="line">      &lt;peer&gt;</div><div class="line">         &lt;name&gt;G5_to_G2&lt;/name&gt;</div><div class="line">         &lt;single-tcp&gt;</div><div class="line">            &lt;acceptor&gt;</div><div class="line">               &lt;listen-port&gt;23608&lt;/listen-port&gt;</div><div class="line">            &lt;/acceptor&gt;</div><div class="line">         &lt;/single-tcp&gt;</div><div class="line">      &lt;/peer&gt;</div><div class="line">    &lt;/portals&gt;</div><div class="line">&lt;/tnw-gateway&gt;</div></div><!-- fragment --><p><br />
 </p>
<h1><a class="anchor" id="usingumconfigurationfileswiththeumrouter"></a>
Using UM Configuration Files with the DRO&nbsp;&nbsp;<small><a href="#usingumconfigurationfileswiththeumrouter">&lt;-</a></small></h1>
<p>Within the DRO configuration file, the endpoint portal's <code>&lt;lbm-config&gt;</code> element lets you import configurations from either a plain text or XML UM configuration file. However, using the XML type of UM configuration files provides the following advantages over plain text UM configuration files:</p>
<ul>
<li>
You can apply UM attributes per topic and/or per context. </li>
<li>
You can apply attributes to all portals on a particular DRO using a UM XML template (instead of individual portal settings). </li>
<li>
Using UM XML templates to set options for individual portals lets the DRO process these settings in the <code>&lt;daemon&gt;</code> element instead of within each portal's configuration. </li>
</ul>
<p><br />
 </p>
<h2><a class="anchor" id="settingindividualendpointoptions"></a>
Setting Individual Endpoint Options&nbsp;&nbsp;<small><a href="#settingindividualendpointoptions">&lt;-</a></small></h2>
<p>When setting endpoint options, first name the context of each endpoint in the DRO's XML configuration file.</p>
<div class="fragment"><div class="line">&lt;portals&gt;</div><div class="line">  &lt;endpoint&gt;</div><div class="line">    &lt;name&gt;Endpoint_1&lt;/name&gt;</div><div class="line">    &lt;domain-<span class="keywordtype">id</span>&gt;1&lt;/domain-<span class="keywordtype">id</span>&gt;</div><div class="line">    &lt;source-context-name&gt;G1_E1&lt;/source-context-name&gt;</div><div class="line">    &lt;lbm-attributes&gt;</div><div class="line">      &lt;option name=<span class="stringliteral">&quot;request_tcp_interface&quot;</span> scope=<span class="stringliteral">&quot;context&quot;</span> value=<span class="stringliteral">&quot;10.29.4.0/24&quot;</span>/&gt;</div><div class="line">    &lt;/lbm-attributes&gt;</div><div class="line">  &lt;/endpoint&gt;</div><div class="line">  &lt;endpoint&gt;</div><div class="line">    &lt;name&gt;G1-TRD2&lt;/name&gt;</div><div class="line">    &lt;domain-<span class="keywordtype">id</span>&gt;2&lt;/domain-<span class="keywordtype">id</span>&gt;</div><div class="line">    &lt;receiver-context-name&gt;G1_E2&lt;/source-context-name&gt;</div><div class="line">    &lt;lbm-attributes&gt;</div><div class="line">      &lt;option name=<span class="stringliteral">&quot;request_tcp_interface&quot;</span> scope=<span class="stringliteral">&quot;context&quot;</span> value=<span class="stringliteral">&quot;10.29.5.0/24&quot;</span> /&gt;</div><div class="line">    &lt;/lbm-attributes&gt;</div><div class="line">  &lt;/endpoint&gt;</div><div class="line">&lt;/portals&gt;</div></div><!-- fragment --><p>Then assign configuration templates to those contexts in the UM XML configuration file.</p>
<div class="fragment"><div class="line">&lt;application name=<span class="stringliteral">&quot;dro1&quot;</span> <span class="keyword">template</span>=<span class="stringliteral">&quot;global&quot;</span>&gt;</div><div class="line">  &lt;contexts&gt;</div><div class="line">    &lt;context name=<span class="stringliteral">&quot;G1_E1&quot;</span> <span class="keyword">template</span>=<span class="stringliteral">&quot;G1-E1-options&quot;</span>&gt;</div><div class="line">      &lt;sources /&gt;</div><div class="line">    &lt;/context&gt;</div><div class="line">    &lt;context name=<span class="stringliteral">&quot;G1_E2&quot;</span> <span class="keyword">template</span>=<span class="stringliteral">&quot;G1-E2-options&quot;</span>&gt;</div><div class="line">      &lt;sources /&gt;</div><div class="line">    &lt;/context&gt;</div><div class="line">  &lt;/contexts&gt;</div><div class="line">&lt;/application&gt;</div></div><!-- fragment --><p>You specify the unique options for each of this DRO's two endpoints in the UM XML configuration <code>&lt;templates&gt;</code> section used for G1-E1-options and G1-E2-options.</p>
<p><br />
 </p>
<h2><a class="anchor" id="umrouterandumxmlconfigurationusecases"></a>
DRO and UM XML Configuration Use Cases&nbsp;&nbsp;<small><a href="#umrouterandumxmlconfigurationusecases">&lt;-</a></small></h2>
<p>One advantage of using UM XML configuration files with the DRO is the ability to assign unique UM attributes to the topics and contexts used for the proxy sources and receivers (which plain text UM configuration files cannot do). The following example shows how to assign a different LBTRM multicast address to a source based on its topic.</p>
<p>Create a new UM XML configuration template for the desired topic name.</p>
<div class="fragment"><div class="line">&lt;<span class="keyword">template</span> name=<span class="stringliteral">&quot;AAA-template&quot;</span>&gt;</div><div class="line">  &lt;options type=<span class="stringliteral">&quot;source&quot;</span>&gt;</div><div class="line">    &lt;option name=<span class="stringliteral">&quot;transport_lbtrm_multicast_address&quot;</span></div><div class="line">    <span class="keywordflow">default</span>-value=<span class="stringliteral">&quot;225.2.37.88&quot;</span>/&gt;</div><div class="line">  &lt;/options&gt;</div><div class="line">&lt;/<span class="keyword">template</span>&gt;</div></div><!-- fragment --><p>Then include this template in the <code>&lt;application&gt;</code> element associated with the DRO.</p>
<div class="fragment"><div class="line">&lt;application name=<span class="stringliteral">&quot;dro1&quot;</span> <span class="keyword">template</span>=<span class="stringliteral">&quot;global-options&quot;</span>&gt;</div><div class="line">  &lt;contexts&gt;</div><div class="line">    &lt;context&gt;</div><div class="line">      &lt;sources <span class="keyword">template</span>=<span class="stringliteral">&quot;source-options&quot;</span>&gt;</div><div class="line">        &lt;topic topicname=<span class="stringliteral">&quot;AAA&quot;</span> <span class="keyword">template</span>=<span class="stringliteral">&quot;AAA-template&quot;</span> /&gt;</div><div class="line">      &lt;/sources&gt;</div><div class="line">    &lt;/context&gt;</div><div class="line">  &lt;/contexts&gt;</div><div class="line">&lt;/application&gt;</div></div><!-- fragment --><p>It is also possible to assign UM attributes directly in the <code>&lt;application&gt;</code> tag. For example, the following specifies that a particular topic should use an LBT-RU transport.</p>
<div class="fragment"><div class="line">&lt;application name=<span class="stringliteral">&quot;dro1&quot;</span> <span class="keyword">template</span>=<span class="stringliteral">&quot;dro1-common&quot;</span>&gt;</div><div class="line">  &lt;contexts&gt;</div><div class="line">    &lt;context&gt;</div><div class="line">      &lt;sources <span class="keyword">template</span>=<span class="stringliteral">&quot;source-template&quot;</span>&gt;</div><div class="line">        &lt;topic topicname=<span class="stringliteral">&quot;LBTRU_TOPIC&quot;</span>&gt;</div><div class="line">          &lt;options type=<span class="stringliteral">&quot;source&quot;</span>&gt;</div><div class="line">            &lt;option name=<span class="stringliteral">&quot;transport&quot;</span> <span class="keywordflow">default</span>-value=<span class="stringliteral">&quot;lbtru&quot;</span> /&gt;</div><div class="line">            &lt;/options&gt;</div><div class="line">        &lt;/topic&gt;</div><div class="line">      &lt;/sources&gt;</div><div class="line">    &lt;/context&gt;</div><div class="line">  &lt;/contexts&gt;</div><div class="line">&lt;/application&gt;</div></div><!-- fragment --><p><br />
 </p>
<h2><a class="anchor" id="sampleconfiguration"></a>
Sample Configuration&nbsp;&nbsp;<small><a href="#sampleconfiguration">&lt;-</a></small></h2>
<p>The following sample configuration incorporates many of the examples mentioned above. The DRO applies options to all UM objects created. The UM XML configuration file overwrites these options for two specific topics. The first topic, LBTRM_TOPIC, uses a different template to change its transport from TCP to LBTRM, and to set an additional property. The second topic, LBTRU_TOPIC, also changes its transport from TCP to a new value. However, its new attributes are applied directly in its associated topic tag, instead of referencing a template. In addition, this sample configuration assigns the rm-source template to all sources and receivers associated with the context endpt_1.</p>
<p><br />
 </p>
<h2><a class="anchor" id="xmlumconfigurationfile"></a>
XML UM Configuration File&nbsp;&nbsp;<small><a href="#xmlumconfigurationfile">&lt;-</a></small></h2>
<div class="fragment"><div class="line">&lt;?xml version=<span class="stringliteral">&quot;1.0&quot;</span> encoding=<span class="stringliteral">&quot;UTF-8&quot;</span> ?&gt;</div><div class="line">&lt;um-configuration version=<span class="stringliteral">&quot;1.0&quot;</span>&gt;</div><div class="line">  &lt;templates&gt;</div><div class="line">    &lt;<span class="keyword">template</span> name=<span class="stringliteral">&quot;dro1-common&quot;</span>&gt;</div><div class="line">      &lt;options type=<span class="stringliteral">&quot;source&quot;</span>&gt;</div><div class="line">        &lt;option name=<span class="stringliteral">&quot;transport&quot;</span> <span class="keywordflow">default</span>-value=<span class="stringliteral">&quot;tcp&quot;</span> /&gt;</div><div class="line">      &lt;/options&gt;</div><div class="line">      &lt;options type=<span class="stringliteral">&quot;context&quot;</span>&gt;</div><div class="line">        &lt;option name=<span class="stringliteral">&quot;request_tcp_interface&quot;</span> <span class="keywordflow">default</span>-value=<span class="stringliteral">&quot;10.29.5.6&quot;</span> /&gt;</div><div class="line">        &lt;option name=<span class="stringliteral">&quot;transport_tcp_port_low&quot;</span> <span class="keywordflow">default</span>-value=<span class="stringliteral">&quot;4400&quot;</span> /&gt;</div><div class="line">        &lt;option name=<span class="stringliteral">&quot;transport_tcp_port_high&quot;</span> <span class="keywordflow">default</span>-value=<span class="stringliteral">&quot;4500&quot;</span> /&gt;</div><div class="line">        &lt;option name=<span class="stringliteral">&quot;resolver_multicast_address&quot;</span> <span class="keywordflow">default</span>-value=<span class="stringliteral">&quot;225.2.37.88&quot;</span>/&gt;</div><div class="line">      &lt;/options&gt;</div><div class="line">    &lt;/<span class="keyword">template</span>&gt;</div><div class="line">    &lt;<span class="keyword">template</span> name=<span class="stringliteral">&quot;rm-source&quot;</span>&gt;</div><div class="line">      &lt;options type=<span class="stringliteral">&quot;source&quot;</span>&gt;</div><div class="line">        &lt;option name=<span class="stringliteral">&quot;transport&quot;</span> <span class="keywordflow">default</span>-value=<span class="stringliteral">&quot;lbtrm&quot;</span> /&gt;</div><div class="line">        &lt;option name=<span class="stringliteral">&quot;transport_lbtrm_multicast_address&quot;</span> <span class="keywordflow">default</span>-value=<span class="stringliteral">&quot;225.2.37.89&quot;</span>/&gt;</div><div class="line">      &lt;/options&gt;</div><div class="line">    &lt;/<span class="keyword">template</span>&gt;</div><div class="line">  &lt;/templates&gt;</div><div class="line">  &lt;applications&gt;</div><div class="line">    &lt;application name=<span class="stringliteral">&quot;dro1&quot;</span> <span class="keyword">template</span>=<span class="stringliteral">&quot;dro1-common&quot;</span>&gt;</div><div class="line">     &lt;contexts&gt;</div><div class="line">        &lt;context&gt;</div><div class="line">          &lt;sources&gt;</div><div class="line">            &lt;topic topicname=<span class="stringliteral">&quot;LBTRM_TOPIC&quot;</span> <span class="keyword">template</span>=<span class="stringliteral">&quot;rm-source&quot;</span> /&gt;</div><div class="line">            &lt;topic topicname=<span class="stringliteral">&quot;LBTRU_TOPIC&quot;</span>&gt;</div><div class="line">              &lt;options type=<span class="stringliteral">&quot;source&quot;</span>&gt;</div><div class="line">                &lt;option name=<span class="stringliteral">&quot;transport&quot;</span> <span class="keywordflow">default</span>-value=<span class="stringliteral">&quot;lbtru&quot;</span> /&gt;</div><div class="line">                &lt;option name=<span class="stringliteral">&quot;resolver_unicast_daemon&quot;</span> <span class="keywordflow">default</span>-value=<span class="stringliteral">&quot;10.29.5.1:1234&quot;</span> /&gt;</div><div class="line">              &lt;/options&gt;</div><div class="line">            &lt;/topic&gt;</div><div class="line">          &lt;/sources&gt;</div><div class="line">        &lt;/context&gt;</div><div class="line">        &lt;context name=<span class="stringliteral">&quot;endpt_1&quot;</span>&gt;</div><div class="line">          &lt;sources <span class="keyword">template</span>=<span class="stringliteral">&quot;rm-source&quot;</span>/&gt;</div><div class="line">        &lt;/context&gt;</div><div class="line">      &lt;/contexts&gt;</div><div class="line">    &lt;/application&gt;</div><div class="line">  &lt;/applications&gt;</div><div class="line">&lt;/um-configuration&gt;</div></div><!-- fragment --><p><br />
 </p>
<h2><a class="anchor" id="xmlumrouterconfigurationfile"></a>
XML DRO Configuration File&nbsp;&nbsp;<small><a href="#xmlumrouterconfigurationfile">&lt;-</a></small></h2>
<p>This DRO uses the above XML UM configuration file, sample-config.xml, to set its UM options. It has three endpoints, one of which has the context endpt_1.</p>
<div class="fragment"><div class="line">&lt;?xml version=<span class="stringliteral">&quot;1.0&quot;</span> encoding=<span class="stringliteral">&quot;UTF-8&quot;</span> ?&gt;</div><div class="line">&lt;tnw-gateway version=<span class="stringliteral">&quot;1.0&quot;</span>&gt;</div><div class="line">  &lt;daemon&gt;</div><div class="line">    &lt;log type=<span class="stringliteral">&quot;console&quot;</span>/&gt;</div><div class="line">    &lt;xml-config&gt;sample-config.xml&lt;/xml-config&gt;</div><div class="line">  &lt;/daemon&gt;</div><div class="line">  &lt;portals&gt;</div><div class="line">    &lt;endpoint&gt;</div><div class="line">      &lt;name&gt;Endpoint_1&lt;/name&gt;</div><div class="line">      &lt;domain-<span class="keywordtype">id</span>&gt;1&lt;/domain-<span class="keywordtype">id</span>&gt;</div><div class="line">      &lt;lbm-attributes&gt;</div><div class="line">        &lt;option name=<span class="stringliteral">&quot;context_name&quot;</span> scope=<span class="stringliteral">&quot;context&quot;</span> value=<span class="stringliteral">&quot;endpt_1&quot;</span> /&gt;</div><div class="line">        &lt;option name=<span class="stringliteral">&quot;request_tcp_interface&quot;</span> scope=<span class="stringliteral">&quot;context&quot;</span></div><div class="line">        value=<span class="stringliteral">&quot;10.29.4.0/24&quot;</span>/&gt;</div><div class="line">      &lt;/lbm-attributes&gt;</div><div class="line">    &lt;/endpoint&gt;</div><div class="line">    &lt;endpoint&gt;</div><div class="line">      &lt;name&gt;Endpoint_2&lt;/name&gt;</div><div class="line">      &lt;domain-<span class="keywordtype">id</span>&gt;2&lt;/domain-<span class="keywordtype">id</span>&gt;</div><div class="line">      &lt;lbm-attributes&gt;</div><div class="line">        &lt;option name=<span class="stringliteral">&quot;request_tcp_interface&quot;</span> scope=<span class="stringliteral">&quot;context&quot;</span></div><div class="line">        value=<span class="stringliteral">&quot;10.29.5.0/24&quot;</span>/&gt;</div><div class="line">      &lt;/lbm-attributes&gt;</div><div class="line">    &lt;/endpoint&gt;</div><div class="line">    &lt;endpoint&gt;</div><div class="line">      &lt;name&gt;Endpoint_3&lt;/name&gt;</div><div class="line">      &lt;domain-<span class="keywordtype">id</span>&gt;3&lt;/domain-<span class="keywordtype">id</span>&gt;</div><div class="line">      &lt;lbm-attributes&gt;</div><div class="line">        &lt;option name=<span class="stringliteral">&quot;request_tcp_interface&quot;</span> scope=<span class="stringliteral">&quot;context&quot;</span></div><div class="line">        value=<span class="stringliteral">&quot;10.29.6.0/24&quot;</span>/&gt;</div><div class="line">      &lt;/lbm-attributes&gt;</div><div class="line">    &lt;/endpoint&gt;</div><div class="line">  &lt;/portals&gt;</div><div class="line">&lt;/tnw-gateway&gt;</div></div><!-- fragment --><p><br />
 </p>
<h1><a class="anchor" id="runningtheumrouterdaemon"></a>
Running the DRO Daemon&nbsp;&nbsp;<small><a href="#runningtheumrouterdaemon">&lt;-</a></small></h1>
<p>To run the DRO, ensure the following:</p>
<ul>
<li>
Library environment variable paths are set correctly (LD_LIBRARY_PATH) </li>
<li>
The license environment variable LBM_LICENSE_FILENAME points to a valid DRO license file. </li>
<li>
The configuration file is error free. </li>
</ul>
<p>Typically, you run the DRO with one configuration file argument, for example:</p>
<div class="fragment"><div class="line">tnwgd gw1-config.xml</div></div><!-- fragment --><p> (FYI: "tnwgd" stands for "Twenty Nine West Gateway Daemon", a historical name for the DRO.)</p>
<p>The DRO logs version information on startup. The following is an example of this information:</p>
<div class="fragment"><div class="line">Version 6.0 Build: Sep 26 2012, 00:31:33 (UMS 6.0 [UMP-6.0] [UMQ-6.0] [64-bit] Build: Sep 26 2012, 00:27:17 ( DEBUG license LBT-RM LBT-RU LBT-IPC LBT-RDMA ) WC[PCRE 7.4 2007-09-21, regex, appcb] HRT[gettimeofday()])</div></div><!-- fragment --><p><br />
 </p>
<h1><a class="anchor" id="dronattransit"></a>
DRO NAT Transit&nbsp;&nbsp;<small><a href="#dronattransit">&lt;-</a></small></h1>
<p>Some networks make use of a <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.17_RC3/doc/Gateway/design.tag:../Design/" href="../Design/umglossary.html#glossarynat">NAT router</a> to map one IP address space onto another. If your network architecture includes LANs that are bridged with a NAT device, UM receivers will usually not be able to connect directly to UM sources across the NAT. Sources send Topic Resolution advertisements containing their local IP addresses and ports, but receivers on the other side of the NAT cannot access those sources using those local addresses/ports. They must use alternate addresses/ports, which the NAT forwards according to the NAT's configuration.</p>
<p>The recommended method of transiting a NAT is using two DROs connected via a <a class="el" href="umrouterimplementation.html#peerlinkconfiguration">peer link</a>. The UM components in one network are organized as one <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.17_RC3/doc/Gateway/design.tag:../Design/" href="../Design/fundamentalconcepts.html#topicresolutiondomain">TRD</a> and the components in the other network are organized as a separate TRD.</p>
<p>There is an alternative method of transiting a NAT with UM <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.17_RC3/doc/Gateway/design.tag:../Design/" href="../Design/architecture.html#networkaddresstranslationnat">using an lbmrd</a>. This method reduces latency but has significant <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.17_RC3/doc/Gateway/design.tag:../Design/" href="../Design/architecture.html#lbmrdnatrestrictions">restrictions</a>.</p>
<p><br />
 </p>
<h2><a class="anchor" id="dronattcppeer"></a>
DRO NAT: TCP Peer&nbsp;&nbsp;<small><a href="#dronattcppeer">&lt;-</a></small></h2>
<p>The simplest way to transit a NAT is to configure the DROs with <a class="el" href="xmlconfigurationreference.html#droelementsingletcp">Router Element "&lt;single-tcp&gt;"</a>. One DRO is configured to be the <a class="el" href="xmlconfigurationreference.html#droelementinitiator">initiator</a> and the other is the <a class="el" href="xmlconfigurationreference.html#droelementacceptor">acceptor</a>.</p>
<p>Many NAT designs restrict which network can initiate TCP connections across the NAT. The initiator DRO should be placed on the side that supports outgoing connections and configured for the IP address and port that the NAT router recognizes and forwards to the acceptor DRO. This may or may not be the IP address and port of the actual host running the acceptor DRO; contact your network support group for details.</p>
<p><br />
 </p>
<h2><a class="anchor" id="dronattcpudppeer"></a>
DRO NAT: UDP Peer&nbsp;&nbsp;<small><a href="#dronattcpudppeer">&lt;-</a></small></h2>
<p>DROs are sometimes configured to add <a class="el" href="droarchitecture.html#udppeerlink">UDP-based data transport</a>. The TCP link is still used for command and control, so all the points made <a class="el" href="umrouterimplementation.html#dronattcppeer">above</a> still apply. In addition, the NAT must allow forwarding of bi-directional UDP traffic without modifying the destination port numbers.</p>
<p>Here's the sequence of events UM uses to establish communication: </p><ol>
<li>
<p class="startli">The initiator DRO uses the configured address:port to initiate its TCP connection. Once established, the initiator sends DRO the UDP port it's accepting data on.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">The acceptor DRO accepts the TCP connection, saves the UDP port of the initiator, and sends back it's own UDP port. The acceptor also examines the established TCP connection to determine the IP address of the initiator, and saves that. But note that due to the NAT, the IP address it determines will typically not be the initiator's host IP. Rather, it's an IP address of the NAT device, and the NAT will forward packets to the actual host running the initiator.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">The initiator receives the acceptor's UDP port and saves it.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Now, when the initiator wants to send UDP data to the acceptor, it uses the configured IP and the saved UDP port as the UDP packet's destination IP/port.</p>
<p class="endli"></p>
</li>
<li>
When the acceptor wants to send UDP data to the initiator, it uses the saved IP and UDP port. </li>
</ol>
<p>Thus, for both the initiator and the acceptor, the configured UDP port is both used to locally bind the UDP socket, and used by the remote DRO as the UDP destination port. Thus, the NAT must not modify the destination port of UDP packets.</p>
<p>Some NAT designs do not expect this UDP behavior. Rather they perform a similar form of dynamic port allocation where a packet's source port is modified, and the networking software is expected to examine the source port and use it for outgoing packets. UM does not do that.</p>
<p>The NAT should be configured with static port mappings for all DRO peer links expected. If this is not practical, then UDP peer links may not be usable. <a href="https://ultramessaging.github.io/UM_Support.html">Contact UM Support</a>.</p>
<p><br />
<br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
</p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.11-->
</body>
</html>
