<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Dynamic Routing Guide: DRO Architecture</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen_manual.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Dynamic Routing Guide
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('droarchitecture.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">DRO Architecture </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><br />
 </p>
<h1><a class="anchor" id="umrouterportals"></a>
DRO Portals&nbsp;&nbsp;<small><a href="#umrouterportals">&lt;-</a></small></h1>
<p>The DRO uses interfaces, called portals, through which to pass data. A DRO consists of two or more bidirectional portals that may be one of two types:</p>
<ul>
<li>
An endpoint portal, which communicates directly to a UM topic resolution domain (TRD; see Topic Resolution Domains). </li>
<li>
A peer portal, which communicates via TCP with another peer portal (of another DRO), allowing tunneling between DROs. Two peer portals connected to each other are referred to as companion peers, and utilize TCP connections for all data and control traffic (UDP is not supported for this). Compression and encryption can be applied to peer links. </li>
</ul>
<p>The figure below shows a simple DRO use case, where two DROs bridge an ISP to connect two TRDs.</p>
<div class="image">
<img src="portals.png" alt="portals.png"/>
</div>
 <p>You configure portals in the DRO's XML configuration file, specifying the portal's name, cost, UM Configuration, Access Control Lists and other attributes. See <a class="el" href="xmlconfigurationreference.html">XML Configuration Reference</a>.</p>
<p><br />
 </p>
<h1><a class="anchor" id="topicresolutiondomains"></a>
Topic Resolution Domains&nbsp;&nbsp;<small><a href="#topicresolutiondomains">&lt;-</a></small></h1>
<p>Since topic resolution uses UDP, sources and receivers must have UDP connectivity to each other. When they do, we consider them to be in the same topic resolution domain (TRD). More specifically, UM contexts must satisfy the following two requirements to belong to the same topic resolution domain.</p>
<ul>
<li>
The contexts must use the same topic resolution UM configuration (i.e., resolver_* options are the same). </li>
<li>
Contexts can communicate using the protocols required for both message transport and topic resolution traffic. </li>
</ul>
<p>For example, two contexts on separate machines in the same LAN are not in the same topic resolution domain if they use different resolver addresses. See Multicast Resolver Network Options. A topic resolution domain can span a WAN if the UM contexts on each side of a firewall use the same UM configuration and the firewall allows UDP traffic (multicast or unicast) to pass.</p>
<p>Each endpoint portal must identify its associated topic resolution domain with a domain-id the DRO's XML configuration file, as in the example below. All portals in the same TRD must have the same domain-id, and different TRDs networked together via DROs must have domain-ids unique to each other.</p>
<div class="fragment"><div class="line">&lt;portals&gt;</div><div class="line">  &lt;endpoint&gt;</div><div class="line">    &lt;name&gt;LAN100&lt;/name&gt;</div><div class="line">    &lt;domain-<span class="keywordtype">id</span>&gt;100&lt;/domain-<span class="keywordtype">id</span>&gt;</div><div class="line">    &lt;lbm-config&gt;lan100.cfg&lt;/lbm-config&gt;</div><div class="line">  &lt;/endpoint&gt;</div><div class="line">  &lt;endpoint&gt;</div><div class="line">    &lt;name&gt;LAN200&lt;/name&gt;</div><div class="line">    &lt;domain-<span class="keywordtype">id</span>&gt;200&lt;/domain-<span class="keywordtype">id</span>&gt;</div><div class="line">    &lt;lbm-config&gt;lan200.cfg&lt;/lbm-config&gt;</div><div class="line">  &lt;/endpoint&gt;</div><div class="line">&lt;/portals&gt;</div></div><!-- fragment --><p><br />
 </p>
<h1><a class="anchor" id="proxysourcesandproxyreceivers"></a>
Proxy Sources and Proxy Receivers&nbsp;&nbsp;<small><a href="#proxysourcesandproxyreceivers">&lt;-</a></small></h1>
<p>To resolve a topic across a DRO (described in <a class="el" href="umrouterconcepts.html#basicumrouteroperation">Basic DRO Operation</a>), the DRO creates, within portals, proxy sources and proxy receivers (shown in the figure below by their dashed lines). These proxies behave like their UM counterparts; they resolve topics on the TRDs like normal sources and receivers, and the DRO internally passes data from one portal to the other. However unlike regular sources, proxy sources do not have retransmission retention buffers normally used for Late Join or OTR.</p>
<div class="image">
<img src="proxies.png" alt="proxies.png"/>
</div>
 <p>Portals exist while the DRO is running, however, the DRO creates proxy sources and receivers during topic resolution and deletes them when the topic is retired.</p>
<dl class="section note"><dt>Note</dt><dd>The proxy sources created by the DRO are unrelated to proxy sources created by the UMP persistent store.</dd></dl>
<p><br />
 </p>
<h2><a class="anchor" id="umrouterandtransportsessions"></a>
DRO and Transport Sessions&nbsp;&nbsp;<small><a href="#umrouterandtransportsessions">&lt;-</a></small></h2>
<p>When the DRO creates proxy receivers to get messages to forward, be aware that the <em>transport sessions</em> carrying those messages are not extended to the destination TRD. Instead, the proxy receiver simply takes the messages from the originating transport sessions and transfers them to the destination DRO's proxy sources. Those proxy sources create new transport sessions for those outgoing messages.</p>
<p>The proxy sources' outgoing transport sessions are unrelated to the originating sources' transport sessions. They can even use different transport types, performing a protocol conversion. In fact, a single transport session can contain multiple sources from different originating publishing applications for the same topic. Alternatively, multiple sources from the same originating publishing application which are mapped to the same originating transport session can be split into multiple transport sessions by the proxy sources in a remote TRD.</p>
<p>One consequence of the independence of incoming and outgoing transport sessions is that TCP flow control does not transit the DRO. A slow receiver in a remote TRD cannot "push back" on a fast source. In cases where a TCP transport session is slowed down due to one or more slow receivers, an intermediate DRO will eventually have to drop messages.</p>
<dl class="section warning"><dt>Warning</dt><dd>A single source's "source string" will be different in different TRDs connected by DROs. See <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.13.1_RC1/doc/Gateway/design.tag:../Design/" href="../Design/umobjects.html#sourcestringsinaroutednetwork">Source Strings in a Routed Network</a> for details.</dd></dl>
<p><br />
 </p>
<h1><a class="anchor" id="routing"></a>
Routing&nbsp;&nbsp;<small><a href="#routing">&lt;-</a></small></h1>
<p>In multiple-DRO environments where more than one DRO can provide possible messaging pathways, the DROs are able to cooperatively determine and establish optimal routes. Also, the DRO network is able to detect link or other DRO outages and automatically reroute traffic as needed. See <a class="el" href="umrouterconcepts.html#routingtopologies">Routing Topologies</a> for more information.</p>
<p><br />
<br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
</p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.11-->
</body>
</html>
