<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Guide for Persistence: Store Binary Daemon Statistics</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen_manual.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Guide for Persistence
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('storedaemonstatistics.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">Store Binary Daemon Statistics </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><dl class="section note"><dt>Note</dt><dd>The C-style binary structure format of daemon statistics is DEPRECATED and may be removed in a future release. Informatica requests that users migrate to protobuf-based format. See <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.areas/builds/UMQ_6.16.1/doc/UME/operations.tag:../Operations/" href="../Operations/monitoring.html#monitoringumdaemons">Monitoring UM Daemons</a>.</dd></dl>
<p>See <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.areas/builds/UMQ_6.16.1/doc/UME/example.tag:../example/" href="../example/index.html#exampleprotocolfiles">Example Protocol Files</a> for the protocol buffer definition files.</p>
<p><br />
 </p>
<h1><a class="anchor" id="storedaemonstatisticsstructures"></a>
Store Daemon Statistics Structures&nbsp;&nbsp;<small><a href="#storedaemonstatisticsstructures">&lt;-</a></small></h1>
<dl class="section note"><dt>Note</dt><dd>the C-style binary structure format of daemon statistics is DEPRECATED and may be removed in a future release. Informatica requests that users migrate to protobuf-based format. See <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.areas/builds/UMQ_6.16.1/doc/UME/operations.tag:../Operations/" href="../Operations/monitoring.html#monitoringumdaemons">Monitoring UM Daemons</a>.</dd></dl>
<p>The different message types are:</p>
<ul>
<li>
<a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.areas/builds/UMQ_6.16.1/doc/UME/api.tag:../API/" href="../API/umedmonmsgs_8h.html#aa3a3d4c63922003ed750ed38027bcc82">LBM_UMESTORE_DMON_MPG_SMART_HEAP_STATS</a> </li>
<li>
<a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.areas/builds/UMQ_6.16.1/doc/UME/api.tag:../API/" href="../API/umedmonmsgs_8h.html#a102df121698e67407d2aeffc0147d91e">LBM_UMESTORE_DMON_MPG_STORE_STATS</a> </li>
<li>
<a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.areas/builds/UMQ_6.16.1/doc/UME/api.tag:../API/" href="../API/umedmonmsgs_8h.html#aa4269805d37ad1586f340a0f4486e0e9">LBM_UMESTORE_DMON_MPG_REPO_STATS</a> </li>
<li>
<a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.areas/builds/UMQ_6.16.1/doc/UME/api.tag:../API/" href="../API/umedmonmsgs_8h.html#a41acc94a55b5c03bf2580c876d7f8ad4">LBM_UMESTORE_DMON_MPG_DISK_STATS</a> </li>
<li>
<a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.areas/builds/UMQ_6.16.1/doc/UME/api.tag:../API/" href="../API/umedmonmsgs_8h.html#aa57c0aadc4536533388200812a51584e">LBM_UMESTORE_DMON_MPG_RCV_STATS</a> </li>
<li>
<a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.areas/builds/UMQ_6.16.1/doc/UME/api.tag:../API/" href="../API/umedmonmsgs_8h.html#aed8460b69470931e1d8ee4347110a309">LBM_UMESTORE_DMON_MPG_STORE_CONFIG</a> </li>
<li>
<a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.areas/builds/UMQ_6.16.1/doc/UME/api.tag:../API/" href="../API/umedmonmsgs_8h.html#aab14bc84ccbe0986c41e5f3f4b5f2b34">LBM_UMESTORE_DMON_MPG_STORE_PATTERN_CONFIG</a> </li>
<li>
<a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.areas/builds/UMQ_6.16.1/doc/UME/api.tag:../API/" href="../API/umedmonmsgs_8h.html#a8e29917df3f47cbb8935cb1ed683e876">LBM_UMESTORE_DMON_MPG_STORE_TOPIC_CONFIG</a> </li>
<li>
<a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.areas/builds/UMQ_6.16.1/doc/UME/api.tag:../API/" href="../API/umedmonmsgs_8h.html#a76e34ed0b81c5e1141a36e358f3803a4">LBM_UMESTORE_DMON_MPG_REPO_CONFIG</a> </li>
<li>
<a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.areas/builds/UMQ_6.16.1/doc/UME/api.tag:../API/" href="../API/umedmonmsgs_8h.html#a37abe47b7a806332d6dec510f8370386">LBM_UMESTORE_DMON_MPG_RCV_CONFIG</a> </li>
</ul>
<p>Each one has a specific structure associated with it, as detailed in <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.areas/builds/UMQ_6.16.1/doc/UME/api.tag:../API/" href="../API/umedmonmsgs_8h.html">umedmonmsgs.h</a>.</p>
<p>Note that message types ending with "_CONFIG" are in the config category, while message types ending with "_STATS" are in the stats category. See <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.areas/builds/UMQ_6.16.1/doc/UME/design.tag:../Design/" href="../Design/umfeatures.html#daemonstatisticsstructures">Daemon Statistics Structures</a> for information on how the two categories are handled differently.</p>
<p><br />
 </p>
<h2><a class="anchor" id="storedaemonstatisticsbyteswapping"></a>
Store Daemon Statistics Byte Swapping&nbsp;&nbsp;<small><a href="#storedaemonstatisticsbyteswapping">&lt;-</a></small></h2>
<dl class="section note"><dt>Note</dt><dd>the C-style binary structure format of daemon statistics is DEPRECATED and may be removed in a future release. Informatica requests that users migrate to protobuf-based format. See <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.areas/builds/UMQ_6.16.1/doc/UME/operations.tag:../Operations/" href="../Operations/monitoring.html#monitoringumdaemons">Monitoring UM Daemons</a>.</dd></dl>
<p>A monitoring application receiving these messages must detect if there is an endian mismatch (see <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.areas/builds/UMQ_6.16.1/doc/UME/design.tag:../Design/" href="../Design/umfeatures.html#daemonstatisticsbinarydata">Daemon Statistics Binary Data</a>). The header structure <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.areas/builds/UMQ_6.16.1/doc/UME/api.tag:../API/" href="../API/umedmonmsgs_8h.html#ac8fa75ab624041897fe74bdde0a98b16">umestore_dmon_msg_hdr_t</a> contains a 16-bit field named <code>magic</code> which is set equal to <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.areas/builds/UMQ_6.16.1/doc/UME/api.tag:../API/" href="../API/umedmonmsgs_8h.html#a1803f128fe2a66d57e078956fdcc07ca">LBM_UMESTORE_DMON_MAGIC</a>. The receiving application should compare it to <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.areas/builds/UMQ_6.16.1/doc/UME/api.tag:../API/" href="../API/umedmonmsgs_8h.html#a1803f128fe2a66d57e078956fdcc07ca">LBM_UMESTORE_DMON_MAGIC</a> and <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.areas/builds/UMQ_6.16.1/doc/UME/api.tag:../API/" href="../API/umedmonmsgs_8h.html#a24d18e9ceeaed40dd3e282418dbdc42c">LBM_UMESTORE_DMON_ANTIMAGIC</a>. Anything else would represent a serious problem.</p>
<p>If the receiving app sees: </p><div class="fragment"><div class="line">magic == <a class="codeRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.areas/builds/UMQ_6.16.1/doc/UME/api.tag:../API/" href="../API/umedmonmsgs_8h.html#a1803f128fe2a66d57e078956fdcc07ca">LBM_UMESTORE_DMON_MAGIC</a></div></div><!-- fragment --><p> then it can simply access the binary fields directly. However, if it sees: </p><div class="fragment"><div class="line">magic == <a class="codeRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.areas/builds/UMQ_6.16.1/doc/UME/api.tag:../API/" href="../API/umedmonmsgs_8h.html#a24d18e9ceeaed40dd3e282418dbdc42c">LBM_UMESTORE_DMON_ANTIMAGIC</a></div></div><!-- fragment --><p> then <em>most</em> (but not all) binary fields need to be byte-swapped. See <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.areas/builds/UMQ_6.16.1/doc/UME/example.tag:../example/" href="../example/index.html#exampleumedmon_c">Example umedmon.c</a> for an example, paying special attention to the macros <code>COND_SWAPxx</code> (which <em>conditionally</em> swaps based on the magic test) and the functions <code>byte_swapXX()</code> (which performs the byte swapping).</p>
<p>However, there are some binary fields which must never be swapped, regardless of the endian. This is indicated in the documentation. For example, <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.areas/builds/UMQ_6.16.1/doc/UME/api.tag:../API/" href="../API/structumestore__store__dmon__config__msg__t__stct.html#af0145c44bd69bcaf83b9a4088151960c">umestore_store_dmon_config_msg_t_stct::store_iface</a> says "NOTE: This field should NOT be byte-swapped." Here's how that field might be accessed: </p><div class="fragment"><div class="line">in.s_addr = msg-&gt;store_iface;</div><div class="line">printf(<span class="stringliteral">&quot;Store IP address / port: %s / %d\n&quot;</span>,</div><div class="line">    inet_ntoa(in), COND_SWAP16(msg_swap, msg-&gt;store_port));</div></div><!-- fragment --><p> As you can see, <code>store_iface</code> is not byte swapped, but <code>store_port</code> (conditionally) is swapped.</p>
<p><br />
 </p>
<h2><a class="anchor" id="storedaemonstatisticsstructuresstringbuffers"></a>
Store Daemon Statistics String Buffers&nbsp;&nbsp;<small><a href="#storedaemonstatisticsstructuresstringbuffers">&lt;-</a></small></h2>
<dl class="section note"><dt>Note</dt><dd>the C-style binary structure format of daemon statistics is DEPRECATED and may be removed in a future release. Informatica requests that users migrate to protobuf-based format. See <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.areas/builds/UMQ_6.16.1/doc/UME/operations.tag:../Operations/" href="../Operations/monitoring.html#monitoringumdaemons">Monitoring UM Daemons</a>.</dd></dl>
<p>There are some messages which contain string buffers at the ends of the messages. Strings in these data structures are always null-terminated. Be aware that these messages are not sent as fixed-length equal to the size of the data structure, but rather are sent with only the bytes required by the string (including the final null). For example, the structure <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.areas/builds/UMQ_6.16.1/doc/UME/api.tag:../API/" href="../API/umedmonmsgs_8h.html#a132a874ae972e1f393b1a973905ac923">umestore_store_pattern_dmon_config_msg_t</a> contains the field <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.areas/builds/UMQ_6.16.1/doc/UME/api.tag:../API/" href="../API/structumestore__store__pattern__dmon__config__msg__t__stct.html#ad90cc4d946617553bbc8e7e7f1741138">umestore_store_pattern_dmon_config_msg_t_stct::pattern_buffer</a> which is <code>char</code> array of size <code>LBM_UMESTORE_DMON_TOPIC_PATTERN_STRLEN</code>. If <code>pattern_buffer</code> is set to ".*", then only 3 bytes (including the null string terminator) are sent for that field.</p>
<p>(Contrast this with <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.areas/builds/UMQ_6.16.1/doc/UME/gateway.tag:../Gateway/" href="../Gateway/umrouterdaemonstatistics.html#umrouterdaemonstatisticsstructuresstringbuffers">DRO Daemon Statistics String Buffers</a>.)</p>
<p>This becomes more complicated when there are multiple strings in one message. For example, consider <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.areas/builds/UMQ_6.16.1/doc/UME/api.tag:../API/" href="../API/umedmonmsgs_8h.html#a6791bb4e61ba08a319647d4fd5ed8c5d">umestore_store_dmon_config_msg_t</a>. This message contains three strings: Store name, cache directory name, and state directory name. But a single <code>char</code> array is declared: </p><div class="fragment"><div class="line"><span class="keywordtype">char</span> string_buffer[LBM_UMESTORE_DMON_STORE_NAME_STRLEN + (2 * LBM_UMESTORE_DMON_FILENAME_MAX_STRLEN)</div></div><!-- fragment --><p> The three strings are packed into that buffer, only taking up as much space as is necessary. I.e. if the three strings are "a", "b", and "c", only 6 bytes of the buffer will be consumed (each string has a null).</p>
<p>To make it easier for the code to find the three strings, the structure has three offset variables: <code>store_name_offset</code>, <code>disk_cache_dir_offset</code>, and <code>disk_state_dir_offset</code>. These are byte offsets from the start of the entire structure. So, to access the Store name, the monitoring application might use: </p><div class="fragment"><div class="line"><a class="codeRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.areas/builds/UMQ_6.16.1/doc/UME/api.tag:../API/" href="../API/structumestore__store__dmon__config__msg__t__stct.html">umestore_store_dmon_config_msg_t</a> *store_config_msg = ... <span class="comment">/* ptr to incoming msg */</span></div><div class="line"><span class="keywordtype">char</span> *state_dir_name = (<span class="keywordtype">char</span> *)store_config_msg +</div><div class="line">                       store_config_msg-&gt;<a class="codeRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.areas/builds/UMQ_6.16.1/doc/UME/api.tag:../API/" href="../API/structumestore__store__dmon__config__msg__t__stct.html#af8ac96ecf72010fbbe73845c53d1c09e">store_name_offset</a>;</div></div><!-- fragment --><p> (The practice of using offsets from the start of the structure allows for greater flexibility in ensuring inter-version compatibility.)</p>
<p><br />
 </p>
<h2><a class="anchor" id="storedaemonstatisticsstructuresretxcounts"></a>
Store Daemon Statistics Retx Counts&nbsp;&nbsp;<small><a href="#storedaemonstatisticsstructuresretxcounts">&lt;-</a></small></h2>
<dl class="section note"><dt>Note</dt><dd>the C-style binary structure format of daemon statistics is DEPRECATED and may be removed in a future release. Informatica requests that users migrate to protobuf-based format. See <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.areas/builds/UMQ_6.16.1/doc/UME/operations.tag:../Operations/" href="../Operations/monitoring.html#monitoringumdaemons">Monitoring UM Daemons</a>.</dd></dl>
<p>There is a set of fields in <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.areas/builds/UMQ_6.16.1/doc/UME/api.tag:../API/" href="../API/umedmonmsgs_8h.html#aeeb55ed0b759e6316cdedc3c990dfe26">umestore_store_dmon_stat_msg_t</a> which give statistics on recovery operations initiated by receivers:</p>
<ul>
<li>
<a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.areas/builds/UMQ_6.16.1/doc/UME/api.tag:../API/" href="../API/structumestore__store__dmon__stat__msg__t__stct.html#aa5af5aa74379f3784c59503a52309dfd">umestore_store_dmon_stat_msg_t_stct::ume_retx_req_rcv_count</a> </li>
<li>
<a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.areas/builds/UMQ_6.16.1/doc/UME/api.tag:../API/" href="../API/structumestore__store__dmon__stat__msg__t__stct.html#a9fb94f3660f9055189b1466fbe26d5b1">umestore_store_dmon_stat_msg_t_stct::ume_retx_req_serviced_count</a> </li>
<li>
<a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.areas/builds/UMQ_6.16.1/doc/UME/api.tag:../API/" href="../API/structumestore__store__dmon__stat__msg__t__stct.html#a48daa393596d1ede504a5c378220f468">umestore_store_dmon_stat_msg_t_stct::ume_retx_req_drop_count</a> </li>
</ul>
<p>The web monitor's <a class="el" href="storewebmonitor.html#storewebmonitorstorepage">Store Web Monitor Store Page</a> has a manual function labeled <a class="el" href="storewebmonitor.html#resetratestats">Reset Rate Stats</a> which clears those <code>"ume_retx_..._count"</code> fields. This is a useful function for users who use the web monitor as their primary monitoring tool, but for users who depend on the published Daemon Statistics, it can be disruptive for the counts to be cleared on-demand.</p>
<p>The field <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.areas/builds/UMQ_6.16.1/doc/UME/api.tag:../API/" href="../API/structumestore__store__dmon__stat__msg__t__stct.html#a8413d51c9aa089626fb135e0a64dc60c">umestore_store_dmon_stat_msg_t_stct::ume_retx_stat_interval</a> contains the seconds since the last <a class="el" href="storewebmonitor.html#resetratestats">Reset Rate Stats</a> operation. If the user has not used <a class="el" href="storewebmonitor.html#resetratestats">Reset Rate Stats</a>, then <code>ume_retx_stat_interval</code> contains the seconds since the Store's startup.</p>
<p><br />
 </p>
<h1><a class="anchor" id="storedaemonstatisticsconfiguration"></a>
Store Daemon Statistics Configuration&nbsp;&nbsp;<small><a href="#storedaemonstatisticsconfiguration">&lt;-</a></small></h1>
<dl class="section note"><dt>Note</dt><dd>the C-style binary structure format of daemon statistics is DEPRECATED and may be removed in a future release. Informatica requests that users migrate to protobuf-based format. See <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.areas/builds/UMQ_6.16.1/doc/UME/operations.tag:../Operations/" href="../Operations/monitoring.html#monitoringumdaemons">Monitoring UM Daemons</a>.</dd></dl>
<p>There are two places in the Store configuration file that Daemon Statistics are configured: </p><ul>
<li>
The <a class="el" href="configurationreferenceforumestored.html#umeelementdaemonmonitor">UMP Element "&lt;daemon-monitor&gt;"</a> inside the <a class="el" href="configurationreferenceforumestored.html#umeelementdaemon">UMP Element "&lt;daemon&gt;"</a> configures all aspects of the Store Daemon Statistics feature, including publishing intervals, for all Store instances in a Store Process. </li>
<li>
The <a class="el" href="configurationreferenceforumestored.html#umeelementpublishinginterval">UMP Element "&lt;publishing-interval&gt;"</a> inside a <a class="el" href="configurationreferenceforumestored.html#umeelementstore">UMP Element "&lt;store&gt;"</a> configures only the publishing intervals of a Store instance. </li>
</ul>
<p>Here is an example of configuring daemon statistics.</p>
<div class="fragment"><div class="line">&lt;ume-store version=<span class="stringliteral">&quot;1.3&quot;</span>&gt;</div><div class="line">&lt;daemon&gt;</div><div class="line">  &lt;daemon-monitor topic=<span class="stringliteral">&quot;bozo&quot;</span>&gt;</div><div class="line">    ...</div><div class="line">    &lt;publishing-interval&gt;</div><div class="line">      &lt;group name=<span class="stringliteral">&quot;default&quot;</span> ivl=<span class="stringliteral">&quot;3&quot;</span>/&gt;</div><div class="line">      &lt;group name=<span class="stringliteral">&quot;config&quot;</span> ivl=<span class="stringliteral">&quot;120&quot;</span>/&gt;</div><div class="line">    &lt;/publishing-interval&gt;</div><div class="line">    &lt;remote-snapshot-request allow=<span class="stringliteral">&quot;1&quot;</span>/&gt;</div><div class="line">    &lt;remote-config-changes-request allow=<span class="stringliteral">&quot;1&quot;</span>/&gt;</div><div class="line">  &lt;/daemon-monitor&gt;</div><div class="line">&lt;daemon&gt;</div><div class="line">&lt;stores&gt;</div><div class="line">  &lt;store name=<span class="stringliteral">&quot;store0&quot;</span> port=<span class="stringliteral">&quot;12000&quot;</span>&gt;</div><div class="line">    &lt;publishing-interval&gt;</div><div class="line">      &lt;group name=<span class="stringliteral">&quot;default&quot;</span> ivl=<span class="stringliteral">&quot;6&quot;</span>/&gt;</div><div class="line">      &lt;group name=<span class="stringliteral">&quot;config&quot;</span> ivl=<span class="stringliteral">&quot;120&quot;</span>/&gt;</div><div class="line">    &lt;/publishing-interval&gt;</div><div class="line">    ...</div><div class="line">  &lt;/store&gt;</div><div class="line">  &lt;store name=<span class="stringliteral">&quot;store1&quot;</span> port=<span class="stringliteral">&quot;12001&quot;</span>&gt;</div><div class="line">    ...</div><div class="line">  &lt;/store&gt;</div><div class="line">&lt;/stores&gt;</div></div><!-- fragment --><p>In this example, all stats-type messages are (conditionally) published on a 3-second interval, except those of store0, which are published (conditionally) on a 6-second interval. All config-type messages are published (unconditionally) on a 120-second interval.</p>
<p><br />
 </p>
<h1><a class="anchor" id="storedaemoncontrolrequests"></a>
Store Daemon Control Requests&nbsp;&nbsp;<small><a href="#storedaemoncontrolrequests">&lt;-</a></small></h1>
<p>The Store Process supports a monitoring application to send a specific set of requests to control the operation of Daemon Statistics, and other operations of the Store. The <a class="el" href="configurationreferenceforumestored.html#umeelementremotesnapshotrequest">&lt;remote-snapshot-request&gt;</a> and <a class="el" href="configurationreferenceforumestored.html#umeelementremoteconfigchangesrequest">&lt;remote-config-changes-request&gt;</a> elements control whether the Store enables the <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.areas/builds/UMQ_6.16.1/doc/UME/design.tag:../Design/" href="../Design/umfeatures.html#daemoncontroller">Daemon Controller</a> operation (both default to disabled).</p>
<dl class="section warning"><dt>Warning</dt><dd>If misused, the Daemon Control Requests feature allows a user to interfere with the messaging infrastructure in potentially disruptive ways. By default, this feature is disabled. However, especially if you have enabled <a class="el" href="configurationreferenceforumestored.html#umeelementremoteconfigchangesrequest">UMP Element "&lt;remote-config-changes-request&gt;"</a>, Informatica recommends <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.areas/builds/UMQ_6.16.1/doc/UME/design.tag:../Design/" href="../Design/umfeatures.html#securingdaemoncontrolrequests">Securing Daemon Control Requests</a>.</dd></dl>
<p>If enabled, the monitoring application can send a request message to the Store in the form of a topicless unicast immediate "request" message (see <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.areas/builds/UMQ_6.16.1/doc/UME/api.tag:../API/" href="../API/lbm_8h.html#ae011c7a66e1db1f012d7f9633dbd321d">lbm_unicast_immediate_request()</a> with NULL for topic). The format of the message is a simple ascii string, with or without null termination. Due to the simple format of the message, no data structure is defined for it.</p>
<p>When the Store receives and validates the request, it sends a UM response message back to the requesting application containing a status message (which is <em>not</em> null-terminated). If the status was OK, the Store also performs the requested action.</p>
<p><br />
 </p>
<h2><a class="anchor" id="storedaemoncontrolrequestaddressing"></a>
Store Daemon Control Request Addressing&nbsp;&nbsp;<small><a href="#storedaemoncontrolrequestaddressing">&lt;-</a></small></h2>
<p>Since Daemon Control Requests are sent as UIM messages, you must use a target string to address the request to the desired Store Process. The general form of a UIM target address is described in <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.areas/builds/UMQ_6.16.1/doc/UME/design.tag:../Design/" href="../Design/umfeatures.html#uimaddressing">UIM Addressing</a>, but is illustrated by this example: </p><pre class="fragment">TCP:10.29.3.46:12009
</pre><p> where 10.29.3.46:12009 is the IP and Port of the Daemon Control context UIM port. These are typically configured using the <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.areas/builds/UMQ_6.16.1/doc/UME/config.tag:../Config/" href="../Config/grpunicastimmediatemessagingnetwork.html#requesttcpinterfacecontext">request_tcp_interface (context)</a> and <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.areas/builds/UMQ_6.16.1/doc/UME/config.tag:../Config/" href="../Config/grpunicastimmediatemessagingnetwork.html#requesttcpportcontext">request_tcp_port (context)</a> options in the LBM configuration file specified by the <a class="el" href="configurationreferenceforumestored.html#umeelementlbmconfig">UMP Element "&lt;lbm-config&gt;"</a> contained within the <a class="el" href="configurationreferenceforumestored.html#umeelementdaemonmonitor">UMP Element "&lt;daemon-monitor&gt;"</a>.</p>
<p><br />
 </p>
<h2><a class="anchor" id="storedaemoncontrolrequesttypes"></a>
Store Daemon Control Request Types&nbsp;&nbsp;<small><a href="#storedaemoncontrolrequesttypes">&lt;-</a></small></h2>
<p>The example program <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.areas/builds/UMQ_6.16.1/doc/UME/example.tag:../example/" href="../example/index.html#exampleumedcmd_c">Example umedcmd.c</a> demonstrates the correct way to send the messages and receive the responses. See <a class="el" href="storedaemonstatistics.html#umedcmdmanpage">umedcmd Man Page</a> for usage details.</p>
<p><b>REQUEST TYPES ENABLED BY <a class="el" href="configurationreferenceforumestored.html#umeelementremotesnapshotrequest">&lt;remote-snapshot-request&gt;</a>:</b></p>
<dl class="section user"><dt>version</dt><dd>The Store returns in its response the value of <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.areas/builds/UMQ_6.16.1/doc/UME/api.tag:../API/" href="../API/umedmonmsgs_8h.html#af43ca32ea1917897c4ff1310d214c20b">LBM_UMESTORE_DMON_VERSION</a>. No daemon statistics messages are published.</dd></dl>
<dl class="section user"><dt>snap memory</dt><dd>The Store immediately publishes the memory usage message <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.areas/builds/UMQ_6.16.1/doc/UME/api.tag:../API/" href="../API/umedmonmsgs_8h.html#aa3a3d4c63922003ed750ed38027bcc82">LBM_UMESTORE_DMON_MPG_SMART_HEAP_STATS</a>.</dd></dl>
<dl class="section user"><dt>snap src</dt><dd>The Store immediately publishes the source repository statistics message(s) <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.areas/builds/UMQ_6.16.1/doc/UME/api.tag:../API/" href="../API/umedmonmsgs_8h.html#aa4269805d37ad1586f340a0f4486e0e9">LBM_UMESTORE_DMON_MPG_REPO_STATS</a>.</dd></dl>
<dl class="section user"><dt>snap rcv</dt><dd>The Store immediately publishes the receiver statistics message(s) <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.areas/builds/UMQ_6.16.1/doc/UME/api.tag:../API/" href="../API/umedmonmsgs_8h.html#aa57c0aadc4536533388200812a51584e">LBM_UMESTORE_DMON_MPG_RCV_STATS</a>.</dd></dl>
<dl class="section user"><dt>snap disk</dt><dd>The Store immediately publishes the disk statistics message(s) <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.areas/builds/UMQ_6.16.1/doc/UME/api.tag:../API/" href="../API/umedmonmsgs_8h.html#a41acc94a55b5c03bf2580c876d7f8ad4">LBM_UMESTORE_DMON_MPG_DISK_STATS</a>.</dd></dl>
<dl class="section user"><dt>snap store</dt><dd>The Store immediately publishes the Store statistics message(s) <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.areas/builds/UMQ_6.16.1/doc/UME/api.tag:../API/" href="../API/umedmonmsgs_8h.html#a102df121698e67407d2aeffc0147d91e">LBM_UMESTORE_DMON_MPG_STORE_STATS</a>.</dd></dl>
<dl class="section user"><dt>snap config</dt><dd>The Store immediately publishes the Store config category messages <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.areas/builds/UMQ_6.16.1/doc/UME/api.tag:../API/" href="../API/umedmonmsgs_8h.html#aed8460b69470931e1d8ee4347110a309">LBM_UMESTORE_DMON_MPG_STORE_CONFIG</a>, <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.areas/builds/UMQ_6.16.1/doc/UME/api.tag:../API/" href="../API/umedmonmsgs_8h.html#aab14bc84ccbe0986c41e5f3f4b5f2b34">LBM_UMESTORE_DMON_MPG_STORE_PATTERN_CONFIG</a>, <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.areas/builds/UMQ_6.16.1/doc/UME/api.tag:../API/" href="../API/umedmonmsgs_8h.html#a8e29917df3f47cbb8935cb1ed683e876">LBM_UMESTORE_DMON_MPG_STORE_TOPIC_CONFIG</a>, <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.areas/builds/UMQ_6.16.1/doc/UME/api.tag:../API/" href="../API/umedmonmsgs_8h.html#a76e34ed0b81c5e1141a36e358f3803a4">LBM_UMESTORE_DMON_MPG_REPO_CONFIG</a>, and <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.areas/builds/UMQ_6.16.1/doc/UME/api.tag:../API/" href="../API/umedmonmsgs_8h.html#a37abe47b7a806332d6dec510f8370386">LBM_UMESTORE_DMON_MPG_RCV_CONFIG</a></dd></dl>
<p><b>REQUEST TYPES ENABLED BY <a class="el" href="configurationreferenceforumestored.html#umeelementremoteconfigchangesrequest">&lt;remote-config-changes-request&gt;</a>:</b></p>
<p>A Store Process can have multiple Store instances. But the UIM message is sent to the Daemon Control context within the Store Process.</p>
<p>Except as noted, the following requests can either be applied to all Store instances in the Store Process, or to just one Store instance. To apply the request to one Store instance, the Store name (as specified in the <a class="el" href="configurationreferenceforumestored.html#umeelementstore">UMP Element "&lt;store&gt;"</a> attribute "name") should be specified in double quotes.</p>
<dl class="section user"><dt>memory <em>N</em> </dt><dd>Set the publishing interval for memory usage. This is only available on a Store Process basis. A Store instance may not be supplied. <br />
For example: <code>memory 5</code></dd></dl>
<dl class="section user"><dt>src <em>N</em> </dt><dd>Set the publishing interval for source repository statistics messages. This request can be preceded by a Store instance name in double quote marks to only set the publishing interval for that Store. <br />
For example: <code>"store1" src 5</code></dd></dl>
<dl class="section user"><dt>rcv <em>N</em> </dt><dd>Set the publishing interval for receiver statistics messages. This request can be preceded by a Store instance name in double quote marks to only set the publishing interval for that Store. <br />
For example: <code>"store1" rcv 5</code></dd></dl>
<dl class="section user"><dt>disk <em>N</em> </dt><dd>Set the publishing interval for disk statistics messages. This request can be preceded by a Store instance name in double quote marks to only set the publishing interval for that Store. <br />
For example: <code>"store1" disk 5</code></dd></dl>
<dl class="section user"><dt>store <em>N</em> </dt><dd>Set the publishing interval for Store statistics messages. This request can be preceded by a Store instance name in double quote marks to only set the publishing interval for that Store. <br />
For example: <code>"store1" store 5</code></dd></dl>
<dl class="section user"><dt>config <em>N</em> </dt><dd>Set the publishing interval for config category messages. This request can be preceded by a Store instance name in double quote marks to only set the publishing interval for that Store. <br />
For example: <code>"store1" config 5</code></dd></dl>
<p>For the following requests, a Store instance <em>must</em> be supplied as part of the request. It is supplied as an IP and Port, as specified in the <a class="el" href="configurationreferenceforumestored.html#umeelementstore">UMP Element "&lt;store&gt;"</a> attributes "interface" and "port". Note that the following requests are <em>not</em> related to the Daemon Statistics feature, but are nonetheless enabled by <a class="el" href="configurationreferenceforumestored.html#umeelementremoteconfigchangesrequest">&lt;remote-config-changes-request&gt;</a>.</p>
<dl class="section user"><dt>mark <em>INTFC</em> <em>PORT</em> <em>SRC_REGID</em> <em>SQN</em> </dt><dd>Mark as invalid the message with sequence number <em>SQN</em> from the source with registration ID <em>SRC_REGID</em> on the Store instance at <em>INTFC</em>:<em>PORT</em>. <br />
For example: <code>mark 10.29.3.16 12000 127025183 500</code> <br />
Note that only one sequence number can be specified. See <a class="el" href="storedaemonstatistics.html#requestmarkstoredmessageinvalid">Request: Mark Stored Message Invalid</a> for more information.</dd></dl>
<dl class="section user"><dt>deregister <em>INTFC</em> <em>PORT</em> <em>SRC_REGID</em> <em>RCV_REGID</em> </dt><dd>Deregister the receiver with registration ID <em>RCV_REGID</em> associated with the source with registration ID <em>SRC_REGID</em> on the Store instance at <em>INTFC</em>:<em>PORT</em>. <br />
For example: <code>deregister 10.29.3.16 12000 127025183 127025184</code> <br />
Note that only one receiver registration ID can be specified. See <a class="el" href="storedaemonstatistics.html#requestderegisterreceiver">Request: Deregister Receiver</a> for more information.</dd></dl>
<p><br />
 </p>
<h2><a class="anchor" id="requestmarkstoredmessageinvalid"></a>
Request: Mark Stored Message Invalid&nbsp;&nbsp;<small><a href="#requestmarkstoredmessageinvalid">&lt;-</a></small></h2>
<p>There are occasions when a user might want to mark one or more messages in a Store's repository as invalid, to prevent them from being delivered to a recovering receiver. This can be useful if a misbehaving publisher sends a "poison" message that causes receivers to crash; having that message in the Store's repository means that restarting the failed receiver will just cause it to crash again when the message is recovered.</p>
<p>This message marking feature is provided by the daemon command-and-control feature <a class="el" href="storedaemonstatistics.html#storedaemoncontrolrequests">Store Daemon Control Requests</a>. Note that if there is more than one Store instance in this QC group, the request needs to be sent multiple times, once for each Store instance IP/Port.</p>
<dl class="section warning"><dt>Warning</dt><dd>If misused, the Daemon Control Requests feature allows a user to interfere with the messaging infrastructure in potentially disruptive ways. By default, this feature is disabled. However, especially if you have enabled <a class="el" href="configurationreferenceforumestored.html#umeelementremoteconfigchangesrequest">UMP Element "&lt;remote-config-changes-request&gt;"</a>, Informatica recommends <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.areas/builds/UMQ_6.16.1/doc/UME/design.tag:../Design/" href="../Design/umfeatures.html#securingdaemoncontrolrequests">Securing Daemon Control Requests</a>.</dd>
<dd>
When a message is marked invalid with this feature, that mark is <em>NOT</em> saved onto disk. If the marked message resides on disk and the Store is restarted, it loses its invalid mark and becomes subject to delivery to recovering receivers. Invalid messages may need to be re-marked as invalid after a Store restart.</dd>
<dd>
The message marking feature is incompatible with the <a class="el" href="optionsforastoresumeattributeselement.html#umecfgretransmissionrequestforwarding">retransmission-request-forwarding</a> Store option. If you have configured the Store instance to enable the <a class="el" href="optionsforastoresumeattributeselement.html#umecfgretransmissionrequestforwarding">retransmission-request-forwarding</a> option, and a recovering receiver requests a message that has been marked as invalid, the Store instance will forward the recovery request to the source. If the source still has the message in its retention buffer, the Store will supply it to the receiver.</dd></dl>
<p>Daemon Control requests can be sent by the example program <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.areas/builds/UMQ_6.16.1/doc/UME/example.tag:../example/" href="../example/index.html#exampleumedcmd_c">Example umedcmd.c</a>. Alternatively, that program's source code can be used as a guide for writing your own Store management program. See <a class="el" href="storedaemonstatistics.html#umedcmdmarkmode">umedcmd Mark Mode</a> for full details.</p>
<p><br />
 </p>
<h2><a class="anchor" id="requestderegisterreceiver"></a>
Request: Deregister Receiver&nbsp;&nbsp;<small><a href="#requestderegisterreceiver">&lt;-</a></small></h2>
<p>There are occasions when a user might want to deregister a failed receiver from a Store. This will delete the Store's state information for that receiver.</p>
<p>This receiver deregistration feature is provided by the Daemon command-and-control feature <a class="el" href="storedaemonstatistics.html#storedaemoncontrolrequests">Store Daemon Control Requests</a>.</p>
<dl class="section warning"><dt>Warning</dt><dd>If misused, the Daemon Control Requests feature allows a user to interfere with the messaging infrastructure in potentially disruptive ways. By default, this feature is disabled. However, especially if you have enabled <a class="el" href="configurationreferenceforumestored.html#umeelementremoteconfigchangesrequest">UMP Element "&lt;remote-config-changes-request&gt;"</a>, Informatica recommends <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.areas/builds/UMQ_6.16.1/doc/UME/design.tag:../Design/" href="../Design/umfeatures.html#securingdaemoncontrolrequests">Securing Daemon Control Requests</a>.</dd></dl>
<p>A receiver's state information is stored per-source. For example, if an application creates a persistent receiver for topic X, and there are two sources for topic X, the Store will save two sets of state information for that receiver, one for each source for X. To fully clean up a failed receiving application, you need to deregister every pairing of receiver registration ID (RegID) associated with that receiver with every source RegID. And that must be repeated for each Store instance that the receiver was registered with. (Session IDs may not be used.)</p>
<p>Once deregistered, the state and cache files are deleted and cannot be restored.</p>
<p>Note that if there is more than one Store instance in this QC group, the request needs to be sent multiple times, once for each Store instance IP/Port.</p>
<dl class="section note"><dt>Note</dt><dd>If you use this feature to deregister a receiver that is still running, that receiving application is not informed of the deregistration, and it will continue to receive messages from the source and will attempt to acknowledge them to the Store. However, the Store will discard these acknowledgements as invalid and will log warnings to its log file. The receiving application will not be aware of the acknowledgement discards.</dd></dl>
<p>Daemon Control Requests can be sent by the example program <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.areas/builds/UMQ_6.16.1/doc/UME/example.tag:../example/" href="../example/index.html#exampleumedcmd_c">Example umedcmd.c</a>. Alternatively, that program's source code can be used as a guide for writing your own Store management program. See <a class="el" href="storedaemonstatistics.html#umedcmdderegistermode">umedcmd Deregister Mode</a> for full details.</p>
<p><br />
 </p>
<h1><a class="anchor" id="umedcmdmanpage"></a>
umedcmd Man Page&nbsp;&nbsp;<small><a href="#umedcmdmanpage">&lt;-</a></small></h1>
<p>The <code>umedcmd</code> example program sends <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.areas/builds/UMQ_6.16.1/doc/UME/design.tag:../Design/" href="../Design/umfeatures.html#daemoncontrolrequests">Daemon Control Requests</a> to a Store Process. Source code for <code>umedcmd</code> can be found with the other example programs; see <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.areas/builds/UMQ_6.16.1/doc/UME/example.tag:../example/" href="../example/index.html#exampleumedcmd_c">Example umedcmd.c</a>.</p>
<dl class="section note"><dt>Note</dt><dd>UM version 6.13 has a known issue running <code>umedcmd</code> on Windows. See <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.areas/builds/UMQ_6.16.1/doc/UME/changelog.tag:../ChangeLog/" href="../ChangeLog/knownlimitations.html#bug10897">Known Issue 10897</a>.</dd></dl>
<p>The <code>umedcmd</code> command has 3 modes of operation: </p><ul>
<li>
<a class="el" href="storedaemonstatistics.html#umedcmdpublishmode">publish</a><ul>
<li>used to control the publishing of Daemon Statistics by the Persistent Store. </li>
</ul>
</li>
<li>
<a class="el" href="storedaemonstatistics.html#umedcmdmarkmode">mark</a><ul>
<li>used to mark messages in a Store instance as invalid. </li>
</ul>
</li>
<li>
<a class="el" href="storedaemonstatistics.html#umedcmdderegistermode">deregister</a><ul>
<li>used to deregister and delete state information for a receiver that is currently registered with a Store instance. </li>
</ul>
</li>
</ul>
<p>Each mode has a different usage pattern, which is determined by the value passed to the "-m" command-line option.</p>
<p><br />
 </p>
<h2><a class="anchor" id="umedcmdpublishmode"></a>
umedcmd Publish Mode&nbsp;&nbsp;<small><a href="#umedcmdpublishmode">&lt;-</a></small></h2>
<p>This form of the umedcmd command is used to control the publishing of Daemon Statistics by the Persistent Store.</p>
<pre class="fragment">*******************************************************************************
Usage: umedcmd -m publish -c config_file -T target_string [-L linger]
       [command_string]
Available options:
  -c, --config=FILE       Use LBM configuration file FILE.
                             Multiple config files are allowed.
                             Example: '-c file1.cfg -c file2.cfg'
  -h, --help              display this help and exit
  -L, --linger=NUM        linger for NUM seconds before closing context
  -m, --mode=TYPE         set the command mode to TYPE 'publish' [required]
  -T, --target=TARGET     TARGET string for unicast immediate messages
                          [required]
*******************************************************************************
</pre><p>The "-m mode" command-line option is optional in this usage. If supplied, it must be supplied as "-m publish". Omitting it defaults to publish mode.</p>
<p>The "-T target_string" contains the unicast immediate message destination address of the Daemon Control context UIM port (see <a class="el" href="storedaemonstatistics.html#storedaemoncontrolrequestaddressing">Store Daemon Control Request Addressing</a>).</p>
<p>The parameter "command_string" is optional. If supplied, it should be enclosed in single quotes. If omitted, the program enters an interactive mode in which the user can enter any number of commands (when used interactively, do not enclose the command string in single quotes). In interactive mode, use "h" for a brief help screen, and "q" to quit.</p>
<p>Valid command strings are:</p>
<pre class="fragment">***********************************************************************************
* Publish Mode                                                                    *
* help (print this message): h                                                    *
*   quit (exit application): q                                                    *
* report store dmon version: version                                              *
*   set publishing interval: memory 0-N                                           *
*                            ["store name"] src 0-N                               *
*                            ["store name"] rcv 0-N                               *
*                            ["store name"] disk 0-N                              *
*                            ["store name"] store 0-N                             *
*                            ["store name"] config 0-N                            *
*       snapshot all groups: ["store name"] snap memory|src|rcv|disk|store|config *
***********************************************************************************
</pre><p>Note that most of the commands can optionally be preceded by a Store instance name in double quotes. Supplying it causes the command to apply only to the named Store instance. Omitting this causes the command to apply to <em>all</em> Store instances in the target Store Program.</p>
<p>For example: </p><pre class="fragment">umedcmd -c dstats.cfg -m publish -T TCP:10.29.3.16:12009 '"store1" src 5'
</pre><p>In this example, the Store Process's Daemon Control context has its UIM port configured as 12009 (see <a class="el" href="storedaemonstatistics.html#storedaemoncontrolrequestaddressing">Store Daemon Control Request Addressing</a>), and the Store instance is configured for the name "store1". (with the <a class="el" href="configurationreferenceforumestored.html#umeelementstore">UMP Element "&lt;store&gt;"</a> attribute "name"). The source repository statistics are set to a publishing interval of 5 seconds.</p>
<p><br />
 </p>
<h2><a class="anchor" id="umedcmdmarkmode"></a>
umedcmd Mark Mode&nbsp;&nbsp;<small><a href="#umedcmdmarkmode">&lt;-</a></small></h2>
<p>This form of the umedcmd command is used to mark persisted messages as invalid. This prevents their delivery to recovering receivers. See <a class="el" href="storedaemonstatistics.html#requestmarkstoredmessageinvalid">Request: Mark Stored Message Invalid</a>.</p>
<pre class="fragment">*******************************************************************************
Usage: umedcmd -m mark -c config_file -i store_interface -p store_port
       -s src_regid -T target_string [-L linger] [-S sqn_string]
Available options:
  -c, --config=FILE     Use LBM configuration file FILE.
                           Multiple config files are allowed.
                           Example: '-c file1.cfg -c file2.cfg'
  -h, --help            display this help and exit
  -i, --store_interface store interface IPv4 address [required]
  -p, --store_port      store port [required]
  -L, --linger=NUM      linger for NUM seconds before closing context
  -m, --mode=TYPE       set the command mode to TYPE 'mark' [required]
  -s, --src_regid=ID    source registration ID associated with the store
                        repository [required]
  -S, --sqn_string=LIST LIST of one or more message sequence number(s) or
                        ranges to drop], e.g.:
                          '-S 54'       drop a single message
                          '-S 312-315'  drops a range of messages
                          '-S 2,5,7-9' drops two single and a range of messages
  -T, --target=TARGET   TARGET string for unicast immediate messages
                        [required]
*******************************************************************************
</pre><p>The "-m mark" command-line option must be supplied.</p>
<p>The "-T target_string" contains the unicast immediate message destination address of the Daemon Control context UIM port (see <a class="el" href="storedaemonstatistics.html#storedaemoncontrolrequestaddressing">Store Daemon Control Request Addressing</a>).</p>
<p>The "-i store_interface" and "-p store_port" are required parameters which identify the desired Store instance within the Store Process, as specified in the <a class="el" href="configurationreferenceforumestored.html#umeelementstore">UMP Element "&lt;store&gt;"</a> attributes "interface" and "port".</p>
<p>The "-s src_regid" parameter is required to identify the specific source that sent the invalid message.</p>
<p>The command-line option "-S sqn_string" specifies the sequence number(s) of the messages that should be marked invalid. If omitted, the program enters an interactive mode in which the user can enter any number of sequence number strings.</p>
<p>A sequence number string can specify multiple sequence numbers and/or ranges of sequence numbers. A range is two sequence numbers separated by a dash. The string can consist of one or more sequence numbers or ranges, separated by commas. The string should be enclosed in quotes. For example: </p><pre class="fragment">-S "100,110-112,220"
</pre><p> This specifies sequence numbers 100, 110, 111, 112, 220. Note that the <code>umedcmd</code> command parses the sequence number string and issues a separate request to the Store instance for each sequence number.</p>
<p>If "-S sqn_string" is omitted from the command line, the program enters an interactive mode in which the user can enter any number of sequence number strings. In interactive mode, use "h" for a brief help screen, and "q" to quit.</p>
<p>For example: </p><pre class="fragment">umedcmd -c dstats.cfg -m mark -T TCP:10.29.3.16:12009 -i 10.29.3.16 -p 12000 -s 127025183 -S "500"
</pre><p>In this example, the Store Process's Daemon Control context has its UIM port configured as 12009 (see <a class="el" href="storedaemonstatistics.html#storedaemoncontrolrequestaddressing">Store Daemon Control Request Addressing</a>), and the Store instance is configured for port 12000 (with the "port" attribute of the <a class="el" href="configurationreferenceforumestored.html#umeelementstore">UMP Element "&lt;store&gt;"</a>). The source registration ID is 127025183. The message with sequence number 500 is marked invalid.</p>
<dl class="section note"><dt>Note</dt><dd>If there is more than one Store instance in this QC group, the command needs to be executed multiple times, once for each Store instance IP/Port.</dd></dl>
<p><br />
 </p>
<h2><a class="anchor" id="umedcmdderegistermode"></a>
umedcmd Deregister Mode&nbsp;&nbsp;<small><a href="#umedcmdderegistermode">&lt;-</a></small></h2>
<p>This form of the umedcmd command is used to deregister a failed receiver. This deletes the state information for that receiver. See <a class="el" href="storedaemonstatistics.html#requestderegisterreceiver">Request: Deregister Receiver</a>.</p>
<pre class="fragment">*******************************************************************************
Usage: umedcmd  -m deregister-c config_file -i store_interface -p store_port
       -s src_regid -T target_string [-r rcvr_regid] [-L linger]
Available options:
  -c, --config=FILE       Use LBM configuration file FILE.
                             Multiple config files are allowed.
                             Example: '-c file1.cfg -c file2.cfg'
  -h, --help              display this help and exit
  -i, --store_interface   store interface IPv4 address [required]
  -p, --store_port        store port [required]
  -L, --linger=NUM        linger for NUM seconds before closing context
  -m, --mode=TYPE         set the command mode to TYPE 'deregister' [required]
  -r, --rcvr_regid=LIST   LIST of one or more receiver registration IDs
                          with store repository, e.g.:
                           '-r 127025171'            deregister single receiver
                           '-r 127025171, 127025162' deregister two receivers
  -s, --src_regid=ID      source registration ID associated with the
                          store repository [required]
  -T, --target=TARGET     TARGET string for unicast immediate messages
                          [required]
*******************************************************************************
</pre><p>The "-m deregister" command-line option must be supplied.</p>
<p>The "-T target_string" contains the unicast immediate message destination address of the Daemon Control context UIM port (see <a class="el" href="storedaemonstatistics.html#storedaemoncontrolrequestaddressing">Store Daemon Control Request Addressing</a>).</p>
<p>The "-i store_interface" and "-p store_port" are required parameters which identify the desired Store instance within the Store Process, as specified in the <a class="el" href="configurationreferenceforumestored.html#umeelementstore">UMP Element "&lt;store&gt;"</a> attributes "interface" and "port".</p>
<p>The "-s src_regid" and "-r rcv_regid" parameters combine to identify the specific receiver state that will be deleted. Receiver state is stored according to a <em>pair</em> of registration IDs: source, receiver. (Session IDs may not be used.) For example, lets say there are two persisted sources for the same topic with registration IDs 100 and 200. A receiver with registration ID 300 will have two sets of state: state for the pair 100, 300 and state for the pair 200, 300.</p>
<p>Note that the "-r rcv_regid" parameter can have a comma-separated list of receiver registration IDs. This is handy if you need to de-register all receivers for a particular source. The rcv_regid should be enclosed in quotes. Note that <code>umedcmd</code> command parses the receiver registration IDs and issues separate request to the Store instance for each rcv_regid.</p>
<p>Also note that if "-r rcv_regid" is omitted from the command line, the program enters an interactive mode in which the user can enter any number of receiver registration IDs. In interactive mode, use "h" for a brief help screen, and "q" to quit.</p>
<p>For example: </p><pre class="fragment">umedcmd -c dstats.cfg -m deregister -T TCP:10.29.3.16:12009 -i 10.29.3.16 -p 12000 -s 127025183 -r "127025184"
</pre><p>In this example, the Store Process's Daemon Control context has its request port configured as 12009 (see <a class="el" href="storedaemonstatistics.html#storedaemoncontrolrequestaddressing">Store Daemon Control Request Addressing</a>), and the Store instance is configured for port 12000 (with the "port" attribute of the <a class="el" href="configurationreferenceforumestored.html#umeelementstore">UMP Element "&lt;store&gt;"</a>). The source registration ID is 127025183 and the receiver registration ID is 127025184. This pair of registration IDs is used by the Store instance to delete the receiver state.</p>
<dl class="section note"><dt>Note</dt><dd>If there is more than one Store instance in this QC group, the command needs to be executed multiple times, once for each Store instance IP/Port. Also, if there is more than one source for the same topic that the receiver is registered for, the command needs to be executed multiple times, once for each source registration ID.</dd></dl>
<p><br />
<br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
</p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.11-->
</body>
</html>
