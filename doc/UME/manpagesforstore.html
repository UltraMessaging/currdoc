<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Guide for Persistence: Man Pages for Store</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen_manual.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Guide for Persistence
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('manpagesforstore.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">Man Pages for Store </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Persistent Store services are provided by Store Process.</p>
<p>There are two executables for the Store, each with it's own man page: </p><ul>
<li>
<a class="el" href="manpagesforstore.html#umestoredmanpage">Umestored Man Page</a> - Unix and Windows command-line interface. </li>
<li>
<a class="el" href="manpagesforstore.html#umestoredsmanpage">Umestoreds Man Page</a> - Windows Service interface. </li>
</ul>
<p><br />
 </p>
<h1><a class="anchor" id="umestoredmanpage"></a>
Umestored Man Page&nbsp;&nbsp;<small><a href="#umestoredmanpage">&lt;-</a></small></h1>
<p>Unix and Windows command-line interface.</p>
<pre class="fragment">UMP Store daemon
Usage: umestored [options] configfile
Available options:
  -h, --help                     display this help and exit
  -d, --dump-dtd                 dump DTD to stdout
  -f, --detach                   detach from terminal (not supported on Windows)
  -v, --validate                 validate config, but do not run
  -a, --affinitize=PCPU[,RRLIST] assign CPU process affinity to PCPU. If optional RRLIST is given
                                 assigns CPU affinity in a round-robin sequence as key processing
                                 threads are created, example: -a 1,3,5 assigns CPU 1 to the process
                                 and CPUs 3, 5, 3, ... to created threads in a repeating sequence</pre><dl class="section user"><dt>Description</dt><dd>The <code>umestored</code> command (the final "d" stands for "daemon") runs the Store Process. It can be run interactively from a shell or command prompt, or from a script or batch file. (For use as a Windows Service, see <a class="el" href="manpagesforstore.html#umestoredsmanpage">Umestoreds Man Page</a>.)</dd></dl>
<dl class="section user"><dt></dt><dd>The <b>"configfile"</b> parameter is required and specifies the file path for the Store configuration file. See <a class="el" href="configurationreferenceforumestored.html">Configuration Reference for Umestored</a> for configuration details.</dd></dl>
<dl class="section user"><dt></dt><dd>The <b>"-f"</b> option directs a Unix-based <code>umestored</code> to fork a child process which detaches from the controlling terminal. The <code>umestored</code> command normally remains attached to the controlling terminal and runs until interrupted. With <b>"-f"</b>, the <code>umestored</code> command exits back to the shell, and the forked child continues running in the background.</dd></dl>
<dl class="section user"><dt></dt><dd>The <b>"-a"</b> option provides the CPU core affinity for Store threads. This "pins" the threads to one or more desired CPU cores, which can provide a significant improvement in throughput. See <a class="el" href="storethreadaffinity.html">Store Thread Affinity</a> for details.</dd></dl>
<dl class="section user"><dt></dt><dd>The <b>"-d"</b> option dumps (prints) the Store's XML DTD to standard output. After dumping the DTD, <code>umestored</code> exits.</dd></dl>
<dl class="section user"><dt></dt><dd>The <b>"-v"</b> option validates the XML structure of the given configuration file against the Store's XML DTD. After validating the configuration file's XML structure, <code>umestored</code> exits with status 0 for no errors, or non-zero if errors were found. For example: <pre class="fragment">umestored -v /um/store1_cfg.xml
</pre></dd></dl>
<dl class="section user"><dt></dt><dd>Note that valid XML structure does not guarantee that the configuration file is completely correct. It must be tested on a running Store.</dd></dl>
<dl class="section user"><dt></dt><dd>The <b>"-h"</b> option prints the man page and exits.</dd></dl>
<dl class="section user"><dt><b>Exit</b> <b>Status</b> </dt><dd>The exit status from <code>umestored</code> is 0 for success and some non-zero value for failure.</dd></dl>
<dl class="section user"><dt><b>Usage</b> <b>Notes</b> </dt><dd>When shutting down a Unix-based UM Persistent Store Process, use a SIGINT to trigger a clean shutdown, which attempts to cleanly finish outstanding IO requests before shutting down. Two successive SIGINTs force an immediate shutdown (not recommended unless absolutely necessary).</dd></dl>
<p><br />
 </p>
<h1><a class="anchor" id="umestoredsmanpage"></a>
Umestoreds Man Page&nbsp;&nbsp;<small><a href="#umestoredsmanpage">&lt;-</a></small></h1>
<p>Windows Service interface. See <a class="elRef" doxygen="/29W/Amun/home/sford/backup_exclude/labbox/sfordw_REL_6_16_1/29West/lbm/doc/UME/operations.tag:../Operations/" href="../Operations/startupshutdownprocedures.html#umdaemonsaswindowsservices">UM Daemons as Windows Services</a> for general information about UM daemons as Windows Services.</p>
<pre class="fragment">UMP Store service
Usage: umestoreds [options] [configfile]
Available options:
  -E, --env_var_file             update/set environment variable file
  -U, --unset_env_var_file       unset the environment variable file
  -h, --help                     display this help and exit
  -d, --dump-dtd                 dump DTD to stdout
  -s, --service=install          install the service passing configfile
  -s, --service=remove           delete/remove the service
  -s, --service=config           update configfile info to use configfile passed
  -v, --validate                 validate config, but do not run
  -e, --event-log-level          update/set service logging level.  This is the minimum logging
                                 level to send to the Windows event log.  Valid values are:
                                    NONE - Send no events
                                    INFO
                                    WARN - default
                                    ERROR
  -a, --affinitize=PCPU[,RRLIST] assign CPU process affinity to PCPU. If optional RRLIST is given
                                 assigns CPU affinity in a round-robin sequence as key processing
                                 threads are created, example: -a 1,3,5 assigns CPU 1 to the process
                                 and CPUs 3, 5, 3, ... to created threads in a repeating sequence
  configfile                     XML config file (if not present, looks in registry)</pre><dl class="section user"><dt><b>Description</b> </dt><dd>The <code>umestoreds</code> command has two functions: <ul>
<li>
First, it lets the user supply Windows Service operating parameters, which the command saves into the Windows registry. Those operating parameters are subsequently used by the Store Service. See <a class="elRef" doxygen="/29W/Amun/home/sford/backup_exclude/labbox/sfordw_REL_6_16_1/29West/lbm/doc/UME/operations.tag:../Operations/" href="../Operations/startupshutdownprocedures.html#configurethewindowsservice">Configure the Windows Service</a>. </li>
<li>
Second, it provides Windows with the Store Process executable to run as a Service. </li>
</ul>
</dd></dl>
<dl class="section user"><dt></dt><dd>The <b>"configfile"</b> parameter provides the file path for the Store configuration file. It is supplied in conjunction with the <b>"-v"</b> option or the <b>"-s config"</b> option (see below). See <a class="el" href="configurationreferenceforumestored.html">Configuration Reference for Umestored</a> for configuration details.</dd></dl>
<dl class="section user"><dt></dt><dd>For <b>"-s install"</b> see <a class="elRef" doxygen="/29W/Amun/home/sford/backup_exclude/labbox/sfordw_REL_6_16_1/29West/lbm/doc/UME/operations.tag:../Operations/" href="../Operations/startupshutdownprocedures.html#installthewindowsservice">Install the Windows Service</a>.</dd></dl>
<dl class="section user"><dt></dt><dd>For <b>"-s remove"</b> see <a class="elRef" doxygen="/29W/Amun/home/sford/backup_exclude/labbox/sfordw_REL_6_16_1/29West/lbm/doc/UME/operations.tag:../Operations/" href="../Operations/startupshutdownprocedures.html#removethewindowsservice">Remove the Windows Service</a>.</dd></dl>
<dl class="section user"><dt></dt><dd>For <b>"-s config"</b>, <b>"-e"</b>, <b>"-E"</b>, and <b>"-U"</b>, see <a class="elRef" doxygen="/29W/Amun/home/sford/backup_exclude/labbox/sfordw_REL_6_16_1/29West/lbm/doc/UME/operations.tag:../Operations/" href="../Operations/startupshutdownprocedures.html#configurethewindowsservice">Configure the Windows Service</a>.</dd></dl>
<dl class="section user"><dt></dt><dd>The <b>"-a"</b> option specifies the CPU core affinity for Store threads, which is saved in the Windows registry and subsequently by the Windows Service. This "pins" the threads to one or more desired CPU cores, which can provide a significant improvement in throughput. See <a class="el" href="storethreadaffinity.html">Store Thread Affinity</a> for details.</dd></dl>
<dl class="section user"><dt></dt><dd>The <b>"-d"</b> option dumps (prints) the Store's XML DTD to standard output. After dumping the DTD, <code>umestoreds</code> exits.</dd></dl>
<dl class="section user"><dt></dt><dd>The <b>"-v"</b> option validates the XML structure of the given configuration file against the Store's XML DTD. After validating the configuration file's XML structure, <code>umestoreds</code> exits with status 0 for no errors, or non-zero if errors were found. For example: <pre class="fragment">umestoreds -v c:\um\store1_cfg.xml
</pre></dd></dl>
<dl class="section user"><dt></dt><dd>Note that valid XML structure does not guarantee that the configuration file is completely correct. It must be tested on a running Store.</dd></dl>
<dl class="section user"><dt></dt><dd>The <b>"-h"</b> option prints the man page and exits.</dd></dl>
<dl class="section user"><dt><b>Exit</b> <b>Status</b> </dt><dd>The exit status from <code>umestored</code> is 0 for success and some non-zero value for failure.</dd></dl>
<dl class="section user"><dt><b>Usage</b> <b>Notes</b> </dt><dd>When installing the UM Persistent Store as a Microsoft Windows service, use only local disk devices and fully qualified path names for all filenames. This is because Windows services run by default under a Local System account, which has reduced privileges and is not allowed access to network devices.</dd></dl>
<dl class="section user"><dt></dt><dd>Stopping the UM Persistent Store service triggers a clean shutdown, which attempts to cleanly finish outstanding IO requests before shutting down.</dd></dl>
<dl class="section attention"><dt>Attention</dt><dd>Do not use the task manager or the "kill" command to stop a UM daemon running as a Windows service. Use the Windows service control panel to stop the service. In particular, if the persistent Store is killed non-gracefully, it can leave its files in an inconsistent state.</dd></dl>
<p><br />
<br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
</p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.11-->
</body>
</html>
