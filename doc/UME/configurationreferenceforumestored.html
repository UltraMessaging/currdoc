<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Guide for Persistence: Configuration Reference for Umestored</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen_manual.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Guide for Persistence
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('configurationreferenceforumestored.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">Configuration Reference for Umestored </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The operating parameters for umestored come from an XML configuration file that must be supplied on the command line (see <a class="el" href="manpagesforstore.html">Man Pages for Store</a>. Umestored contains a UM context and receivers that may be configured with default values through a UM configuration file referenced in the XML configuration file. Default UM options my be overridden for each configured store using the XML configuration file.</p>
<p>You configure umestored to instantiate stores with the umestored XML configuration file, which Ultra Messaging reads at start up.</p>
<p>The umestored XML configuration file for persistence has the following sections.</p>
<ul>
<li>
<p class="startli">Daemon section - holds administrative parameters for such things as the location of log files, the UM Configuration File, etc.</p>
<p class="endli"></p>
</li>
<li>
Stores section - holds parameters for any persistent stores and also the topics to be persisted. </li>
</ul>
<p><b>High Level Store Configuration File:</b></p>
<pre class="fragment">&lt;ume-store version="1.3"&gt;
  &lt;daemon&gt;
    Daemon configuration options
  &lt;/daemon&gt;
  &lt;stores&gt;
    &lt;store attributes&gt;
      &lt;topics&gt;
        &lt;topic attributes&gt;
          &lt;ume-attributes&gt;
            &lt;option attributes/&gt;
          &lt;/ume-attributes&gt;
        &lt;/topic&gt;
      &lt;/topics&gt;
    &lt;/store&gt;
  &lt;/stores&gt;
&lt;/ume-store&gt;
</pre><p><br />
 </p>
<h1><a class="anchor" id="daemonelement"></a>
Daemon Element&nbsp;&nbsp;<small><a href="#daemonelement">&lt;-</a></small></h1>
<p>The following table presents child elements allowed in the daemon configuration section.</p>
<table class="doxtable">
<tr>
<th>Tag </th><th>Description </th><th><p class="starttd">Default Value</p>
<p class="endtd"><a class="anchor" id="umecfglog"></a></p>
</th></tr>
<tr>
<td>log </td><td>Required. Pathname for log file. </td><td><p class="starttd">None - this is a required element.</p>
<p class="endtd"><a class="anchor" id="umecfguid"></a></p>
</td></tr>
<tr>
<td>uid </td><td>User ID (uid) for daemon process (if started as root) </td><td><p class="starttd">Daemon retains starting uid</p>
<p class="endtd"><a class="anchor" id="umecfgpidfile"></a></p>
</td></tr>
<tr>
<td>pidfile </td><td>Pathname for daemon process ID (pid) file </td><td><p class="starttd">No pidfile</p>
<p class="endtd"><a class="anchor" id="umecfggid"></a></p>
</td></tr>
<tr>
<td>gid </td><td>Group ID (gid) for daemon process (if started as root) </td><td><p class="starttd">Daemon retains starting gid</p>
<p class="endtd"><a class="anchor" id="umecfglbmconfig"></a></p>
</td></tr>
<tr>
<td>lbm-config </td><td>Pathname for UM configuration file </td><td><p class="starttd">No config file; use UM defaults</p>
<p class="endtd"><a class="anchor" id="umecfgxmlconfig"></a></p>
</td></tr>
<tr>
<td>xml-config </td><td>Pathname for UM XML configuration file </td><td><p class="starttd">No config file; use UM defaults</p>
<p class="endtd"><a class="anchor" id="umecfglbmlicensefile"></a></p>
</td></tr>
<tr>
<td>lbm-license-file </td><td>Pathname for UM license file </td><td><p class="starttd">License read from environment</p>
<p class="endtd"><a class="anchor" id="umecfgwebmonitor"></a></p>
</td></tr>
<tr>
<td>web-monitor </td><td><p class="starttd">Address:port where web monitor listens. Address of '*' listens on all interfaces. Also has a single attribute, <code>permission</code>, with allowable values: <code>"read-only"</code> and <code>"read-write"</code>. Using read-only disables the text fields and buttons on a Web Monitor "debug page" that can only be enabled by Informatica Support. Example: *:15304</p>
<p>Omit this element to disable the web monitor.</p>
<p class="endtd">See <a class="elRef" doxygen="/29W/Amun/home/sford/sfordmac_DEV_HF_6_12/29West/lbm/doc/UME/design.tag:../Design/" href="../Design/fundamentalconcepts.html#webmonsecurity">Webmon Security</a> for important security information. </p>
</td><td><p class="starttd">No web monitor</p>
<p class="endtd"><a class="anchor" id="umecfgdaemonmonitor"></a></p>
</td></tr>
<tr>
<td>daemon-monitor </td><td>configuration for <a class="elRef" doxygen="/29W/Amun/home/sford/sfordmac_DEV_HF_6_12/29West/lbm/doc/UME/design.tag:../Design/" href="../Design/umobjects.html#daemonstatistics">Daemon Statistics</a>. </td></tr>
</table>
<p><br />
 </p>
<h2><a class="anchor" id="logelement"></a>
Log Element&nbsp;&nbsp;<small><a href="#logelement">&lt;-</a></small></h2>
<p>The Log Element defines how the store daemon writes log messages during operation.</p>
<p>The following table gives attributes for the <code>&lt;log&gt;</code> element:</p>
<table class="doxtable">
<tr>
<th>Attribute </th><th>Description </th><th>Default Value </th></tr>
<tr>
<td>type </td><td>One of "file", "console". </td><td>"console" </td></tr>
<tr>
<td>size </td><td>Number of millions of bytes of file size to roll log file. E.g. a value of 1 rolls after 1000000 bytes. Maximum value is 4000. Value of 0 disables rolling by file size. Only applicable for <code>type="file"</code>. </td><td>0 </td></tr>
<tr>
<td>frequency </td><td>Frequency by which to roll log file. Choices are <br />
&#160;&#160;<code>daily</code> - Roll log file at midnight. <br />
&#160;&#160;<code>hourly</code> - Roll log file after approximately an hour, but is not exact and can drift significantly over a period of time. <br />
&#160;&#160;<code>test</code> - For internal Informatica testing and should not be used. <br />
&#160;&#160;<code>disable</code> - Do not roll log file by frequency. <br />
Only applicable for <code>type="file"</code> </td><td><code>disable</code> </td></tr>
</table>
<p><br />
 </p>
<h2><a class="anchor" id="daemonmonitorelement"></a>
Daemon-monitor Element&nbsp;&nbsp;<small><a href="#daemonmonitorelement">&lt;-</a></small></h2>
<p>The daemon-monitor element configures the store daemon for <a class="elRef" doxygen="/29W/Amun/home/sford/sfordmac_DEV_HF_6_12/29West/lbm/doc/UME/design.tag:../Design/" href="../Design/umobjects.html#daemonstatistics">Daemon Statistics</a>.</p>
<p>See <a class="el" href="storedaemonstatistics.html#storedaemonstatisticsconfiguration">Store Daemon Statistics Configuration</a> for an example of configuring.</p>
<p>The following table gives attributes for the <code>&lt;daemon-monitor&gt;</code> element:</p>
<table class="doxtable">
<tr>
<th>Attribute </th><th>Description </th><th>Default Value </th></tr>
<tr>
<td>topic </td><td>topic name for used to publish daemon statistics. </td><td>umestore.monitor </td></tr>
</table>
<p>The following table presents child elements allowed in the daemon-monitor configuration section.</p>
<table class="doxtable">
<tr>
<th>Tag </th><th>Description </th><th><p class="starttd">Default Value</p>
<p class="endtd"><a class="anchor" id="dmoncfglbmconfig"></a></p>
</th></tr>
<tr>
<td>lbm-config </td><td>Optional LBM configuration file for the monitoring context. </td><td><p class="starttd">Defaults to LBM settings set by the daemon element's <a class="el" href="configurationreferenceforumestored.html#umecfglbmconfig">lbm-config element</a>.</p>
<p class="endtd"><a class="anchor" id="dmoncfgpublishinginterval"></a></p>
</td></tr>
<tr>
<td>publishing-interval </td><td>optional element which sets the interval for message publication. </td><td><p class="starttd">Defaults to not publishing.</p>
<p class="endtd"><a class="anchor" id="dmoncfgremotesnapshotrequest"></a></p>
</td></tr>
<tr>
<td>remote-snapshot-request </td><td>Controls if the daemon will respond to requests from monitoring applications. See <a class="elRef" doxygen="/29W/Amun/home/sford/sfordmac_DEV_HF_6_12/29West/lbm/doc/UME/design.tag:../Design/" href="../Design/umobjects.html#daemonstatisticsrequests">Daemon Statistics Requests</a>. </td><td><p class="starttd">Defaults to disabled.</p>
<p class="endtd"><a class="anchor" id="dmoncfgremoteconfigchangesrequest"></a></p>
</td></tr>
<tr>
<td>remote-config-changes-request </td><td>Controls if the daemon will respond to change requests from monitoring applications. See <a class="elRef" doxygen="/29W/Amun/home/sford/sfordmac_DEV_HF_6_12/29West/lbm/doc/UME/design.tag:../Design/" href="../Design/umobjects.html#daemonstatisticsrequests">Daemon Statistics Requests</a>. </td><td>Defaults to disabled. </td></tr>
</table>
<p><br />
 </p>
<h2><a class="anchor" id="publishingintervalelement"></a>
Publishing-interval Element&nbsp;&nbsp;<small><a href="#publishingintervalelement">&lt;-</a></small></h2>
<p>Element which sets the publishing intervals for desired message types. The desired message types must be listed as <code>&lt;group&gt;</code> sub-elements of the <code>&lt;publishing-interval&gt;</code> element.</p>
<p>See <a class="el" href="storedaemonstatistics.html#storedaemonstatisticsconfiguration">Store Daemon Statistics Configuration</a> for an example of configuring.</p>
<p>The following table presents child elements allowed in the daemon-monitor configuration section.</p>
<table class="doxtable">
<tr>
<th>Tag </th><th>Description </th><th><p class="starttd">Default Value</p>
<p class="endtd"><a class="anchor" id="dmoncfggroup"></a></p>
</th></tr>
<tr>
<td>group </td><td>Identifies the grouping of message type(s) and their publishing intervals. </td><td>Any grouping of message type(s) not listed default to not publishing. </td></tr>
</table>
<p><br />
 </p>
<h2><a class="anchor" id="groupelement"></a>
Group Element&nbsp;&nbsp;<small><a href="#groupelement">&lt;-</a></small></h2>
<p>The group element identifies the grouping of message type(s) and their publishing interval.</p>
<p>The following table gives attributes for the <code>&lt;group&gt;</code> element:</p>
<table class="doxtable">
<tr>
<th>Attribute </th><th>Description </th><th>Default Value </th></tr>
<tr>
<td>name </td><td>one of the following: <ul>
<li>
<code>"default"</code> - sets a default interval for all message types. </li>
<li>
<code>"store"</code> - sets the interval for messages of type <a class="elRef" doxygen="/29W/Amun/home/sford/sfordmac_DEV_HF_6_12/29West/lbm/doc/UME/api.tag:../API/" href="../API/umedmonmsgs_8h.html#aeeb55ed0b759e6316cdedc3c990dfe26">umestore_store_dmon_stat_msg_t</a>. </li>
<li>
<code>"source"</code> - sets the interval for messages of type <a class="elRef" doxygen="/29W/Amun/home/sford/sfordmac_DEV_HF_6_12/29West/lbm/doc/UME/api.tag:../API/" href="../API/umedmonmsgs_8h.html#a88ce572fd35203194ada676661d2f54b">umestore_repo_dmon_stat_msg_t</a>. </li>
<li>
<code>"receiver"</code> - sets the interval for messages of type <a class="elRef" doxygen="/29W/Amun/home/sford/sfordmac_DEV_HF_6_12/29West/lbm/doc/UME/api.tag:../API/" href="../API/umedmonmsgs_8h.html#a3829efae398d994795fb395097626709">umestore_rcv_dmon_stat_msg_t</a>. </li>
<li>
<code>"disk"</code> - sets the interval for messages of type <a class="elRef" doxygen="/29W/Amun/home/sford/sfordmac_DEV_HF_6_12/29West/lbm/doc/UME/api.tag:../API/" href="../API/umedmonmsgs_8h.html#a3ed32f1017abda98dbac7f228d7c506b">umestore_disk_dmon_stat_msg_t</a>. </li>
<li>
<code>"config"</code> - sets the interval for messages of types <code>umestore_*_dmon_config_msg_t</code>. </li>
<li>
<code>"memory"</code> - sets the interval for messages of type <a class="elRef" doxygen="/29W/Amun/home/sford/sfordmac_DEV_HF_6_12/29West/lbm/doc/UME/api.tag:../API/" href="../API/umedmonmsgs_8h.html#a0f08c3244acc64f54edb6e5897477121">umestore_smart_heap_dmon_stat_msg_t</a>. </li>
</ul>
</td><td>Required attribute (no default). </td></tr>
<tr>
<td>ivl </td><td>Time interval in seconds. </td><td>Required attribute (no default) </td></tr>
</table>
<p><br />
 </p>
<h1><a class="anchor" id="storeselement"></a>
Stores Element&nbsp;&nbsp;<small><a href="#storeselement">&lt;-</a></small></h1>
<p>The Stores Element is a container for individual store elements which define specific store instances. The below is an example of a Stores Element.</p>
<pre class="fragment">  &lt;stores&gt;
    &lt;store name="test-store-1" port="14567"&gt;
      &lt;ume-attributes&gt; ... &lt;/ume-attributes&gt;
      &lt;topics&gt;
        &lt;topic pattern="quote.*" type="PCRE"&gt;
          &lt;ume-attributes&gt; ... &lt;/ume-attributes&gt;
        &lt;/topic&gt;
        &lt;topic pattern="subject.*" type="PCRE"&gt;
          &lt;ume-attributes&gt; ... &lt;/ume-attributes&gt;
        &lt;/topic&gt;
      &lt;/topics&gt;
    &lt;/store&gt;
    &lt;store name="test-store-2" port="14568"&gt;
      &lt;ume-attributes&gt; ... &lt;/ume-attributes&gt;
      &lt;topics&gt;
        &lt;topic pattern="issue.*" type="PCRE"&gt;
          &lt;ume-attributes&gt; ... &lt;/ume-attributes&gt;
        &lt;/topic&gt;
        &lt;topic pattern="topic.*" type="PCRE"&gt;
          &lt;ume-attributes&gt; ... &lt;/ume-attributes&gt;
        &lt;/topic&gt;
      &lt;/topics&gt;
    &lt;/store&gt;
  &lt;/stores&gt;
</pre><p><br />
 </p>
<h2><a class="anchor" id="storeelement"></a>
Store Element&nbsp;&nbsp;<small><a href="#storeelement">&lt;-</a></small></h2>
<p>The Store Element contains information about an individual store and has attributes, options and topics. See the example below.</p>
<pre class="fragment">  &lt;store name="test-store-1" port="14567"&gt;
    &lt;ume-attributes&gt; ... &lt;/ume-attributes&gt;
    &lt;topics&gt;
      &lt;topic pattern="quote.*" type="PCRE"&gt;
        &lt;ume-attributes&gt; ... &lt;/ume-attributes&gt;
      &lt;/topic&gt;
      &lt;topic pattern="subject.*" type="PCRE"&gt;
        &lt;ume-attributes&gt; ... &lt;/ume-attributes&gt;
      &lt;/topic&gt;
    &lt;/topics&gt;
  &lt;/store&gt;
</pre><p>The following table gives attributes for the <code>&lt;store&gt;</code> element:</p>
<table class="doxtable">
<tr>
<th>Attribute </th><th>Description </th><th><p class="starttd">Default Value</p>
<p class="endtd"></p>
</th></tr>
<tr>
<td>name </td><td>Name that identifies log messages for this store in the umestored log file. </td><td><p class="starttd">None—this is a required attribute</p>
<p class="endtd"></p>
</td></tr>
<tr>
<td>port </td><td>TCP port where umestored should listen for connection requests to this store. </td><td><p class="starttd">None—this is a required attribute</p>
<p class="endtd"></p>
</td></tr>
<tr>
<td>interface </td><td>Specifies the IP address over which umestored accepts connection requests for this store. You can specify a single IP address, such as 10.29.3.16, or a range of addresses, 10.29.3.16/25. See also <a class="el" href="persistencearchitecture.html#identifyingpersistentstores">Identifying Persistent Stores</a> </td><td>0.0.0.0 (INADDR_ANY) </td></tr>
</table>
<p><b>Child Elements of the Store Element</b></p>
<p>The following table gives the child elements allowed in the store configuration section:</p>
<table class="doxtable">
<tr>
<th>Child Element </th><th>Description </th><th><p class="starttd">Default Value</p>
<p class="endtd"><a class="anchor" id="umecfgtopics"></a></p>
</th></tr>
<tr>
<td>topics </td><td>A container for topic elements. See <a class="el" href="configurationreferenceforumestored.html#topicselement">Topics Element</a> for more information. </td><td><p class="starttd">None</p>
<p class="endtd"><a class="anchor" id="umecfgumeattributes"></a></p>
</td></tr>
<tr>
<td>ume-attributes </td><td>A container for option elements. See <a class="el" href="configurationreferenceforumestored.html#optionsforastoresumeattributeselement">Options for a Store's ume-attributes Element</a> for more information. </td><td><p class="starttd">None</p>
<p class="endtd"><a class="anchor" id="storecfgpublishinginterval"></a></p>
</td></tr>
<tr>
<td>publishing-interval </td><td>optional element which sets the interval for message publication. </td><td>Defaults to not publishing. </td></tr>
</table>
<p><a class="anchor" id="optionsforastoresumeattributeselement"></a><b>Options for a Store's ume-attributes Element</b></p>
<p>Inside a '<code>&lt;ume-attributes&gt;</code>' section, options are set with one or more '<code>&lt;option ...&gt;</code>' elements. Each '<code>&lt;option ...&gt;</code>' element contains a '<code>type'</code> attribute, a '<code>name</code>' attribute, and a '<code>value</code>' attribute. The '<code>type</code>' attribute identifies the scope of the option (context, receiver, source, or store), the '<code>name</code>' attribute identifies the individual option being set, and the '<code>value</code>' attribute supplies the value.</p>
<p><b>Options for UM</b></p>
<p>Options with a type of "lbm-source", "lbm-receiver", or "lbm-context" are UM configuration options, which the store passes to the UM library.</p>
<p>For example, the option element: <br />
<code>&lt;option type="lbm-context" name="transport_lbtrm_receiver_socket_buffer" value="1048576"/&gt;</code> <br />
sets the UM configuration option <a class="elRef" doxygen="/29W/Amun/home/sford/sfordmac_DEV_HF_6_12/29West/lbm/doc/UME/config.tag:../Config/" href="../Config/grptransportlbtrmreliability.html#transportlbtrmreceiversocketbuffercontext">transport_lbtrm_receiver_socket_buffer (context)</a> (receiver socket buffer size for LBT-RM) to 1 megabyte.</p>
<p>See the <a href="../Config/index.html">UM Configuration Guide</a> for the full list of UM configuration options.</p>
<dl class="section note"><dt>Note</dt><dd>Some UM options specify interfaces, which can be done by supplying the device name of the interface. Special care must be taken when supplying device names. See <a class="elRef" doxygen="/29W/Amun/home/sford/sfordmac_DEV_HF_6_12/29West/lbm/doc/UME/config.tag:../Config/" href="../Config/generalconfigurationguidelines.html#interfacedevicenamesandxml">Interface Device Names and XML</a> for details.</dd></dl>
<p><b>Store Options</b></p>
<p>Store options without a type attribute or those explicitly given a type attribute of '<code>store</code>' simply configure the store itself.</p>
<p>For example, the option element: <br />
<code>&lt;option type="store" name="disk-cache-directory" value="cache"/&gt;</code> <br />
sets the store's disk cache directory.</p>
<p>The following table gives options allowed for a store element. Use the '<code>store</code>' option type for these options.</p>
<table class="doxtable">
<tr>
<td>Option </td><td>Description </td><td><p class="starttd">Default Value</p>
<p class="endtd"><a class="anchor" id="umecfgdiskcachedirectory"></a></p>
</td></tr>
<tr>
<td>disk-cache-directory </td><td>Pathname for disk store message cache directory. Must be between 1 and 230 characters long. </td><td><p class="starttd">umestored-cache</p>
<p class="endtd"><a class="anchor" id="umecfgdiskstatedirectory"></a></p>
</td></tr>
<tr>
<td>disk-state-directory </td><td>Pathname for disk store state directory. Must be between 1 and 230 characters long. </td><td><p class="starttd">umestored-state</p>
<p class="endtd"><a class="anchor" id="umecfgallowproxysource"></a></p>
</td></tr>
<tr>
<td>allow-proxy-source </td><td>Allows the store to act as a proxy source in case a registered source terminates. </td><td><p class="starttd">0 (Disable)</p>
<p class="endtd"><a class="anchor" id="umecfgcontextname"></a></p>
</td></tr>
<tr>
<td>context-name </td><td>Name of the store that can be used by sources to refer to the store instead of the address:port. Restricted to 128 characters in length, and may contain only alphanumeric characters, hyphens, and underscores. A store runs in its own context, so the store's context name can be used to identify the store. UM automatically resolves store names, which can facilitate persistent operation across the UM Router. A context name must be unique across the entire network and not be the same as any context names used in a UMM XML configuration. See also <a class="el" href="persistencearchitecture.html#identifyingpersistentstores">Identifying Persistent Stores</a> </td><td><p class="starttd">None.</p>
<p class="endtd"><a class="anchor" id="umecfgretransmissionrequestprocessingrate"></a></p>
</td></tr>
<tr>
<td>retransmission-request-processing-rate </td><td>Specifies the number of retransmission requests processed by a store per second across all topics. The store drops all retransmission requests that exceed this value. </td><td>262144 </td></tr>
</table>
<p><br />
 </p>
<h2><a class="anchor" id="topicselement"></a>
Topics Element&nbsp;&nbsp;<small><a href="#topicselement">&lt;-</a></small></h2>
<p>The Topics element is a container element for all the topics persisted by the UM store. It is one of the two child elements of the Store Element. See the example below:</p>
<pre class="fragment">  &lt;topics&gt;
    &lt;topic pattern="issue.*" type="PCRE"&gt;
      &lt;ume-attributes&gt; ... &lt;/ume-attributes&gt;
    &lt;/topic&gt;
    &lt;topic pattern="topic.*" type="PCRE"&gt;
      &lt;ume-attributes&gt; ... &lt;/ume-attributes&gt;
    &lt;/topic&gt;
  &lt;/topics&gt;
</pre><p><br />
 </p>
<h2><a class="anchor" id="topicelement"></a>
Topic Element&nbsp;&nbsp;<small><a href="#topicelement">&lt;-</a></small></h2>
<p>The Topic Element defines an individual topic persisted on the store.</p>
<p>The following table gives attributes for the <code>&lt;topic&gt;</code> element:</p>
<table class="doxtable">
<tr>
<th>Attribute </th><th>Description </th><th><p class="starttd">Default Value</p>
<p class="endtd"><a class="anchor" id="umecfgpattern"></a></p>
</th></tr>
<tr>
<td>pattern </td><td>Specifies a pattern used to select topics for which a store provides persistence services. </td><td><p class="starttd">None—this is a required attribute</p>
<p class="endtd"><a class="anchor" id="umecfgtype"></a></p>
</td></tr>
<tr>
<td>type </td><td>Specifies the type of matching to be performed on the pattern attribute. A value of <code>direct</code> selects an exact string match. A value of <code>PCRE</code> selects a Perl Compatible Regular Expression match. A value of <code>regexp</code> selects a POSIX extended regular expression. <b>The <code>regexp</code> selection is deprecated.</b> </td><td><code>direct</code> </td></tr>
</table>
<p>The Topic Element has one child element, ume-attributes, the options for which appear in Options for a Topic's ume-attributes Element.</p>
<p><b>Options for a Topic's ume-attributes Element</b></p>
<p>As with <a class="el" href="configurationreferenceforumestored.html#optionsforastoresumeattributeselement">Options for a Store's ume-attributes Element</a>, options for a topic's ume-attributes element can set both UM configuration options as well as store configuration.</p>
<p>The following table gives options allowed for a topic element. Use the store Option Type for these options.</p>
<table class="doxtable">
<tr>
<th>Option </th><th>Description </th><th><p class="starttd">Default Value</p>
<p class="endtd"><a class="anchor" id="umecfgretransmissionrequestforwarding"></a></p>
</th></tr>
<tr>
<td>retransmission-request-forwarding </td><td>If enabled (value = 1), the store forwards retransmission requests to sources if and only if the store does not have the data. If disabled (value = 0), the store services retransmission requests for data it has, and does not forward requests to sources for data it does not have. </td><td><p class="starttd">0 (store services retransmission requests and does not forward requests)</p>
<p class="endtd"><a class="anchor" id="umecfgrepositorytype"></a></p>
</td></tr>
<tr>
<td>repository-type </td><td>Specifies how messages should be retained by the store. Possible values: <ul>
<li>
<code>"no-cache"</code> does not retain messages, only state information. </li>
<li>
<code>"memory"</code> retains messages only in the (presumably volatile) main memory of the store. </li>
<li>
<code>"disk"</code> retains messages to (presumably non-volatile) disk storage as quickly as possible. In addition, messages are cached in main memory for a time as well. </li>
<li>
<code>"reduced-fd"</code> retains messages in disk storage using significantly fewer File Descriptors. Use of this repository type may impact performance. (See <a class="el" href="persistencearchitecture.html#persistentstorearchitecture">Persistent Store Architecture</a>.) The <code>"reduced-fd"</code> disk storage option is not available on Microsoft Windows. </li>
</ul>
</td><td><p class="starttd"><code>"no-cache"</code></p>
<p class="endtd"><a class="anchor" id="umecfgrepositorysizethreshold"></a></p>
</td></tr>
<tr>
<td>repository-size-threshold </td><td>For topics with a repository-type of memory, disk or reduced-fd, specifies the minimum number of message bytes (includes payload, headers, and store structure overhead) retained for a topic before the repository starts to delete old messages. Pertains to a memory store or the memory cache of a disk or reduced-fd repository. For RPP repositories, this value only includes message payload. Also for RPP, the source may optionally override this value with a value less than or equal with the source configuration option <a class="elRef" doxygen="/29W/Amun/home/sford/sfordmac_DEV_HF_6_12/29West/lbm/doc/UME/config.tag:../Config/" href="../Config/grpultramessagingpersistence.html#umerepositorysizethresholdsource">ume_repository_size_threshold (source)</a>. (units: bytes) </td><td><p class="starttd">25165824 (24 MB)</p>
<p class="endtd"><a class="anchor" id="umecfgrepositorysizelimit"></a></p>
</td></tr>
<tr>
<td>repository-size-limit </td><td>For topics with a repository-type of memory, disk or reduced-fd, specifies the maximum number of message bytes (includes payload, headers, and store structure overhead) retained for each source. Pertains to a memory store or the memory cache of a disk or reduced-fd repository. For RPP repositories, this value only includes message payload. Also for RPP, the source may optionally override this value with a value less than or equal with the source configuration option <a class="elRef" doxygen="/29W/Amun/home/sford/sfordmac_DEV_HF_6_12/29West/lbm/doc/UME/config.tag:../Config/" href="../Config/grpultramessagingpersistence.html#umerepositorysizelimitsource">ume_repository_size_limit (source)</a> (units: bytes) </td><td><p class="starttd">50331648 (48 MB)</p>
<p class="endtd"><a class="anchor" id="umecfgrepositoryagethreshold"></a></p>
</td></tr>
<tr>
<td>repository-age-threshold </td><td>For topics with a repository-type of memory, disk or reduced-fd, specifies how long the repository keeps a message available. Pertains to a memory store or the memory cache of a disk or reduced-fd repository. The repository reclaims space used to store messages that exceed this threshold. A value of 0 means message age is not considered in retention decisions. (units: seconds) </td><td><p class="starttd">0</p>
<p class="endtd"><a class="anchor" id="umecfgrepositorydiskmaxasynccbs"></a></p>
</td></tr>
<tr>
<td>repository-disk-max-async-cbs </td><td>For topics with a repository-type of disk or reduced-fd, specifies the maximum number of outstanding async I/O callbacks for reading and writing messages to disk. (units: async callbacks) </td><td><p class="starttd">16 callbacks</p>
<p class="endtd"><a class="anchor" id="umecfgrepositorydiskmaxwriteasynccbs"></a></p>
</td></tr>
<tr>
<td>repository-disk-max-write-async-cbs </td><td>For topics with a <a class="el" href="configurationreferenceforumestored.html#umecfgrepositorytype">repository-type</a> of disk or reduced-fd, specifies the maximum number of outstanding async I/O callbacks for writing messages to disk. Reducing this option can improve throughput by batching more fragments into a single write. (units: async callbacks) This option is deprecated. </td><td><p class="starttd">16 callbacks</p>
<p class="endtd"><a class="anchor" id="umecfgrepositorydiskmaxreadasynccbs"></a></p>
</td></tr>
<tr>
<td>repository-disk-max-read-async-cbs </td><td>For topics with a <a class="el" href="configurationreferenceforumestored.html#umecfgrepositorytype">repository-type</a> of disk or reduced-fd, specifies the maximum number of outstanding async I/O callbacks for reading messages from disk. Raising this value can improve recovery rates. For topics with a <a class="el" href="configurationreferenceforumestored.html#umecfgrepositorytype">repository-type</a> of reduced-fd, Informatica recommends a value of 200 times the number of expected receivers per topic. (units: async callbacks) </td><td><p class="starttd">16 callbacks</p>
<p class="endtd"><a class="anchor" id="umecfgrepositorydiskfilesizelimit"></a></p>
</td></tr>
<tr>
<td>repository-disk-file-size-limit </td><td>For topics with a <a class="el" href="configurationreferenceforumestored.html#umecfgrepositorytype">repository-type</a> of disk or reduced-fd, specifies the maximum amount of disk space that will be used to store retained messages. A minimum value of 196992 is enforced. For RPP, the source may optionally override this value with a value less than or equal with the source configuration option <a class="elRef" doxygen="/29W/Amun/home/sford/sfordmac_DEV_HF_6_12/29West/lbm/doc/UME/config.tag:../Config/" href="../Config/grpultramessagingpersistence.html#umerepositorydiskfilesizelimitsource">ume_repository_disk_file_size_limit (source)</a>. (units: bytes) </td><td><p class="starttd">104857600 (100 MB)</p>
<p class="endtd"><a class="anchor" id="umecfgrepositorydiskfilepreallocate"></a></p>
</td></tr>
<tr>
<td>repository-disk-file-preallocate </td><td>For topics with a <a class="el" href="configurationreferenceforumestored.html#umecfgrepositorytype">repository-type</a> of disk, if set to 1, UM pre-allocates a store's cache files to match their maximum size on disk (as configured by repository-disk-file-size-limit) upon creation, as opposed to growing to that size as the store receives new messages. For ext3/4 and NTFS file systems, this options creates a sparse file, which does not allocate all of the underlying data blocks. Advantages of pre-allocation include better performance on rotating disks due to less file fragmentation, and knowing that enough disk space exists for any new source that registers. Disadvantage is the time to create the cache files, especially if many sources register at once. </td><td><p class="starttd">0 (zero) - do not pre-allocate</p>
<p class="endtd"><a class="anchor" id="umecfgrepositorydiskasyncbufferlength"></a></p>
</td></tr>
<tr>
<td>repository-disk-async-buffer-length </td><td>For topics with a <a class="el" href="configurationreferenceforumestored.html#umecfgrepositorytype">repository-type</a> of disk or reduced-fd, specifies the size of the buffers that will be used in async I/O operations for reading and writing messages to disk. A minimum value of 65664 is enforced. (units: bytes) </td><td><p class="starttd">1024000</p>
<p class="endtd"><a class="anchor" id="umecfgrepositorydiskmessagechecksum"></a></p>
</td></tr>
<tr>
<td>repository-disk-message-checksum </td><td>For topics with a <a class="el" href="configurationreferenceforumestored.html#umecfgrepositorytype">repository-type</a> of disk or reduced-fd, specifies whether the messages saved to disk should include a checksum field or not for validation if the store is restarted. (units: flag) </td><td><p class="starttd">0 (disabled)</p>
<p class="endtd"><a class="anchor" id="umecfgsourceactivitytimeout"></a></p>
</td></tr>
<tr>
<td>source-activity-timeout </td><td>Establishes the period of time from a source's last activity to the release of the source's RegID. Stores return an error to any new source requesting the source's RegID during this period. If proxy sources are enabled (<a class="elRef" doxygen="/29W/Amun/home/sford/sfordmac_DEV_HF_6_12/29West/lbm/doc/UME/config.tag:../Config/" href="../Config/grpultramessagingpersistence.html#umeproxysourcesource">ume_proxy_source (source)</a>) the store does not release the source's RegID and UM elects a proxy source. If neither proxy sources nor <a class="elRef" doxygen="/29W/Amun/home/sford/sfordmac_DEV_HF_6_12/29West/lbm/doc/UME/config.tag:../Config/" href="../Config/grpultramessagingpersistence.html#umestatelifetimesource">ume_state_lifetime (source)</a> are configured, the store also deletes the source's state and cache. Can be overridden by <a class="elRef" doxygen="/29W/Amun/home/sford/sfordmac_DEV_HF_6_12/29West/lbm/doc/UME/config.tag:../Config/" href="../Config/grpultramessagingpersistence.html#umeactivitytimeoutsource">ume_activity_timeout (source)</a>. See also <a class="el" href="persistencefaulttolerance.html#persistenceproxysources">Persistence Proxy Sources</a>. (units: milliseconds) </td><td><p class="starttd">30000 (30 seconds)</p>
<p class="endtd"><a class="anchor" id="umecfgsourcestatelifetime"></a></p>
</td></tr>
<tr>
<td>source-state-lifetime </td><td>Establishes the period of time from a source's last activity to the deletion of the source's state and cache by the store, regardless of whether a proxy source has been created or not. You can also configure <a class="elRef" doxygen="/29W/Amun/home/sford/sfordmac_DEV_HF_6_12/29West/lbm/doc/UME/config.tag:../Config/" href="../Config/grpultramessagingpersistence.html#umestatelifetimesource">ume_state_lifetime (source)</a> for the source. The store uses whichever is shorter. See also <a class="el" href="persistencefaulttolerance.html#persistenceproxysources">Persistence Proxy Sources</a>. (units: milliseconds) </td><td><p class="starttd">0 (zero)</p>
<p class="endtd"><a class="anchor" id="umecfgreceiveractivitytimeout"></a></p>
</td></tr>
<tr>
<td>receiver-activity-timeout </td><td>Establishes the period of time from a receiver's last activity to the release of the receiver's RegID. Stores return an error to any new request for the receiver's RegID during this period. Can be overridden by <a class="elRef" doxygen="/29W/Amun/home/sford/sfordmac_DEV_HF_6_12/29West/lbm/doc/UME/config.tag:../Config/" href="../Config/grpultramessagingpersistence.html#umeactivitytimeoutsource">ume_activity_timeout (source)</a>. See also <a class="el" href="persistencefaulttolerance.html#persistenceproxysources">Persistence Proxy Sources</a>. (units: milliseconds) </td><td><p class="starttd">30000 (30 seconds)</p>
<p class="endtd"><a class="anchor" id="umecfgreceiverstatelifetime"></a></p>
</td></tr>
<tr>
<td>receiver-state-lifetime </td><td>Establishes the period of time from a receiver's last activity to the deletion of the receiver's state and cache by the store. You can also configure <a class="elRef" doxygen="/29W/Amun/home/sford/sfordmac_DEV_HF_6_12/29West/lbm/doc/UME/config.tag:../Config/" href="../Config/grpultramessagingpersistence.html#umestatelifetimereceiver">ume_state_lifetime (receiver)</a> for the receiver. The store uses whichever is shorter. See also <a class="el" href="persistencefaulttolerance.html#persistenceproxysources">Persistence Proxy Sources</a>. (units: milliseconds) </td><td><p class="starttd">0 (zero)</p>
<p class="endtd"><a class="anchor" id="umecfgsourcecheckinterval"></a></p>
</td></tr>
<tr>
<td>source-check-interval </td><td>Specifies how often a store will check for activity of sources and receivers. (units: milliseconds) </td><td><p class="starttd">750 (750 milliseconds)</p>
<p class="endtd"><a class="anchor" id="umecfgkeepaliveinterval"></a></p>
</td></tr>
<tr>
<td>keepalive-interval </td><td>Specifies how often a store will generate keepalive traffic to sources and receivers if there has been no traffic required in the normal course of operation. (units: milliseconds) </td><td><p class="starttd">3000 (3 seconds)</p>
<p class="endtd"><a class="anchor" id="umecfgreceivernewregistrationrollback"></a></p>
</td></tr>
<tr>
<td>receiver-new-registration-rollback </td><td>Specifies the number of stabilized messages that a newly registered receiver should consume. For example, setting this to 10 "rolls back" the new receiver's starting message to the 10th most recent message. This value must be positive and less than 2147483648. The recommended value of 2147483647 indicates that the rollback should begin at the start of the stream. A value of 0 indicates the store should instruct the receivers to start with the next new message from the source known by the store. (units: messages) </td><td><p class="starttd">2147483647 (rollback starts at beginning of stream)</p>
<p class="endtd"><a class="anchor" id="umecfgproxyelectioninterval"></a></p>
</td></tr>
<tr>
<td>proxy-election-interval </td><td>Specifies the interval, in milliseconds, used when electing a proxy source. When a source, which requested that a proxy source be provided for it, has been detected as no longer active, each store eligible to provide a proxy source for it waits for an amount of time which is randomized in the range [0.5*proxy-election-interval .. 1.5*proxy-election-interval]. If no other store has been elected to serve as the proxy source, the store declares itself as the proxy source. (units: milliseconds) </td><td><p class="starttd">60,000 (60 seconds)</p>
<p class="endtd"><a class="anchor" id="umecfgstabilityackinterval"></a></p>
</td></tr>
<tr>
<td>stability-ack-interval </td><td>Specifies the maximum amount of time that stability acknowledgments will be batched before being sent to a source. Batching stability ACKs can increase throughput of stores (especially memory stores) significantly, but introduces a delay between when a message is actually stable in the store and when the source is notified of message stability. (units: milliseconds) </td><td><p class="starttd">200 (200 milliseconds)</p>
<p class="endtd"><a class="anchor" id="umecfgstabilityackminimumnumber"></a></p>
</td></tr>
<tr>
<td>stability-ack-minimum-number </td><td>Specifies the minimum number of message stability acknowledgments that must accumulate before a stability ACK is sent to a source. With the default value of 1, stability ACKs are sent immediately as soon as messages are stable. Increasing this value causes stability ACKs to be batched, which can increase throughput of stores (especially memory stores) significantly, but introduces a delay between when a message is actually stable in the store and when the source is notified of message stability. If using a stability ACK-based flight size on a persistent source in combination with this option, it is advisable to make sure stability-ack-minimum-number is set less than or equal to the source's flight size. Otherwise, stability ACKs will only be sent upon expiration of the <a class="el" href="configurationreferenceforumestored.html#umecfgstabilityackinterval">stability-ack-interval</a> timer, resulting in bursty stop-and-go sending. (units: number of message fragments) </td><td><p class="starttd">1 (1 fragment)</p>
<p class="endtd"><a class="anchor" id="umecfgrepositoryallowreceiverpacedpersistence"></a></p>
</td></tr>
<tr>
<td>repository-allow-receiver-paced-persistence </td><td>Specifies if the repository allows receiver-paced persistence (1). If allowed, the source may optionally request RPP with <a class="elRef" doxygen="/29W/Amun/home/sford/sfordmac_DEV_HF_6_12/29West/lbm/doc/UME/config.tag:../Config/" href="../Config/grpultramessagingpersistence.html#umereceiverpacedpersistencesource">ume_receiver_paced_persistence (source)</a>. Both must be done for RPP to be in effect. </td><td><p class="starttd">0 (store does not allow the source to specify RPP)</p>
<p class="endtd"><a class="anchor" id="umecfgrepositoryallowackonreception"></a></p>
</td></tr>
<tr>
<td>repository-allow-ack-on-reception </td><td>For RPP, specifies if the repository allows the repository to perform "ack on reception" (1). If allowed, the source may optionally request "ack on reception" with <a class="elRef" doxygen="/29W/Amun/home/sford/sfordmac_DEV_HF_6_12/29West/lbm/doc/UME/config.tag:../Config/" href="../Config/grpultramessagingpersistence.html#umerepositoryackonreceptionsource">ume_repository_ack_on_reception (source)</a>. Both must be done for "ack on reception" to be in effect. For SPP and memory stores, this option has no effect. See <a class="el" href="operationalview.html#rppnormaloperation">RPP Normal Operation</a> for more information. </td><td><p class="starttd">0 (store does not allow the source to specify ack-on-reception behavior)</p>
<p class="endtd"><a class="anchor" id="umecfgrepositorydiskwritedelay"></a></p>
</td></tr>
<tr>
<td>repository-disk-write-delay </td><td>For topics with a repository-type of disk or reduced-fd, specifies the maximum delay in milliseconds after message reception before the repository persists a message to disk. For RPP, the source may optionally override this value with a value less than or equal with the source configuration option <a class="elRef" doxygen="/29W/Amun/home/sford/sfordmac_DEV_HF_6_12/29West/lbm/doc/UME/config.tag:../Config/" href="../Config/grpultramessagingpersistence.html#umewritedelaysource">ume_write_delay (source)</a>. (units: milliseconds) </td><td><p class="starttd">0 milliseconds</p>
<p class="endtd"><a class="anchor" id="umecfgsourceflightsizebytesmaximum"></a></p>
</td></tr>
<tr>
<td>source-flight-size-bytes-maximum </td><td>With RPP, specifies the maximum number of in-flight payload bytes that the source is allowed to configure with <a class="elRef" doxygen="/29W/Amun/home/sford/sfordmac_DEV_HF_6_12/29West/lbm/doc/UME/config.tag:../Config/" href="../Config/grpultramessagingpersistence.html#umeflightsizebytessource">ume_flight_size_bytes (source)</a>. If the source attempts to configure <a class="elRef" doxygen="/29W/Amun/home/sford/sfordmac_DEV_HF_6_12/29West/lbm/doc/UME/config.tag:../Config/" href="../Config/grpultramessagingpersistence.html#umeflightsizebytessource">ume_flight_size_bytes (source)</a> greater than the store's <a class="el" href="configurationreferenceforumestored.html#umecfgsourceflightsizebytesmaximum">source-flight-size-bytes-maximum</a>, the source registration is rejected. For SPP stores, this option has no effect (i.e. the source is not restricted in its configuration). See <a class="el" href="operationalview.html#persistenceflightsize">Persistence Flight Size</a> for more information. (units: bytes) </td><td>4194304 bytes (4MB) </td></tr>
</table>
<p><br />
 </p>
<h1><a class="anchor" id="optiontypesforumeattributeselements"></a>
Option Types for ume-attributes Elements&nbsp;&nbsp;<small><a href="#optiontypesforumeattributeselements">&lt;-</a></small></h1>
<p>As mentioned in <a class="el" href="configurationreferenceforumestored.html#optionsforastoresumeattributeselement">Options for a Store's ume-attributes Element</a>, all options configured for '<code>&lt;ume-attributes&gt;</code>' require an '<code>&lt;option&gt;</code>' type, which specifies the scope of the option.</p>
<p>For example, here is a store configuration which illustrates several options being set of varying types:</p>
<pre class="fragment">&lt;?xml version="1.0"?&gt;
  &lt;stores&gt;
    &lt;store name="test-store" port="14567"&gt;
      &lt;ume-attributes&gt;
        &lt;option type="store" name="disk-cache-directory" value="cache"/&gt;
            &lt;option type="lbm-context" name="transport_lbtrm_rate_interval" value="100"&gt;
      &lt;/ume-attributes&gt;
      &lt;topics&gt;
        &lt;topic pattern="test.*" type="PCRE"&gt;
          &lt;ume-attributes&gt;
            &lt;option type="lbm-receiver" name="transport_lbtrm_send_naks" value="0"&gt;
            &lt;option type="lbm-source" name="transport" value="lbtru"&gt;
            &lt;option type="store" name="repository-size-limit" value="209715200"/&gt;
          &lt;/ume-attributes&gt;
        &lt;/topic&gt;
      &lt;/topics&gt;
    &lt;/store&gt;
  &lt;/stores&gt;
</pre><p>The following table describes the Option Types:</p>
<table class="doxtable">
<tr>
<th>Option Type </th><th>Description </th><th><p class="starttd">Default Value</p>
<p class="endtd"><a class="anchor" id="umecfglbmreceiver"></a></p>
</th></tr>
<tr>
<td>lbm-receiver </td><td>Allows you to configure receiver-scope options that you usually specify in an Ultra Messaging configuration file or set using lbm_*_attr_setopt(). For example, you could turn off delivery of NAKs for a particular topic by including the following within the topic's '<code>&lt;ume-attributes&gt;</code>' element: <br />
<code>&lt;option type="lbm-receiver" name="transport_lbtrm_send_naks" value="0"&gt;</code> <br />
'<code>&lt;option&gt;</code>' is a child of '<code>&lt;ume-attributes&gt;'</code>, but you can use option type lbm-receiver within only a '<code>&lt;topic&gt;</code>' element, not a '<code>&lt;store&gt;</code>' element. </td><td><p class="starttd">None - this is a required attribute.</p>
<p class="endtd"><a class="anchor" id="umecfglbmcontext"></a></p>
</td></tr>
<tr>
<td>lbm-context </td><td>Allows you to configure context-scope options that you usually specify in an Ultra Messaging configuration file or set using lbm_*_attr_setopt(). For example, you could increase the receiver socket buffer by including the following within the '<code>&lt;ume-attributes&gt;</code>' element: <br />
<code>&lt;option type="lbm-context" name="transport_lbtrm_receiver_socket_buffer" value="1048576"&gt;</code> <br />
'<code>&lt;option&gt;</code>' is a child of '<code>&lt;ume-attributes&gt;</code>', but you can use option type lbm-receiver within only a '<code>&lt;store&gt;</code>' element, not a '<code>&lt;topic&gt;</code>' element. </td><td><p class="starttd">None - this is a required attribute.</p>
<p class="endtd"><a class="anchor" id="umecfglbmsource"></a></p>
</td></tr>
<tr>
<td>lbm-source </td><td>Allows you to configure source-scope options that you usually specify in an Ultra Messaging configuration file or set using lbm_*_attr_setopt(). For example, you could change the transport by including the following within the '<code>&lt;ume-attributes&gt;</code>' element: <br />
<code>&lt;option type="lbm-source" name="transport" value="lbtru"&gt;</code> <br />
'<code>&lt;option&gt;</code>' is a child of '<code>&lt;ume-attributes&gt;</code>', but you can use option type lbm-source within only a '<code>&lt;topic&gt;</code>' element, not a '<code>&lt;store&gt;</code>' element. </td><td><p class="starttd">None - this is a required attribute.</p>
<p class="endtd"><a class="anchor" id="umecfgstore"></a></p>
</td></tr>
<tr>
<td>store </td><td>Option type used for all ume-attributes configured for the store element and its topic element. </td><td>None - this is a required attribute. </td></tr>
</table>
<p><br />
 </p>
<h1><a class="anchor" id="umestoredconfigurationdtd"></a>
umestored Configuration DTD&nbsp;&nbsp;<small><a href="#umestoredconfigurationdtd">&lt;-</a></small></h1>
<p>The DTD for UM Store configuration has evolved over time:</p>
<table class="doxtable">
<tr>
<th>DTD Version </th><th>Release Date </th><th>Product Version </th><th>Supported Features </th></tr>
<tr>
<td>1.0 </td><td>Feb. 2007 </td><td>UME 1.0 </td><td>Persistent Stores </td></tr>
<tr>
<td>1.1 </td><td>April 2010 </td><td>UME 3.0.1 / UMQ 1.0 </td><td>Persistent Stores, Queues and Ultra Load Balancing (ULB) </td></tr>
<tr>
<td>1.2 </td><td>March 2011 </td><td>UME 3.2 / UMQ 2.1 </td><td>Persistent Stores, Queues, Ultra Load Balancing (ULB), Dead Letter Queue, Indexed Queuing and Indexed ULB </td></tr>
<tr>
<td>1.3 </td><td>November 2016 </td><td>UM 6.10 </td><td>Addition of '<code>&lt;xml-config&gt;</code>' element (under '<code>&lt;daemon&gt;</code>'). </td></tr>
</table>
<p>Here is the current version:</p>
<pre class="fragment">&lt;!ELEMENT ume-store (daemon, stores?)&gt; 
&lt;!ATTLIST ume-store version CDATA #REQUIRED&gt; 
&lt;!ELEMENT daemon (log | uid | pidfile | gid | lbm-config | xml-config | lbm-license-file | web-monitor | daemon-monitor)*&gt; 
&lt;!ELEMENT log ( #PCDATA )&gt; 
&lt;!ATTLIST log type (file | console) "console"&gt; 
&lt;!ATTLIST log frequency (disable | daily | hourly | test) "disable"&gt; 
&lt;!ATTLIST log size CDATA #IMPLIED&gt; 
&lt;!ATTLIST log xml:space (default | preserve) "default"&gt;
&lt;!ELEMENT pidfile ( #PCDATA )&gt; 
&lt;!ATTLIST pidfile xml:space (default | preserve) "default"&gt;
&lt;!ELEMENT uid ( #PCDATA )&gt; 
&lt;!ATTLIST uid xml:space (default | preserve) "default"&gt;
&lt;!ELEMENT gid ( #PCDATA )&gt; 
&lt;!ATTLIST gid xml:space (default | preserve) "default"&gt;
&lt;!ELEMENT lbm-config ( #PCDATA )&gt; 
&lt;!ATTLIST lbm-config xml:space (default | preserve) "default"&gt;
&lt;!ELEMENT xml-config ( #PCDATA )&gt; 
&lt;!ATTLIST xml-config xml:space (default | preserve) "default"&gt;
&lt;!ATTLIST xml-config application-name CDATA #IMPLIED&gt; 
&lt;!ELEMENT lbm-license-file ( #PCDATA )&gt; 
&lt;!ATTLIST lbm-license-file xml:space (default | preserve) "default"&gt;
&lt;!ELEMENT web-monitor ( #PCDATA )&gt; 
&lt;!ATTLIST web-monitor xml:space (default | preserve) "default"&gt;
&lt;!ELEMENT stores (store*)&gt; 
&lt;!ELEMENT store (publishing-interval | ume-attributes | topics)+&gt; 
&lt;!ATTLIST store name CDATA #REQUIRED&gt; 
&lt;!ATTLIST store interface CDATA #IMPLIED&gt; 
&lt;!ATTLIST store port CDATA #REQUIRED&gt; 
&lt;!ELEMENT topics (topic+)&gt; 
&lt;!ELEMENT topic (ume-attributes*)&gt; 
&lt;!ATTLIST topic pattern CDATA #REQUIRED&gt; 
&lt;!ATTLIST topic type (direct | PCRE | regexp) #IMPLIED&gt; 
&lt;!ELEMENT ume-attributes (option+)&gt; 
&lt;!ELEMENT option EMPTY&gt; 
&lt;!ATTLIST option type (lbm-receiver | lbm-context | lbm-source | store) #IMPLIED&gt; 
&lt;!ATTLIST option name CDATA #REQUIRED&gt; 
&lt;!ATTLIST option value CDATA #REQUIRED&gt; 
&lt;!ELEMENT daemon-monitor (lbm-config | publishing-interval | remote-snapshot-request | remote-config-changes-request)*&gt; 
&lt;!ATTLIST daemon-monitor topic CDATA "umestore.monitor"&gt; 
&lt;!ELEMENT publishing-interval (group+)&gt; 
&lt;!ELEMENT group EMPTY&gt; 
&lt;!ATTLIST group name (default | store | source | receiver | disk | config | memory) #REQUIRED&gt; 
&lt;!ATTLIST group ivl CDATA #REQUIRED&gt; 
&lt;!ELEMENT remote-snapshot-request EMPTY&gt; 
&lt;!ATTLIST remote-snapshot-request allow (0 | 1) "0"&gt; 
&lt;!ELEMENT remote-config-changes-request EMPTY&gt; 
&lt;!ATTLIST remote-config-changes-request allow (0 | 1) "0"&gt; </pre><p><br />
 </p>
<h1><a class="anchor" id="storeconfigurationexample"></a>
Store Configuration Example&nbsp;&nbsp;<small><a href="#storeconfigurationexample">&lt;-</a></small></h1>
<p>Store daemon with one store.</p>
<pre class="fragment">&lt;?xml version="1.0"?&gt;
&lt;ume-store version="1.3"&gt;
  &lt;daemon&gt;
    &lt;log&gt;stored.log&lt;/log&gt;
    &lt;pidfile&gt;stored.pid&lt;/pidfile&gt;
    &lt;web-monitor&gt;*:15304&lt;/web-monitor&gt;
  &lt;/daemon&gt;

  &lt;stores&gt;
    &lt;store name="test-store" port="14567"&gt;
      &lt;ume-attributes&gt;
        &lt;option type="store" name="disk-cache-directory" value="cache"/&gt;
        &lt;option type="store" name="disk-state-directory" value="state"/&gt;
        &lt;option type="store" name="context-name" value="remote-store"/&gt;
      &lt;/ume-attributes&gt;
      &lt;topics&gt;
        &lt;topic pattern="test.*" type="PCRE"&gt;
          &lt;ume-attributes&gt;
            &lt;option type="store" name="repository-type" value="disk"/&gt;
            &lt;option type="store" name="repository-size-threshold" value="104857600"/&gt;
            &lt;option type="store" name="repository-size-limit" value="209715200"/&gt;
            &lt;option type="store" name="repository-disk-file-size-limit" value="1073741824"/&gt;
            &lt;option type="store" name="source-activity-timeout" value="120000"/&gt;
            &lt;option type="store" name="receiver-activity-timeout" value="120000"/&gt;
            &lt;option type="store" name="retransmission-request-forwarding" value="0"/&gt;
          &lt;/ume-attributes&gt;
        &lt;/topic&gt;
      &lt;/topics&gt;
    &lt;/store&gt;
  &lt;/stores&gt;
&lt;/ume-store&gt;
</pre><p><br />
 </p>
<h2><a class="anchor" id="xmlconfigtag"></a>
xml-config Tag&nbsp;&nbsp;<small><a href="#xmlconfigtag">&lt;-</a></small></h2>
<p>The '<code>&lt;xml-config&gt;</code>' tag is used to load a UM configuration file which is used by the store as it creates UM objects (contexts, receivers, etc.). This example applies the configuration specified in the "tnwgd" application tag of the file "lbm_cfg.xml":</p>
<pre class="fragment">&lt;ume-store version="1.3"&gt;
    &lt;daemon&gt;
        ...
        &lt;xml-config application-name="tnwgd"&gt;lbm_cfg.xml&lt;/lbm-xmlconfig&gt;
    &lt;/daemon&gt;
</pre><p>If an '<code>application-name</code>' attribute is not supplied, "umestored" is assumed. If it is desired to load the unnamed configuration, use an empty application name as follows:</p>
<pre class="fragment">&lt;ume-store version="1.3"&gt;
    &lt;daemon&gt;
        ...
        &lt;xml-config application-name=""&gt;lbm_cfg.xml&lt;/lbm-xmlconfig&gt;
    &lt;/daemon&gt;
</pre> </div></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.11-->
</body>
</html>
