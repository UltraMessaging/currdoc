<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>UM Java API: Introduction</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen_api.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">UM Java API
   &#160;<span id="projectnumber">6.15</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('index.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title"></div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p> 
<img src="infa_logo.png" width="400" height="138" alt="Informatica"/><br/><br/>
<big><b>Ultra Messaging</b></big> <small>(Version 6.15)</small><br/>
<br/><br/><br/>
<center class="mytitle">Ultra Messaging Java API</center>
<br/><br/><br/>
<h1>Introduction</h1>
</p>
<p>This document provides detailed reference information for the UM Java API.</p>
<p>For policies and procedures related to Ultra Messaging Technical Support, see <a href="https://ultramessaging.github.io/UM_Support.html">UM Support</a>.</p>
<p><b>(C) Copyright 2004,2022 Informatica LLC. All Rights Reserved.</b></p>
<p>This software and documentation are provided only under a separate license agreement containing restrictions on use and disclosure. No part of this document may be reproduced or transmitted in any form, by any means (electronic, photocopying, recording or otherwise) without prior consent of Informatica LLC.</p>
<p>A current list of Informatica trademarks is available on the web at <a href="https://www.informatica.com/trademarks.html">https://www.informatica.com/trademarks.html</a>.</p>
<p>Portions of this software and/or documentation are subject to copyright held by third parties. Required third party notices are included with the product.</p>
<p>This software is protected by patents as detailed at <a href="https://www.informatica.com/legal/patents.html">https://www.informatica.com/legal/patents.html</a>.</p>
<p>The information in this documentation is subject to change without notice. If you find any problems in this documentation, please report them to us in writing at Informatica LLC 2100 Seaport Blvd. Redwood City, CA 94063.</p>
<p>Informatica products are warranted according to the terms and conditions of the agreements under which they are provided. <br />
INFORMATICA LLC PROVIDES THE INFORMATION IN THIS DOCUMENT "AS IS" WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING WITHOUT ANY WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND ANY WARRANTY OR CONDITION OF NON-INFRINGEMENT.</p>
<p><br />
 </p>
<h1><a class="anchor" id="umjavaapi"></a>
UM Java API</h1>
<p>To use the UM Java API, you must access the UM Jar file. It is not included in the the normal UM package file, it is a separate file named: <code>UMS_</code><em>(um_vers)</em><code>.jar</code>. For example: </p><div class="fragment"><div class="line">UMS_6.12.1.jar</div></div><!-- fragment --><dl class="section note"><dt>Note</dt><dd>Although the jar file contains the product name "UMS", this file is intended to be used across all UM products, UMS, UMP, and UMQ. Users of UMP and UMQ should use the UMS jar file.</dd></dl>
<p>This jar file uses the <a class="el" href="index.html#javanativeinterfacejni">Java Native Interface (JNI)</a> to access the UM native libraries. Note that the native libraries are platform dependent and are contained in the platform-specific packages.</p>
<p><br />
 </p>
<h2><a class="anchor" id="applicationcallbacksinjava"></a>
Application Callbacks in Java</h2>
<p>There are a variety of UM features that include the UM library calling back into the application. The most common example of this is the Receiver callback (sometimes named "onReceive").</p>
<p>It is important that the application callback not allow any unhandled exceptions to be thrown back into UM. For example, you might enclose your entire callback code in an enclosing try/catch. The application callback should always return normally into UM.</p>
<p>See <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.areas/builds/UMQ_6.15/doc/JavaAPI/design.tag:../Design/" href="../Design/applicationdesignprinciples.html#javamessagereception">Java Message Reception</a> for more information, including code examples.</p>
<p><br />
 </p>
<h2><a class="anchor" id="usingumjavaonwindows"></a>
Using UM Java on Windows</h2>
<p>To run Java applications on Windows, the UM jar file needs to be able to find the native UM library, <code>"lbm.dll"</code>. A typical way to accomplish this is to include the <code>"bin"</code> folder in the system PATH. For example: </p><div class="fragment"><div class="line">C:\Program Files\Informatica\UMS_6.12.1\Win2k-x86_64\bin</div></div><!-- fragment --><p> (Replace "UMS_6.12.1" with your UM version.)</p>
<p><br />
 </p>
<h2><a class="anchor" id="usingumjavaonunix"></a>
Using UM Java on Unix</h2>
<p>To run Java applications on Unix, the UM jar file needs to be able to find the native UM dynamic library, <code>"liblbm.so"</code>. A typical way to accomplish this is to set the environment variable <code>"LD_LIBRARY_PATH"</code> to point at the UM library directory. For example: </p><div class="fragment"><div class="line">LD_LIBRARY_PATH=/um_home/UMS_6.12.1/Linux-glibc-2.17-x86_64/lib</div><div class="line">export LD_LIBRARY_PATH</div></div><!-- fragment --><p> (Replace <code>"/um_home/UMS_6.12.1/Linux-glibc-2.17-x86_64"</code> with the path where your version of UM is installed.) In there you will find the UM native libraries.</p>
<p><br />
 </p>
<h1><a class="anchor" id="javanativeinterfacejni"></a>
Java Native Interface (JNI)</h1>
<p>The UM Java API makes use of the Java Native Interface (JNI) to bridge between the native Java code and the UM library (written in C). This interface provides for two different types of calls: "downcalls" from Java into C, and "upcalls" from C into Java.</p>
<p>Downcalls are relatively inexpensive, although not quite as efficient as a call from one Java method to another. Thus, a Java publisher does not suffer from significantly lower performance than a C publisher.</p>
<p>However, upcalls have a greater expense associated with them. This expense translates directly to increased CPU utilization. This mostly affects subscribers, which have upcalls for received messages. This translates to slightly higher latency and a lower maximum-sustainable throughput.</p>
<p>This Java receiver performance penalty can be mitigated using <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.areas/builds/UMQ_6.15/doc/JavaAPI/design.tag:../Design/" href="../Design/advancedoptimizations.html#receivesidebatching">Receive-Side Batching</a> and, for Linux, <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.areas/builds/UMQ_6.15/doc/JavaAPI/design.tag:../Design/" href="../Design/advancedoptimizations.html#receivemultipledatagrams">Receive Multiple Datagrams</a>.</p>
<p><br />
 </p>
<h1><a class="anchor" id="garbagecollection"></a>
Garbage Collection</h1>
<p>One significant problem with Java performance is garbage collection. While this makes the programmer's life easier, having your application periodically stop doing application-specific useful work to perform its housekeeping duties significantly degrades the overall performance of the application. This is not to imply that garbage collection is not useful work: in the context of Java, it certainly is. But it does nothing to further the goal of the application itself, namely to receive and process data.</p>
<p>Thus, Java performance is inherently unpredictable and can vary significantly from one instant to the next. As an example, consider the lbmrcv example program supplied with UM. Running the C version will show a fairly steady data rate for each sample printed. Running the Java version will show wildly varying data rates for each sample printed. This is due in large part to the periodic interruption of the application to do garbage collection.</p>
<p>See <a class="el" href="index.html#zeroobjectdeliveryzod">Zero Object Delivery (ZOD)</a> for a UM Java feature that reduces the need for garbage collection.</p>
<p><br />
 </p>
<h1><a class="anchor" id="zeroobjectdeliveryzod"></a>
Zero Object Delivery (ZOD)</h1>
<p>UM's Zero Object Delivery (ZOD) feature for Java allows receivers to deliver messages, and sources/receivers deliver events, to an application with no per-message object creation. This lets you write Java sending/receiving applications that require little to no garbage collection at runtime, resulting in lower and more consistent message latencies and hence, better performance.</p>
<p>See <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.areas/builds/UMQ_6.15/doc/JavaAPI/design.tag:../Design/" href="../Design/advancedoptimizations.html#zeroobjectdelivery">Zero Object Delivery</a> for details, including code examples.</p>
<p><br />
 </p>
<h1><a class="anchor" id="retainingmessages"></a>
Retaining Messages</h1>
<p>For lowest latency, received messages should be fully processed directly by the receiver callback. However, there are circumstances where an application needs to save a message for further processing after the receiver callback returns.</p>
<p>See <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.areas/builds/UMQ_6.15/doc/JavaAPI/design.tag:../Design/" href="../Design/applicationdesignprinciples.html#javamessagereception">Java Message Reception</a> for details, including code examples.</p>
<p><br />
<br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
