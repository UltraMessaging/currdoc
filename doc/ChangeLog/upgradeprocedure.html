<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Release Notes: Upgrade Procedure</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen_manual.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Release Notes
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('upgradeprocedure.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">Upgrade Procedure </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Most upgrades from one version to the next are straightforward and uneventful. This is because Informatica strives to introduce new features without affecting existing functionality.</p>
<p>However, users are strongly encouraged to read and understand the release notes for each intermediate version between their existing system and their intended upgrade target.</p>
<p>In particular, there are four areas that deserve special consideration:</p>
<ul>
<li>
Default values for configuration options. </li>
<li>
Deprecations. </li>
<li>
Upgrading brokered queuing and JMS applications to 6.8 or beyond from pre-6.8. </li>
<li>
Upgrading to 6.0 or beyond from pre-6.0 versions. </li>
</ul>
<dl class="section note"><dt>Note</dt><dd>Important: If you are upgrading from Ultra Messaging Version 5.x or earlier, you must recompile and relink your applications to this version's libraries.</dd></dl>
<p><br />
 </p>
<h1><a class="anchor" id="defaultvaluesforconfigurationoptions"></a>
Default Values for Configuration Options&nbsp;&nbsp;<small><a href="#defaultvaluesforconfigurationoptions">&lt;-</a></small></h1>
<p>While Informatica attempts to set configuration option defaults to values that represent good trade offs, there are times when new information or customer feedback demonstrates that a different value delivers more value for the average customer. In many cases, customers will benefit from these new values. However, it is also possible that for specific use cases, a previous default value is better.</p>
<p>Informatica recommends that users evaluate each changed default individually and determine if the new value is appropriate for their use cases. In those cases where the previous default is better, the user must explicitly set the option to that value.</p>
<p>Contact Informatica Support for more information and deeper understanding of UM's configuration options.</p>
<p><br />
 </p>
<h1><a class="anchor" id="deprecations"></a>
Deprecations&nbsp;&nbsp;<small><a href="#deprecations">&lt;-</a></small></h1>
<p>To make UM more maintainable, functionality is sometimes removed from UM. Informatica understands that this can be disruptive to users, so we try to restrict such deprecations to features that, to our knowledge, are not needed by our users.</p>
<p>Informatica recommends careful reading of each version's release notes to learn which features are being deprecated. If you discover that a feature is deprecated which is important to your use case, please contact Informatica Support.</p>
<p><br />
 </p>
<h2><a class="anchor" id="platformdeprecationsfordaemons"></a>
Platform Deprecations for Daemons&nbsp;&nbsp;<small><a href="#platformdeprecationsfordaemons">&lt;-</a></small></h2>
<p>In a future version of UM, there will be a reduction in supported platform for UM daemons.</p>
<p>The UM daemons are: </p><ul>
<li>
Unicast Resolver Daemon (lbmrd) </li>
<li>
Persistent Store (stored) </li>
<li>
DRO - UM Router (tnwgd) </li>
<li>
Stateful Resolution Service (SRS) </li>
<li>
UMM Ultra Messaging Manager (ummd) </li>
<li>
ActiveMQ broker </li>
</ul>
<p>Starting with a future version of UM, the daemons will only be supported on the following platforms: </p><table class="doxtable">
<tr>
<th>Daemon </th><th>Linux 64 </th><th>Windows 64 </th><th>Windows 32 </th></tr>
<tr>
<td>Unicast Resolver Daemon (lbmrd) </td><td>YES </td><td>YES </td><td>no </td></tr>
<tr>
<td>Persistent Store (stored) </td><td>YES </td><td>YES </td><td>no </td></tr>
<tr>
<td>DRO - UM Router (tnwgd) </td><td>YES </td><td>YES </td><td>YES </td></tr>
<tr>
<td>SRS - Stateful Resolution Service </td><td>YES </td><td>YES </td><td>no </td></tr>
<tr>
<td>UMM Ultra Messaging Manager (ummd) </td><td>YES </td><td>YES </td><td>no </td></tr>
<tr>
<td>ActiveMQ broker </td><td>YES </td><td>YES </td><td>no </td></tr>
</table>
<p>Note that there is no change in support for <em>applications</em>. UM daemons running on the reduced set of platforms will be able to service applications running on the full range of supported platforms.</p>
<p><br />
 </p>
<h1><a class="anchor" id="upgradingbrokeredqueueingandjms"></a>
Upgrading Brokered Queuing and JMS&nbsp;&nbsp;<small><a href="#upgradingbrokeredqueueingandjms">&lt;-</a></small></h1>
<p>In UM version 6.8, the brokered queuing functionality and JMS API was re-implemented with an enhanced ActiveMQ-based JMS/AMQP broker. In many cases, the UM queuing API can still be used with few if any changes.</p>
<dl class="section note"><dt>Note</dt><dd>Important: If you are upgrading non-ULB queuing applications from versions prior to 6.8, note that this upgrade has a major impact on your applications and deployment. The umestored daemon no longer implements queuing functionality; instead, the UMQ client API now uses the AMQP protocol to communicate with an ActiveMQ broker for queuing functionality. You must rebuild applications, redeploy daemons, and perform a flash cut over. Also, review your applications for functionalities that are deprecated in UMQ 6.8 or later. UMQ clients using version 6.8 or later will not interoperate with a pre-6.8 umestored-based queue broker. UMQ clients using versions earlier than 6.8 will not interoperate with an ActiveMQ broker. For more information, see the Guide for Queuing.</dd></dl>
<p>See <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.12.1_RC1/doc/ChangeLog/umq.tag:../UMQ/" href="../UMQ/gettingstarted.html#queuingupgradeconsiderations">Queuing Upgrade Considerations</a> for more information about upgrading brokered queuing applications.</p>
<p><br />
 </p>
<h1><a class="anchor" id="upgradingfromversionpre60"></a>
Upgrading From Version Pre-6.0&nbsp;&nbsp;<small><a href="#upgradingfromversionpre60">&lt;-</a></small></h1>
<p>With the introduction of the UM Router, several changes needed to be made to the "wire format" of UM command and control messages. This resulted in 6.0-based applications not being interoperable with pre-6.0 applications. For many customers, this did not pose a significant problem since they were able to upgrade all of their systems in a single step. I.e. there was no need for pre-6.0 applications to exchange messages with 6.0 applications.</p>
<p>However, for many customers, this kind of "flash" upgrade is simply not practical. Therefore, starting with UM version 6.7, an upgrade path was developed which allows different applications to be upgraded at different times, while still allowing those mixed-version applications to exchange messages.</p>
<dl class="section note"><dt>Note</dt><dd>When you upgrade from a previous version, you must set option <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.12.1_RC1/doc/ChangeLog/config.tag:../Config/" href="../Config/grpultramessagingpersistence.html#umestoreactivitytimeoutsource">ume_store_activity_timeout (source)</a> to 10,000 and UMP store option <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.12.1_RC1/doc/ChangeLog/ume.tag:../UME/" href="../UME/configurationreferenceforumestored.html#umecfgkeepaliveinterval">keepalive-interval</a> to 3,000. This avoids unexpected behavior during a phased upgrade.</dd></dl>
<p>To upgrade Ultra Messaging from version 5.3.x to version 6.7 and beyond, perform the following procedure:</p>
<ol>
<li>
<p class="startli">If the current installation is earlier than 5.3, upgrade all applications and components except UMDS servers to version 5.3.6 or later.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Pre-6.0 versions of UM are not ABI compatible with 6.0 and beyond. C language application programs must be re-compiled.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">If using UMP stores, ensure that all source settings for option <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.12.1_RC1/doc/ChangeLog/config.tag:../Config/" href="../Config/grpultramessagingpersistence.html#umestorebehaviorsource">ume_store_behavior (source)</a> are set to '<code>qc</code>' or '<code>quorum-consensus</code>', and not '<code>rr</code>' or '<code>round-robin</code>'.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Upgrade all lbmrd resolver daemons to this release. No configuration changes are required.</p>
<p class="endli"></p>
</li>
<li>
If using UMP stores, upgrade all umestored daemons in groupings that observe the following requirements: <ul>
<li>
A single source cannot specify a mixture of 5.3.x and this release's umestored daemons. </li>
<li>
Separate sources on the same context can specify daemons of different versions. </li>
<li>
Do not start upgraded daemons with 5.3.x state and cache files. </li>
</ul>
<dl class="section note"><dt>Note</dt><dd>When upgrading from 5.3.x, if you neglect to set <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.12.1_RC1/doc/ChangeLog/config.tag:../Config/" href="../Config/grpmajoroptions.html#compatibilityincludepreum60behaviorcontext">compatibility_include_pre_um_6_0_behavior (context)</a> to 1, receivers incorrectly receive messages without persistence.</dd></dl>
</li>
<li>
<p class="startli">Upgrade source and receiver applications. You can upgrade these one by one, in any order. As you upgrade each application, set the following configuration options: </p><ul>
<li>
<a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.12.1_RC1/doc/ChangeLog/config.tag:../Config/" href="../Config/grpmajoroptions.html#compatibilityincludepreum60behaviorcontext">compatibility_include_pre_um_6_0_behavior (context)</a> to 1 </li>
<li>
<a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.12.1_RC1/doc/ChangeLog/config.tag:../Config/" href="../Config/grptransporttcpoperation.html#transporttcpusesessionidsource">transport_tcp_use_session_id (source)</a> to 0 </li>
</ul>
<p>These settings must remain during the period when the network contains both applications based on 5.3.x and this release.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">If you use Late Join or OTR, review the settings for Late Join or OTR per-message timeout options. Note that option <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.12.1_RC1/doc/ChangeLog/config.tag:../Config/" href="../Config/grpdeprecated.html#otrrequestdurationreceiver">otr_request_duration (receiver)</a> was deprecated in 6.0, and the following options are added: </p><ul>
<li>
<a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.12.1_RC1/doc/ChangeLog/config.tag:../Config/" href="../Config/grplatejoin.html#latejoininforequestintervalreceiver">late_join_info_request_interval (receiver)</a> </li>
<li>
<a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.12.1_RC1/doc/ChangeLog/config.tag:../Config/" href="../Config/grplatejoin.html#latejoininforequestmaximumreceiver">late_join_info_request_maximum (receiver)</a> </li>
<li>
<a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.12.1_RC1/doc/ChangeLog/config.tag:../Config/" href="../Config/grplatejoin.html#retransmitrequestmessagetimeoutreceiver">retransmit_request_message_timeout (receiver)</a> </li>
<li>
<a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.12.1_RC1/doc/ChangeLog/config.tag:../Config/" href="../Config/grpofftransportrecovery.html#otrmessagecachingthresholdreceiver">otr_message_caching_threshold (receiver)</a> </li>
<li>
<a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.12.1_RC1/doc/ChangeLog/config.tag:../Config/" href="../Config/grpofftransportrecovery.html#otrrequestmessagetimeoutreceiver">otr_request_message_timeout (receiver)</a> </li>
</ul>
<p class="endli"></p>
</li>
<li>
After all components are upgraded to this release, set the following configuration options: <ul>
<li>
<a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.12.1_RC1/doc/ChangeLog/config.tag:../Config/" href="../Config/grpmajoroptions.html#compatibilityincludepreum60behaviorcontext">compatibility_include_pre_um_6_0_behavior (context)</a> to 0 </li>
<li>
<a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.12.1_RC1/doc/ChangeLog/config.tag:../Config/" href="../Config/grptransporttcpoperation.html#transporttcpusesessionidsource">transport_tcp_use_session_id (source)</a> to 1 </li>
</ul>
</li>
</ol>
<p><br />
 </p>
<h2><a class="anchor" id="logmessagesduringupgrade"></a>
Log Messages During Upgrade&nbsp;&nbsp;<small><a href="#logmessagesduringupgrade">&lt;-</a></small></h2>
<p>For 5.3.x applications on the same TRD as this release, you might see the following log messages:</p>
<dl class="section user"><dt>LBMC unknown next header 64</dt><dd>Informational. You can ignore this message. You can reduce the frequency of this message by increasing the value for context option <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.12.1_RC1/doc/ChangeLog/config.tag:../Config/" href="../Config/grpunicastimmediatemessagingoperation.html#responsetcpdeletiontimeoutcontext">response_tcp_deletion_timeout (context)</a>.</dd></dl>
<dl class="section user"><dt>LBMR Topic Info Record malformed. Dropping remainder</dt><dd>Issued for every TIR that contains a TCP Session ID. You must set option <a class="elRef" doxygen="/29W/Amun/home/jenkins/backup_exclude.1/rc/UMQ_6.12.1_RC1/doc/ChangeLog/config.tag:../Config/" href="../Config/grptransporttcpoperation.html#transporttcpusesessionidsource">transport_tcp_use_session_id (source)</a> to 0 during the interim migration period.</dd></dl>
<dl class="section user"><dt>LOG Level 5: Core-5688-3387: LBMR Extended Type 0x7 incorrect (10.29.3.49:40633 len 102). [...D.....&lt;.............1I...........(&gt;..............store-name............ (&gt;.........................$]. Dropping.</dt><dd>Informational. This occurs if UMP store umestored daemons are present and configured with a discoverable name. For each name advertisement, all contexts drop the packet and log this warning.</dd></dl>
<dl class="section user"><dt>[WARNING]: Core-5688-516: LBMC cntl unknown next header: 55.</dt><dd>Informational. Issued once per transport session when receiving an SRI from a UMP source. </dd></dl>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.11-->
</body>
</html>
