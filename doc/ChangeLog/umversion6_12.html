<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Release Notes: UM Version 6.12</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen_manual.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Release Notes
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('umversion6_12.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">UM Version 6.12 </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The most-significant update to UM version 6.12 is the introduction of a TCP-based Stateful Topic Resolution Service (SRS) which optimizes the Topic Resolution Process.</p>
<dl class="section attention"><dt>Attention</dt><dd>There are some special upgrade instructions for UM version 6.12 that will affect a small percentage of users. See <a class="el" href="umversion6_12.html#specialupgradeinsructionsfor6_12">Special Upgrade Instructions for 6.12</a>.</dd></dl>
<p><br />
 </p>
<h1><a class="anchor" id="enhancementsfor6_12"></a>
Enhancements for 6.12&nbsp;&nbsp;<small><a href="#enhancementsfor6_12">&lt;-</a></small></h1>
<p><br />
 </p>
<h2><a class="anchor" id="streamingenhancementsfor6_12"></a>
Streaming Enhancements for 6.12&nbsp;&nbsp;<small><a href="#streamingenhancementsfor6_12">&lt;-</a></small></h2>
<p>The following new features and enhancements apply to UMS, UMP, and UMQ products.</p>
<ul>
<li>
<p class="startli"><b>TCP-Based Topic Resolution.</b> 6.12 introduces a new component, the SRS (Stateful Resolution Service). This is the first phase of a plan to significantly improve UM's topic resolution characteristics. The SRS service can be run on 64-bit Windows and 64-bit Linux. (An SRS running on either one of those platforms can service clients across the full range of supported platforms.)</p>
<p>For more information, see <a class="elRef" doxygen="/29W/Amun/home/sford/backup_exclude/labbox/sfordmac_REL_6_13/29West/lbm/doc/ChangeLog/design.tag:../Design/" href="../Design/topicresolutiondescription.html">Topic Resolution Description</a>.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><b>Streaming Receiver Optimization.</b> Message receive latency has been improved with the following features: </p><ul>
<li>
<a class="elRef" doxygen="/29W/Amun/home/sford/backup_exclude/labbox/sfordmac_REL_6_13/29West/lbm/doc/ChangeLog/design.tag:../Design/" href="../Design/advancedoptimizations.html#receivebufferrecycling">Receive Buffer Recycling</a> </li>
<li>
<a class="elRef" doxygen="/29W/Amun/home/sford/backup_exclude/labbox/sfordmac_REL_6_13/29West/lbm/doc/ChangeLog/design.tag:../Design/" href="../Design/advancedoptimizations.html#singlereceivingthread">Single Receiving Thread</a> </li>
<li>
<a class="elRef" doxygen="/29W/Amun/home/sford/backup_exclude/labbox/sfordmac_REL_6_13/29West/lbm/doc/ChangeLog/design.tag:../Design/" href="../Design/advancedoptimizations.html#contextlockreduction">Context Lock Reduction</a> </li>
<li>
<a class="elRef" doxygen="/29W/Amun/home/sford/backup_exclude/labbox/sfordmac_REL_6_13/29West/lbm/doc/ChangeLog/design.tag:../Design/" href="../Design/advancedoptimizations.html#gettimeofdayreduction">Gettimeofday Reduction</a> </li>
</ul>
<p class="endli"></p>
</li>
<li>
<p class="startli"><b>Smart Source Message Sizing Flexibility.</b> The <a class="elRef" doxygen="/29W/Amun/home/sford/backup_exclude/labbox/sfordmac_REL_6_13/29West/lbm/doc/ChangeLog/design.tag:../Design/" href="../Design/advancedoptimizations.html#smartsources">Smart Sources</a> feature now supports greater flexibility in application message sizes, including: </p><ul>
<li>
UM Message Fragmentation. </li>
<li>
User Supplied Buffers. </li>
</ul>
<p>For more information, see <a class="elRef" doxygen="/29W/Amun/home/sford/backup_exclude/labbox/sfordmac_REL_6_13/29West/lbm/doc/ChangeLog/design.tag:../Design/" href="../Design/advancedoptimizations.html#smartsourcemessagebuffers">Smart Source Message Buffers</a>.</p>
<p>Also, a problem in Smart Source was fixed (see fixed limitation <a class="el" href="umversion6_12.html#bug10602">10602</a>) which users of Smart Source need to be aware of. Some users will need to change their configuration as a result. See <a class="el" href="umversion6_12.html#smartsourceheadersizechange">Smart Source Header Size Change</a> for details.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><b>Windows Service Enhancements.</b> Support for running the 3 main pre-6.12 UM Daemons as Windows Services has been improved. This includes the UM Message Router (DRO), the persistent Store, and the unicast topic resolution daemon (lbmrd). The new service, SRS, is introduced with the same support for Windows Service. (Note that the Ultra Messaging Manager daemon <code>ummd</code> is not available as a windows service at this time.) For more information, see <a class="elRef" doxygen="/29W/Amun/home/sford/backup_exclude/labbox/sfordmac_REL_6_13/29West/lbm/doc/ChangeLog/operations.tag:../Operations/" href="../Operations/startupshutdownprocedures.html#umdaemonsaswindowsservices">UM Daemons as Windows Services</a>.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><b>XSP Enhancements.</b> The <a class="elRef" doxygen="/29W/Amun/home/sford/backup_exclude/labbox/sfordmac_REL_6_13/29West/lbm/doc/ChangeLog/design.tag:../Design/" href="../Design/umfeatures.html#transportservicesproviderxsp">Transport Services Provider (XSP)</a> feature has been enhanced to support the following new capabilities: </p><ul>
<li>
Registration of File Descriptors. The <a class="elRef" doxygen="/29W/Amun/home/sford/backup_exclude/labbox/sfordmac_REL_6_13/29West/lbm/doc/ChangeLog/design.tag:../Design/" href="../Design/umfeatures.html#transportservicesproviderxsp">Transport Services Provider (XSP)</a> feature has been enhanced to support registration of application file descriptors. For more information, see <a class="elRef" doxygen="/29W/Amun/home/sford/backup_exclude/labbox/sfordmac_REL_6_13/29West/lbm/doc/ChangeLog/design.tag:../Design/" href="../Design/umfeatures.html#otherxspoperations">Other XSP Operations</a>. </li>
<li>
Persistence. Persistent receivers can now be assigned to a <a class="elRef" doxygen="/29W/Amun/home/sford/backup_exclude/labbox/sfordmac_REL_6_13/29West/lbm/doc/ChangeLog/design.tag:../Design/" href="../Design/umfeatures.html#transportservicesproviderxsp">Transport Services Provider (XSP)</a>. </li>
</ul>
<p class="endli"></p>
</li>
<li>
<p class="startli"><b>Leading Loss Events Suppressed</b>. UM no longer delivers unrecoverable loss events to receiver callbacks prior to the first message delivery. See <a class="el" href="umversion6_12.html#bug5199">5199</a>.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><b>AIX</b>. Informatica no longer ships the AIX platform with every new version of UM. Instead, AIX is now considered an "on demand" platform. Note that AIX is still a supported platform for UM. Customers of the AIX platform may specifically request that an AIX build be generated for the most-recent general UM version.</p>
<p class="endli"></p>
</li>
<li>
<b>Daemon Platform Deprecations</b>. The <a class="el" href="deprecations.html#deprecationsfor6111">planned removal</a> of support for certain platforms for the UM daemons has been postponed. Starting with the <em>next</em> version of UM, there will be a reduction in the supported platforms for the UM daemons (store, DRO, etc). Note that there is no change in support for <em>applications</em>. UM daemons running on the reduced set of platforms will be able to service applications running on the full range of supported platforms. See <a class="el" href="deprecations.html#platformdeprecationsfordaemons">Platform Deprecations for Daemons</a> for details. </li>
</ul>
<p><br />
 </p>
<h2><a class="anchor" id="persistenceenhancementsfor6_12"></a>
Persistence Enhancements for 6.12&nbsp;&nbsp;<small><a href="#persistenceenhancementsfor6_12">&lt;-</a></small></h2>
<p>The following new features and enhancements apply to UMP and UMQ products.</p>
<ul>
<li>
<p class="startli"><b>XSP.</b> Persistent receivers can now be assigned to a <a class="elRef" doxygen="/29W/Amun/home/sford/backup_exclude/labbox/sfordmac_REL_6_13/29West/lbm/doc/ChangeLog/design.tag:../Design/" href="../Design/umfeatures.html#transportservicesproviderxsp">Transport Services Provider (XSP)</a>.</p>
<p class="endli"></p>
</li>
<li>
<b>Receiver re-registration.</b> Persistent receivers can now re-register with a store immediately following certain events. See <a class="el" href="umversion6_12.html#bug5890">5890</a>. </li>
</ul>
<p><br />
 </p>
<h2><a class="anchor" id="queuingenhancementsfor6_12"></a>
Queuing Enhancements for 6.12&nbsp;&nbsp;<small><a href="#queuingenhancementsfor6_12">&lt;-</a></small></h2>
<p>The following new features and enhancements apply to the UMQ product.</p>
<ul>
<li>
<b>Ultra Load Balancing Throughput.</b> The <a class="elRef" doxygen="/29W/Amun/home/sford/backup_exclude/labbox/sfordmac_REL_6_13/29West/lbm/doc/ChangeLog/umq.tag:../UMQ/" href="../UMQ/ultraloadbalancingulb.html">Ultra Load Balancing (ULB)</a> feature has been enhanced to significantly improve throughput when used with unicast transport protocols TCP and LBT-RU. For more information see <a class="elRef" doxygen="/29W/Amun/home/sford/backup_exclude/labbox/sfordmac_REL_6_13/29West/lbm/doc/ChangeLog/umq.tag:../UMQ/" href="../UMQ/ultraloadbalancingulb.html#ulbperformance">ULB Performance</a>. </li>
</ul>
<p><br />
 </p>
<h2><a class="anchor" id="dynamicrouterenhancementsfor6_12"></a>
Dynamic Router Enhancements for 6.12&nbsp;&nbsp;<small><a href="#dynamicrouterenhancementsfor6_12">&lt;-</a></small></h2>
<p>The following new features and enhancements apply to the Dynamic Routing Option (DRO).</p>
<ul>
<li>
None. </li>
</ul>
<p><br />
 </p>
<h1><a class="anchor" id="fixedlimitationsfor6_12"></a>
Fixed Limitations for 6.12&nbsp;&nbsp;<small><a href="#fixedlimitationsfor6_12">&lt;-</a></small></h1>
<p><br />
 </p>
<h2><a class="anchor" id="streamingfixedlimitationsfor6_12"></a>
Streaming Fixed Limitations for 6.12&nbsp;&nbsp;<small><a href="#streamingfixedlimitationsfor6_12">&lt;-</a></small></h2>
<p>The following bug fixes apply to UMS, UMP, and UMQ products.</p>
<p><a class="anchor" id="bug10602"></a></p><table class="doxtable">
<tr>
<th>Change Request </th><th><p class="starttd">Description</p>
<p class="endtd"></p>
</th></tr>
<tr>
<td>10602 </td><td><p class="starttd"><b>FIXED:</b> <em>Smart Sources reserved a differing amount of space for worst-case headers than traditional sources. For users of kernel bypass network drivers like Onload, this can lead to having to set the <a class="elRef" doxygen="/29W/Amun/home/sford/backup_exclude/labbox/sfordmac_REL_6_13/29West/lbm/doc/ChangeLog/config.tag:../Config/" href="../Config/grptransportlbtrmoperation.html#transportlbtrmdatagrammaxsizecontext">transport_lbtrm_datagram_max_size (context)</a> option to different values for apps using Smart Sources vs. apps that do not. For apps that use both, this creates a sub-optimal solution for one or the other.</em></p>
<p>UM now uses the same reserve size for Smart Sources as it always has for traditional sources.</p>
<dl class="section attention"><dt>Attention</dt><dd>Users of Smart Source may need to update their configuration because of this. See <a class="el" href="umversion6_12.html#smartsourceheadersizechange">Smart Source Header Size Change</a>.</dd></dl>
<p><a class="anchor" id="bug10542"></a></p>
</td></tr>
<tr>
<td>10542 </td><td><p class="starttd"><b>FIXED:</b> <em>When an XSP user's transport_mapping_function callback is invoked, the second parameter is: <code>"lbm_new_transport_info_t *info"</code> which has the field <code>"char source[LBM_MSG_MAX_SOURCE_LEN];"</code>. However, that field does not contain the source string.</em></p>
<dl class="section note"><dt>Note</dt><dd>To pre-6.12 users who worked around this problem by defining <code>"LBM_INTERNAL_USE_ONLY"</code>: your application will continue to work properly with 6.12 without any need to recompile. However, we do recommend that you remove the LBM_INTERNAL_USE_ONLY definition when it is convenient.</dd></dl>
<p><a class="anchor" id="bug5199"></a></p>
</td></tr>
<tr>
<td>5199, 9415 </td><td><p class="starttd"><b>ENHANCEMENT:</b> <em>There are a variety of circumstances where a newly-created streaming receiver will be delivered unrecoverable loss events before the first message is received. This is normally not useful to the application since it does not represent a <em>gap</em> in the received message stream, but rather just difficulty in getting successfully joined to the stream.</em></p>
<p>UM now will suppress unrecoverable loss events prior to the first message delivery. Informatica believes that this new behavior is the correct behavior for UM, and that there should be no cause for concern by users.</p>
<p>This behavior change does not apply to Persisted data streams where delivery of all messages is important.</p>
<p>See <a class="elRef" doxygen="/29W/Amun/home/sford/backup_exclude/labbox/sfordmac_REL_6_13/29West/lbm/doc/ChangeLog/design.tag:../Design/" href="../Design/fundamentalconcepts.html#leadingloss">Leading Loss</a> for more information.</p>
<p class="endtd"></p>
</td></tr>
<tr>
<td>3398 </td><td><p class="starttd"><b>FIXED:</b> <em>Windows-based UM closes TCP connections abruptly, causing TCP "RST" packets on the network, and "connection
reset" warnings in UM log files.</em></p>
<p>Windows-based UM now closes TCP connections gracefully.</p>
<p class="endtd"></p>
</td></tr>
<tr>
<td>10518 </td><td><p class="starttd"><b>FIXED:</b> <em>When installing UM on a Windows machine using the UM package installer, the system PATH can be corrupted or cleared if the updated length is greater than 1023 bytes.</em></p>
<p>This is related to a limitation in the Windows installer that UM uses; it fails on long PATH content. UM had a bug in which UM did not detect the failure and instead wrote the bad PATH. UM has been updated to detect the failure, issue an error, and not update the PATH.</p>
<p class="endtd"></p>
</td></tr>
<tr>
<td>10380, 10381 </td><td><p class="starttd"><b>FIXED:</b> <em>lbm_rcv_delete_ex and lbm_wildcard_rcv_delete_ex can crash when unsubscribing from spectrum channels.</em></p>
<p class="endtd"></p>
</td></tr>
<tr>
<td>10469, 10486, 10466 </td><td><p class="starttd"><b>FIXED:</b> <em>When sending a message using a Smart Source send API, UM can crash with a failed assertion of the form: <code>"failed assertion [...-\&gt;sminfo.timer_id == -1]"</code>. This happens when a TSNI is in the process of being sent by the context thread at the same time that the application sends a message.</em></p>
<p class="endtd"></p>
</td></tr>
<tr>
<td>10492 </td><td><p class="starttd"><b>FIXED:</b> <em>When the lbmrd is configured for incorrect interface specification, either in its XML configuration file, or on the command line, the lbmrd did not detect any error and appears to be running. However, it does not function. Also, the lbmrd does accept interface specifications other than a simple IP address.</em></p>
<p>The lbmrd interface can now be specified as a simple IP addresses, a CIDR network specification (e.g. 10.1.2.0/24), a quoted device name (e.g. "eth0"), or a DNS host name. The lbmrd will report an error if an invalid interface specification is configured.</p>
<p class="endtd"></p>
</td></tr>
<tr>
<td>10288 </td><td><p class="starttd"><b>FIXED:</b> <em>Sending Unicast Immediate (UIM) Requests on Sparc machines can result in high CPU burn with no messages being sent.</em></p>
<p class="endtd"></p>
</td></tr>
<tr>
<td>10602 </td><td><p class="starttd"><b>FIXED:</b> <em>The <code><a class="elRef" doxygen="/29W/Amun/home/sford/backup_exclude/labbox/sfordmac_REL_6_13/29West/lbm/doc/ChangeLog/api.tag:../API/" href="../API/tnwgdmonmsgs_8h.html">tnwgdmonmsgs.h</a></code> header file was omitted from the distribution package. This made it impossible to write daemon stats monitoring applications.</em></p>
<p class="endtd"></p>
</td></tr>
<tr>
<td>10519 </td><td><p class="starttd"><b>FIXED:</b> <em>The Unix-based UMS and UMP products were built such that liblbm.so had a dependency on libqpid-proton.so.2, which was not included in the package. This did not cause improper behavior because the UMS and UMP products never attempt to call any of the missing entry points. However, having the dependency is unnecessary.</em></p>
<p>The UMS and UMP dependencies to libqpid-proton.so.2 have been removed.</p>
<p class="endtd"></p>
</td></tr>
<tr>
<td>10490, 10491 </td><td><p class="starttd"><b>FIXED:</b> <em>The log message: <br />
<code>Core-5688-447: LBMC datagram malformed.</code> <br />
does not give any information about the sender of the malformed datagram. </em></p>
<p>The IP and port of the sender is now included in the log message.</p>
<p class="endtd"></p>
</td></tr>
<tr>
<td>10456 </td><td><p class="starttd"><b>FIXED:</b> <em>The configuration options <a class="elRef" doxygen="/29W/Amun/home/sford/backup_exclude/labbox/sfordmac_REL_6_13/29West/lbm/doc/ChangeLog/config.tag:../Config/" href="../Config/grpmajoroptions.html#zerotransportsfunctionxsp">zero_transports_function (xsp)</a> and <a class="elRef" doxygen="/29W/Amun/home/sford/backup_exclude/labbox/sfordmac_REL_6_13/29West/lbm/doc/ChangeLog/config.tag:../Config/" href="../Config/grpmajoroptions.html#operationalmodexsp">operational_mode (xsp)</a> cannot be specified in a "flat" UM configuration file. The error: <br />
<code>CoreApi-5688-61: object xsp not supported</code> <br />
is logged.</em></p>
<p class="endtd"></p>
</td></tr>
<tr>
<td>10398 </td><td><p class="starttd"><b>FIXED:</b> <em>On many Linux systems, the <code>"Makefile.unix"</code> shipped with the example programs can produce a build error of the form: <br />
/usr/bin/ld: ....o: undefined reference to symbol 'sqrt...'</em></p>
<p>The solution was to add "-lm" to the builds of the examples.</p>
<p class="endtd"></p>
</td></tr>
<tr>
<td>10383 </td><td><p class="starttd"><b>FIXED:</b> <em>Due to an improper installation of Solarflare's <code>"Onload"</code> library, certain socket calls can return an error. UM reported this error with the unhelpful log: <br />
<code>Core-5688-1881: handle events returned error 0</code></em></p>
<p>UM has been changed to properly decode and print the proper error.</p>
<p>In addition, if the socket reports that the <code>"recvmmsg()"</code> function is not implemented, UM disables the <a class="elRef" doxygen="/29W/Amun/home/sford/backup_exclude/labbox/sfordmac_REL_6_13/29West/lbm/doc/ChangeLog/config.tag:../Config/" href="../Config/grpmajoroptions.html#multiplereceivemaximumdatagramscontext">multiple_receive_maximum_datagrams (context)</a> feature.</p>
<p class="endtd"></p>
</td></tr>
<tr>
<td>9972 </td><td><p class="starttd"><b>FIXED:</b> <em>If an application attempts to unsubscribe from a <a class="elRef" doxygen="/29W/Amun/home/sford/backup_exclude/labbox/sfordmac_REL_6_13/29West/lbm/doc/ChangeLog/design.tag:../Design/" href="../Design/umobjects.html#spectrum">Spectrum</a> channel that it had not previously been subscribed to, the application crashes with an illegal memory access.</em></p>
<p class="endtd"></p>
</td></tr>
<tr>
<td>9798 </td><td><p class="starttd"><b>FIXED:</b> <em>If a receiver of a TCP or IPC transport gets messages out of order due to the data coming through a DRO and the originating source is UDP-based, the receiving application declares immediate unrecoverable loss, even though the missing messages arrive shortly thereafter.</em></p>
<p>The TCP transport receiver can now be configured to wait for a period of time before declaring unrecoverable loss. This is controlled by two new configuration options: <a class="elRef" doxygen="/29W/Amun/home/sford/backup_exclude/labbox/sfordmac_REL_6_13/29West/lbm/doc/ChangeLog/config.tag:../Config/" href="../Config/grptransporttcpoperation.html#transporttcpdrolossrecoverytimeoutreceiver">transport_tcp_dro_loss_recovery_timeout (receiver)</a> and <a class="elRef" doxygen="/29W/Amun/home/sford/backup_exclude/labbox/sfordmac_REL_6_13/29West/lbm/doc/ChangeLog/config.tag:../Config/" href="../Config/grptransportlbtipcoperation.html#transportlbtipcdrolossrecoverytimeoutreceiver">transport_lbtipc_dro_loss_recovery_timeout (receiver)</a>.</p>
<p>See <a class="elRef" doxygen="/29W/Amun/home/sford/backup_exclude/labbox/sfordmac_REL_6_13/29West/lbm/doc/ChangeLog/gateway.tag:../Gateway/" href="../Gateway/umrouterimplementation.html#umrouterreliableloss">DRO Reliable Loss</a> for more information.</p>
<p class="endtd"></p>
</td></tr>
<tr>
<td>10435 </td><td><p class="starttd"><b>FIXED:</b> <em>UM does not properly time out the total <a class="elRef" doxygen="/29W/Amun/home/sford/backup_exclude/labbox/sfordmac_REL_6_13/29West/lbm/doc/ChangeLog/design.tag:../Design/" href="../Design/fundamentalconcepts.html#latejoin">Late Join</a> recovery process. This can lead to premature termination of Late Join recovery.</em></p>
<p>UM now correctly calculates the total Late Join recovery timeout as <a class="elRef" doxygen="/29W/Amun/home/sford/backup_exclude/labbox/sfordmac_REL_6_13/29West/lbm/doc/ChangeLog/config.tag:../Config/" href="../Config/grplatejoin.html#latejoininforequestintervalreceiver">late_join_info_request_interval (receiver)</a> multiplied by <a class="elRef" doxygen="/29W/Amun/home/sford/backup_exclude/labbox/sfordmac_REL_6_13/29West/lbm/doc/ChangeLog/config.tag:../Config/" href="../Config/grplatejoin.html#latejoininforequestmaximumreceiver">late_join_info_request_maximum (receiver)</a>.</p>
<p class="endtd"></p>
</td></tr>
<tr>
<td>10640 </td><td><p class="starttd"><b>FIXED:</b> <em>A timing window exists that could cause <a class="elRef" doxygen="/29W/Amun/home/sford/backup_exclude/labbox/sfordmac_REL_6_13/29West/lbm/doc/ChangeLog/design.tag:../Design/" href="../Design/fundamentalconcepts.html#latejoin">Late Join</a> to not complete. This can occur if the max number of late join requests has been completed before the total Late Join recovery process times out.</em></p>
<p class="endtd"></p>
</td></tr>
</table>
<p><br />
 </p>
<h2><a class="anchor" id="persistencefixedlimitationsfor6_12"></a>
Persistence Fixed Limitations for 6.12&nbsp;&nbsp;<small><a href="#persistencefixedlimitationsfor6_12">&lt;-</a></small></h2>
<p>The following bug fixes apply to UMP and UMQ products.</p>
<p><a class="anchor" id="bug5890"></a></p><table class="doxtable">
<tr>
<th>Change Request </th><th><p class="starttd">Description</p>
<p class="endtd"></p>
</th></tr>
<tr>
<td>5890, 9054 </td><td><p class="starttd"><b>ENHANCEMENT:</b> <em>There are certain circumstances where a receiver has to unnecessarily wait for the <a class="elRef" doxygen="/29W/Amun/home/sford/backup_exclude/labbox/sfordmac_REL_6_13/29West/lbm/doc/ChangeLog/config.tag:../Config/" href="../Config/grpultramessagingpersistence.html#umeactivitytimeoutreceiver">ume_activity_timeout (receiver)</a> to expire before it can register with a Store.</em></p>
<p>An enhancement was made to persistent receivers that allows for immediate re-registration in the following circumstances: </p><ul>
<li>
A persistent source application is started and takes over from a proxy source. </li>
<li>
A persistent source application using a session ID re-registers with the Store. </li>
<li>
A receiver process is restarted and it has the same session ID, <a class="elRef" doxygen="/29W/Amun/home/sford/backup_exclude/labbox/sfordmac_REL_6_13/29West/lbm/doc/ChangeLog/config.tag:../Config/" href="../Config/grpunicastimmediatemessagingnetwork.html#requesttcpinterfacecontext">request_tcp_interface (context)</a>, and <a class="elRef" doxygen="/29W/Amun/home/sford/backup_exclude/labbox/sfordmac_REL_6_13/29West/lbm/doc/ChangeLog/config.tag:../Config/" href="../Config/grpunicastimmediatemessagingnetwork.html#requesttcpportcontext">request_tcp_port (context)</a> values. </li>
</ul>
<p class="endtd"></p>
</td></tr>
<tr>
<td>10446, 10450 </td><td><p class="starttd"><b>FIXED:</b> <em>When applications and/or Stores are restarted in certain orders, the receiver can log the warning, <code>"Core-9743-08: WARNING: proactive keepalive is not supported at the store"</code>. This can happen even though the Store does support the Proactive Keepalive feature.</em></p>
<p class="endtd"></p>
</td></tr>
<tr>
<td>10379 </td><td><p class="starttd"><b>FIXED:</b> <em>When a persistent source deregisters from the Store by API call (<a class="elRef" doxygen="/29W/Amun/home/sford/backup_exclude/labbox/sfordmac_REL_6_13/29West/lbm/doc/ChangeLog/api.tag:../API/" href="../API/lbm_8h.html#a3a89366ab4e36dfa362e20397778d04a">lbm_src_ume_deregister()</a>), the Store will occasionally crash.</em></p>
<p class="endtd"></p>
</td></tr>
<tr>
<td>10617 </td><td><p class="starttd"><b>FIXED:</b> <em>The Store code sometimes reads an uninitialized memory location. No improper behavior has been seen when this happens, but there is a very small chance that a receiver's outstanding messages will not be properly acknowledged, leading to potential unnecessary message recovery if the receiver restarts. This has never been observed in the field.</em></p>
<p class="endtd"></p>
</td></tr>
<tr>
<td>10564 </td><td><p class="starttd"><b>FIXED:</b> <em>When a Smart Source is configured for persistence, incorrect internal handling can lead to incorrect Forced Reclaims.</em></p>
<p class="endtd"></p>
</td></tr>
<tr>
<td>10462, 10432, 10482 </td><td><p class="starttd"><b>FIXED:</b> <em>After a set of multiple store restarts without clearing the state and cache files, there can be an extended period of topic deafness where persistent receivers will not see messages sent by the source.</em></p>
<p class="endtd"></p>
</td></tr>
<tr>
<td>10454 </td><td><p class="starttd"><b>FIXED:</b> <em>When an RPP store is writing to disk due to a non-blocking receiver exiting, and the disk fills and needs to wrap, the store can stop accepting new messages.</em></p>
<p class="endtd"></p>
</td></tr>
<tr>
<td>10447, 10451, 10458 </td><td><p class="starttd"><b>FIXED:</b> <em>If a source sends messages and then immediately deregisters, there is a chance that the Store will crash with an illegal memory access.</em></p>
<p class="endtd"></p>
</td></tr>
<tr>
<td>10343 </td><td><p class="starttd"><b>FIXED:</b> <em>When a Smart Source is publishing a persisted message stream, and there is a large amount of network packet loss, the publisher can crash with the log: <br />
<code>FATAL: failed assertion [info-&gt;sqn == ctlr-&gt;trail_sqn]</code></em></p>
<p class="endtd"></p>
</td></tr>
<tr>
<td>10341 </td><td><p class="starttd"><b>FIXED:</b> <em>Minor misspelling in Store log message: <br />
<code>Store-8079-10: Staring store...</code> <br />
(Should be "Starting"; the second "t" is missing.)</em></p>
<p class="endtd"></p>
</td></tr>
</table>
<p><br />
 </p>
<h2><a class="anchor" id="queuingfixedlimitationsfor6_12"></a>
Queuing Fixed Limitations for 6.12&nbsp;&nbsp;<small><a href="#queuingfixedlimitationsfor6_12">&lt;-</a></small></h2>
<p>The following bug fixes apply to the UMQ product.</p>
<table class="doxtable">
<tr>
<th>Change Request </th><th><p class="starttd">Description</p>
<p class="endtd"></p>
</th></tr>
<tr>
<td>9974 </td><td><p class="starttd"><b>FIXED:</b> <em>There was a scenario where a late arriving ACK from a ULB receiver could cause the ULB source to crash with an illegal memory access inside <code>lbm_ulb_src_ctlr_handle_ack()</code>.</em></p>
<p class="endtd"></p>
</td></tr>
<tr>
<td>10548 </td><td><p class="starttd"><b>FIXED:</b> <em>Starting in UM 6.11, a non-fatal assertion is generated when shutting down a brokered queue receiver: <br />
<code>WARNING: failed assertion [broker-&gt;rcv_list-&gt;sz==0]</code></em></p>
<p class="endtd"></p>
</td></tr>
<tr>
<td>8899 </td><td><p class="starttd"><b>FIXED:</b> <em>A ULB source will get stuck in an infinite loop if <a class="elRef" doxygen="/29W/Amun/home/sford/backup_exclude/labbox/sfordmac_REL_6_13/29West/lbm/doc/ChangeLog/config.tag:../Config/" href="../Config/grpultramessagingqueuing.html#umqulbapplicationsetmessagereassignmenttimeoutsource">umq_ulb_application_set_message_reassignment_timeout (source)</a> is set to zero and one of the receivers exits.</em></p>
<p class="endtd"></p>
</td></tr>
<tr>
<td>3632, 8596, 8525 </td><td><p class="starttd"><b>FIXED:</b> <em> If you attempt to disable ULB message reassignment by setting option <a class="elRef" doxygen="/29W/Amun/home/sford/backup_exclude/labbox/sfordmac_REL_6_13/29West/lbm/doc/ChangeLog/config.tag:../Config/" href="../Config/grpultramessagingqueuing.html#umqulbapplicationsetmessagereassignmenttimeoutsource">umq_ulb_application_set_message_reassignment_timeout (source)</a> to '<code>x:0</code>', and option <a class="elRef" doxygen="/29W/Amun/home/sford/backup_exclude/labbox/sfordmac_REL_6_13/29West/lbm/doc/ChangeLog/config.tag:../Config/" href="../Config/grpultramessagingqueuing.html#umqulbapplicationsetmessagelifetimesource">umq_ulb_application_set_message_lifetime (source)</a> is already set to the default value of 0, in-flight messages are not discarding.</em></p>
<p><em>As a workaround, to inhibit message reassignment use option <a class="elRef" doxygen="/29W/Amun/home/sford/backup_exclude/labbox/sfordmac_REL_6_13/29West/lbm/doc/ChangeLog/config.tag:../Config/" href="../Config/grpultramessagingqueuing.html#umqulbapplicationsetmessagemaxreassignmentssource">umq_ulb_application_set_message_max_reassignments (source)</a> set to 1, and leave <a class="elRef" doxygen="/29W/Amun/home/sford/backup_exclude/labbox/sfordmac_REL_6_13/29West/lbm/doc/ChangeLog/config.tag:../Config/" href="../Config/grpultramessagingqueuing.html#umqulbapplicationsetmessagereassignmenttimeoutsource">umq_ulb_application_set_message_reassignment_timeout (source)</a> at its default value.</em></p>
<p>This has now been fixed. The workaround is no longer needed.</p>
<p class="endtd"></p>
</td></tr>
</table>
<p><br />
 </p>
<h2><a class="anchor" id="dynamicrouterfixedlimitationsfor6_12"></a>
Dynamic Router Fixed Limitations for 6.12&nbsp;&nbsp;<small><a href="#dynamicrouterfixedlimitationsfor6_12">&lt;-</a></small></h2>
<p>The following bug fixes apply to the Dynamic Routing Option (DRO).</p>
<table class="doxtable">
<tr>
<th>Change Request </th><th><p class="starttd">Description</p>
<p class="endtd"></p>
</th></tr>
<tr>
<td>10443 </td><td><p class="starttd"><b>FIXED:</b> <em>When a DRO portal is queuing outgoing messages (perhaps due to a low rate limiter or a low-bandwidth link), and a topic has more than <a class="elRef" doxygen="/29W/Amun/home/sford/backup_exclude/labbox/sfordmac_REL_6_13/29West/lbm/doc/ChangeLog/config.tag:../Config/" href="../Config/grpdeliverycontrol.html#deliverycontrolmaximumburstlossreceiver">delivery_control_maximum_burst_loss (receiver)</a> (default 1024) messages queued to be sent, there is a possibility that receivers will deliver a burst loss event to the application and not deliver the queued messages, even though they are eventually sent. This is because the originating source sent a TSNI, and the DRO allowed it to bypass the data queue and be sent before the queued data messages. Thus the receiver sees a gap greater than the burst loss configuration and does not wait for the missing data to be sent.</em></p>
<p>The DRO now queues TSNIs behind data messages.</p>
<p class="endtd"></p>
</td></tr>
<tr>
<td>10499 </td><td><p class="starttd"><b>FIXED:</b> <em>The DRO configuration element <a class="elRef" doxygen="/29W/Amun/home/sford/backup_exclude/labbox/sfordmac_REL_6_13/29West/lbm/doc/ChangeLog/gateway.tag:../Gateway/" href="../Gateway/xmlconfigurationreference.html#droelementrouteinfo">&lt;route-info&gt;</a> has the attribute <code>"max-hop-count"</code> which is documented as defaulting to 100. However, the DRO did not properly initialize its internal default, which had the effect of defaulting to 255.</em></p>
<p>The DRO now properly defaults <code>"max-hop-count"</code> to 100.</p>
<p class="endtd"></p>
</td></tr>
<tr>
<td>3548 </td><td><p class="starttd"><b>FIXED:</b> <em>The DRO cannot run as a standalone Windows service.</em></p>
<p>Now fixed. See <a class="elRef" doxygen="/29W/Amun/home/sford/backup_exclude/labbox/sfordmac_REL_6_13/29West/lbm/doc/ChangeLog/operations.tag:../Operations/" href="../Operations/startupshutdownprocedures.html#umdaemonsaswindowsservices">UM Daemons as Windows Services</a>.</p>
<p class="endtd"></p>
</td></tr>
</table>
<p><br />
 </p>
<h1><a class="anchor" id="specialupgradeinsructionsfor6_12"></a>
Special Upgrade Instructions for 6.12&nbsp;&nbsp;<small><a href="#specialupgradeinsructionsfor6_12">&lt;-</a></small></h1>
<p>There was one fixed limitation that will require some users to make changes while upgrading to UM version 6.12.</p>
<ul>
<li>
<a class="el" href="umversion6_12.html#smartsourceheadersizechange">Smart Source Header Size Change</a> </li>
</ul>
<p>In addition, applications running UM version 6.13 and beyond have an potential incompatibility with pre-6.13 DROs. This should not be a problem due to the recommended <a class="el" href="upgradeprocedure.html#orderofupgrades">Order of Upgrades</a> in which daemons are upgraded before applications. But users who need to deviate from that recommended order should be aware of <a class="el" href="knownlimitations.html#bug10833">Known Limitation 10833</a>.</p>
<p><br />
 </p>
<h2><a class="anchor" id="smartsourceheadersizechange"></a>
Smart Source Header Size Change&nbsp;&nbsp;<small><a href="#smartsourceheadersizechange">&lt;-</a></small></h2>
<p>A problem in Smart Source was fixed (fixed limitation <a class="el" href="umversion6_12.html#bug10602">10602</a>) which users of Smart Source need to be aware of.</p>
<p>When a kernel bypass network driver is used, users often change their datagram max size larger than a network MTU to ensure that UM data packets are efficiently filled. See <a class="elRef" doxygen="/29W/Amun/home/sford/backup_exclude/labbox/sfordmac_REL_6_13/29West/lbm/doc/ChangeLog/design.tag:../Design/" href="../Design/architecture.html#datagramsandkernelbypassnetworkdrivers">Datagrams and Kernel Bypass Network Drivers</a> for details.</p>
<p>However, because of limitation <a class="el" href="umversion6_12.html#bug10602">10602</a>, users had to set the datagram max size to different values depending on whether their application used Smart Sources or traditional sources. This was particularly a problem for applications that make use of both Smart Sources and traditional sources; no value was optimal for both.</p>
<p>The fix for limitation <a class="el" href="umversion6_12.html#bug10602">10602</a> was to have Smart Sources reserve the same amount of space for headers as traditional sources.</p>
<dl class="section warning"><dt>Warning</dt><dd>For users who have set the datagram max size larger than an MTU, you may need to reduce the configured value to avoid IP fragmentation in UM version 6.12 and beyond.</dd></dl>
<p>As described in <a class="elRef" doxygen="/29W/Amun/home/sford/backup_exclude/labbox/sfordmac_REL_6_13/29West/lbm/doc/ChangeLog/design.tag:../Design/" href="../Design/architecture.html#datagramsandkernelbypassnetworkdrivers">Datagrams and Kernel Bypass Network Drivers</a>, you will need to experimentally determine the optimal value for datagram max size for your use case. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.11-->
</body>
</html>
