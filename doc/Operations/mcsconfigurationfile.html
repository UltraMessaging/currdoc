<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Operations Guide: MCS Configuration File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen_manual.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Operations Guide
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('mcsconfigurationfile.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">MCS Configuration File </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The MCS configuration file must start with this line: </p><div class="fragment"><div class="line">&lt;?xml version=<span class="stringliteral">&quot;1.0&quot;</span> encoding=<span class="stringliteral">&quot;UTF-8&quot;</span> ?&gt;</div></div><!-- fragment --><p>After that, the '<b>&lt;um-mcs&gt;</b>' element contains the rest of the configuration.</p>
<p>Here is a sample short configuration: </p><div class="fragment"><div class="line">&lt;?xml version=<span class="stringliteral">&quot;1.0&quot;</span> encoding=<span class="stringliteral">&quot;UTF-8&quot;</span> ?&gt;</div><div class="line">&lt;um-mcs version=<span class="stringliteral">&quot;1.0&quot;</span>&gt;</div><div class="line">  &lt;daemon&gt;</div><div class="line">    &lt;log type=<span class="stringliteral">&quot;file&quot;</span> frequency=<span class="stringliteral">&quot;daily&quot;</span> size=<span class="stringliteral">&quot;10&quot;</span> max-history=<span class="stringliteral">&quot;10&quot;</span></div><div class="line">         compression=<span class="stringliteral">&quot;zip&quot;</span>&gt;MCS.log&lt;/log&gt;</div><div class="line">    &lt;pid-file&gt;MCS.pid&lt;/pid-file&gt;</div><div class="line">  &lt;/daemon&gt;</div><div class="line">  &lt;connector&gt;</div><div class="line">    &lt;type&gt;sqlite&lt;/type&gt;</div><div class="line">    &lt;properties-file&gt;/mcs/my_sqlite.properties&lt;/properties-file&gt;</div><div class="line">  &lt;/connector&gt;</div><div class="line">  &lt;receiver-transport-opts&gt;</div><div class="line">    &lt;config-file&gt;/mcs/mcs_transp.cfg&lt;/config-file&gt;</div><div class="line">  &lt;/receiver-transport-opts&gt;</div><div class="line">&lt;/um-mcs&gt;</div></div><!-- fragment --><p>Here is a sample "mcs_transp.cfg" file: </p><pre class="fragment">context default_interface "en0"
context resolver_unicast_daemon "en0"-&gt;10.1.2.3:12000
source transport tcp
</pre><p> This conforms to the <a class="el" href="monitoring.html#automaticmonitoringsample">Automatic Monitoring Sample</a>.</p>
<p>Here is a sample "my_sqlite.properties" file: </p><pre class="fragment">sqlite_database_path=/mcs/ummon.db
</pre><p>When the daemon monitor is enabled, the first three lbm attribute option settings are recommended.</p>
<p><br />
 </p>
<h1><a class="anchor" id="mcsconfigurationelements"></a>
MCS Configuration Elements&nbsp;&nbsp;<small><a href="#mcsconfigurationelements">&lt;-</a></small></h1>
<hr/>
<p> <br />
 </p>
<h2><a class="anchor" id="mcselementummcs"></a>
MCS Element "&lt;um-mcs&gt;"&nbsp;&nbsp;<small><a href="#mcselementummcs">&lt;-</a></small></h2>
<p>Container element which holds the MCS configuration. Also defines the version of the configuration format used by the file.</p>
<ul>
<li>
<b>Children:</b> <a class="el" href="mcsconfigurationfile.html#mcselementdaemon">&lt;daemon&gt;</a>, <a class="el" href="mcsconfigurationfile.html#mcselementconnector">&lt;connector&gt;</a>, <a class="el" href="mcsconfigurationfile.html#mcselementreceivertransportopts">&lt;receiver-transport-opts&gt;</a> </li>
</ul>
<p><b>XML</b> <b>Attributes:</b> </p><table class="doxtable">
<tr>
<th>Attribute </th><th>Description </th><th>Valid Values </th><th>Default Value </th></tr>
<tr>
<td><b>version</b> </td><td>Version number of user's configuration file. </td><td>nonEmptyString </td><td><b><code>"1.0"</code></b> </td></tr>
</table>
<p><b>Example:</b> </p><div class="fragment"><div class="line">&lt;?xml version=<span class="stringliteral">&quot;1.0&quot;</span> encoding=<span class="stringliteral">&quot;UTF-8&quot;</span> ?&gt;</div><div class="line">&lt;um-mcs version=<span class="stringliteral">&quot;1.0&quot;</span>&gt;</div><div class="line">  ...</div><div class="line">&lt;/um-mcs&gt;</div></div><!-- fragment --><hr/>
<p> <br />
 </p>
<h2><a class="anchor" id="mcselementreceivertransportopts"></a>
MCS Element "&lt;receiver-transport-opts&gt;"&nbsp;&nbsp;<small><a href="#mcselementreceivertransportopts">&lt;-</a></small></h2>
<p>Supplies configuration for the monitoring receiver created by MCS.</p>
<ul>
<li>
<b>Cardinality</b> (number of times element can be supplied): 0 .. 1 </li>
<li>
<b>Parent:</b> <a class="el" href="mcsconfigurationfile.html#mcselementummcs">&lt;um-mcs&gt;</a> </li>
<li>
<b>Children:</b> <a class="el" href="mcsconfigurationfile.html#mcselementtopic">&lt;topic&gt;</a>, <a class="el" href="mcsconfigurationfile.html#mcselementwildcardtopic">&lt;wildcard-topic&gt;</a>, <a class="el" href="mcsconfigurationfile.html#mcselementconfigfile">&lt;config-file&gt;</a> </li>
</ul>
<p><b>Example:</b> </p><div class="fragment"><div class="line">&lt;?xml version=<span class="stringliteral">&quot;1.0&quot;</span> encoding=<span class="stringliteral">&quot;UTF-8&quot;</span> ?&gt;</div><div class="line">&lt;um-mcs version=<span class="stringliteral">&quot;1.0&quot;</span>&gt;</div><div class="line">  ...</div><div class="line">  &lt;receiver-transport-opts&gt;</div><div class="line">    ...</div><div class="line">  &lt;/receiver-transport-opts&gt;</div><div class="line">  ...</div><div class="line">&lt;/um-mcs&gt;</div></div><!-- fragment --><hr/>
<p> <br />
 </p>
<h2><a class="anchor" id="mcselementconfigfile"></a>
MCS Element "&lt;config-file&gt;"&nbsp;&nbsp;<small><a href="#mcselementconfigfile">&lt;-</a></small></h2>
<p>Supplies a UM configuration file for the monitoring receiver created by MCS.</p>
<ul>
<li>
<b>Cardinality</b> (number of times element can be supplied): 0 .. 1 </li>
<li>
<b>Parent:</b> <a class="el" href="mcsconfigurationfile.html#mcselementreceivertransportopts">&lt;receiver-transport-opts&gt;</a> </li>
</ul>
<p><b>Example:</b> </p><div class="fragment"><div class="line">&lt;?xml version=<span class="stringliteral">&quot;1.0&quot;</span> encoding=<span class="stringliteral">&quot;UTF-8&quot;</span> ?&gt;</div><div class="line">&lt;um-mcs version=<span class="stringliteral">&quot;1.0&quot;</span>&gt;</div><div class="line">  ...</div><div class="line">  &lt;receiver-transport-opts&gt;</div><div class="line">    &lt;config-file&gt;mcs_transp.cfg&lt;/config-file&gt;</div><div class="line">    ...</div><div class="line">  &lt;/receiver-transport-opts&gt;</div><div class="line">  ...</div><div class="line">&lt;/um-mcs&gt;</div></div><!-- fragment --><hr/>
<p> <br />
 </p>
<h2><a class="anchor" id="mcselementwildcardtopic"></a>
MCS Element "&lt;wildcard-topic&gt;"&nbsp;&nbsp;<small><a href="#mcselementwildcardtopic">&lt;-</a></small></h2>
<p>Sets the monitoring receiver to use a wildcard pattern instead of a simple topic to subscribe to statistics data sent by UM components (applications, daemons, etc). If supplied, <a class="el" href="mcsconfigurationfile.html#mcselementtopic">MCS Element "&lt;topic&gt;"</a> is ignored.</p>
<p>If not supplied, <a class="el" href="mcsconfigurationfile.html#mcselementtopic">MCS Element "&lt;topic&gt;"</a> is used.</p>
<ul>
<li>
<b>Cardinality</b> (number of times element can be supplied): 0 .. 1 </li>
<li>
<b>Parent:</b> <a class="el" href="mcsconfigurationfile.html#mcselementreceivertransportopts">&lt;receiver-transport-opts&gt;</a> </li>
</ul>
<p><b>Example:</b> </p><div class="fragment"><div class="line">&lt;?xml version=<span class="stringliteral">&quot;1.0&quot;</span> encoding=<span class="stringliteral">&quot;UTF-8&quot;</span> ?&gt;</div><div class="line">&lt;um-mcs version=<span class="stringliteral">&quot;1.0&quot;</span>&gt;</div><div class="line">  ...</div><div class="line">  &lt;receiver-transport-opts&gt;</div><div class="line">    &lt;wildcard-topic&gt;My.*Topic&lt;/wildcard-topic&gt;</div><div class="line">    ...</div><div class="line">  &lt;/receiver-transport-opts&gt;</div><div class="line">  ...</div><div class="line">&lt;/um-mcs&gt;</div></div><!-- fragment --><hr/>
<p> <br />
 </p>
<h2><a class="anchor" id="mcselementtopic"></a>
MCS Element "&lt;topic&gt;"&nbsp;&nbsp;<small><a href="#mcselementtopic">&lt;-</a></small></h2>
<p>The topic that the monitoring receiver will subscribe to get statistics data sent by UM components (applications, daemons, etc).</p>
<p>If not supplied, defaults to "/29west/statistics".</p>
<ul>
<li>
<b>Cardinality</b> (number of times element can be supplied): 0 .. 1 </li>
<li>
<b>Parent:</b> <a class="el" href="mcsconfigurationfile.html#mcselementreceivertransportopts">&lt;receiver-transport-opts&gt;</a> </li>
</ul>
<p><b>Example:</b> </p><div class="fragment"><div class="line">&lt;?xml version=<span class="stringliteral">&quot;1.0&quot;</span> encoding=<span class="stringliteral">&quot;UTF-8&quot;</span> ?&gt;</div><div class="line">&lt;um-mcs version=<span class="stringliteral">&quot;1.0&quot;</span>&gt;</div><div class="line">  ...</div><div class="line">  &lt;receiver-transport-opts&gt;</div><div class="line">    &lt;topic&gt;MyStatsTopic&lt;/topic&gt;</div><div class="line">    ...</div><div class="line">  &lt;/receiver-transport-opts&gt;</div><div class="line">  ...</div><div class="line">&lt;/um-mcs&gt;</div></div><!-- fragment --><hr/>
<p> <br />
 </p>
<h2><a class="anchor" id="mcselementconnector"></a>
MCS Element "&lt;connector&gt;"&nbsp;&nbsp;<small><a href="#mcselementconnector">&lt;-</a></small></h2>
<p>Configures the connector that MCS should use to write statistics data. A connector is typically an interface to a database.</p>
<ul>
<li>
<b>Cardinality</b> (number of times element can be supplied): 0 .. 1 </li>
<li>
<b>Parent:</b> <a class="el" href="mcsconfigurationfile.html#mcselementummcs">&lt;um-mcs&gt;</a> </li>
<li>
<b>Children:</b> <a class="el" href="mcsconfigurationfile.html#mcselementtype">&lt;type&gt;</a>, <a class="el" href="mcsconfigurationfile.html#mcselementpropertiesfile">&lt;properties-file&gt;</a> </li>
</ul>
<p><b>Example:</b> </p><div class="fragment"><div class="line">&lt;?xml version=<span class="stringliteral">&quot;1.0&quot;</span> encoding=<span class="stringliteral">&quot;UTF-8&quot;</span> ?&gt;</div><div class="line">&lt;um-mcs version=<span class="stringliteral">&quot;1.0&quot;</span>&gt;</div><div class="line">  ...</div><div class="line">  &lt;connector&gt;</div><div class="line">    ...</div><div class="line">  &lt;/connector&gt;</div><div class="line">  ...</div><div class="line">&lt;/um-mcs&gt;</div></div><!-- fragment --><hr/>
<p> <br />
 </p>
<h2><a class="anchor" id="mcselementpropertiesfile"></a>
MCS Element "&lt;properties-file&gt;"&nbsp;&nbsp;<small><a href="#mcselementpropertiesfile">&lt;-</a></small></h2>
<p>Specifies a Java properties file to pass to the connector.</p>
<p>See <a class="el" href="monitoring.html#monitoringcollectorservicemcs">Monitoring Collector Service (MCS)</a>.</p>
<ul>
<li>
<b>Cardinality</b> (number of times element can be supplied): 0 .. 1 </li>
<li>
<b>Parent:</b> <a class="el" href="mcsconfigurationfile.html#mcselementconnector">&lt;connector&gt;</a> </li>
</ul>
<p><b>Example:</b> </p><div class="fragment"><div class="line">&lt;?xml version=<span class="stringliteral">&quot;1.0&quot;</span> encoding=<span class="stringliteral">&quot;UTF-8&quot;</span> ?&gt;</div><div class="line">&lt;um-mcs version=<span class="stringliteral">&quot;1.0&quot;</span>&gt;</div><div class="line">  ...</div><div class="line">  &lt;connector&gt;</div><div class="line">    &lt;properties-file&gt;my_sqlite.properties&lt;/properties-file&gt;</div><div class="line">    ...</div><div class="line">  &lt;/connector&gt;</div><div class="line">  ...</div><div class="line">&lt;/um-mcs&gt;</div></div><!-- fragment --><hr/>
<p> <br />
 </p>
<h2><a class="anchor" id="mcselementtype"></a>
MCS Element "&lt;type&gt;"&nbsp;&nbsp;<small><a href="#mcselementtype">&lt;-</a></small></h2>
<p>Defines the connector type to use. Supported types are "sqlite" or "hdfs".</p>
<p>If not supplied, "sqlite" is used.</p>
<p>See <a class="el" href="monitoring.html#monitoringcollectorservicemcs">Monitoring Collector Service (MCS)</a>.</p>
<ul>
<li>
<b>Cardinality</b> (number of times element can be supplied): 0 .. 1 </li>
<li>
<b>Parent:</b> <a class="el" href="mcsconfigurationfile.html#mcselementconnector">&lt;connector&gt;</a> </li>
</ul>
<p><b>Example:</b> </p><div class="fragment"><div class="line">&lt;?xml version=<span class="stringliteral">&quot;1.0&quot;</span> encoding=<span class="stringliteral">&quot;UTF-8&quot;</span> ?&gt;</div><div class="line">&lt;um-mcs version=<span class="stringliteral">&quot;1.0&quot;</span>&gt;</div><div class="line">  ...</div><div class="line">  &lt;connector&gt;</div><div class="line">    &lt;type&gt;sqlite&lt;/type&gt;</div><div class="line">    ...</div><div class="line">  &lt;/connector&gt;</div><div class="line">  ...</div><div class="line">&lt;/um-mcs&gt;</div></div><!-- fragment --><hr/>
<p> <br />
 </p>
<h2><a class="anchor" id="mcselementdaemon"></a>
MCS Element "&lt;daemon&gt;"&nbsp;&nbsp;<small><a href="#mcselementdaemon">&lt;-</a></small></h2>
<p>Contains elements which define logging behavior and sets a file name for the service's Process ID.</p>
<p>See child elements for details.</p>
<ul>
<li>
<b>Cardinality</b> (number of times element can be supplied): 0 .. 1 </li>
<li>
<b>Parent:</b> <a class="el" href="mcsconfigurationfile.html#mcselementummcs">&lt;um-mcs&gt;</a> </li>
<li>
<b>Children:</b> <a class="el" href="mcsconfigurationfile.html#mcselementlog">&lt;log&gt;</a>, <a class="el" href="mcsconfigurationfile.html#mcselementpidfile">&lt;pid-file&gt;</a> </li>
</ul>
<p><b>Example:</b> </p><div class="fragment"><div class="line">&lt;?xml version=<span class="stringliteral">&quot;1.0&quot;</span> encoding=<span class="stringliteral">&quot;UTF-8&quot;</span> ?&gt;</div><div class="line">&lt;um-mcs version=<span class="stringliteral">&quot;1.0&quot;</span>&gt;</div><div class="line">  &lt;daemon&gt;</div><div class="line">    ...</div><div class="line">  &lt;/daemon&gt;</div><div class="line">  ...</div><div class="line">&lt;/um-mcs&gt;</div></div><!-- fragment --><hr/>
<p> <br />
 </p>
<h2><a class="anchor" id="mcselementpidfile"></a>
MCS Element "&lt;pid-file&gt;"&nbsp;&nbsp;<small><a href="#mcselementpidfile">&lt;-</a></small></h2>
<p>Supplies the desired name of file in which the MCS writes its Process ID (PID).</p>
<ul>
<li>
<b>Cardinality</b> (number of times element can be supplied): 0 .. 1 </li>
<li>
<b>Parent:</b> <a class="el" href="mcsconfigurationfile.html#mcselementdaemon">&lt;daemon&gt;</a> </li>
</ul>
<p><b>Example:</b> (MCS writes process ID to "mcs_pid.txt" file) </p><div class="fragment"><div class="line">&lt;?xml version=<span class="stringliteral">&quot;1.0&quot;</span> encoding=<span class="stringliteral">&quot;UTF-8&quot;</span> ?&gt;</div><div class="line">&lt;um-mcs version=<span class="stringliteral">&quot;1.0&quot;</span>&gt;</div><div class="line">  &lt;daemon&gt;</div><div class="line">    &lt;pid-file&gt;mcs_pid.txt&lt;/pid-file&gt;</div><div class="line">    ...</div><div class="line">  &lt;/daemon&gt;</div><div class="line">  ...</div><div class="line">&lt;/um-mcs&gt;</div></div><!-- fragment --><hr/>
<p> <br />
 </p>
<h2><a class="anchor" id="mcselementlog"></a>
MCS Element "&lt;log&gt;"&nbsp;&nbsp;<small><a href="#mcselementlog">&lt;-</a></small></h2>
<p>Configures MCS logging behavior. The value contained within the <code>&lt;log&gt;...&lt;/log&gt;</code> is a file name, but is only used if the "type" attribute is set to "file".</p>
<p>When the <code>type</code> attribute is set to <code>"file"</code>, the MCS supports "rolling" the log file, which consists a series of files over time so that no one file grows too large.</p>
<ul>
<li>
<b>Cardinality</b> (number of times element can be supplied): 0 .. 1 </li>
<li>
<b>Parent:</b> <a class="el" href="mcsconfigurationfile.html#mcselementdaemon">&lt;daemon&gt;</a> </li>
</ul>
<p><b>XML</b> <b>Attributes:</b> </p><table class="doxtable">
<tr>
<th>Attribute </th><th>Description </th><th>Valid Values </th><th>Default Value </th></tr>
<tr>
<td><b>type</b> </td><td>Where to write log messages. </td><td><b><code>"file"</code></b> - Write log messages to a file. <br />
<b><code>"console"</code></b> - Write log messages to standard output. </td><td><b><code>"console"</code></b> </td></tr>
<tr>
<td><b>frequency</b> </td><td>Time-frame by which to roll the log file. </td><td><b><code>"disable"</code></b> - Do not roll the log file based on time. <br />
<b><code>"daily"</code></b> - Roll the log file at midnight. <br />
<b><code>"hourly"</code></b> - Roll the log file each hour. </td><td><b><code>"disable"</code></b> </td></tr>
<tr>
<td><b>size</b> </td><td>Size (in MB, i.e. 2**20, or 1,048,576) of current log file at which it is rolled. Specify 0 to disable rolling by log file size. </td><td>positiveInteger </td><td><b><code>"10"</code></b> (10,485,760 bytes) </td></tr>
<tr>
<td><b>max-history</b> </td><td>Number of rolled log files at which the oldest file is deleted when the current log file is rolled. </td><td>positiveInteger </td><td><b><code>"10"</code></b> </td></tr>
<tr>
<td><b>compression</b> </td><td>Enables compression for rolled log files. </td><td><b><code>"none"</code></b> - Do not compress log files. <br />
<b><code>"zip"</code></b> - Compress log files using "zip" format. <br />
<b><code>"gzip"</code></b> - Compress log files using "gzip" format. </td><td><b><code>"none"</code></b> </td></tr>
</table>
<p><b>Example</b> <b>1</b>: (write log messages to standard out) </p><div class="fragment"><div class="line">&lt;?xml version=<span class="stringliteral">&quot;1.0&quot;</span> encoding=<span class="stringliteral">&quot;UTF-8&quot;</span> ?&gt;</div><div class="line">&lt;um-mcs version=<span class="stringliteral">&quot;1.0&quot;</span>&gt;</div><div class="line">  &lt;daemon&gt;</div><div class="line">    &lt;log type=<span class="stringliteral">&quot;console&quot;</span>/&gt;</div><div class="line">    ...</div><div class="line">  &lt;/daemon&gt;</div><div class="line">  ...</div><div class="line">&lt;/um-mcs&gt;</div></div><!-- fragment --><p><b>Example</b> <b>2</b>: (write log messages to "mcs.log" file) </p><div class="fragment"><div class="line">&lt;?xml version=<span class="stringliteral">&quot;1.0&quot;</span> encoding=<span class="stringliteral">&quot;UTF-8&quot;</span> ?&gt;</div><div class="line">&lt;um-mcs version=<span class="stringliteral">&quot;1.0&quot;</span>&gt;</div><div class="line">  &lt;daemon&gt;</div><div class="line">    &lt;log type=<span class="stringliteral">&quot;file&quot;</span> frequency=<span class="stringliteral">&quot;daily&quot;</span>&gt;mcs.log&lt;/log&gt;</div><div class="line">    ...</div><div class="line">  &lt;/daemon&gt;</div><div class="line">  ...</div><div class="line">&lt;/um-mcs&gt;</div></div><!-- fragment --><p><br />
<br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
</p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.11-->
</body>
</html>
