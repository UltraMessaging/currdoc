<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>UM C API: Source code for lbmmonfmtcsv.c</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen_api.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">UM C API
   &#160;<span id="projectnumber">6.11.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('lbmmonfmtcsv_c_page.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">Source code for lbmmonfmtcsv.c </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><div class="fragment"><div class="line"><span class="comment">/*</span></div><div class="line"><span class="comment">  All of the documentation and software included in this and any</span></div><div class="line"><span class="comment">  other Informatica Corporation Ultra Messaging Releases</span></div><div class="line"><span class="comment">  Copyright (C) Informatica Corporation. All rights reserved.</span></div><div class="line"><span class="comment"></span></div><div class="line"><span class="comment">  Redistribution and use in source and binary forms, with or without</span></div><div class="line"><span class="comment">  modification, are permitted only as covered by the terms of a</span></div><div class="line"><span class="comment">  valid software license agreement with Informatica Corporation.</span></div><div class="line"><span class="comment"></span></div><div class="line"><span class="comment">  Copyright (C) 2004-2018, Informatica Corporation. All Rights Reserved.</span></div><div class="line"><span class="comment"></span></div><div class="line"><span class="comment">  THE SOFTWARE IS PROVIDED &quot;AS IS&quot; AND INFORMATICA DISCLAIMS ALL WARRANTIES</span></div><div class="line"><span class="comment">  EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION, ANY IMPLIED WARRANTIES OF</span></div><div class="line"><span class="comment">  NON-INFRINGEMENT, MERCHANTABILITY OR FITNESS FOR A PARTICULAR</span></div><div class="line"><span class="comment">  PURPOSE.  INFORMATICA DOES NOT WARRANT THAT USE OF THE SOFTWARE WILL BE</span></div><div class="line"><span class="comment">  UNINTERRUPTED OR ERROR-FREE.  INFORMATICA SHALL NOT, UNDER ANY CIRCUMSTANCES, BE</span></div><div class="line"><span class="comment">  LIABLE TO LICENSEE FOR LOST PROFITS, CONSEQUENTIAL, INCIDENTAL, SPECIAL OR</span></div><div class="line"><span class="comment">  INDIRECT DAMAGES ARISING OUT OF OR RELATED TO THIS AGREEMENT OR THE</span></div><div class="line"><span class="comment">  TRANSACTIONS CONTEMPLATED HEREUNDER, EVEN IF INFORMATICA HAS BEEN APPRISED OF</span></div><div class="line"><span class="comment">  THE LIKELIHOOD OF SUCH DAMAGES.</span></div><div class="line"><span class="comment"></span></div><div class="line"><span class="comment">*/</span></div><div class="line"></div><div class="line"><span class="preprocessor">#ifdef __VOS__</span></div><div class="line"><span class="preprocessor">#define _POSIX_C_SOURCE 200112L</span></div><div class="line"><span class="preprocessor">#include &lt;sys/time.h&gt;</span></div><div class="line"><span class="preprocessor">#endif</span></div><div class="line"></div><div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;string.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;stddef.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;time.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;limits.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;errno.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;ctype.h&gt;</span></div><div class="line"><span class="preprocessor">#ifdef _WIN32</span></div><div class="line"><span class="preprocessor">        #define strcasecmp stricmp</span></div><div class="line"><span class="preprocessor">        #define snprintf _snprintf</span></div><div class="line"><span class="preprocessor">#else</span></div><div class="line"><span class="preprocessor">#endif</span></div><div class="line"><span class="preprocessor">#if defined(__TANDEM)</span></div><div class="line"><span class="preprocessor">        #include &lt;strings.h&gt;</span></div><div class="line"><span class="preprocessor">#endif</span></div><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="lbmmon_8h.html">lbm/lbmmon.h</a>&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;lbm/lbmmonfmtcsv.h&gt;</span></div><div class="line"><span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="structlbmmon__format__func__t__stct.html">lbmmon_format_func_t</a> LBMMON_FORMAT_CSV =</div><div class="line">{</div><div class="line">        lbmmon_format_csv_init,</div><div class="line">        lbmmon_rcv_format_csv_serialize,</div><div class="line">        lbmmon_src_format_csv_serialize,</div><div class="line">        lbmmon_rcv_format_csv_deserialize,</div><div class="line">        lbmmon_src_format_csv_deserialize,</div><div class="line">        lbmmon_format_csv_finish,</div><div class="line">        lbmmon_format_csv_errmsg,</div><div class="line">        lbmmon_evq_format_csv_serialize,</div><div class="line">        lbmmon_evq_format_csv_deserialize,</div><div class="line">        lbmmon_ctx_format_csv_serialize,</div><div class="line">        lbmmon_ctx_format_csv_deserialize,</div><div class="line">        lbmmon_rcv_topic_format_csv_serialize,</div><div class="line">        lbmmon_rcv_topic_format_csv_deserialize,</div><div class="line">        lbmmon_wildcard_rcv_format_csv_serialize,</div><div class="line">        lbmmon_wildcard_rcv_format_csv_deserialize</div><div class="line">};</div><div class="line"></div><div class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span></div><div class="line">{</div><div class="line">        <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> mSeparator;</div><div class="line">        <span class="keywordtype">size_t</span> mBufferSize;</div><div class="line">        <span class="keywordtype">char</span> * mBuffer;</div><div class="line">} lbmmon_format_csv_t;</div><div class="line"></div><div class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> * next_csv_value(<span class="keyword">const</span> <span class="keywordtype">char</span> * String, <span class="keywordtype">char</span> * Value, <span class="keywordtype">size_t</span> Size, <span class="keywordtype">char</span> Separator);</div><div class="line"></div><div class="line"><span class="preprocessor">#define LBMMON_FORMAT_CSV_MODULE_ID     1</span></div><div class="line"><span class="preprocessor">#define LBMMON_FORMAT_CSV_VERSION_1 1</span></div><div class="line"><span class="preprocessor">#define LBMMON_FORMAT_CSV_VERSION_2 2</span></div><div class="line"><span class="preprocessor">#define LBMMON_FORMAT_CSV_VERSION_3 3</span></div><div class="line"><span class="preprocessor">#define LBMMON_FORMAT_CSV_VERSION_4 4</span></div><div class="line"><span class="preprocessor">#define LBMMON_FORMAT_CSV_VERSION_5 5</span></div><div class="line"><span class="preprocessor">#define LBMMON_FORMAT_CSV_VERSION_CURRENT LBMMON_FORMAT_CSV_VERSION_5</span></div><div class="line"><span class="preprocessor">#define MAKE_MODULE_VERSION(version) ((unsigned short) ((((unsigned char) LBMMON_FORMAT_CSV_MODULE_ID) &lt;&lt; 8) | ((unsigned char) version)))</span></div><div class="line"><span class="preprocessor">#define MODULE_ID(id) ((unsigned char) ((id &amp; 0xff00) &gt;&gt; 8))</span></div><div class="line"><span class="preprocessor">#define MODULE_VERSION(id) ((unsigned char) (id &amp; 0xff))</span></div><div class="line"></div><div class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span></div><div class="line">{</div><div class="line">        <span class="keyword">const</span> <span class="keywordtype">size_t</span> * layout;</div><div class="line">        <span class="keywordtype">size_t</span> count;</div><div class="line">} lbmmon_csv_layout_t;</div><div class="line"></div><div class="line"><span class="keyword">static</span> <span class="keywordtype">char</span> ErrorString[1024];</div><div class="line"></div><div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> lbmmon_format_csv_report_allocation_error(<span class="keywordtype">size_t</span> Size)</div><div class="line">{</div><div class="line">        snprintf(ErrorString, <span class="keyword">sizeof</span>(ErrorString), <span class="stringliteral">&quot;Unable to allocate %u bytes&quot;</span>, (<span class="keywordtype">unsigned</span>) Size);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> lbmmon_format_csv_convert_to_hex(<span class="keywordtype">char</span> * Buffer, <span class="keyword">const</span> <a class="code" href="lbm_8h.html#a09c7963deb485135d5bb29c84cd7d3a9">lbm_uint8_t</a> * Data, <span class="keywordtype">size_t</span> Length)</div><div class="line">{</div><div class="line">        <span class="keyword">static</span> <span class="keywordtype">char</span> hextable[16] =</div><div class="line">                { <span class="charliteral">&#39;0&#39;</span>, <span class="charliteral">&#39;1&#39;</span>, <span class="charliteral">&#39;2&#39;</span>, <span class="charliteral">&#39;3&#39;</span>, <span class="charliteral">&#39;4&#39;</span>, <span class="charliteral">&#39;5&#39;</span>, <span class="charliteral">&#39;6&#39;</span>, <span class="charliteral">&#39;7&#39;</span>, <span class="charliteral">&#39;8&#39;</span>, <span class="charliteral">&#39;9&#39;</span>, <span class="charliteral">&#39;a&#39;</span>, <span class="charliteral">&#39;b&#39;</span>, <span class="charliteral">&#39;c&#39;</span>, <span class="charliteral">&#39;d&#39;</span>, <span class="charliteral">&#39;e&#39;</span>, <span class="charliteral">&#39;f&#39;</span> };</div><div class="line">        <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> c;</div><div class="line">        <span class="keywordtype">char</span> * buf = Buffer;</div><div class="line">        <span class="keywordtype">size_t</span> iidx = 0;</div><div class="line">        <span class="keywordtype">size_t</span> oidx = 0;</div><div class="line"></div><div class="line">        <span class="keywordflow">while</span> (iidx &lt; Length)</div><div class="line">        {</div><div class="line">                c = Data[iidx];</div><div class="line">                buf[oidx++] = hextable[((c &gt;&gt; 4) &amp; 0x0f)];</div><div class="line">                buf[oidx++] = hextable[(c &amp; 0x0f)];</div><div class="line">                iidx++;</div><div class="line">        }</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> lbmmon_format_csv_convert_from_hex(<span class="keywordtype">char</span> * Buffer, <span class="keyword">const</span> <a class="code" href="lbm_8h.html#a09c7963deb485135d5bb29c84cd7d3a9">lbm_uint8_t</a> * Data, <span class="keywordtype">size_t</span> Length)</div><div class="line">{</div><div class="line">        <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> c;</div><div class="line">        <span class="keywordtype">char</span> * buf = Buffer;</div><div class="line">        <span class="keywordtype">size_t</span> iidx = 0;</div><div class="line">        <span class="keywordtype">size_t</span> oidx = 0;</div><div class="line">        <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> n1;</div><div class="line">        <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> n2;</div><div class="line">        <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> b;</div><div class="line"></div><div class="line">        <span class="keywordflow">if</span> ((Length % 2) != 0)</div><div class="line">        {</div><div class="line">                memset((<span class="keywordtype">void</span> *) Buffer, 0, (Length / 2));</div><div class="line">                <span class="keywordflow">return</span>;</div><div class="line">        }</div><div class="line">        <span class="keywordflow">while</span> (iidx &lt; Length)</div><div class="line">        {</div><div class="line">                b = 0;</div><div class="line">                c = Data[iidx++];</div><div class="line">                <span class="keywordflow">if</span> (isxdigit(c))</div><div class="line">                {</div><div class="line">                        <span class="keywordflow">if</span> (isdigit(c))</div><div class="line">                        {</div><div class="line">                                n1 = c - <span class="charliteral">&#39;0&#39;</span>;</div><div class="line">                        }</div><div class="line">                        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isupper(c))</div><div class="line">                        {</div><div class="line">                                n1 = 0x0a + (c - <span class="charliteral">&#39;A&#39;</span>);</div><div class="line">                        }</div><div class="line">                        <span class="keywordflow">else</span></div><div class="line">                        {</div><div class="line">                                n1 = 0x0a + (c - <span class="charliteral">&#39;a&#39;</span>);</div><div class="line">                        }</div><div class="line">                }</div><div class="line">                <span class="keywordflow">else</span></div><div class="line">                {</div><div class="line">                        n1 = 0;</div><div class="line">                }</div><div class="line">                c = Data[iidx++];</div><div class="line">                <span class="keywordflow">if</span> (isxdigit(c))</div><div class="line">                {</div><div class="line">                        <span class="keywordflow">if</span> (isdigit(c))</div><div class="line">                        {</div><div class="line">                                n2 = c - <span class="charliteral">&#39;0&#39;</span>;</div><div class="line">                        }</div><div class="line">                        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isupper(c))</div><div class="line">                        {</div><div class="line">                                n2 = 0x0a + (c - <span class="charliteral">&#39;A&#39;</span>);</div><div class="line">                        }</div><div class="line">                        <span class="keywordflow">else</span></div><div class="line">                        {</div><div class="line">                                n2 = 0x0a + (c - <span class="charliteral">&#39;a&#39;</span>);</div><div class="line">                        }</div><div class="line">                }</div><div class="line">                <span class="keywordflow">else</span></div><div class="line">                {</div><div class="line">                        n2 = 0;</div><div class="line">                }</div><div class="line">                b = ((n1 &amp; 0x0f) &lt;&lt; 4) | (n2 &amp; 0x0f);</div><div class="line">                buf[oidx++] = b;</div><div class="line">        }</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">const</span> <a class="code" href="structlbmmon__format__func__t__stct.html">lbmmon_format_func_t</a> * lbmmon_format_csv_module(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">        <span class="keywordflow">return</span> (&amp;LBMMON_FORMAT_CSV);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> lbmmon_format_csv_init(<span class="keywordtype">void</span> * * FormatClientData, <span class="keyword">const</span> <span class="keywordtype">void</span> * FormatOptions)</div><div class="line">{</div><div class="line">        <span class="keywordtype">char</span> key[512];</div><div class="line">        <span class="keywordtype">char</span> value[512];</div><div class="line">        <span class="keyword">const</span> <span class="keywordtype">char</span> * ptr = (<span class="keyword">const</span> <span class="keywordtype">char</span> *) FormatOptions;</div><div class="line">        lbmmon_format_csv_t * data;</div><div class="line"></div><div class="line">        memset(ErrorString, 0, <span class="keyword">sizeof</span>(ErrorString));</div><div class="line">        *FormatClientData = NULL;</div><div class="line">        data = malloc(<span class="keyword">sizeof</span>(lbmmon_format_csv_t));</div><div class="line">        <span class="keywordflow">if</span> (data == NULL)</div><div class="line">        {</div><div class="line">                lbmmon_format_csv_report_allocation_error(<span class="keyword">sizeof</span>(lbmmon_format_csv_t));</div><div class="line">                <span class="keywordflow">return</span> (-1);</div><div class="line">        }</div><div class="line">        data-&gt;mSeparator = <span class="charliteral">&#39;,&#39;</span>;</div><div class="line">        data-&gt;mBufferSize = 1024;</div><div class="line">        data-&gt;mBuffer = malloc(data-&gt;mBufferSize);</div><div class="line">        <span class="keywordflow">if</span> (data-&gt;mBuffer == NULL)</div><div class="line">        {</div><div class="line">                lbmmon_format_csv_report_allocation_error(data-&gt;mBufferSize);</div><div class="line">                free(data);</div><div class="line">                <span class="keywordflow">return</span> (-1);    </div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="keywordflow">while</span> ((ptr = <a class="code" href="lbmmon_8h.html#ad10ac6fdaa7ba17b8efceca176c36070">lbmmon_next_key_value_pair</a>(ptr, key, <span class="keyword">sizeof</span>(key), value, <span class="keyword">sizeof</span>(value))) != NULL)</div><div class="line">        {</div><div class="line">                <span class="keywordflow">if</span> (strcasecmp(key, <span class="stringliteral">&quot;separator&quot;</span>) == 0)</div><div class="line">                {</div><div class="line">                        data-&gt;mSeparator = value[0];</div><div class="line">                }</div><div class="line">        }</div><div class="line">        *FormatClientData = (<span class="keywordtype">void</span> *)data;</div><div class="line">        <span class="keywordflow">return</span> (0);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">/*</span></div><div class="line"><span class="comment"> Format of the CSV receiver statistics data is:</span></div><div class="line"><span class="comment">     type (one of LBM_TRANSPORT_STAT_* values)</span></div><div class="line"><span class="comment">     source (as a string)</span></div><div class="line"><span class="comment">     actual statistics, depending on type....</span></div><div class="line"><span class="comment">         for LBTRM:</span></div><div class="line"><span class="comment">             msgs_rcved</span></div><div class="line"><span class="comment">             bytes_rcved</span></div><div class="line"><span class="comment">             nak_pckts_sent</span></div><div class="line"><span class="comment">             naks_sent</span></div><div class="line"><span class="comment">             lost</span></div><div class="line"><span class="comment">             ncfs_ignored</span></div><div class="line"><span class="comment">             ncfs_shed</span></div><div class="line"><span class="comment">             ncfs_rx_delay</span></div><div class="line"><span class="comment">             ncfs_unknown</span></div><div class="line"><span class="comment">             nak_stm_min</span></div><div class="line"><span class="comment">             nak_stm_mean</span></div><div class="line"><span class="comment">             nak_stm_max</span></div><div class="line"><span class="comment">             nak_tx_min</span></div><div class="line"><span class="comment">             nak_tx_mean</span></div><div class="line"><span class="comment">             nak_tx_max</span></div><div class="line"><span class="comment">             duplicate_data</span></div><div class="line"><span class="comment">             unrecovered_txw</span></div><div class="line"><span class="comment">             unrecovered_tmo</span></div><div class="line"><span class="comment">             lbm_msgs_rcved</span></div><div class="line"><span class="comment">             lbm_msgs_no_topic_rcved</span></div><div class="line"><span class="comment">             lbm_reqs_rcved</span></div><div class="line"><span class="comment">                         dgrams_dropped_size</span></div><div class="line"><span class="comment">                         dgrams_dropped_type</span></div><div class="line"><span class="comment">                         dgrams_dropped_version</span></div><div class="line"><span class="comment">                         dgrams_dropped_hdr</span></div><div class="line"><span class="comment">                         dgrams_dropped_other</span></div><div class="line"><span class="comment">             out_of_order</span></div><div class="line"><span class="comment">         for LBTRU:</span></div><div class="line"><span class="comment">             msgs_rcved</span></div><div class="line"><span class="comment">             bytes_rcved</span></div><div class="line"><span class="comment">             nak_pckts_sent</span></div><div class="line"><span class="comment">             naks_sent</span></div><div class="line"><span class="comment">             lost</span></div><div class="line"><span class="comment">             ncfs_ignored</span></div><div class="line"><span class="comment">             ncfs_shed</span></div><div class="line"><span class="comment">             ncfs_rx_delay</span></div><div class="line"><span class="comment">             ncfs_unknown</span></div><div class="line"><span class="comment">             nak_stm_min</span></div><div class="line"><span class="comment">             nak_stm_mean</span></div><div class="line"><span class="comment">             nak_stm_max</span></div><div class="line"><span class="comment">             nak_tx_min</span></div><div class="line"><span class="comment">             nak_tx_mean</span></div><div class="line"><span class="comment">             nak_tx_max</span></div><div class="line"><span class="comment">             duplicate_data</span></div><div class="line"><span class="comment">             unrecovered_txw</span></div><div class="line"><span class="comment">             unrecovered_tmo</span></div><div class="line"><span class="comment">             lbm_msgs_rcved</span></div><div class="line"><span class="comment">             lbm_msgs_no_topic_rcved</span></div><div class="line"><span class="comment">             lbm_reqs_rcved</span></div><div class="line"><span class="comment">                         dgrams_dropped_size</span></div><div class="line"><span class="comment">                         dgrams_dropped_type</span></div><div class="line"><span class="comment">                         dgrams_dropped_version</span></div><div class="line"><span class="comment">                         dgrams_dropped_hdr</span></div><div class="line"><span class="comment">                         dgrams_dropped_sid</span></div><div class="line"><span class="comment">                         dgrams_dropped_other</span></div><div class="line"><span class="comment">         for TCP:</span></div><div class="line"><span class="comment">             bytes_rcved</span></div><div class="line"><span class="comment">             lbm_msgs_rcved</span></div><div class="line"><span class="comment">             lbm_msgs_no_topic_rcved</span></div><div class="line"><span class="comment">             lbm_reqs_rcved</span></div><div class="line"><span class="comment">         for LBTIPC:</span></div><div class="line"><span class="comment">             msgs_rcved</span></div><div class="line"><span class="comment">                         bytes_rcved</span></div><div class="line"><span class="comment">                         lbm_msgs_rcved</span></div><div class="line"><span class="comment">                         lbm_msgs_no_topic_rcved</span></div><div class="line"><span class="comment">                         lbm_reqs_rcved</span></div><div class="line"><span class="comment">         for LBTRDMA:</span></div><div class="line"><span class="comment">             msgs_rcved</span></div><div class="line"><span class="comment">                         bytes_rcved</span></div><div class="line"><span class="comment">                         lbm_msgs_rcved</span></div><div class="line"><span class="comment">                         lbm_msgs_no_topic_rcved</span></div><div class="line"><span class="comment">                         lbm_reqs_rcved</span></div><div class="line"><span class="comment">*/</span></div><div class="line"></div><div class="line"><span class="keywordtype">int</span> lbmmon_rcv_format_csv_serialize(<span class="keywordtype">char</span> * Destination, <span class="keywordtype">size_t</span> * Size, <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> * ModuleID,</div><div class="line">                                                                        <span class="keyword">const</span> <a class="code" href="structlbm__rcv__transport__stats__t__stct.html">lbm_rcv_transport_stats_t</a> * Statistics, <span class="keywordtype">void</span> * FormatClientData)</div><div class="line">{</div><div class="line">        <span class="keywordtype">char</span> work[1024];</div><div class="line">        lbmmon_format_csv_t     * fmt;</div><div class="line"></div><div class="line">        <span class="keywordflow">if</span> ((Destination == NULL) || (Size == NULL) || (*Size == 0) || (Statistics == NULL) || (FormatClientData == NULL))</div><div class="line">        {</div><div class="line">                <span class="keywordflow">return</span> (-1);</div><div class="line">        }</div><div class="line">        fmt = (lbmmon_format_csv_t *) FormatClientData;</div><div class="line"></div><div class="line">        *ModuleID = MAKE_MODULE_VERSION(LBMMON_FORMAT_CSV_VERSION_CURRENT);</div><div class="line">        memset(work, 0, <span class="keyword">sizeof</span>(work));</div><div class="line">        snprintf(work, <span class="keyword">sizeof</span>(work), <span class="stringliteral">&quot;%d%c\&quot;&quot;</span>,</div><div class="line">                         Statistics-&gt;<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a3111b4af23afc72ffb71b3794b4a0835">type</a>,</div><div class="line">                         fmt-&gt;mSeparator);</div><div class="line">        strncat(work, Statistics-&gt;<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#ac333fa92e503d7d399c0a7e4fe0a07c3">source</a>, <span class="keyword">sizeof</span>(work) - strlen(work) - 1);</div><div class="line">        strncat(work, <span class="stringliteral">&quot;\&quot;&quot;</span>, <span class="keyword">sizeof</span>(work) - strlen(work) - 1);</div><div class="line">        strncpy(Destination, work, *Size);</div><div class="line">        <span class="keywordflow">switch</span> (Statistics-&gt;<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a3111b4af23afc72ffb71b3794b4a0835">type</a>)</div><div class="line">        {</div><div class="line">                <span class="keywordflow">case</span> <a class="code" href="lbm_8h.html#a6da60dbd4d5790ee0df30d6c3048f977">LBM_TRANSPORT_STAT_TCP</a>:</div><div class="line">                        snprintf(work,</div><div class="line">                                         <span class="keyword">sizeof</span>(work),</div><div class="line">                                         <span class="stringliteral">&quot;%c%lx%c%lx%c%lx%c%lx&quot;</span>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a998cbe5e073d540fc60536cb85bd1971">tcp</a>.<a class="code" href="structlbm__rcv__transport__stats__tcp__t__stct.html#a8ec5b29d4398555010cd1c2f86f8ee7b">bytes_rcved</a>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a998cbe5e073d540fc60536cb85bd1971">tcp</a>.<a class="code" href="structlbm__rcv__transport__stats__tcp__t__stct.html#a811cb200997a8c9a82629a8e07d978b7">lbm_msgs_rcved</a>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a998cbe5e073d540fc60536cb85bd1971">tcp</a>.<a class="code" href="structlbm__rcv__transport__stats__tcp__t__stct.html#abc3f6d30390080f692d039313413f3cb">lbm_msgs_no_topic_rcved</a>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a998cbe5e073d540fc60536cb85bd1971">tcp</a>.<a class="code" href="structlbm__rcv__transport__stats__tcp__t__stct.html#ab0b34db08c2e2021958f893b5c113f36">lbm_reqs_rcved</a>);</div><div class="line">                        <span class="keywordflow">if</span> (strlen(work) &gt;= (*Size - strlen(Destination) - 1))</div><div class="line">                        {</div><div class="line">                                strncpy(ErrorString, <span class="stringliteral">&quot;Destination too small for data&quot;</span>, <span class="keyword">sizeof</span>(ErrorString));</div><div class="line">                                <span class="keywordflow">return</span> (-1);</div><div class="line">                        }</div><div class="line">                        strncat(Destination, work, *Size - strlen(Destination) - 1);</div><div class="line">                        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">                <span class="keywordflow">case</span> <a class="code" href="lbm_8h.html#a32e0d3eee1fe69fa87e985f3343830b3">LBM_TRANSPORT_STAT_LBTRM</a>:</div><div class="line">                        snprintf(work,</div><div class="line">                                         <span class="keyword">sizeof</span>(work),</div><div class="line">                                         <span class="stringliteral">&quot;%c%lx%c%lx%c%lx%c%lx%c%lx%c%lx%c%lx%c%lx&quot;</span>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a9d167f0dc09f15c84983e6ab4caefa97">lbtrm</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtrm__t__stct.html#a9c6f317be17cafd8678ac556217657cd">msgs_rcved</a>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a9d167f0dc09f15c84983e6ab4caefa97">lbtrm</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtrm__t__stct.html#a809e0276efc23e130955b2fa3ee44643">bytes_rcved</a>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a9d167f0dc09f15c84983e6ab4caefa97">lbtrm</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtrm__t__stct.html#ab9ef79e2b06d41e2a6d9cbe92c2332fa">nak_pckts_sent</a>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a9d167f0dc09f15c84983e6ab4caefa97">lbtrm</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtrm__t__stct.html#a57f62048694eb73cc60ce00baddfdf05">naks_sent</a>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a9d167f0dc09f15c84983e6ab4caefa97">lbtrm</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtrm__t__stct.html#ac0a27c8589c7062ba030e5a4dfc041f3">lost</a>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a9d167f0dc09f15c84983e6ab4caefa97">lbtrm</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtrm__t__stct.html#a55cb75058b7b6e55c910209322a4e18c">ncfs_ignored</a>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a9d167f0dc09f15c84983e6ab4caefa97">lbtrm</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtrm__t__stct.html#a8107c61ab08eb2ac6503e66be252dc24">ncfs_shed</a>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a9d167f0dc09f15c84983e6ab4caefa97">lbtrm</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtrm__t__stct.html#a16fd860fd8a52f13c17476b58aec513e">ncfs_rx_delay</a>);</div><div class="line">                        <span class="keywordflow">if</span> (strlen(work) &gt;= (*Size - strlen(Destination) - 1))</div><div class="line">                        {</div><div class="line">                                strncpy(ErrorString, <span class="stringliteral">&quot;Destination too small for data&quot;</span>, <span class="keyword">sizeof</span>(ErrorString));</div><div class="line">                                <span class="keywordflow">return</span> (-1);</div><div class="line">                        }</div><div class="line">                        strncat(Destination, work, *Size - strlen(Destination) - 1);</div><div class="line">                        snprintf(work,</div><div class="line">                                         <span class="keyword">sizeof</span>(work),</div><div class="line">                                         <span class="stringliteral">&quot;%c%lx%c%lx%c%lx%c%lx%c%lx%c%lx%c%lx%c%lx&quot;</span>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a9d167f0dc09f15c84983e6ab4caefa97">lbtrm</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtrm__t__stct.html#aab6fe15baa5eec8a0d59ef94d8e5f610">ncfs_unknown</a>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a9d167f0dc09f15c84983e6ab4caefa97">lbtrm</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtrm__t__stct.html#afd4f04163e43692b04b5f03e98ab992a">nak_stm_min</a>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a9d167f0dc09f15c84983e6ab4caefa97">lbtrm</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtrm__t__stct.html#aed1de00bb7f581547cfe09a1e3959bfc">nak_stm_mean</a>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a9d167f0dc09f15c84983e6ab4caefa97">lbtrm</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtrm__t__stct.html#add6b8fd1bce9506ce9b92e6de0bcba0f">nak_stm_max</a>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a9d167f0dc09f15c84983e6ab4caefa97">lbtrm</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtrm__t__stct.html#a8ea05ee4effe7f8e41e45051741ee1c6">nak_tx_min</a>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a9d167f0dc09f15c84983e6ab4caefa97">lbtrm</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtrm__t__stct.html#a343438c2f8bfdefec97f582896c3e9d2">nak_tx_mean</a>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a9d167f0dc09f15c84983e6ab4caefa97">lbtrm</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtrm__t__stct.html#a7f3c1007b41498884e17a80c60313aa4">nak_tx_max</a>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a9d167f0dc09f15c84983e6ab4caefa97">lbtrm</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtrm__t__stct.html#a2ffe0be11e5dc229572d873cd45ebcac">duplicate_data</a>);</div><div class="line">                        <span class="keywordflow">if</span> (strlen(work) &gt;= (*Size - strlen(Destination) - 1))</div><div class="line">                        {</div><div class="line">                                strncpy(ErrorString, <span class="stringliteral">&quot;Destination too small for data&quot;</span>, <span class="keyword">sizeof</span>(ErrorString));</div><div class="line">                                <span class="keywordflow">return</span> (-1);</div><div class="line">                        }</div><div class="line">                        strncat(Destination, work, *Size - strlen(Destination) - 1);</div><div class="line">                        snprintf(work,</div><div class="line">                                         <span class="keyword">sizeof</span>(work),</div><div class="line">                                         <span class="stringliteral">&quot;%c%lx%c%lx%c%lx%c%lx%c%lx%c%lx%c%lx%c%lx&quot;</span>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a9d167f0dc09f15c84983e6ab4caefa97">lbtrm</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtrm__t__stct.html#a677ea15bc8a2621f13a774a1a2514899">unrecovered_txw</a>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a9d167f0dc09f15c84983e6ab4caefa97">lbtrm</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtrm__t__stct.html#aec81f344ce20a3485bbf2f5a65b5c61e">unrecovered_tmo</a>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a9d167f0dc09f15c84983e6ab4caefa97">lbtrm</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtrm__t__stct.html#a44b91569d70c2c5d30e7ec0dcf987b14">lbm_msgs_rcved</a>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a9d167f0dc09f15c84983e6ab4caefa97">lbtrm</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtrm__t__stct.html#a62c19c1a782919ff9ef69cc72ff0a853">lbm_msgs_no_topic_rcved</a>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a9d167f0dc09f15c84983e6ab4caefa97">lbtrm</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtrm__t__stct.html#aa4a004fe858a82c61c202d6d154ff8d5">lbm_reqs_rcved</a>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a9d167f0dc09f15c84983e6ab4caefa97">lbtrm</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtrm__t__stct.html#a1c209454ba9fe6b52f903021b14d1e9c">dgrams_dropped_size</a>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a9d167f0dc09f15c84983e6ab4caefa97">lbtrm</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtrm__t__stct.html#acad07e2da34793dbaf3dac991f0d997a">dgrams_dropped_type</a>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a9d167f0dc09f15c84983e6ab4caefa97">lbtrm</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtrm__t__stct.html#af2fe38df948b4166b599fb7e58bdf027">dgrams_dropped_version</a>);</div><div class="line">                        <span class="keywordflow">if</span> (strlen(work) &gt;= (*Size - strlen(Destination) - 1))</div><div class="line">                        {</div><div class="line">                                strncpy(ErrorString, <span class="stringliteral">&quot;Destination too small for data&quot;</span>, <span class="keyword">sizeof</span>(ErrorString));</div><div class="line">                                <span class="keywordflow">return</span> (-1);</div><div class="line">                        }</div><div class="line">                        strncat(Destination, work, *Size - strlen(Destination) - 1);</div><div class="line">                        snprintf(work,</div><div class="line">                                         <span class="keyword">sizeof</span>(work),</div><div class="line">                                         <span class="stringliteral">&quot;%c%lx%c%lx%c%lx&quot;</span>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a9d167f0dc09f15c84983e6ab4caefa97">lbtrm</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtrm__t__stct.html#a8df967fc7b7c8a0a864709c07a1772aa">dgrams_dropped_hdr</a>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a9d167f0dc09f15c84983e6ab4caefa97">lbtrm</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtrm__t__stct.html#add62b45ed2e496c7856cdabfcbd56d1f">dgrams_dropped_other</a>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a9d167f0dc09f15c84983e6ab4caefa97">lbtrm</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtrm__t__stct.html#a64fcdfea3284b3a1745c33cf8c35005d">out_of_order</a>);</div><div class="line">                        <span class="keywordflow">if</span> (strlen(work) &gt;= (*Size - strlen(Destination) - 1))</div><div class="line">                        {</div><div class="line">                                strncpy(ErrorString, <span class="stringliteral">&quot;Destination too small for data&quot;</span>, <span class="keyword">sizeof</span>(ErrorString));</div><div class="line">                                <span class="keywordflow">return</span> (-1);</div><div class="line">                        }</div><div class="line">                        strncat(Destination, work, *Size - strlen(Destination) - 1);</div><div class="line">                        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">                <span class="keywordflow">case</span> <a class="code" href="lbm_8h.html#a1f4acd28e4192be6809ce2cc496cb514">LBM_TRANSPORT_STAT_LBTRU</a>:</div><div class="line">                        snprintf(work,</div><div class="line">                                         <span class="keyword">sizeof</span>(work),</div><div class="line">                                         <span class="stringliteral">&quot;%c%lx%c%lx%c%lx%c%lx%c%lx%c%lx%c%lx%c%lx&quot;</span>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a6d5ff286865d47f6fd74e08c0e1692e5">lbtru</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtru__t__stct.html#a5c2054b4aa164bf7619b97f955f00d54">msgs_rcved</a>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a6d5ff286865d47f6fd74e08c0e1692e5">lbtru</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtru__t__stct.html#aa593773ff216394dfdf15d11d269dbac">bytes_rcved</a>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a6d5ff286865d47f6fd74e08c0e1692e5">lbtru</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtru__t__stct.html#ab5148dc50512b48023436e9f3d443aa5">nak_pckts_sent</a>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a6d5ff286865d47f6fd74e08c0e1692e5">lbtru</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtru__t__stct.html#a140320be28f195412b1bd15caa772ba1">naks_sent</a>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a6d5ff286865d47f6fd74e08c0e1692e5">lbtru</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtru__t__stct.html#a9717bf76222b09c31cbc3d48d79860f3">lost</a>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a6d5ff286865d47f6fd74e08c0e1692e5">lbtru</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtru__t__stct.html#aa49935c7f9d89d7abb376d34fce47bbf">ncfs_ignored</a>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a6d5ff286865d47f6fd74e08c0e1692e5">lbtru</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtru__t__stct.html#a5bc0857e04113ead3dfb6f85792d998e">ncfs_shed</a>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a6d5ff286865d47f6fd74e08c0e1692e5">lbtru</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtru__t__stct.html#aa4d08eb201eade79404f781426497473">ncfs_rx_delay</a>);</div><div class="line">                        <span class="keywordflow">if</span> (strlen(work) &gt;= (*Size - strlen(Destination) - 1))</div><div class="line">                        {</div><div class="line">                                strncpy(ErrorString, <span class="stringliteral">&quot;Destination too small for data&quot;</span>, <span class="keyword">sizeof</span>(ErrorString));</div><div class="line">                                <span class="keywordflow">return</span> (-1);</div><div class="line">                        }</div><div class="line">                        strncat(Destination, work, *Size - strlen(Destination) - 1);</div><div class="line">                        snprintf(work,</div><div class="line">                                         <span class="keyword">sizeof</span>(work),</div><div class="line">                                         <span class="stringliteral">&quot;%c%lx%c%lx%c%lx%c%lx%c%lx%c%lx%c%lx%c%lx&quot;</span>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a6d5ff286865d47f6fd74e08c0e1692e5">lbtru</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtru__t__stct.html#a271dc5422247a3ccb5de7b5446c04bf7">ncfs_unknown</a>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a6d5ff286865d47f6fd74e08c0e1692e5">lbtru</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtru__t__stct.html#a41e3790513a832cf98010628a7c65738">nak_stm_min</a>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a6d5ff286865d47f6fd74e08c0e1692e5">lbtru</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtru__t__stct.html#ae0a95541614e9ce88deb38ac67fad294">nak_stm_mean</a>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a6d5ff286865d47f6fd74e08c0e1692e5">lbtru</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtru__t__stct.html#a8f88f7abf87dfabbb8103136ad19146c">nak_stm_max</a>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a6d5ff286865d47f6fd74e08c0e1692e5">lbtru</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtru__t__stct.html#ae6992801ec5a1ff304792fb9ef6e7184">nak_tx_min</a>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a6d5ff286865d47f6fd74e08c0e1692e5">lbtru</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtru__t__stct.html#a1b1fbdc65da559b822cbe1085d25c190">nak_tx_mean</a>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a6d5ff286865d47f6fd74e08c0e1692e5">lbtru</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtru__t__stct.html#a409294bf165b51774b9503509ef214cf">nak_tx_max</a>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a6d5ff286865d47f6fd74e08c0e1692e5">lbtru</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtru__t__stct.html#af00ef0896a0ac36a6161664c69e90a81">duplicate_data</a>);</div><div class="line">                        <span class="keywordflow">if</span> (strlen(work) &gt;= (*Size - strlen(Destination) - 1))</div><div class="line">                        {</div><div class="line">                                strncpy(ErrorString, <span class="stringliteral">&quot;Destination too small for data&quot;</span>, <span class="keyword">sizeof</span>(ErrorString));</div><div class="line">                                <span class="keywordflow">return</span> (-1);</div><div class="line">                        }</div><div class="line">                        strncat(Destination, work, *Size - strlen(Destination) - 1);</div><div class="line">                        snprintf(work,</div><div class="line">                                         <span class="keyword">sizeof</span>(work),</div><div class="line">                                         <span class="stringliteral">&quot;%c%lx%c%lx%c%lx%c%lx%c%lx%c%lx%c%lx%c%lx&quot;</span>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a6d5ff286865d47f6fd74e08c0e1692e5">lbtru</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtru__t__stct.html#aa549f88cacfa672176746a6643c37a2f">unrecovered_txw</a>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a6d5ff286865d47f6fd74e08c0e1692e5">lbtru</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtru__t__stct.html#a9c6f09ca548af94cc5e0c83257ec3a5f">unrecovered_tmo</a>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a6d5ff286865d47f6fd74e08c0e1692e5">lbtru</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtru__t__stct.html#a076b988c5320c520222eed5e29bfe8e0">lbm_msgs_rcved</a>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a6d5ff286865d47f6fd74e08c0e1692e5">lbtru</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtru__t__stct.html#a83c799da110d0f2036111dd7de4fce56">lbm_msgs_no_topic_rcved</a>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a6d5ff286865d47f6fd74e08c0e1692e5">lbtru</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtru__t__stct.html#a3f62a1925bcc9a4b08f8bb445003c6ee">lbm_reqs_rcved</a>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a6d5ff286865d47f6fd74e08c0e1692e5">lbtru</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtru__t__stct.html#a2cb0c80324a1b038de32baae0367bedf">dgrams_dropped_size</a>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a6d5ff286865d47f6fd74e08c0e1692e5">lbtru</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtru__t__stct.html#ab14a9ed18d2f4c52f22d1e3a200ebc5b">dgrams_dropped_type</a>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a6d5ff286865d47f6fd74e08c0e1692e5">lbtru</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtru__t__stct.html#a3bc35b655534753f990b1ac3d1bf434d">dgrams_dropped_version</a>);</div><div class="line">                        <span class="keywordflow">if</span> (strlen(work) &gt;= (*Size - strlen(Destination) - 1))</div><div class="line">                        {</div><div class="line">                                strncpy(ErrorString, <span class="stringliteral">&quot;Destination too small for data&quot;</span>, <span class="keyword">sizeof</span>(ErrorString));</div><div class="line">                                <span class="keywordflow">return</span> (-1);</div><div class="line">                        }</div><div class="line">                        strncat(Destination, work, *Size - strlen(Destination) - 1);</div><div class="line">                        snprintf(work,</div><div class="line">                                         <span class="keyword">sizeof</span>(work),</div><div class="line">                                         <span class="stringliteral">&quot;%c%lx%c%lx%c%lx&quot;</span>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a6d5ff286865d47f6fd74e08c0e1692e5">lbtru</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtru__t__stct.html#afd3d754cff49f6f9317c1a5e82e7d5e9">dgrams_dropped_hdr</a>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a6d5ff286865d47f6fd74e08c0e1692e5">lbtru</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtru__t__stct.html#a3e01c4f5f70e0b7b94d8787308c0367c">dgrams_dropped_sid</a>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a6d5ff286865d47f6fd74e08c0e1692e5">lbtru</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtru__t__stct.html#a19058480206858399c4820c799ebd35d">dgrams_dropped_other</a>);</div><div class="line">                        <span class="keywordflow">if</span> (strlen(work) &gt;= (*Size - strlen(Destination) - 1))</div><div class="line">                        {</div><div class="line">                                strncpy(ErrorString, <span class="stringliteral">&quot;Destination too small for data&quot;</span>, <span class="keyword">sizeof</span>(ErrorString));</div><div class="line">                                <span class="keywordflow">return</span> (-1);</div><div class="line">                        }</div><div class="line">                        strncat(Destination, work, *Size - strlen(Destination) - 1);</div><div class="line">                        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">                <span class="keywordflow">case</span> <a class="code" href="lbm_8h.html#a64de821cc3a1afda47c5668996d16d9b">LBM_TRANSPORT_STAT_LBTIPC</a>:</div><div class="line">                        snprintf(work,</div><div class="line">                                         <span class="keyword">sizeof</span>(work),</div><div class="line">                                         <span class="stringliteral">&quot;%c%lx%c%lx%c%lx%c%lx%c%lx&quot;</span>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#aa0bb3ff2725d54aca064608777ab4fbc">lbtipc</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtipc__t__stct.html#a57eb8d53386d3ba41f9edaccfd2ffa76">msgs_rcved</a>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#aa0bb3ff2725d54aca064608777ab4fbc">lbtipc</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtipc__t__stct.html#ab6a6d8204a7b58550836838b6746229d">bytes_rcved</a>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#aa0bb3ff2725d54aca064608777ab4fbc">lbtipc</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtipc__t__stct.html#aaff870f9a054a44765d715e0a2d06097">lbm_msgs_rcved</a>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#aa0bb3ff2725d54aca064608777ab4fbc">lbtipc</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtipc__t__stct.html#a553ed8203a547d1749bfe69a75264e38">lbm_msgs_no_topic_rcved</a>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#aa0bb3ff2725d54aca064608777ab4fbc">lbtipc</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtipc__t__stct.html#a00f50ab6cfa952436b8d378cbe303879">lbm_reqs_rcved</a>);</div><div class="line">                        <span class="keywordflow">if</span> (strlen(work) &gt;= (*Size - strlen(Destination) - 1))</div><div class="line">                        {</div><div class="line">                                strncpy(ErrorString, <span class="stringliteral">&quot;Destination too small for data&quot;</span>, <span class="keyword">sizeof</span>(ErrorString));</div><div class="line">                                <span class="keywordflow">return</span> (-1);</div><div class="line">                        }</div><div class="line">                        strncat(Destination, work, *Size - strlen(Destination) - 1);</div><div class="line">                        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">                <span class="keywordflow">case</span> <a class="code" href="lbm_8h.html#af5d79fa0d57faa68dfa42b20401a94d8">LBM_TRANSPORT_STAT_LBTSMX</a>:</div><div class="line">                        snprintf(work,</div><div class="line">                                        <span class="keyword">sizeof</span>(work),</div><div class="line">                                        <span class="stringliteral">&quot;%c%lx%c%lx%c%lx%c%lx%c%lx&quot;</span>,</div><div class="line">                                        fmt-&gt;mSeparator,</div><div class="line">                                        Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a17af117bb25bde181c35ac551bedfbd8">lbtsmx</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtsmx__t__stct.html#acbe5de43d70aa5aefd3fdff79d473202">msgs_rcved</a>,</div><div class="line">                                        fmt-&gt;mSeparator,</div><div class="line">                                        Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a17af117bb25bde181c35ac551bedfbd8">lbtsmx</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtsmx__t__stct.html#a30e882a825c46f220429a772b19481e7">bytes_rcved</a>,</div><div class="line">                                        fmt-&gt;mSeparator,</div><div class="line">                                        Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a17af117bb25bde181c35ac551bedfbd8">lbtsmx</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtsmx__t__stct.html#a3364756c1a6b45556f560c22aad7a3ae">lbm_msgs_rcved</a>,</div><div class="line">                                        fmt-&gt;mSeparator,</div><div class="line">                                        Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a17af117bb25bde181c35ac551bedfbd8">lbtsmx</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtsmx__t__stct.html#af2d4d5893e40b28bdfaa0c2e32ecd532">lbm_msgs_no_topic_rcved</a>,</div><div class="line">                                        fmt-&gt;mSeparator,</div><div class="line">                                        Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a17af117bb25bde181c35ac551bedfbd8">lbtsmx</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtsmx__t__stct.html#aaa03902d1979e4b5d2c966d4bc6d8098">reserved1</a>);</div><div class="line">                        <span class="keywordflow">if</span> (strlen(work) &gt;= (*Size - strlen(Destination) - 1))</div><div class="line">                        {</div><div class="line">                                strncpy(ErrorString, <span class="stringliteral">&quot;Destination too small for data&quot;</span>, <span class="keyword">sizeof</span>(ErrorString));</div><div class="line">                                <span class="keywordflow">return</span> (-1);</div><div class="line">                        }</div><div class="line">                        strncat(Destination, work, *Size - strlen(Destination) - 1);</div><div class="line">                        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">                <span class="keywordflow">case</span> <a class="code" href="lbm_8h.html#ab8fc2e2fb0287dfa80713fb8fb6c23df">LBM_TRANSPORT_STAT_LBTRDMA</a>:</div><div class="line">                        snprintf(work,</div><div class="line">                                         <span class="keyword">sizeof</span>(work),</div><div class="line">                                         <span class="stringliteral">&quot;%c%lx%c%lx%c%lx%c%lx%c%lx&quot;</span>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a39a686e01bb9a0956f5fdaee87d3fc46">lbtrdma</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtrdma__t__stct.html#add9d1de8f12c33b48f93b2b257735199">msgs_rcved</a>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a39a686e01bb9a0956f5fdaee87d3fc46">lbtrdma</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtrdma__t__stct.html#a5974731a9b1f47d924e846980cad1cd5">bytes_rcved</a>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a39a686e01bb9a0956f5fdaee87d3fc46">lbtrdma</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtrdma__t__stct.html#ada386885e8d5b22107a4b3a4d021c912">lbm_msgs_rcved</a>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a39a686e01bb9a0956f5fdaee87d3fc46">lbtrdma</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtrdma__t__stct.html#abcb3fd80a5f29856767a4bca245b8d1e">lbm_msgs_no_topic_rcved</a>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a39a686e01bb9a0956f5fdaee87d3fc46">lbtrdma</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtrdma__t__stct.html#a088e28674e4bb82acbb457b9af05ddb0">lbm_reqs_rcved</a>);</div><div class="line">                        <span class="keywordflow">if</span> (strlen(work) &gt;= (*Size - strlen(Destination) - 1))</div><div class="line">                        {</div><div class="line">                                strncpy(ErrorString, <span class="stringliteral">&quot;Destination too small for data&quot;</span>, <span class="keyword">sizeof</span>(ErrorString));</div><div class="line">                                <span class="keywordflow">return</span> (-1);</div><div class="line">                        }</div><div class="line">                        strncat(Destination, work, *Size - strlen(Destination) - 1);</div><div class="line">                        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">                <span class="keywordflow">case</span> <a class="code" href="lbm_8h.html#a95057b42f21bc8bd15702a4a23ffeda8">LBM_TRANSPORT_STAT_BROKER</a>:</div><div class="line">                        snprintf(work,</div><div class="line">                                         <span class="keyword">sizeof</span>(work),</div><div class="line">                                         <span class="stringliteral">&quot;%c%lx%c%lx&quot;</span>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#afc76c551b56f9a24745b0d0e1c2c8e1d">broker</a>.<a class="code" href="structlbm__rcv__transport__stats__broker__t__stct.html#ae93b7d7565dc68783ee6d13b9b0c2619">msgs_rcved</a>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#afc76c551b56f9a24745b0d0e1c2c8e1d">broker</a>.<a class="code" href="structlbm__rcv__transport__stats__broker__t__stct.html#a8b24b2cf283cc51b0e4c663fd9005d46">bytes_rcved</a>);</div><div class="line">                        <span class="keywordflow">if</span> (strlen(work) &gt;= (*Size - strlen(Destination) - 1))</div><div class="line">                        {</div><div class="line">                                strncpy(ErrorString, <span class="stringliteral">&quot;Destination too small for data&quot;</span>, <span class="keyword">sizeof</span>(ErrorString));</div><div class="line">                                <span class="keywordflow">return</span> (-1);</div><div class="line">                        }</div><div class="line">                        strncat(Destination, work, *Size - strlen(Destination) - 1);</div><div class="line">                        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">                <span class="keywordflow">default</span>:</div><div class="line">                        strncpy(ErrorString, <span class="stringliteral">&quot;Unknown LBM transport type&quot;</span>, <span class="keyword">sizeof</span>(ErrorString));</div><div class="line">                        <span class="keywordflow">return</span> (-1);</div><div class="line">        }</div><div class="line">        *Size = strlen(Destination);</div><div class="line">        <span class="keywordflow">return</span> (0);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">/*</span></div><div class="line"><span class="comment"> Format of the CSV source statistics data is:</span></div><div class="line"><span class="comment">     type (one of LBM_TRANSPORT_STAT_* values)</span></div><div class="line"><span class="comment">     source (as a string)</span></div><div class="line"><span class="comment">     actual statistics, depending on type....</span></div><div class="line"><span class="comment">         for LBTRM:</span></div><div class="line"><span class="comment">             msgs_sent</span></div><div class="line"><span class="comment">             bytes_sent</span></div><div class="line"><span class="comment">             txw_msgs</span></div><div class="line"><span class="comment">             txw_bytes</span></div><div class="line"><span class="comment">             nak_pckts_rcved</span></div><div class="line"><span class="comment">             naks_rcved</span></div><div class="line"><span class="comment">             naks_ignored</span></div><div class="line"><span class="comment">             naks_shed</span></div><div class="line"><span class="comment">             naks_rx_delay_ignored</span></div><div class="line"><span class="comment">             rxs_sent</span></div><div class="line"><span class="comment">             rctlr_data_msgs</span></div><div class="line"><span class="comment">             rctlr_rx_msgs</span></div><div class="line"><span class="comment">             rx_bytes_sent</span></div><div class="line"><span class="comment">         for LBTRU:</span></div><div class="line"><span class="comment">             msgs_sent</span></div><div class="line"><span class="comment">             bytes_sent</span></div><div class="line"><span class="comment">             nak_pckts_rcved</span></div><div class="line"><span class="comment">             naks_rcved</span></div><div class="line"><span class="comment">             naks_ignored</span></div><div class="line"><span class="comment">             naks_shed</span></div><div class="line"><span class="comment">             naks_rx_delay_ignored</span></div><div class="line"><span class="comment">             rxs_sent</span></div><div class="line"><span class="comment">             num_clients</span></div><div class="line"><span class="comment">             rx_bytes_sent</span></div><div class="line"><span class="comment">         for TCP:</span></div><div class="line"><span class="comment">             num_clients</span></div><div class="line"><span class="comment">             bytes_buffered</span></div><div class="line"><span class="comment">         for LBTIPC:</span></div><div class="line"><span class="comment">             num_clients</span></div><div class="line"><span class="comment">                         msgs_sent</span></div><div class="line"><span class="comment">                         bytes_sent</span></div><div class="line"><span class="comment">         for LBTRDMA:</span></div><div class="line"><span class="comment">             num_clients</span></div><div class="line"><span class="comment">                         msgs_sent</span></div><div class="line"><span class="comment">                         bytes_sent</span></div><div class="line"><span class="comment">*/</span></div><div class="line"></div><div class="line"><span class="keywordtype">int</span> lbmmon_src_format_csv_serialize(<span class="keywordtype">char</span> * Destination, <span class="keywordtype">size_t</span> * Size, <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> * ModuleID,</div><div class="line">                                                                        <span class="keyword">const</span> <a class="code" href="structlbm__src__transport__stats__t__stct.html">lbm_src_transport_stats_t</a> * Statistics, <span class="keywordtype">void</span> * FormatClientData)</div><div class="line">{</div><div class="line">        <span class="keywordtype">char</span> work[1024];</div><div class="line">        lbmmon_format_csv_t     * fmt;</div><div class="line"></div><div class="line">        <span class="keywordflow">if</span> ((Destination == NULL) || (Size == NULL) || (*Size == 0) || (Statistics == NULL) || (FormatClientData == NULL))</div><div class="line">        {</div><div class="line">                <span class="keywordflow">return</span> (-1);</div><div class="line">        }</div><div class="line">        fmt = (lbmmon_format_csv_t *) FormatClientData;</div><div class="line"></div><div class="line">        *ModuleID = MAKE_MODULE_VERSION(LBMMON_FORMAT_CSV_VERSION_CURRENT);</div><div class="line">        memset(work, 0, <span class="keyword">sizeof</span>(work));</div><div class="line">        snprintf(work, <span class="keyword">sizeof</span>(work), <span class="stringliteral">&quot;%d%c\&quot;&quot;</span>,</div><div class="line">                         Statistics-&gt;<a class="code" href="structlbm__src__transport__stats__t__stct.html#a9f9aef06b06d3432b1b7ba10583413ce">type</a>,</div><div class="line">                         fmt-&gt;mSeparator);</div><div class="line">        strncat(work, Statistics-&gt;<a class="code" href="structlbm__src__transport__stats__t__stct.html#aac9bc9a4d1f84c3cdc7dd83521b3ff70">source</a>, <span class="keyword">sizeof</span>(work) - strlen(work) - 1);</div><div class="line">        strncat(work, <span class="stringliteral">&quot;\&quot;&quot;</span>, <span class="keyword">sizeof</span>(work) - strlen(work) - 1);</div><div class="line">        strncpy(Destination, work, *Size);</div><div class="line">        <span class="keywordflow">switch</span> (Statistics-&gt;<a class="code" href="structlbm__src__transport__stats__t__stct.html#a9f9aef06b06d3432b1b7ba10583413ce">type</a>)</div><div class="line">        {</div><div class="line">                <span class="keywordflow">case</span> <a class="code" href="lbm_8h.html#a6da60dbd4d5790ee0df30d6c3048f977">LBM_TRANSPORT_STAT_TCP</a>:</div><div class="line">                        snprintf(work,</div><div class="line">                                         <span class="keyword">sizeof</span>(work),</div><div class="line">                                         <span class="stringliteral">&quot;%c%lx%c%lx&quot;</span>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#a7c2b714d68f2ca2fe56632c185c9a163">tcp</a>.<a class="code" href="structlbm__src__transport__stats__tcp__t__stct.html#afdbea18ebdc5f2370f617ed561e1caef">num_clients</a>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#a7c2b714d68f2ca2fe56632c185c9a163">tcp</a>.<a class="code" href="structlbm__src__transport__stats__tcp__t__stct.html#ab658e0534a60e6f8b0ea4ee07d6a7351">bytes_buffered</a>);</div><div class="line">                        <span class="keywordflow">if</span> (strlen(work) &gt;= (*Size - strlen(Destination) - 1))</div><div class="line">                        {</div><div class="line">                                strncpy(ErrorString, <span class="stringliteral">&quot;Destination too small for data&quot;</span>, <span class="keyword">sizeof</span>(ErrorString));</div><div class="line">                                <span class="keywordflow">return</span> (-1);</div><div class="line">                        }</div><div class="line">                        strncat(Destination, work, *Size - strlen(Destination) - 1);</div><div class="line">                        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">                <span class="keywordflow">case</span> <a class="code" href="lbm_8h.html#a32e0d3eee1fe69fa87e985f3343830b3">LBM_TRANSPORT_STAT_LBTRM</a>:</div><div class="line">                        snprintf(work,</div><div class="line">                                         <span class="keyword">sizeof</span>(work),</div><div class="line">                                         <span class="stringliteral">&quot;%c%lx%c%lx%c%lx%c%lx%c%lx%c%lx%c%lx%c%lx&quot;</span>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#a6bad1e2180589dd3c3fdc9ddd3b24a38">lbtrm</a>.<a class="code" href="structlbm__src__transport__stats__lbtrm__t__stct.html#afdb40daed5c3da97e44b495649d063be">msgs_sent</a>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#a6bad1e2180589dd3c3fdc9ddd3b24a38">lbtrm</a>.<a class="code" href="structlbm__src__transport__stats__lbtrm__t__stct.html#ac9e8875bb28fa479cc3425a69b821fae">bytes_sent</a>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#a6bad1e2180589dd3c3fdc9ddd3b24a38">lbtrm</a>.<a class="code" href="structlbm__src__transport__stats__lbtrm__t__stct.html#a523f274dc1a3c9d8ab2f8cf5761f89f6">txw_msgs</a>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#a6bad1e2180589dd3c3fdc9ddd3b24a38">lbtrm</a>.<a class="code" href="structlbm__src__transport__stats__lbtrm__t__stct.html#afeaeca726b303f4f70fa5e5c016c6a1a">txw_bytes</a>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#a6bad1e2180589dd3c3fdc9ddd3b24a38">lbtrm</a>.<a class="code" href="structlbm__src__transport__stats__lbtrm__t__stct.html#a274fbe52a206df04a56e4011dc43f3b5">nak_pckts_rcved</a>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#a6bad1e2180589dd3c3fdc9ddd3b24a38">lbtrm</a>.<a class="code" href="structlbm__src__transport__stats__lbtrm__t__stct.html#a363c5c9c4b5a44e1eced9ad7a2892473">naks_rcved</a>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#a6bad1e2180589dd3c3fdc9ddd3b24a38">lbtrm</a>.<a class="code" href="structlbm__src__transport__stats__lbtrm__t__stct.html#a2ce4464adca5085460282d5f24e824e5">naks_ignored</a>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#a6bad1e2180589dd3c3fdc9ddd3b24a38">lbtrm</a>.<a class="code" href="structlbm__src__transport__stats__lbtrm__t__stct.html#accf51bbd30c14ed1c88582aa6f0400b6">naks_shed</a>);</div><div class="line">                        <span class="keywordflow">if</span> (strlen(work) &gt;= (*Size - strlen(Destination) - 1))</div><div class="line">                        {</div><div class="line">                                strncpy(ErrorString, <span class="stringliteral">&quot;Destination too small for data&quot;</span>, <span class="keyword">sizeof</span>(ErrorString));</div><div class="line">                                <span class="keywordflow">return</span> (-1);</div><div class="line">                        }</div><div class="line">                        strncat(Destination, work, *Size - strlen(Destination) - 1);</div><div class="line">                        snprintf(work,</div><div class="line">                                         <span class="keyword">sizeof</span>(work),</div><div class="line">                                         <span class="stringliteral">&quot;%c%lx%c%lx%c%lx%c%lx%c%lx&quot;</span>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#a6bad1e2180589dd3c3fdc9ddd3b24a38">lbtrm</a>.<a class="code" href="structlbm__src__transport__stats__lbtrm__t__stct.html#a93605cc2dcfac90aecd4736439c3bdea">naks_rx_delay_ignored</a>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#a6bad1e2180589dd3c3fdc9ddd3b24a38">lbtrm</a>.<a class="code" href="structlbm__src__transport__stats__lbtrm__t__stct.html#aa422cfe9a6d2943554a5bcac082e267a">rxs_sent</a>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#a6bad1e2180589dd3c3fdc9ddd3b24a38">lbtrm</a>.<a class="code" href="structlbm__src__transport__stats__lbtrm__t__stct.html#a1b06028d9780a5c230ccb9daf51c2a13">rctlr_data_msgs</a>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#a6bad1e2180589dd3c3fdc9ddd3b24a38">lbtrm</a>.<a class="code" href="structlbm__src__transport__stats__lbtrm__t__stct.html#ac872c31f04d67e7bcd833e185697c378">rctlr_rx_msgs</a>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#a6bad1e2180589dd3c3fdc9ddd3b24a38">lbtrm</a>.<a class="code" href="structlbm__src__transport__stats__lbtrm__t__stct.html#a7fac3436d89273a06a810e79fc482cd5">rx_bytes_sent</a>);</div><div class="line">                        <span class="keywordflow">if</span> (strlen(work) &gt;= (*Size - strlen(Destination) - 1))</div><div class="line">                        {</div><div class="line">                                strncpy(ErrorString, <span class="stringliteral">&quot;Destination too small for data&quot;</span>, <span class="keyword">sizeof</span>(ErrorString));</div><div class="line">                                <span class="keywordflow">return</span> (-1);</div><div class="line">                        }</div><div class="line">                        strncat(Destination, work, *Size - strlen(Destination) - 1);</div><div class="line">                        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">                <span class="keywordflow">case</span> <a class="code" href="lbm_8h.html#a1f4acd28e4192be6809ce2cc496cb514">LBM_TRANSPORT_STAT_LBTRU</a>:</div><div class="line">                        snprintf(work,</div><div class="line">                                         <span class="keyword">sizeof</span>(work),</div><div class="line">                                         <span class="stringliteral">&quot;%c%lx%c%lx%c%lx%c%lx%c%lx%c%lx%c%lx%c%lx&quot;</span>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#acd0a2c474f818d9f43afb504bcdac266">lbtru</a>.<a class="code" href="structlbm__src__transport__stats__lbtru__t__stct.html#a33977a0a14846929f481fa61b10a45fe">msgs_sent</a>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#acd0a2c474f818d9f43afb504bcdac266">lbtru</a>.<a class="code" href="structlbm__src__transport__stats__lbtru__t__stct.html#a9851cc6a90ccb8e318b022818ea57c58">bytes_sent</a>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#acd0a2c474f818d9f43afb504bcdac266">lbtru</a>.<a class="code" href="structlbm__src__transport__stats__lbtru__t__stct.html#ae567bd7f28c540faecf2864e8829af8a">nak_pckts_rcved</a>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#acd0a2c474f818d9f43afb504bcdac266">lbtru</a>.<a class="code" href="structlbm__src__transport__stats__lbtru__t__stct.html#a9833ac2f8d6a9e6708a6848b641a6a4c">naks_rcved</a>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#acd0a2c474f818d9f43afb504bcdac266">lbtru</a>.<a class="code" href="structlbm__src__transport__stats__lbtru__t__stct.html#a3f2a675528727a6d758cc41a8d8f5201">naks_ignored</a>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#acd0a2c474f818d9f43afb504bcdac266">lbtru</a>.<a class="code" href="structlbm__src__transport__stats__lbtru__t__stct.html#a8b27273ad2887a0d7d11a91d6cd28258">naks_shed</a>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#acd0a2c474f818d9f43afb504bcdac266">lbtru</a>.<a class="code" href="structlbm__src__transport__stats__lbtru__t__stct.html#a1c46665e5d1c207ff52d5bdc5777a8c6">naks_rx_delay_ignored</a>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#acd0a2c474f818d9f43afb504bcdac266">lbtru</a>.<a class="code" href="structlbm__src__transport__stats__lbtru__t__stct.html#a118a840dd8a4c9a65f4a947784e19080">rxs_sent</a>);</div><div class="line">                        <span class="keywordflow">if</span> (strlen(work) &gt;= (*Size - strlen(Destination) - 1))</div><div class="line">                        {</div><div class="line">                                strncpy(ErrorString, <span class="stringliteral">&quot;Destination too small for data&quot;</span>, <span class="keyword">sizeof</span>(ErrorString));</div><div class="line">                                <span class="keywordflow">return</span> (-1);</div><div class="line">                        }</div><div class="line">                        strncat(Destination, work, *Size - strlen(Destination) - 1);</div><div class="line">                        snprintf(work,</div><div class="line">                                         <span class="keyword">sizeof</span>(work),</div><div class="line">                                         <span class="stringliteral">&quot;%c%lx%c%lx&quot;</span>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#acd0a2c474f818d9f43afb504bcdac266">lbtru</a>.<a class="code" href="structlbm__src__transport__stats__lbtru__t__stct.html#af77f17b77c54450902654a0482dcd8f9">num_clients</a>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#acd0a2c474f818d9f43afb504bcdac266">lbtru</a>.<a class="code" href="structlbm__src__transport__stats__lbtru__t__stct.html#ae40c00c037145b33a904f232cb633740">rx_bytes_sent</a>);</div><div class="line">                        <span class="keywordflow">if</span> (strlen(work) &gt;= (*Size - strlen(Destination) - 1))</div><div class="line">                        {</div><div class="line">                                <span class="keywordflow">return</span> (-1);</div><div class="line">                        }</div><div class="line">                        strncat(Destination, work, *Size - strlen(Destination) - 1);</div><div class="line">                        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">                <span class="keywordflow">case</span> <a class="code" href="lbm_8h.html#a64de821cc3a1afda47c5668996d16d9b">LBM_TRANSPORT_STAT_LBTIPC</a>:</div><div class="line">                        snprintf(work,</div><div class="line">                                         <span class="keyword">sizeof</span>(work),</div><div class="line">                                         <span class="stringliteral">&quot;%c%lx%c%lx%c%lx&quot;</span>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#a7b4175075377813b21794285ebad2a30">lbtipc</a>.<a class="code" href="structlbm__src__transport__stats__lbtipc__t__stct.html#a4cab35a71697d41cd9884878ece220ae">num_clients</a>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#a7b4175075377813b21794285ebad2a30">lbtipc</a>.<a class="code" href="structlbm__src__transport__stats__lbtipc__t__stct.html#aa71c033adada3522adc4ee6fdcee7502">msgs_sent</a>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#a7b4175075377813b21794285ebad2a30">lbtipc</a>.<a class="code" href="structlbm__src__transport__stats__lbtipc__t__stct.html#a640ee5a27d5d2659c1e74ffb3d39b00e">bytes_sent</a>);</div><div class="line">                        <span class="keywordflow">if</span> (strlen(work) &gt;= (*Size - strlen(Destination) - 1))</div><div class="line">                        {</div><div class="line">                                strncpy(ErrorString, <span class="stringliteral">&quot;Destination too small for data&quot;</span>, <span class="keyword">sizeof</span>(ErrorString));</div><div class="line">                                <span class="keywordflow">return</span> (-1);</div><div class="line">                        }</div><div class="line">                        strncat(Destination, work, *Size - strlen(Destination) - 1);</div><div class="line">                        <span class="keywordflow">break</span>;</div><div class="line">                <span class="keywordflow">case</span> <a class="code" href="lbm_8h.html#af5d79fa0d57faa68dfa42b20401a94d8">LBM_TRANSPORT_STAT_LBTSMX</a>:</div><div class="line">                        snprintf(work,</div><div class="line">                                        <span class="keyword">sizeof</span>(work),</div><div class="line">                                        <span class="stringliteral">&quot;%c%lx%c%lx%c%lx&quot;</span>,</div><div class="line">                                        fmt-&gt;mSeparator,</div><div class="line">                                        Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#abcd38be1b1e24c25185a5bfcfd0919f2">lbtsmx</a>.<a class="code" href="structlbm__src__transport__stats__lbtsmx__t__stct.html#a23f7ba1e7a44b9223ef29f8bdfe0c570">num_clients</a>,</div><div class="line">                                        fmt-&gt;mSeparator,</div><div class="line">                                        Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#abcd38be1b1e24c25185a5bfcfd0919f2">lbtsmx</a>.<a class="code" href="structlbm__src__transport__stats__lbtsmx__t__stct.html#aa5a75358d3fa9f713bbf231dd8b9bc3d">msgs_sent</a>,</div><div class="line">                                        fmt-&gt;mSeparator,</div><div class="line">                                        Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#abcd38be1b1e24c25185a5bfcfd0919f2">lbtsmx</a>.<a class="code" href="structlbm__src__transport__stats__lbtsmx__t__stct.html#a94b73c843dee38fa088cef85d86defb5">bytes_sent</a>);</div><div class="line">                        <span class="keywordflow">if</span> (strlen(work) &gt;= (*Size - strlen(Destination) - 1))</div><div class="line">                        {</div><div class="line">                                strncpy(ErrorString, <span class="stringliteral">&quot;Destination too small for data&quot;</span>, <span class="keyword">sizeof</span>(ErrorString));</div><div class="line">                                <span class="keywordflow">return</span> (-1);</div><div class="line">                        }</div><div class="line">                        strncat(Destination, work, *Size - strlen(Destination) - 1);</div><div class="line">                        <span class="keywordflow">break</span>;</div><div class="line">                <span class="keywordflow">case</span> <a class="code" href="lbm_8h.html#ab8fc2e2fb0287dfa80713fb8fb6c23df">LBM_TRANSPORT_STAT_LBTRDMA</a>:</div><div class="line">                        snprintf(work,</div><div class="line">                                         <span class="keyword">sizeof</span>(work),</div><div class="line">                                         <span class="stringliteral">&quot;%c%lx%c%lx%c%lx&quot;</span>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#a6b871c0b09182aaf4d819458f4ea8c66">lbtrdma</a>.<a class="code" href="structlbm__src__transport__stats__lbtrdma__t__stct.html#ade6e902d7414f2c28c65bbbbc6954289">num_clients</a>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#a6b871c0b09182aaf4d819458f4ea8c66">lbtrdma</a>.<a class="code" href="structlbm__src__transport__stats__lbtrdma__t__stct.html#a93801d893f682792c4d6743bfc4b9359">msgs_sent</a>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#a6b871c0b09182aaf4d819458f4ea8c66">lbtrdma</a>.<a class="code" href="structlbm__src__transport__stats__lbtrdma__t__stct.html#a151a79638d74099e9bcf76eb637f12a8">bytes_sent</a>);</div><div class="line">                        <span class="keywordflow">if</span> (strlen(work) &gt;= (*Size - strlen(Destination) - 1))</div><div class="line">                        {</div><div class="line">                                strncpy(ErrorString, <span class="stringliteral">&quot;Destination too small for data&quot;</span>, <span class="keyword">sizeof</span>(ErrorString));</div><div class="line">                                <span class="keywordflow">return</span> (-1);</div><div class="line">                        }</div><div class="line">                        strncat(Destination, work, *Size - strlen(Destination) - 1);</div><div class="line">                        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">                <span class="keywordflow">case</span> <a class="code" href="lbm_8h.html#a95057b42f21bc8bd15702a4a23ffeda8">LBM_TRANSPORT_STAT_BROKER</a>:</div><div class="line">                        snprintf(work,</div><div class="line">                                         <span class="keyword">sizeof</span>(work),</div><div class="line">                                         <span class="stringliteral">&quot;%c%lx%c%lx&quot;</span>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#a8ecbc253a05324609c3bcd6bb1b9cc53">broker</a>.<a class="code" href="structlbm__src__transport__stats__broker__t__stct.html#a0d87e31562d0161580fc77041bb13618">msgs_sent</a>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#a8ecbc253a05324609c3bcd6bb1b9cc53">broker</a>.<a class="code" href="structlbm__src__transport__stats__broker__t__stct.html#a0cdd755fc7a6e719c998af3378aa1a53">bytes_sent</a>);</div><div class="line">                        <span class="keywordflow">if</span> (strlen(work) &gt;= (*Size - strlen(Destination) - 1))</div><div class="line">                        {</div><div class="line">                                strncpy(ErrorString, <span class="stringliteral">&quot;Destination too small for data&quot;</span>, <span class="keyword">sizeof</span>(ErrorString));</div><div class="line">                                <span class="keywordflow">return</span> (-1);</div><div class="line">                        }</div><div class="line">                        strncat(Destination, work, *Size - strlen(Destination) - 1);</div><div class="line">                        <span class="keywordflow">break</span>;</div><div class="line">        }</div><div class="line">        *Size = strlen(Destination);</div><div class="line">        <span class="keywordflow">return</span> (0);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">/*</span></div><div class="line"><span class="comment"> Format of the CSV event queue statistics data is:</span></div><div class="line"><span class="comment">        data_msgs</span></div><div class="line"><span class="comment">        data_msgs_tot</span></div><div class="line"><span class="comment">        data_msgs_svc_min</span></div><div class="line"><span class="comment">        data_msgs_svc_mean</span></div><div class="line"><span class="comment">        data_msgs_svc_max</span></div><div class="line"><span class="comment">        resp_msgs</span></div><div class="line"><span class="comment">        resp_msgs_tot</span></div><div class="line"><span class="comment">        resp_msgs_svc_min</span></div><div class="line"><span class="comment">        resp_msgs_svc_mean</span></div><div class="line"><span class="comment">        resp_msgs_svc_max</span></div><div class="line"><span class="comment">        topicless_im_msgs</span></div><div class="line"><span class="comment">        topicless_im_msgs_tot</span></div><div class="line"><span class="comment">        topicless_im_msgs_svc_min</span></div><div class="line"><span class="comment">        topicless_im_msgs_svc_mean</span></div><div class="line"><span class="comment">        topicless_im_msgs_svc_max</span></div><div class="line"><span class="comment">        wrcv_msgs</span></div><div class="line"><span class="comment">        wrcv_msgs_tot</span></div><div class="line"><span class="comment">        wrcv_msgs_svc_min</span></div><div class="line"><span class="comment">        wrcv_msgs_svc_mean</span></div><div class="line"><span class="comment">        wrcv_msgs_svc_max</span></div><div class="line"><span class="comment">        io_events</span></div><div class="line"><span class="comment">        io_events_tot</span></div><div class="line"><span class="comment">        io_events_svc_min</span></div><div class="line"><span class="comment">        io_events_svc_mean</span></div><div class="line"><span class="comment">        io_events_svc_max</span></div><div class="line"><span class="comment">        timer_events</span></div><div class="line"><span class="comment">        timer_events_tot</span></div><div class="line"><span class="comment">        timer_events_svc_min</span></div><div class="line"><span class="comment">        timer_events_svc_mean</span></div><div class="line"><span class="comment">        timer_events_svc_max</span></div><div class="line"><span class="comment">        source_events</span></div><div class="line"><span class="comment">        source_events_tot</span></div><div class="line"><span class="comment">        source_events_svc_min</span></div><div class="line"><span class="comment">        source_events_svc_mean</span></div><div class="line"><span class="comment">        source_events_svc_max</span></div><div class="line"><span class="comment">        unblock_events</span></div><div class="line"><span class="comment">        unblock_events_tot</span></div><div class="line"><span class="comment">        cancel_events</span></div><div class="line"><span class="comment">        cancel_events_tot</span></div><div class="line"><span class="comment">        cancel_events_svc_min</span></div><div class="line"><span class="comment">        cancel_events_svc_mean</span></div><div class="line"><span class="comment">        cancel_events_svc_max</span></div><div class="line"><span class="comment">        context_source_events</span></div><div class="line"><span class="comment">        context_source_events_tot</span></div><div class="line"><span class="comment">        context_source_events_svc_min</span></div><div class="line"><span class="comment">        context_source_events_svc_mean</span></div><div class="line"><span class="comment">        context_source_events_svc_max</span></div><div class="line"><span class="comment">        events</span></div><div class="line"><span class="comment">        events_tot</span></div><div class="line"><span class="comment">        age_min</span></div><div class="line"><span class="comment">        age_mean</span></div><div class="line"><span class="comment">        age_max</span></div><div class="line"><span class="comment">        callback_events</span></div><div class="line"><span class="comment">        callback_events_tot</span></div><div class="line"><span class="comment">        callback_events_svc_min</span></div><div class="line"><span class="comment">        callback_events_svc_mean</span></div><div class="line"><span class="comment">        callback_events_svc_max</span></div><div class="line"><span class="comment">*/</span></div><div class="line"></div><div class="line"><span class="keywordtype">int</span> lbmmon_evq_format_csv_serialize(<span class="keywordtype">char</span> * Destination, <span class="keywordtype">size_t</span> * Size, <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> * ModuleID,</div><div class="line">                                                                        <span class="keyword">const</span> <a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a> * Statistics, <span class="keywordtype">void</span> * FormatClientData)</div><div class="line">{</div><div class="line">        lbmmon_format_csv_t     * fmt;</div><div class="line">        <span class="keywordtype">char</span> work[1024];</div><div class="line"></div><div class="line">        <span class="keywordflow">if</span> ((Destination == NULL) || (Size == NULL) || (*Size == 0) || (Statistics == NULL) || (FormatClientData == NULL))</div><div class="line">        {</div><div class="line">                <span class="keywordflow">return</span> (-1);</div><div class="line">        }</div><div class="line">        fmt = (lbmmon_format_csv_t *) FormatClientData;</div><div class="line"></div><div class="line">        *ModuleID = MAKE_MODULE_VERSION(LBMMON_FORMAT_CSV_VERSION_CURRENT);</div><div class="line">        memset(work, 0, <span class="keyword">sizeof</span>(work));</div><div class="line">        memset(Destination, 0, 2048);</div><div class="line">        snprintf(work,</div><div class="line">                         <span class="keyword">sizeof</span>(work),</div><div class="line">                         <span class="stringliteral">&quot;%lx%c%lx%c%lx%c%lx%c%lx%c%lx%c%lx%c%lx%c%lx%c%lx%c%lx%c%lx%c%lx%c%lx%c%lx%c&quot;</span>,</div><div class="line">                         Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#a0eb4cee05632d02b092146ed4ed5200a">data_msgs</a>,</div><div class="line">                         fmt-&gt;mSeparator,</div><div class="line">                         Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#a9faa0fa2f108f2d7453463745bd370f7">data_msgs_tot</a>,</div><div class="line">                         fmt-&gt;mSeparator,</div><div class="line">                         Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#a61020bab146e49bcd7f47c1b377501a9">data_msgs_svc_min</a>,</div><div class="line">                         fmt-&gt;mSeparator,</div><div class="line">                         Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#a39d290d6a68777df3ac57b18d30aa498">data_msgs_svc_mean</a>,</div><div class="line">                         fmt-&gt;mSeparator,</div><div class="line">                         Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#a02a466471faa160f1acda2705c16283c">data_msgs_svc_max</a>,</div><div class="line">                         fmt-&gt;mSeparator,</div><div class="line">                         Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#aea791390a064056a8f93c6addbba96a8">resp_msgs</a>,</div><div class="line">                         fmt-&gt;mSeparator,</div><div class="line">                         Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#afaad01b23b601dd35615084a0a662591">resp_msgs_tot</a>,</div><div class="line">                         fmt-&gt;mSeparator,</div><div class="line">                         Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#aa1e9f026e3b15a2e92cf57c8c50db249">resp_msgs_svc_min</a>,</div><div class="line">                         fmt-&gt;mSeparator,</div><div class="line">                         Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#a7e7a4dfe0dec175231cf33881b420296">resp_msgs_svc_mean</a>,</div><div class="line">                         fmt-&gt;mSeparator,</div><div class="line">                         Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#a29eb14834e33025db465ba84d70326b1">resp_msgs_svc_max</a>,</div><div class="line">                         fmt-&gt;mSeparator,</div><div class="line">                         Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#a05d3309ba0ef8de6fe1674eaab8c16f2">topicless_im_msgs</a>,</div><div class="line">                         fmt-&gt;mSeparator,</div><div class="line">                         Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#a8ba2a1749eddf7008fd32c667bbfd485">topicless_im_msgs_tot</a>,</div><div class="line">                         fmt-&gt;mSeparator,</div><div class="line">                         Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#a5891b3bc602b6816a1efe9237dc01411">topicless_im_msgs_svc_min</a>,</div><div class="line">                         fmt-&gt;mSeparator,</div><div class="line">                         Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#a8324e427c8f5dacfce62688d8c55300d">topicless_im_msgs_svc_mean</a>,</div><div class="line">                         fmt-&gt;mSeparator,</div><div class="line">                         Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#aea741e1c779554d67f5f7b7bdad102a2">topicless_im_msgs_svc_max</a>,</div><div class="line">                         fmt-&gt;mSeparator);</div><div class="line">        <span class="keywordflow">if</span> (strlen(work) &gt;= (*Size - strlen(Destination) - 1))</div><div class="line">        {</div><div class="line">                strncpy(ErrorString, <span class="stringliteral">&quot;Destination too small for data&quot;</span>, <span class="keyword">sizeof</span>(ErrorString));</div><div class="line">                <span class="keywordflow">return</span> (-1);</div><div class="line">        }</div><div class="line">        strncat(Destination, work, *Size - strlen(Destination) - 1);</div><div class="line">        snprintf(work,</div><div class="line">                         <span class="keyword">sizeof</span>(work),</div><div class="line">                         <span class="stringliteral">&quot;%lx%c%lx%c%lx%c%lx%c%lx%c%lx%c%lx%c%lx%c%lx%c%lx%c%lx%c%lx%c%lx%c%lx%c%lx%c&quot;</span>,</div><div class="line">                         Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#a12172195c123c5784da72d54d813a077">wrcv_msgs</a>,</div><div class="line">                         fmt-&gt;mSeparator,</div><div class="line">                         Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#aa7caaedadd941ad9e2a44a70f17bda35">wrcv_msgs_tot</a>,</div><div class="line">                         fmt-&gt;mSeparator,</div><div class="line">                         Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#a1338b7cd203824e5a4c25e98a69ee5fa">wrcv_msgs_svc_min</a>,</div><div class="line">                         fmt-&gt;mSeparator,</div><div class="line">                         Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#a6f4d0f070261fbc8592929fe977206a2">wrcv_msgs_svc_mean</a>,</div><div class="line">                         fmt-&gt;mSeparator,</div><div class="line">                         Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#ae6cd233101e3d1a20505566f1e8de8f0">wrcv_msgs_svc_max</a>,</div><div class="line">                         fmt-&gt;mSeparator,</div><div class="line">                         Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#a911742fa8ccb9784face0821990a98ba">io_events</a>,</div><div class="line">                         fmt-&gt;mSeparator,</div><div class="line">                         Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#a6b825e930161fad24afc7eb4123f2378">io_events_tot</a>,</div><div class="line">                         fmt-&gt;mSeparator,</div><div class="line">                         Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#ae79f4afec8375c71f7628b79898b33d6">io_events_svc_min</a>,</div><div class="line">                         fmt-&gt;mSeparator,</div><div class="line">                         Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#afc5a4e0b7bebe116436cf602893f317c">io_events_svc_mean</a>,</div><div class="line">                         fmt-&gt;mSeparator,</div><div class="line">                         Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#aec0eb221a80f6a4030add93f7fee0027">io_events_svc_max</a>,</div><div class="line">                         fmt-&gt;mSeparator,</div><div class="line">                         Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#afa54b79ba6470e45cddf3a0269489886">timer_events</a>,</div><div class="line">                         fmt-&gt;mSeparator,</div><div class="line">                         Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#a5d038b42d24be8fa8f0c44a510da3db7">timer_events_tot</a>,</div><div class="line">                         fmt-&gt;mSeparator,</div><div class="line">                         Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#a42d79e18289e480ac888a724e1ad0251">timer_events_svc_min</a>,</div><div class="line">                         fmt-&gt;mSeparator,</div><div class="line">                         Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#ae5aae9b986f94c8b7af90933c10bc98b">timer_events_svc_mean</a>,</div><div class="line">                         fmt-&gt;mSeparator,</div><div class="line">                         Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#a5ef4fd1e121074234107927c319316dc">timer_events_svc_max</a>,</div><div class="line">                         fmt-&gt;mSeparator);</div><div class="line">        <span class="keywordflow">if</span> (strlen(work) &gt;= (*Size - strlen(Destination) - 1))</div><div class="line">        {</div><div class="line">                strncpy(ErrorString, <span class="stringliteral">&quot;Destination too small for data&quot;</span>, <span class="keyword">sizeof</span>(ErrorString));</div><div class="line">                <span class="keywordflow">return</span> (-1);</div><div class="line">        }</div><div class="line">        strncat(Destination, work, *Size - strlen(Destination) - 1);</div><div class="line">        snprintf(work,</div><div class="line">                         <span class="keyword">sizeof</span>(work),</div><div class="line">                         <span class="stringliteral">&quot;%lx%c%lx%c%lx%c%lx%c%lx%c%lx%c%lx%c%lx%c%lx%c%lx%c%lx%c%lx%c&quot;</span>,</div><div class="line">                         Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#aec20f141f6232d4643cd39ad46fb8854">source_events</a>,</div><div class="line">                         fmt-&gt;mSeparator,</div><div class="line">                         Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#a3ba4acbab434e33351d1e72809929dc4">source_events_tot</a>,</div><div class="line">                         fmt-&gt;mSeparator,</div><div class="line">                         Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#a4a47c62b6209c4fe60cf5aad5533d0ee">source_events_svc_min</a>,</div><div class="line">                         fmt-&gt;mSeparator,</div><div class="line">                         Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#ac642c3796cd2fa665e773d051570151f">source_events_svc_mean</a>,</div><div class="line">                         fmt-&gt;mSeparator,</div><div class="line">                         Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#a12d4ae0b315775583e428df1f8b6f9ac">source_events_svc_max</a>,</div><div class="line">                         fmt-&gt;mSeparator,</div><div class="line">                         Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#a062d3c2f4cad5e79a6085f160c7d11e2">unblock_events</a>,</div><div class="line">                         fmt-&gt;mSeparator,</div><div class="line">                         Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#ad0bdbf867a54b0532d6a6e34f0ff7dcd">unblock_events_tot</a>,</div><div class="line">                         fmt-&gt;mSeparator,</div><div class="line">                         Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#a3de0b0f2a1a0e28eda7139391f129282">cancel_events</a>,</div><div class="line">                         fmt-&gt;mSeparator,</div><div class="line">                         Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#ae132a9532a3cd9e8cb2a848f7bc21310">cancel_events_tot</a>,</div><div class="line">                         fmt-&gt;mSeparator,</div><div class="line">                         Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#ab4c9d672da911a1480dae57afb4d9f02">cancel_events_svc_min</a>,</div><div class="line">                         fmt-&gt;mSeparator,</div><div class="line">                         Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#a052dbba776635e77a4120e5ef6e90c91">cancel_events_svc_mean</a>,</div><div class="line">                         fmt-&gt;mSeparator,</div><div class="line">                         Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#a7cd4f559697c4d5f78faa9a62ef84a2a">cancel_events_svc_max</a>,</div><div class="line">                         fmt-&gt;mSeparator);</div><div class="line">        <span class="keywordflow">if</span> (strlen(work) &gt;= (*Size - strlen(Destination) - 1))</div><div class="line">        {</div><div class="line">                strncpy(ErrorString, <span class="stringliteral">&quot;Destination too small for data&quot;</span>, <span class="keyword">sizeof</span>(ErrorString));</div><div class="line">                <span class="keywordflow">return</span> (-1);</div><div class="line">        }</div><div class="line">        strncat(Destination, work, *Size - strlen(Destination) - 1);</div><div class="line">        snprintf(work,</div><div class="line">                         <span class="keyword">sizeof</span>(work),</div><div class="line">                         <span class="stringliteral">&quot;%lx%c%lx%c%lx%c%lx%c%lx%c%lx%c%lx%c%lx%c%lx%c%lx%c%lx%c%lx%c%lx%c%lx%c%lx&quot;</span>,</div><div class="line">                         Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#a282f43818b35a6eb065c0921c6da2ffa">context_source_events</a>,</div><div class="line">                         fmt-&gt;mSeparator,</div><div class="line">                         Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#a717995ba4aec1a7f6015845c1559ee1f">context_source_events_tot</a>,</div><div class="line">                         fmt-&gt;mSeparator,</div><div class="line">                         Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#a47427d10f3c5b85f171df27d7e8d6167">context_source_events_svc_min</a>,</div><div class="line">                         fmt-&gt;mSeparator,</div><div class="line">                         Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#a8ddc8a009868eec5805c8f3ef4c0dd30">context_source_events_svc_mean</a>,</div><div class="line">                         fmt-&gt;mSeparator,</div><div class="line">                         Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#ae7acc69ae5bdb19d6c9cf24da124ffe1">context_source_events_svc_max</a>,</div><div class="line">                         fmt-&gt;mSeparator,</div><div class="line">                         Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#aa277eb758107dc807eb871f389d21f02">events</a>,</div><div class="line">                         fmt-&gt;mSeparator,</div><div class="line">                         Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#a5eca47585017c10b9fcfb66189bea1f3">events_tot</a>,</div><div class="line">                         fmt-&gt;mSeparator,</div><div class="line">                         Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#a9841f3a2b8e513a6d7f34358e92b817f">age_min</a>,</div><div class="line">                         fmt-&gt;mSeparator,</div><div class="line">                         Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#a3b67a68331cfceee0d7a72a14a87cde3">age_mean</a>,</div><div class="line">                         fmt-&gt;mSeparator,</div><div class="line">                         Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#a3d0a5bc4f1e5f1b8c63882ccefb89fb6">age_max</a>,</div><div class="line">                         fmt-&gt;mSeparator,</div><div class="line">                         Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#a6acd77a2ec28565a90e49158e0fb3487">callback_events</a>,</div><div class="line">                         fmt-&gt;mSeparator,</div><div class="line">                         Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#ac3368332b158a18c24c0158c31816237">callback_events_tot</a>,</div><div class="line">                         fmt-&gt;mSeparator,</div><div class="line">                         Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#ac266ed66cddfe0368d4cbafa4197ab04">callback_events_svc_min</a>,</div><div class="line">                         fmt-&gt;mSeparator,</div><div class="line">                         Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#a78f8a82d99aeead6a864db8e80284693">callback_events_svc_mean</a>,</div><div class="line">                         fmt-&gt;mSeparator,</div><div class="line">                         Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#ae20d931a2302674c0c8ac765671e5a10">callback_events_svc_max</a>);</div><div class="line">        <span class="keywordflow">if</span> (strlen(work) &gt;= (*Size - strlen(Destination) - 1))</div><div class="line">        {</div><div class="line">                strncpy(ErrorString, <span class="stringliteral">&quot;Destination too small for data&quot;</span>, <span class="keyword">sizeof</span>(ErrorString));</div><div class="line">                <span class="keywordflow">return</span> (-1);</div><div class="line">        }</div><div class="line">        strncat(Destination, work, *Size - strlen(Destination) - 1);</div><div class="line">        *Size = strlen(Destination);</div><div class="line">        <span class="keywordflow">return</span> (0);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">/*</span></div><div class="line"><span class="comment"> Format of the CSV context statistics data is:</span></div><div class="line"><span class="comment">        tr_dgrams_sent</span></div><div class="line"><span class="comment">        tr_bytes_sent</span></div><div class="line"><span class="comment">        tr_dgrams_rcved</span></div><div class="line"><span class="comment">        tr_bytes_rcved</span></div><div class="line"><span class="comment">        tr_dgrams_dropped_ver</span></div><div class="line"><span class="comment">        tr_dgrams_dropped_type</span></div><div class="line"><span class="comment">        tr_dgrams_dropped_malformed</span></div><div class="line"><span class="comment">        tr_dgrams_send_failed</span></div><div class="line"><span class="comment">        tr_src_topics</span></div><div class="line"><span class="comment">        tr_rcv_topics</span></div><div class="line"><span class="comment">        tr_rcv_unresolved_topics</span></div><div class="line"><span class="comment">        lbtrm_unknown_msgs_rcved</span></div><div class="line"><span class="comment">        lbtru_unknown_msgs_rcved</span></div><div class="line"><span class="comment">        send_blocked</span></div><div class="line"><span class="comment">        send_would_block</span></div><div class="line"><span class="comment">        resp_blocked</span></div><div class="line"><span class="comment">        resp_would_block</span></div><div class="line"><span class="comment">        uim_dup_msgs_rcved</span></div><div class="line"><span class="comment">        uim_msg_no_stream_rcved</span></div><div class="line"><span class="comment">        fragments_lost</span></div><div class="line"><span class="comment">        fragments_unrecoverably_lost</span></div><div class="line"><span class="comment">        rcv_cb_svc_time_min</span></div><div class="line"><span class="comment">        rcv_cb_svc_time_max</span></div><div class="line"><span class="comment">        rcv_cb_svc_time_mean</span></div><div class="line"><span class="comment">*/</span></div><div class="line"></div><div class="line"><span class="keywordtype">int</span> lbmmon_ctx_format_csv_serialize(<span class="keywordtype">char</span> * Destination, <span class="keywordtype">size_t</span> * Size, <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> * ModuleID,</div><div class="line">                                                                        <span class="keyword">const</span> <a class="code" href="structlbm__context__stats__t__stct.html">lbm_context_stats_t</a> * Statistics, <span class="keywordtype">void</span> * FormatClientData)</div><div class="line">{</div><div class="line">        lbmmon_format_csv_t     * fmt;</div><div class="line">        <span class="keywordtype">char</span> work[1024];</div><div class="line"></div><div class="line">        <span class="keywordflow">if</span> ((Destination == NULL) || (Size == NULL) || (*Size == 0) || (Statistics == NULL) || (FormatClientData == NULL))</div><div class="line">        {</div><div class="line">                <span class="keywordflow">return</span> (-1);</div><div class="line">        }</div><div class="line">        fmt = (lbmmon_format_csv_t *) FormatClientData;</div><div class="line"></div><div class="line">        *ModuleID = MAKE_MODULE_VERSION(LBMMON_FORMAT_CSV_VERSION_CURRENT);</div><div class="line">        memset(work, 0, <span class="keyword">sizeof</span>(work));</div><div class="line">        memset(Destination, 0, 2048);</div><div class="line">        snprintf(work,</div><div class="line">                         <span class="keyword">sizeof</span>(work),</div><div class="line">                         <span class="stringliteral">&quot;%lx%c%lx%c%lx%c%lx%c%lx%c%lx%c%lx%c%lx%c%lx%c%lx%c%lx%c%lx%c%lx%c%lx%c%lx%c%lx%c%lx%c&quot;</span>,</div><div class="line">                         Statistics-&gt;<a class="code" href="structlbm__context__stats__t__stct.html#af81b4e84e386bd78281c6ae10311bb88">tr_dgrams_sent</a>,</div><div class="line">                         fmt-&gt;mSeparator,</div><div class="line">                         Statistics-&gt;<a class="code" href="structlbm__context__stats__t__stct.html#adad0991cb75599de9f1aca11fc774d3b">tr_bytes_sent</a>,</div><div class="line">                         fmt-&gt;mSeparator,</div><div class="line">                         Statistics-&gt;<a class="code" href="structlbm__context__stats__t__stct.html#ac098444f61f7b93a1291187f7b7b099c">tr_dgrams_rcved</a>,</div><div class="line">                         fmt-&gt;mSeparator,</div><div class="line">                         Statistics-&gt;<a class="code" href="structlbm__context__stats__t__stct.html#a1bf2557cdbc5c7c1114ef73366448083">tr_bytes_rcved</a>,</div><div class="line">                         fmt-&gt;mSeparator,</div><div class="line">                         Statistics-&gt;<a class="code" href="structlbm__context__stats__t__stct.html#a4af77dcdede237ff289bf1085f4d9030">tr_dgrams_dropped_ver</a>,</div><div class="line">                         fmt-&gt;mSeparator,</div><div class="line">                         Statistics-&gt;<a class="code" href="structlbm__context__stats__t__stct.html#a9477e4a48c6cceabea9450e0f85276da">tr_dgrams_dropped_type</a>,</div><div class="line">                         fmt-&gt;mSeparator,</div><div class="line">                         Statistics-&gt;<a class="code" href="structlbm__context__stats__t__stct.html#aaba67cae496b93572e2455a25776babe">tr_dgrams_dropped_malformed</a>,</div><div class="line">                         fmt-&gt;mSeparator,</div><div class="line">                         Statistics-&gt;<a class="code" href="structlbm__context__stats__t__stct.html#a7b42a82511c67ae2dd0ae7803c15e750">tr_dgrams_send_failed</a>,</div><div class="line">                         fmt-&gt;mSeparator,</div><div class="line">                         Statistics-&gt;<a class="code" href="structlbm__context__stats__t__stct.html#affb4eeb9919e7b2551d890ff84fb9581">tr_src_topics</a>,</div><div class="line">                         fmt-&gt;mSeparator,</div><div class="line">                         Statistics-&gt;<a class="code" href="structlbm__context__stats__t__stct.html#a0c14976cf3ef474b6601f968587153f4">tr_rcv_topics</a>,</div><div class="line">                         fmt-&gt;mSeparator,</div><div class="line">                         Statistics-&gt;<a class="code" href="structlbm__context__stats__t__stct.html#accf9ebc73f241bc2c7f0043e75d89d2c">tr_rcv_unresolved_topics</a>,</div><div class="line">                         fmt-&gt;mSeparator,</div><div class="line">                         Statistics-&gt;<a class="code" href="structlbm__context__stats__t__stct.html#ad2fd3379b1a47479c7b64e873118be5c">lbtrm_unknown_msgs_rcved</a>,</div><div class="line">                         fmt-&gt;mSeparator,</div><div class="line">                         Statistics-&gt;<a class="code" href="structlbm__context__stats__t__stct.html#a68d5c0b331abcd3d229e718762348500">lbtru_unknown_msgs_rcved</a>,</div><div class="line">                         fmt-&gt;mSeparator,</div><div class="line">                         Statistics-&gt;<a class="code" href="structlbm__context__stats__t__stct.html#a092960998a64a6e810381e5770da7dac">send_blocked</a>,</div><div class="line">                         fmt-&gt;mSeparator,</div><div class="line">                         Statistics-&gt;<a class="code" href="structlbm__context__stats__t__stct.html#a7c7d7bca55193f5e400f63bc1f86b8da">send_would_block</a>,</div><div class="line">                         fmt-&gt;mSeparator,</div><div class="line">                         Statistics-&gt;<a class="code" href="structlbm__context__stats__t__stct.html#ac8ffb608dcbaea5347343aa1fcbcefad">resp_blocked</a>,</div><div class="line">                         fmt-&gt;mSeparator,</div><div class="line">                         Statistics-&gt;<a class="code" href="structlbm__context__stats__t__stct.html#a9e6492f0efa2a1387cc74108900b9b50">resp_would_block</a>,</div><div class="line">                         fmt-&gt;mSeparator);</div><div class="line">        <span class="keywordflow">if</span> (strlen(work) &gt;= (*Size - strlen(Destination) - 1))</div><div class="line">        {</div><div class="line">                strncpy(ErrorString, <span class="stringliteral">&quot;Destination too small for data&quot;</span>, <span class="keyword">sizeof</span>(ErrorString));</div><div class="line">                <span class="keywordflow">return</span> (-1);</div><div class="line">        }</div><div class="line">        strncat(Destination, work, *Size - strlen(Destination) - 1);</div><div class="line">        snprintf(work,</div><div class="line">                         <span class="keyword">sizeof</span>(work),</div><div class="line">                         <span class="stringliteral">&quot;%lx%c%lx%c%lx%c%lx%c%lx%c%lx%c%lx&quot;</span>,</div><div class="line">                         Statistics-&gt;<a class="code" href="structlbm__context__stats__t__stct.html#a96e30b87315deb7bbb3754bbf8b1ef44">uim_dup_msgs_rcved</a>,</div><div class="line">                         fmt-&gt;mSeparator,</div><div class="line">                         Statistics-&gt;<a class="code" href="structlbm__context__stats__t__stct.html#acd0917cbb558c6aa709f058a5cfc4179">uim_msgs_no_stream_rcved</a>,</div><div class="line">                         fmt-&gt;mSeparator,</div><div class="line">                         Statistics-&gt;<a class="code" href="structlbm__context__stats__t__stct.html#ad80f9f30910a7468de9863238cdf126d">fragments_lost</a>,</div><div class="line">                         fmt-&gt;mSeparator,</div><div class="line">                         Statistics-&gt;<a class="code" href="structlbm__context__stats__t__stct.html#a368bb93a5038b98e6e59b62c34a3d5b4">fragments_unrecoverably_lost</a>,</div><div class="line">                         fmt-&gt;mSeparator,</div><div class="line">                         Statistics-&gt;<a class="code" href="structlbm__context__stats__t__stct.html#ad6dc0c61916512a1d385501d8d635fe3">rcv_cb_svc_time_min</a>,</div><div class="line">                         fmt-&gt;mSeparator,</div><div class="line">                         Statistics-&gt;<a class="code" href="structlbm__context__stats__t__stct.html#a6e7fd17516ad5bd894bd47b1c506d91f">rcv_cb_svc_time_max</a>,</div><div class="line">                         fmt-&gt;mSeparator,</div><div class="line">                         Statistics-&gt;<a class="code" href="structlbm__context__stats__t__stct.html#a7773f35c817502bbb33acac04a197715">rcv_cb_svc_time_mean</a>);</div><div class="line">        <span class="keywordflow">if</span> (strlen(work) &gt;= (*Size - strlen(Destination) - 1))</div><div class="line">        {</div><div class="line">                strncpy(ErrorString, <span class="stringliteral">&quot;Destination too small for data&quot;</span>, <span class="keyword">sizeof</span>(ErrorString));</div><div class="line">                <span class="keywordflow">return</span> (-1);</div><div class="line">        }</div><div class="line">        strncat(Destination, work, *Size - strlen(Destination) - 1);</div><div class="line">        *Size = strlen(Destination);</div><div class="line">        <span class="keywordflow">return</span> (0);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">/*</span></div><div class="line"><span class="comment"> Format of the CSV receiver topic statistics data is:</span></div><div class="line"><span class="comment">        topic</span></div><div class="line"><span class="comment">        source_count</span></div><div class="line"><span class="comment">        For each source:</span></div><div class="line"><span class="comment">                source_string</span></div><div class="line"><span class="comment">                OTID</span></div><div class="line"><span class="comment">                topic_idx</span></div><div class="line"><span class="comment">*/</span></div><div class="line"></div><div class="line"><span class="keywordtype">int</span> lbmmon_rcv_topic_format_csv_serialize(<span class="keywordtype">char</span> * Destination, <span class="keywordtype">size_t</span> * Size, <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> * ModuleID, <span class="keyword">const</span> <span class="keywordtype">char</span> * Topic,</div><div class="line">                                                                                  <a class="code" href="lbm_8h.html#a72438fab15bf500af58d2a8a521e470d">lbm_ulong_t</a> SourceCount, <span class="keyword">const</span> <a class="code" href="structlbm__rcv__topic__stats__t__stct.html">lbm_rcv_topic_stats_t</a> * Sources, <span class="keywordtype">void</span> * FormatClientData)</div><div class="line">{</div><div class="line">        lbmmon_format_csv_t     * fmt;</div><div class="line">        <span class="keywordtype">char</span> work[1024];</div><div class="line">        <span class="keywordtype">int</span> idx;</div><div class="line"></div><div class="line">        <span class="keywordflow">if</span> ((Destination == NULL) || (Size == NULL) || (*Size == 0) || (FormatClientData == NULL))</div><div class="line">        {</div><div class="line">                <span class="keywordflow">return</span> (-1);</div><div class="line">        }</div><div class="line">        fmt = (lbmmon_format_csv_t *) FormatClientData;</div><div class="line"></div><div class="line">        *ModuleID = MAKE_MODULE_VERSION(LBMMON_FORMAT_CSV_VERSION_CURRENT);</div><div class="line">        memset(work, 0, <span class="keyword">sizeof</span>(work));</div><div class="line">        memset(Destination, 0, 2048);</div><div class="line">        snprintf(work, <span class="keyword">sizeof</span>(work),</div><div class="line">                         <span class="stringliteral">&quot;\&quot;%s\&quot;%c%lx&quot;</span>,</div><div class="line">                         Topic,</div><div class="line">                         fmt-&gt;mSeparator,</div><div class="line">                         SourceCount);</div><div class="line">        <span class="keywordflow">if</span> (strlen(work) &gt;= (*Size - strlen(Destination) - 1))</div><div class="line">        {</div><div class="line">                strncpy(ErrorString, <span class="stringliteral">&quot;Destination too small for data&quot;</span>, <span class="keyword">sizeof</span>(ErrorString));</div><div class="line">                <span class="keywordflow">return</span> (-1);</div><div class="line">        }</div><div class="line">        strncat(Destination, work, *Size - strlen(Destination) - 1);</div><div class="line">        <span class="keywordflow">if</span> (SourceCount &gt; 0)</div><div class="line">        {</div><div class="line">                <span class="keywordflow">for</span> (idx = 0; idx &lt; SourceCount; ++idx)</div><div class="line">                {</div><div class="line">                        <span class="keywordtype">size_t</span> offset;</div><div class="line">                        memset(work, 0, <span class="keyword">sizeof</span>(work));</div><div class="line">                        snprintf(work, <span class="keyword">sizeof</span>(work),</div><div class="line">                                         <span class="stringliteral">&quot;%c\&quot;%s\&quot;%c&quot;</span>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Sources[idx].<a class="code" href="structlbm__rcv__topic__stats__t__stct.html#afff1d2c8a81027a2814bdc472ae9c8d8">source</a>,</div><div class="line">                                         fmt-&gt;mSeparator);</div><div class="line">                        offset = strlen(work);</div><div class="line">                        lbmmon_format_csv_convert_to_hex(work + offset, Sources[idx].otid, LBM_OTID_BLOCK_SZ);</div><div class="line">                        offset = strlen(work);</div><div class="line">                        snprintf(work + offset, <span class="keyword">sizeof</span>(work) - offset,</div><div class="line">                                         <span class="stringliteral">&quot;%c%x&quot;</span>,</div><div class="line">                                         fmt-&gt;mSeparator,</div><div class="line">                                         Sources[idx].<a class="code" href="structlbm__rcv__topic__stats__t__stct.html#a1c7eeb9a981d4be6ab9d989177f7e602">topic_idx</a>);</div><div class="line">                        <span class="keywordflow">if</span> (strlen(work) &gt;= (*Size - strlen(Destination) - 1))</div><div class="line">                        {</div><div class="line">                                strncpy(ErrorString, <span class="stringliteral">&quot;Destination too small for data&quot;</span>, <span class="keyword">sizeof</span>(ErrorString));</div><div class="line">                                <span class="keywordflow">return</span> (-1);</div><div class="line">                        }</div><div class="line">                        strncat(Destination, work, *Size - strlen(Destination) - 1);</div><div class="line">                }</div><div class="line">        }</div><div class="line">        *Size = strlen(Destination);</div><div class="line">        <span class="keywordflow">return</span> (0);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">/*</span></div><div class="line"><span class="comment"> Format of the CSV wildcard receiver statistics data is:</span></div><div class="line"><span class="comment">        pattern</span></div><div class="line"><span class="comment">        type</span></div><div class="line"><span class="comment">*/</span></div><div class="line"></div><div class="line"><span class="keywordtype">int</span> lbmmon_wildcard_rcv_format_csv_serialize(<span class="keywordtype">char</span> * Destination, <span class="keywordtype">size_t</span> * Size, <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> * ModuleID,</div><div class="line">                                                                                         <span class="keyword">const</span> <a class="code" href="structlbm__wildcard__rcv__stats__t__stct.html">lbm_wildcard_rcv_stats_t</a> * Statistics, <span class="keywordtype">void</span> * FormatClientData)</div><div class="line">{</div><div class="line">        lbmmon_format_csv_t     * fmt;</div><div class="line">        <span class="keywordtype">char</span> work[1024];</div><div class="line"></div><div class="line">        <span class="keywordflow">if</span> ((Destination == NULL) || (Size == NULL) || (*Size == 0) || (Statistics == NULL) || (FormatClientData == NULL))</div><div class="line">        {</div><div class="line">                <span class="keywordflow">return</span> (-1);</div><div class="line">        }</div><div class="line">        fmt = (lbmmon_format_csv_t *) FormatClientData;</div><div class="line"></div><div class="line">        *ModuleID = MAKE_MODULE_VERSION(LBMMON_FORMAT_CSV_VERSION_CURRENT);</div><div class="line">        memset(work, 0, <span class="keyword">sizeof</span>(work));</div><div class="line">        memset(Destination, 0, 2048);</div><div class="line">        snprintf(work, <span class="keyword">sizeof</span>(work),</div><div class="line">                         <span class="stringliteral">&quot;\&quot;%s\&quot;%c%x&quot;</span>,</div><div class="line">                         Statistics-&gt;<a class="code" href="structlbm__wildcard__rcv__stats__t__stct.html#a45dcb7dd7131525d0eaa525d013be336">pattern</a>,</div><div class="line">                         fmt-&gt;mSeparator,</div><div class="line">                         Statistics-&gt;<a class="code" href="structlbm__wildcard__rcv__stats__t__stct.html#a013c6df622d0fcc55e426242a3fae1f9">type</a>);</div><div class="line">        <span class="keywordflow">if</span> (strlen(work) &gt;= (*Size - strlen(Destination) - 1))</div><div class="line">        {</div><div class="line">                strncpy(ErrorString, <span class="stringliteral">&quot;Destination too small for data&quot;</span>, <span class="keyword">sizeof</span>(ErrorString));</div><div class="line">                <span class="keywordflow">return</span> (-1);</div><div class="line">        }</div><div class="line">        strncat(Destination, work, *Size - strlen(Destination) - 1);</div><div class="line">        *Size = strlen(Destination);</div><div class="line">        <span class="keywordflow">return</span> (0);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> * next_csv_value(<span class="keyword">const</span> <span class="keywordtype">char</span> * String, <span class="keywordtype">char</span> * Value, <span class="keywordtype">size_t</span> Size, <span class="keywordtype">char</span> Separator)</div><div class="line">{</div><div class="line">        <span class="keyword">const</span> <span class="keywordtype">char</span> * ptr = String;</div><div class="line">        <span class="keywordtype">size_t</span> pos;</div><div class="line"></div><div class="line">        <span class="keywordflow">if</span> ((ptr == NULL) || (Value == NULL) || (Size == 0))</div><div class="line">        {</div><div class="line">                <span class="keywordflow">return</span> (NULL);</div><div class="line">        }</div><div class="line">        memset(Value, 0, Size);</div><div class="line"></div><div class="line">        <span class="comment">/* Skip any whitespace */</span></div><div class="line">        <span class="keywordflow">while</span> ((*ptr != <span class="charliteral">&#39;\0&#39;</span>) &amp;&amp; (*ptr != Separator) &amp;&amp; ((*ptr == <span class="charliteral">&#39; &#39;</span>) || (*ptr == <span class="charliteral">&#39;\t&#39;</span>)))</div><div class="line">        {</div><div class="line">                ptr++;</div><div class="line">        }</div><div class="line">        pos = 0;</div><div class="line"></div><div class="line">        <span class="keywordflow">if</span> (*ptr == <span class="charliteral">&#39;\0&#39;</span>)</div><div class="line">        {</div><div class="line">                <span class="keywordflow">return</span> (NULL);</div><div class="line">        }</div><div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (*ptr == Separator)</div><div class="line">        {</div><div class="line">                ptr++;</div><div class="line">                <span class="keywordflow">return</span> (ptr);</div><div class="line">        }</div><div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((*ptr == <span class="charliteral">&#39;\&quot;&#39;</span>) || (*ptr == <span class="charliteral">&#39;\&#39;&#39;</span>))</div><div class="line">        {</div><div class="line">                <span class="keywordtype">char</span> quote = *ptr;</div><div class="line">                ptr++;</div><div class="line">                <span class="keywordflow">while</span> ((*ptr != <span class="charliteral">&#39;\0&#39;</span>) &amp;&amp; (*ptr != quote) &amp;&amp; (pos &lt; (Size - 1)))</div><div class="line">                {</div><div class="line">                        Value[pos++] = *ptr++;</div><div class="line">                }</div><div class="line">                <span class="comment">/* In case we exceeded the Value size, scan for the ending quote. */</span></div><div class="line">                <span class="keywordflow">while</span> ((*ptr != <span class="charliteral">&#39;\0&#39;</span>) &amp;&amp; (*ptr != quote))</div><div class="line">                {</div><div class="line">                        ptr++;</div><div class="line">                }</div><div class="line">                <span class="comment">/* Finally, scan for the separator */</span></div><div class="line">                <span class="keywordflow">while</span> ((*ptr != <span class="charliteral">&#39;\0&#39;</span>) &amp;&amp; (*ptr != Separator))</div><div class="line">                {</div><div class="line">                        ptr++;</div><div class="line">                }</div><div class="line">        }</div><div class="line">        <span class="keywordflow">else</span></div><div class="line">        {</div><div class="line">                <span class="comment">/* Copy into Value */</span></div><div class="line">                <span class="keywordflow">while</span> ((*ptr != <span class="charliteral">&#39;\0&#39;</span>) &amp;&amp; (*ptr != Separator) &amp;&amp; (pos &lt; (Size - 1)))</div><div class="line">                {</div><div class="line">                        Value[pos++] = *ptr++;</div><div class="line">                }</div><div class="line">                <span class="comment">/* In case we exceeded the Value size, scan for the separator. */</span></div><div class="line">                <span class="keywordflow">while</span> ((*ptr != <span class="charliteral">&#39;\0&#39;</span>) &amp;&amp; (*ptr != Separator))</div><div class="line">                {</div><div class="line">                        ptr++;</div><div class="line">                }</div><div class="line">        }</div><div class="line">        <span class="comment">/* If we&#39;re at the separator, advance the pointer */</span></div><div class="line">        <span class="keywordflow">if</span> (*ptr == Separator)</div><div class="line">        {</div><div class="line">                ptr++;</div><div class="line">        }</div><div class="line">        <span class="keywordflow">return</span> (ptr);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">static</span> <a class="code" href="lbm_8h.html#a72438fab15bf500af58d2a8a521e470d">lbm_ulong_t</a> convert_value(<span class="keyword">const</span> <span class="keywordtype">char</span> * Buffer)</div><div class="line">{</div><div class="line">        <a class="code" href="lbm_8h.html#a72438fab15bf500af58d2a8a521e470d">lbm_ulong_t</a> value = 0;</div><div class="line">        <span class="keyword">const</span> <span class="keywordtype">char</span> * ptr = Buffer;</div><div class="line"></div><div class="line">        <span class="keywordflow">while</span> (1)</div><div class="line">        {</div><div class="line">                errno = 0;</div><div class="line">                value = strtoul(ptr, NULL, 16);</div><div class="line">                <span class="keywordflow">if</span> ((value == ULONG_MAX) &amp;&amp; (errno == ERANGE))</div><div class="line">                {</div><div class="line">                        ptr++;</div><div class="line">                }</div><div class="line">                <span class="keywordflow">else</span></div><div class="line">                {</div><div class="line">                        <span class="keywordflow">return</span> (value);</div><div class="line">                }</div><div class="line">        }</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">/*************************************************************************************************/</span></div><div class="line"><span class="comment">/* A note to maintainers:                                                                        */</span></div><div class="line"><span class="comment">/*                                                                                               */</span></div><div class="line"><span class="comment">/*      Ideally, the code to deserialize statistics would be completely generic. Instead of separate */</span></div><div class="line"><span class="comment">/*      parsing loops for each of n message types, a single function could parse the string and put  */</span></div><div class="line"><span class="comment">/*      the values into the structure (given the appropriate pointers). Access to the statistics     */</span></div><div class="line"><span class="comment">/*      structure would also be generic, casting a pointer to the actual structure into a char *,    */</span></div><div class="line"><span class="comment">/*      then indexing using the field offset arrays (below) to locate the correct position for the   */</span></div><div class="line"><span class="comment">/*      field within the structure.                                                                  */</span></div><div class="line"><span class="comment">/*                                                                                               */</span></div><div class="line"><span class="comment">/*      That is, as long as the type of each field in every statistics structure is the same.        */</span></div><div class="line"><span class="comment">/*      Which it currently is... and probably will remain so. But there&#39;s no guarantee that it       */</span></div><div class="line"><span class="comment">/*      _will_ remain so. So better to bite the bullet now, and make the possibility of non-         */</span></div><div class="line"><span class="comment">/*      homogeneous structures simple to implement.                                                  */</span></div><div class="line"><span class="comment">/*************************************************************************************************/</span></div><div class="line"></div><div class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">size_t</span> csv_rcv_tcp_stat_offset_v1[] =</div><div class="line">{</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__tcp__t__stct.html">lbm_rcv_transport_stats_tcp_t</a>, bytes_rcved),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__tcp__t__stct.html">lbm_rcv_transport_stats_tcp_t</a>, lbm_msgs_rcved),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__tcp__t__stct.html">lbm_rcv_transport_stats_tcp_t</a>, lbm_msgs_no_topic_rcved),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__tcp__t__stct.html">lbm_rcv_transport_stats_tcp_t</a>, lbm_reqs_rcved)</div><div class="line">};</div><div class="line"><span class="preprocessor">#define csv_rcv_tcp_stat_offset_v2 csv_rcv_tcp_stat_offset_v1</span></div><div class="line"><span class="preprocessor">#define csv_rcv_tcp_stat_offset_v3 csv_rcv_tcp_stat_offset_v2</span></div><div class="line"><span class="preprocessor">#define csv_rcv_tcp_stat_offset_v4 csv_rcv_tcp_stat_offset_v3</span></div><div class="line"><span class="preprocessor">#define csv_rcv_tcp_stat_offset_v5 csv_rcv_tcp_stat_offset_v4</span></div><div class="line"><span class="keyword">static</span> <span class="keyword">const</span> lbmmon_csv_layout_t csv_rcv_tcp_stat_layout[LBMMON_FORMAT_CSV_VERSION_CURRENT+1] =</div><div class="line">{</div><div class="line">        { NULL, 0 },</div><div class="line">        { csv_rcv_tcp_stat_offset_v1, <span class="keyword">sizeof</span>(csv_rcv_tcp_stat_offset_v1)/<span class="keyword">sizeof</span>(csv_rcv_tcp_stat_offset_v1[0]) },</div><div class="line">        { csv_rcv_tcp_stat_offset_v2, <span class="keyword">sizeof</span>(csv_rcv_tcp_stat_offset_v2)/<span class="keyword">sizeof</span>(csv_rcv_tcp_stat_offset_v2[0]) },</div><div class="line">        { csv_rcv_tcp_stat_offset_v3, <span class="keyword">sizeof</span>(csv_rcv_tcp_stat_offset_v3)/<span class="keyword">sizeof</span>(csv_rcv_tcp_stat_offset_v3[0]) },</div><div class="line">        { csv_rcv_tcp_stat_offset_v4, <span class="keyword">sizeof</span>(csv_rcv_tcp_stat_offset_v4)/<span class="keyword">sizeof</span>(csv_rcv_tcp_stat_offset_v4[0]) },</div><div class="line">        { csv_rcv_tcp_stat_offset_v5, <span class="keyword">sizeof</span>(csv_rcv_tcp_stat_offset_v5)/<span class="keyword">sizeof</span>(csv_rcv_tcp_stat_offset_v5[0]) }</div><div class="line">};</div><div class="line"></div><div class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">size_t</span> csv_rcv_lbtrm_stat_offset_v1[] =</div><div class="line">{</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtrm__t__stct.html">lbm_rcv_transport_stats_lbtrm_t</a>, msgs_rcved),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtrm__t__stct.html">lbm_rcv_transport_stats_lbtrm_t</a>, bytes_rcved),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtrm__t__stct.html">lbm_rcv_transport_stats_lbtrm_t</a>, nak_pckts_sent),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtrm__t__stct.html">lbm_rcv_transport_stats_lbtrm_t</a>, naks_sent),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtrm__t__stct.html">lbm_rcv_transport_stats_lbtrm_t</a>, lost),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtrm__t__stct.html">lbm_rcv_transport_stats_lbtrm_t</a>, ncfs_ignored),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtrm__t__stct.html">lbm_rcv_transport_stats_lbtrm_t</a>, ncfs_shed),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtrm__t__stct.html">lbm_rcv_transport_stats_lbtrm_t</a>, ncfs_rx_delay),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtrm__t__stct.html">lbm_rcv_transport_stats_lbtrm_t</a>, ncfs_unknown),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtrm__t__stct.html">lbm_rcv_transport_stats_lbtrm_t</a>, nak_stm_min),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtrm__t__stct.html">lbm_rcv_transport_stats_lbtrm_t</a>, nak_stm_mean),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtrm__t__stct.html">lbm_rcv_transport_stats_lbtrm_t</a>, nak_stm_max),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtrm__t__stct.html">lbm_rcv_transport_stats_lbtrm_t</a>, nak_tx_min),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtrm__t__stct.html">lbm_rcv_transport_stats_lbtrm_t</a>, nak_tx_mean),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtrm__t__stct.html">lbm_rcv_transport_stats_lbtrm_t</a>, nak_tx_max),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtrm__t__stct.html">lbm_rcv_transport_stats_lbtrm_t</a>, duplicate_data),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtrm__t__stct.html">lbm_rcv_transport_stats_lbtrm_t</a>, unrecovered_txw),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtrm__t__stct.html">lbm_rcv_transport_stats_lbtrm_t</a>, unrecovered_tmo),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtrm__t__stct.html">lbm_rcv_transport_stats_lbtrm_t</a>, lbm_msgs_rcved),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtrm__t__stct.html">lbm_rcv_transport_stats_lbtrm_t</a>, lbm_msgs_no_topic_rcved),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtrm__t__stct.html">lbm_rcv_transport_stats_lbtrm_t</a>, lbm_reqs_rcved)</div><div class="line">};</div><div class="line"><span class="preprocessor">#define csv_rcv_lbtrm_stat_offset_v2 csv_rcv_lbtrm_stat_offset_v1</span></div><div class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">size_t</span> csv_rcv_lbtrm_stat_offset_v3[] =</div><div class="line">{</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtrm__t__stct.html">lbm_rcv_transport_stats_lbtrm_t</a>, msgs_rcved),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtrm__t__stct.html">lbm_rcv_transport_stats_lbtrm_t</a>, bytes_rcved),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtrm__t__stct.html">lbm_rcv_transport_stats_lbtrm_t</a>, nak_pckts_sent),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtrm__t__stct.html">lbm_rcv_transport_stats_lbtrm_t</a>, naks_sent),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtrm__t__stct.html">lbm_rcv_transport_stats_lbtrm_t</a>, lost),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtrm__t__stct.html">lbm_rcv_transport_stats_lbtrm_t</a>, ncfs_ignored),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtrm__t__stct.html">lbm_rcv_transport_stats_lbtrm_t</a>, ncfs_shed),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtrm__t__stct.html">lbm_rcv_transport_stats_lbtrm_t</a>, ncfs_rx_delay),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtrm__t__stct.html">lbm_rcv_transport_stats_lbtrm_t</a>, ncfs_unknown),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtrm__t__stct.html">lbm_rcv_transport_stats_lbtrm_t</a>, nak_stm_min),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtrm__t__stct.html">lbm_rcv_transport_stats_lbtrm_t</a>, nak_stm_mean),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtrm__t__stct.html">lbm_rcv_transport_stats_lbtrm_t</a>, nak_stm_max),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtrm__t__stct.html">lbm_rcv_transport_stats_lbtrm_t</a>, nak_tx_min),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtrm__t__stct.html">lbm_rcv_transport_stats_lbtrm_t</a>, nak_tx_mean),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtrm__t__stct.html">lbm_rcv_transport_stats_lbtrm_t</a>, nak_tx_max),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtrm__t__stct.html">lbm_rcv_transport_stats_lbtrm_t</a>, duplicate_data),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtrm__t__stct.html">lbm_rcv_transport_stats_lbtrm_t</a>, unrecovered_txw),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtrm__t__stct.html">lbm_rcv_transport_stats_lbtrm_t</a>, unrecovered_tmo),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtrm__t__stct.html">lbm_rcv_transport_stats_lbtrm_t</a>, lbm_msgs_rcved),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtrm__t__stct.html">lbm_rcv_transport_stats_lbtrm_t</a>, lbm_msgs_no_topic_rcved),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtrm__t__stct.html">lbm_rcv_transport_stats_lbtrm_t</a>, lbm_reqs_rcved),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtrm__t__stct.html">lbm_rcv_transport_stats_lbtrm_t</a>, dgrams_dropped_size),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtrm__t__stct.html">lbm_rcv_transport_stats_lbtrm_t</a>, dgrams_dropped_type),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtrm__t__stct.html">lbm_rcv_transport_stats_lbtrm_t</a>, dgrams_dropped_version),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtrm__t__stct.html">lbm_rcv_transport_stats_lbtrm_t</a>, dgrams_dropped_hdr),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtrm__t__stct.html">lbm_rcv_transport_stats_lbtrm_t</a>, dgrams_dropped_other),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtrm__t__stct.html">lbm_rcv_transport_stats_lbtrm_t</a>, out_of_order)</div><div class="line">};</div><div class="line"><span class="preprocessor">#define csv_rcv_lbtrm_stat_offset_v4 csv_rcv_lbtrm_stat_offset_v3</span></div><div class="line"><span class="preprocessor">#define csv_rcv_lbtrm_stat_offset_v5 csv_rcv_lbtrm_stat_offset_v4</span></div><div class="line"><span class="keyword">static</span> <span class="keyword">const</span> lbmmon_csv_layout_t csv_rcv_lbtrm_stat_layout[LBMMON_FORMAT_CSV_VERSION_CURRENT+1] =</div><div class="line">{</div><div class="line">        { NULL, 0 },</div><div class="line">        { csv_rcv_lbtrm_stat_offset_v1, <span class="keyword">sizeof</span>(csv_rcv_lbtrm_stat_offset_v1)/<span class="keyword">sizeof</span>(csv_rcv_lbtrm_stat_offset_v1[0]) },</div><div class="line">        { csv_rcv_lbtrm_stat_offset_v2, <span class="keyword">sizeof</span>(csv_rcv_lbtrm_stat_offset_v2)/<span class="keyword">sizeof</span>(csv_rcv_lbtrm_stat_offset_v2[0]) },</div><div class="line">        { csv_rcv_lbtrm_stat_offset_v3, <span class="keyword">sizeof</span>(csv_rcv_lbtrm_stat_offset_v3)/<span class="keyword">sizeof</span>(csv_rcv_lbtrm_stat_offset_v3[0]) },</div><div class="line">        { csv_rcv_lbtrm_stat_offset_v4, <span class="keyword">sizeof</span>(csv_rcv_lbtrm_stat_offset_v4)/<span class="keyword">sizeof</span>(csv_rcv_lbtrm_stat_offset_v4[0]) },</div><div class="line">        { csv_rcv_lbtrm_stat_offset_v5, <span class="keyword">sizeof</span>(csv_rcv_lbtrm_stat_offset_v5)/<span class="keyword">sizeof</span>(csv_rcv_lbtrm_stat_offset_v5[0]) }</div><div class="line">};</div><div class="line"></div><div class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">size_t</span> csv_rcv_lbtru_stat_offset_v1[] =</div><div class="line">{</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtru__t__stct.html">lbm_rcv_transport_stats_lbtru_t</a>, msgs_rcved),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtru__t__stct.html">lbm_rcv_transport_stats_lbtru_t</a>, bytes_rcved),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtru__t__stct.html">lbm_rcv_transport_stats_lbtru_t</a>, nak_pckts_sent),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtru__t__stct.html">lbm_rcv_transport_stats_lbtru_t</a>, naks_sent),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtru__t__stct.html">lbm_rcv_transport_stats_lbtru_t</a>, lost),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtru__t__stct.html">lbm_rcv_transport_stats_lbtru_t</a>, ncfs_ignored),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtru__t__stct.html">lbm_rcv_transport_stats_lbtru_t</a>, ncfs_shed),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtru__t__stct.html">lbm_rcv_transport_stats_lbtru_t</a>, ncfs_rx_delay),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtru__t__stct.html">lbm_rcv_transport_stats_lbtru_t</a>, ncfs_unknown),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtru__t__stct.html">lbm_rcv_transport_stats_lbtru_t</a>, nak_stm_min),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtru__t__stct.html">lbm_rcv_transport_stats_lbtru_t</a>, nak_stm_mean),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtru__t__stct.html">lbm_rcv_transport_stats_lbtru_t</a>, nak_stm_max),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtru__t__stct.html">lbm_rcv_transport_stats_lbtru_t</a>, nak_tx_min),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtru__t__stct.html">lbm_rcv_transport_stats_lbtru_t</a>, nak_tx_mean),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtru__t__stct.html">lbm_rcv_transport_stats_lbtru_t</a>, nak_tx_max),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtru__t__stct.html">lbm_rcv_transport_stats_lbtru_t</a>, duplicate_data),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtru__t__stct.html">lbm_rcv_transport_stats_lbtru_t</a>, unrecovered_txw),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtru__t__stct.html">lbm_rcv_transport_stats_lbtru_t</a>, unrecovered_tmo),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtru__t__stct.html">lbm_rcv_transport_stats_lbtru_t</a>, lbm_msgs_rcved),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtru__t__stct.html">lbm_rcv_transport_stats_lbtru_t</a>, lbm_msgs_no_topic_rcved),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtru__t__stct.html">lbm_rcv_transport_stats_lbtru_t</a>, lbm_reqs_rcved)</div><div class="line">};</div><div class="line"><span class="preprocessor">#define csv_rcv_lbtru_stat_offset_v2 csv_rcv_lbtru_stat_offset_v1</span></div><div class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">size_t</span> csv_rcv_lbtru_stat_offset_v3[] =</div><div class="line">{</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtru__t__stct.html">lbm_rcv_transport_stats_lbtru_t</a>, msgs_rcved),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtru__t__stct.html">lbm_rcv_transport_stats_lbtru_t</a>, bytes_rcved),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtru__t__stct.html">lbm_rcv_transport_stats_lbtru_t</a>, nak_pckts_sent),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtru__t__stct.html">lbm_rcv_transport_stats_lbtru_t</a>, naks_sent),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtru__t__stct.html">lbm_rcv_transport_stats_lbtru_t</a>, lost),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtru__t__stct.html">lbm_rcv_transport_stats_lbtru_t</a>, ncfs_ignored),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtru__t__stct.html">lbm_rcv_transport_stats_lbtru_t</a>, ncfs_shed),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtru__t__stct.html">lbm_rcv_transport_stats_lbtru_t</a>, ncfs_rx_delay),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtru__t__stct.html">lbm_rcv_transport_stats_lbtru_t</a>, ncfs_unknown),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtru__t__stct.html">lbm_rcv_transport_stats_lbtru_t</a>, nak_stm_min),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtru__t__stct.html">lbm_rcv_transport_stats_lbtru_t</a>, nak_stm_mean),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtru__t__stct.html">lbm_rcv_transport_stats_lbtru_t</a>, nak_stm_max),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtru__t__stct.html">lbm_rcv_transport_stats_lbtru_t</a>, nak_tx_min),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtru__t__stct.html">lbm_rcv_transport_stats_lbtru_t</a>, nak_tx_mean),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtru__t__stct.html">lbm_rcv_transport_stats_lbtru_t</a>, nak_tx_max),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtru__t__stct.html">lbm_rcv_transport_stats_lbtru_t</a>, duplicate_data),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtru__t__stct.html">lbm_rcv_transport_stats_lbtru_t</a>, unrecovered_txw),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtru__t__stct.html">lbm_rcv_transport_stats_lbtru_t</a>, unrecovered_tmo),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtru__t__stct.html">lbm_rcv_transport_stats_lbtru_t</a>, lbm_msgs_rcved),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtru__t__stct.html">lbm_rcv_transport_stats_lbtru_t</a>, lbm_msgs_no_topic_rcved),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtru__t__stct.html">lbm_rcv_transport_stats_lbtru_t</a>, lbm_reqs_rcved),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtru__t__stct.html">lbm_rcv_transport_stats_lbtru_t</a>, dgrams_dropped_size),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtru__t__stct.html">lbm_rcv_transport_stats_lbtru_t</a>, dgrams_dropped_type),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtru__t__stct.html">lbm_rcv_transport_stats_lbtru_t</a>, dgrams_dropped_version),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtru__t__stct.html">lbm_rcv_transport_stats_lbtru_t</a>, dgrams_dropped_hdr),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtru__t__stct.html">lbm_rcv_transport_stats_lbtru_t</a>, dgrams_dropped_sid),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtru__t__stct.html">lbm_rcv_transport_stats_lbtru_t</a>, dgrams_dropped_other)</div><div class="line">};</div><div class="line"><span class="preprocessor">#define csv_rcv_lbtru_stat_offset_v4 csv_rcv_lbtru_stat_offset_v3</span></div><div class="line"><span class="preprocessor">#define csv_rcv_lbtru_stat_offset_v5 csv_rcv_lbtru_stat_offset_v4</span></div><div class="line"><span class="keyword">static</span> <span class="keyword">const</span> lbmmon_csv_layout_t csv_rcv_lbtru_stat_layout[LBMMON_FORMAT_CSV_VERSION_CURRENT+1] =</div><div class="line">{</div><div class="line">        { NULL, 0 },</div><div class="line">        { csv_rcv_lbtru_stat_offset_v1, <span class="keyword">sizeof</span>(csv_rcv_lbtru_stat_offset_v1)/<span class="keyword">sizeof</span>(csv_rcv_lbtru_stat_offset_v1[0]) },</div><div class="line">        { csv_rcv_lbtru_stat_offset_v2, <span class="keyword">sizeof</span>(csv_rcv_lbtru_stat_offset_v2)/<span class="keyword">sizeof</span>(csv_rcv_lbtru_stat_offset_v2[0]) },</div><div class="line">        { csv_rcv_lbtru_stat_offset_v3, <span class="keyword">sizeof</span>(csv_rcv_lbtru_stat_offset_v3)/<span class="keyword">sizeof</span>(csv_rcv_lbtru_stat_offset_v3[0]) },</div><div class="line">        { csv_rcv_lbtru_stat_offset_v4, <span class="keyword">sizeof</span>(csv_rcv_lbtru_stat_offset_v4)/<span class="keyword">sizeof</span>(csv_rcv_lbtru_stat_offset_v4[0]) },</div><div class="line">        { csv_rcv_lbtru_stat_offset_v5, <span class="keyword">sizeof</span>(csv_rcv_lbtru_stat_offset_v5)/<span class="keyword">sizeof</span>(csv_rcv_lbtru_stat_offset_v5[0]) }</div><div class="line">};</div><div class="line"></div><div class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">size_t</span> csv_rcv_lbtipc_stat_offset_v2[] =</div><div class="line">{</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtipc__t__stct.html">lbm_rcv_transport_stats_lbtipc_t</a>, msgs_rcved),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtipc__t__stct.html">lbm_rcv_transport_stats_lbtipc_t</a>, bytes_rcved),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtipc__t__stct.html">lbm_rcv_transport_stats_lbtipc_t</a>, lbm_msgs_rcved),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtipc__t__stct.html">lbm_rcv_transport_stats_lbtipc_t</a>, lbm_msgs_no_topic_rcved),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtipc__t__stct.html">lbm_rcv_transport_stats_lbtipc_t</a>, lbm_reqs_rcved)</div><div class="line">};</div><div class="line"><span class="preprocessor">#define csv_rcv_lbtipc_stat_offset_v3 csv_rcv_lbtipc_stat_offset_v2</span></div><div class="line"><span class="preprocessor">#define csv_rcv_lbtipc_stat_offset_v4 csv_rcv_lbtipc_stat_offset_v3</span></div><div class="line"><span class="preprocessor">#define csv_rcv_lbtipc_stat_offset_v5 csv_rcv_lbtipc_stat_offset_v4</span></div><div class="line"><span class="keyword">static</span> <span class="keyword">const</span> lbmmon_csv_layout_t csv_rcv_lbtipc_stat_layout[LBMMON_FORMAT_CSV_VERSION_CURRENT+1] =</div><div class="line">{</div><div class="line">        { NULL, 0 },</div><div class="line">        { NULL, 0 },</div><div class="line">        { csv_rcv_lbtipc_stat_offset_v2, <span class="keyword">sizeof</span>(csv_rcv_lbtipc_stat_offset_v2)/<span class="keyword">sizeof</span>(csv_rcv_lbtipc_stat_offset_v2[0]) },</div><div class="line">        { csv_rcv_lbtipc_stat_offset_v3, <span class="keyword">sizeof</span>(csv_rcv_lbtipc_stat_offset_v3)/<span class="keyword">sizeof</span>(csv_rcv_lbtipc_stat_offset_v3[0]) },</div><div class="line">        { csv_rcv_lbtipc_stat_offset_v4, <span class="keyword">sizeof</span>(csv_rcv_lbtipc_stat_offset_v4)/<span class="keyword">sizeof</span>(csv_rcv_lbtipc_stat_offset_v4[0]) },</div><div class="line">        { csv_rcv_lbtipc_stat_offset_v5, <span class="keyword">sizeof</span>(csv_rcv_lbtipc_stat_offset_v5)/<span class="keyword">sizeof</span>(csv_rcv_lbtipc_stat_offset_v5[0]) }</div><div class="line">};</div><div class="line"></div><div class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">size_t</span> csv_rcv_lbtsmx_stat_offset_v2[] =</div><div class="line">{</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtsmx__t__stct.html">lbm_rcv_transport_stats_lbtsmx_t</a>, msgs_rcved),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtsmx__t__stct.html">lbm_rcv_transport_stats_lbtsmx_t</a>, bytes_rcved),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtsmx__t__stct.html">lbm_rcv_transport_stats_lbtsmx_t</a>, lbm_msgs_rcved),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtsmx__t__stct.html">lbm_rcv_transport_stats_lbtsmx_t</a>, lbm_msgs_no_topic_rcved),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtsmx__t__stct.html">lbm_rcv_transport_stats_lbtsmx_t</a>, reserved1)</div><div class="line">};</div><div class="line"><span class="preprocessor">#define csv_rcv_lbtsmx_stat_offset_v3 csv_rcv_lbtsmx_stat_offset_v2</span></div><div class="line"><span class="preprocessor">#define csv_rcv_lbtsmx_stat_offset_v4 csv_rcv_lbtsmx_stat_offset_v3</span></div><div class="line"><span class="preprocessor">#define csv_rcv_lbtsmx_stat_offset_v5 csv_rcv_lbtsmx_stat_offset_v4</span></div><div class="line"><span class="keyword">static</span> <span class="keyword">const</span> lbmmon_csv_layout_t csv_rcv_lbtsmx_stat_layout[LBMMON_FORMAT_CSV_VERSION_CURRENT+1] =</div><div class="line">{</div><div class="line">        { NULL, 0 },</div><div class="line">        { NULL, 0 },</div><div class="line">        { csv_rcv_lbtsmx_stat_offset_v2, <span class="keyword">sizeof</span>(csv_rcv_lbtsmx_stat_offset_v2)/<span class="keyword">sizeof</span>(csv_rcv_lbtsmx_stat_offset_v2[0]) },</div><div class="line">        { csv_rcv_lbtsmx_stat_offset_v3, <span class="keyword">sizeof</span>(csv_rcv_lbtsmx_stat_offset_v3)/<span class="keyword">sizeof</span>(csv_rcv_lbtsmx_stat_offset_v3[0]) },</div><div class="line">        { csv_rcv_lbtsmx_stat_offset_v4, <span class="keyword">sizeof</span>(csv_rcv_lbtsmx_stat_offset_v4)/<span class="keyword">sizeof</span>(csv_rcv_lbtsmx_stat_offset_v4[0]) },</div><div class="line">        { csv_rcv_lbtsmx_stat_offset_v5, <span class="keyword">sizeof</span>(csv_rcv_lbtsmx_stat_offset_v5)/<span class="keyword">sizeof</span>(csv_rcv_lbtsmx_stat_offset_v5[0]) }</div><div class="line">};</div><div class="line"></div><div class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">size_t</span> csv_rcv_lbtrdma_stat_offset_v2[] =</div><div class="line">{</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtrdma__t__stct.html">lbm_rcv_transport_stats_lbtrdma_t</a>, msgs_rcved),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtrdma__t__stct.html">lbm_rcv_transport_stats_lbtrdma_t</a>, bytes_rcved),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtrdma__t__stct.html">lbm_rcv_transport_stats_lbtrdma_t</a>, lbm_msgs_rcved),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtrdma__t__stct.html">lbm_rcv_transport_stats_lbtrdma_t</a>, lbm_msgs_no_topic_rcved),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__lbtrdma__t__stct.html">lbm_rcv_transport_stats_lbtrdma_t</a>, lbm_reqs_rcved)</div><div class="line">};</div><div class="line"><span class="preprocessor">#define csv_rcv_lbtrdma_stat_offset_v3 csv_rcv_lbtrdma_stat_offset_v2</span></div><div class="line"><span class="preprocessor">#define csv_rcv_lbtrdma_stat_offset_v4 csv_rcv_lbtrdma_stat_offset_v3</span></div><div class="line"><span class="preprocessor">#define csv_rcv_lbtrdma_stat_offset_v5 csv_rcv_lbtrdma_stat_offset_v4</span></div><div class="line"><span class="keyword">static</span> <span class="keyword">const</span> lbmmon_csv_layout_t csv_rcv_lbtrdma_stat_layout[LBMMON_FORMAT_CSV_VERSION_CURRENT+1] =</div><div class="line">{</div><div class="line">        { NULL, 0 },</div><div class="line">        { NULL, 0 },</div><div class="line">        { csv_rcv_lbtrdma_stat_offset_v2, <span class="keyword">sizeof</span>(csv_rcv_lbtrdma_stat_offset_v2)/<span class="keyword">sizeof</span>(csv_rcv_lbtrdma_stat_offset_v2[0]) },</div><div class="line">        { csv_rcv_lbtrdma_stat_offset_v3, <span class="keyword">sizeof</span>(csv_rcv_lbtrdma_stat_offset_v3)/<span class="keyword">sizeof</span>(csv_rcv_lbtrdma_stat_offset_v3[0]) },</div><div class="line">        { csv_rcv_lbtrdma_stat_offset_v4, <span class="keyword">sizeof</span>(csv_rcv_lbtrdma_stat_offset_v4)/<span class="keyword">sizeof</span>(csv_rcv_lbtrdma_stat_offset_v4[0]) },</div><div class="line">        { csv_rcv_lbtrdma_stat_offset_v5, <span class="keyword">sizeof</span>(csv_rcv_lbtrdma_stat_offset_v5)/<span class="keyword">sizeof</span>(csv_rcv_lbtrdma_stat_offset_v5[0]) }</div><div class="line">};</div><div class="line"></div><div class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">size_t</span> csv_rcv_broker_stat_offset_v2[] =</div><div class="line">{</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__broker__t__stct.html">lbm_rcv_transport_stats_broker_t</a>, msgs_rcved),</div><div class="line">        offsetof(<a class="code" href="structlbm__rcv__transport__stats__broker__t__stct.html">lbm_rcv_transport_stats_broker_t</a>, bytes_rcved)</div><div class="line">};</div><div class="line"><span class="preprocessor">#define csv_rcv_broker_stat_offset_v3 csv_rcv_broker_stat_offset_v2</span></div><div class="line"><span class="preprocessor">#define csv_rcv_broker_stat_offset_v4 csv_rcv_broker_stat_offset_v3</span></div><div class="line"><span class="preprocessor">#define csv_rcv_broker_stat_offset_v5 csv_rcv_broker_stat_offset_v4</span></div><div class="line"><span class="keyword">static</span> <span class="keyword">const</span> lbmmon_csv_layout_t csv_rcv_broker_stat_layout[LBMMON_FORMAT_CSV_VERSION_CURRENT+1] =</div><div class="line">{</div><div class="line">        { NULL, 0 },</div><div class="line">        { NULL, 0 },</div><div class="line">        { csv_rcv_broker_stat_offset_v2, <span class="keyword">sizeof</span>(csv_rcv_broker_stat_offset_v2)/<span class="keyword">sizeof</span>(csv_rcv_broker_stat_offset_v2[0]) },</div><div class="line">        { csv_rcv_broker_stat_offset_v3, <span class="keyword">sizeof</span>(csv_rcv_broker_stat_offset_v3)/<span class="keyword">sizeof</span>(csv_rcv_broker_stat_offset_v3[0]) },</div><div class="line">        { csv_rcv_broker_stat_offset_v4, <span class="keyword">sizeof</span>(csv_rcv_broker_stat_offset_v4)/<span class="keyword">sizeof</span>(csv_rcv_broker_stat_offset_v4[0]) },</div><div class="line">        { csv_rcv_broker_stat_offset_v5, <span class="keyword">sizeof</span>(csv_rcv_broker_stat_offset_v5)/<span class="keyword">sizeof</span>(csv_rcv_broker_stat_offset_v5[0]) }</div><div class="line">};</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> lbmmon_rcv_format_csv_deserialize(<a class="code" href="structlbm__rcv__transport__stats__t__stct.html">lbm_rcv_transport_stats_t</a> * Statistics, <span class="keyword">const</span> <span class="keywordtype">char</span> * Source, <span class="keywordtype">size_t</span> Length,</div><div class="line">                                                                          <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> ModuleID, <span class="keywordtype">void</span> * FormatClientData)</div><div class="line">{</div><div class="line">        <span class="keyword">const</span> <span class="keywordtype">char</span> * ptr;</div><div class="line">        <span class="keywordtype">char</span> value[1024];</div><div class="line">        lbmmon_format_csv_t * fmt;</div><div class="line">        <span class="keywordtype">size_t</span> idx;</div><div class="line">        <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> modid;</div><div class="line">        <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> modver;</div><div class="line">        <span class="keyword">const</span> <span class="keywordtype">size_t</span> * stat_layout = NULL;</div><div class="line">        <span class="keywordtype">size_t</span> stat_count = 0;</div><div class="line"></div><div class="line">        <span class="keywordflow">if</span> ((Statistics == NULL) || (Source == NULL) || (*Source == <span class="charliteral">&#39;\0&#39;</span>) || (Length == 0) || (FormatClientData == NULL) )</div><div class="line">        {</div><div class="line">                strncpy(ErrorString, <span class="stringliteral">&quot;Invalid parameter&quot;</span>, <span class="keyword">sizeof</span>(ErrorString));</div><div class="line">                <span class="keywordflow">return</span> (-1);</div><div class="line">        }</div><div class="line">        fmt = (lbmmon_format_csv_t *) FormatClientData;</div><div class="line">        modid = MODULE_ID(ModuleID);</div><div class="line">        modver = MODULE_VERSION(ModuleID);</div><div class="line">        <span class="keywordflow">if</span> (modid != LBMMON_FORMAT_CSV_MODULE_ID)</div><div class="line">        {</div><div class="line">                strncpy(ErrorString, <span class="stringliteral">&quot;Invalid module ID&quot;</span>, <span class="keyword">sizeof</span>(ErrorString));</div><div class="line">                <span class="keywordflow">return</span> (-1);</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="keywordflow">if</span> (fmt-&gt;mBuffer == NULL)</div><div class="line">        {</div><div class="line">                fmt-&gt;mBufferSize = 1024;</div><div class="line">                fmt-&gt;mBuffer = malloc(fmt-&gt;mBufferSize);</div><div class="line">                <span class="keywordflow">if</span> (fmt-&gt;mBuffer == NULL)</div><div class="line">                {</div><div class="line">                        lbmmon_format_csv_report_allocation_error(fmt-&gt;mBufferSize);</div><div class="line">                        <span class="keywordflow">return</span> (-1);    </div><div class="line">                }</div><div class="line">        }</div><div class="line">        <span class="keywordflow">if</span> (Length &gt;= fmt-&gt;mBufferSize)</div><div class="line">        {</div><div class="line">                fmt-&gt;mBufferSize = 2 * Length;</div><div class="line">                free(fmt-&gt;mBuffer);</div><div class="line">                fmt-&gt;mBuffer = malloc(fmt-&gt;mBufferSize);</div><div class="line">                <span class="keywordflow">if</span> (fmt-&gt;mBuffer == NULL)</div><div class="line">                {</div><div class="line">                        lbmmon_format_csv_report_allocation_error(fmt-&gt;mBufferSize);</div><div class="line">                        <span class="keywordflow">return</span> (-1);    </div><div class="line">                }</div><div class="line">        }</div><div class="line">        memset(fmt-&gt;mBuffer, 0, fmt-&gt;mBufferSize);</div><div class="line">        memcpy(fmt-&gt;mBuffer, Source, Length);</div><div class="line">        ptr = fmt-&gt;mBuffer;</div><div class="line">        ptr = next_csv_value(ptr, value, <span class="keyword">sizeof</span>(value), fmt-&gt;mSeparator);</div><div class="line">        <span class="keywordflow">if</span> (ptr == NULL)</div><div class="line">        {</div><div class="line">                strncpy(ErrorString, <span class="stringliteral">&quot;No type field found&quot;</span>, <span class="keyword">sizeof</span>(ErrorString));</div><div class="line">                <span class="keywordflow">return</span> (-1);</div><div class="line">        }</div><div class="line">        Statistics-&gt;<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a3111b4af23afc72ffb71b3794b4a0835">type</a> = atoi(value);</div><div class="line">        ptr = next_csv_value(ptr, Statistics-&gt;<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#ac333fa92e503d7d399c0a7e4fe0a07c3">source</a>, <span class="keyword">sizeof</span>(Statistics-&gt;<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#ac333fa92e503d7d399c0a7e4fe0a07c3">source</a>), fmt-&gt;mSeparator);</div><div class="line">        <span class="keywordflow">if</span> (ptr == NULL)</div><div class="line">        {</div><div class="line">                strncpy(ErrorString, <span class="stringliteral">&quot;No source field found&quot;</span>, <span class="keyword">sizeof</span>(ErrorString));</div><div class="line">                <span class="keywordflow">return</span> (-1);</div><div class="line">        }</div><div class="line">        <span class="keywordflow">switch</span> (Statistics-&gt;<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a3111b4af23afc72ffb71b3794b4a0835">type</a>)</div><div class="line">        {</div><div class="line">                <span class="keywordflow">case</span> <a class="code" href="lbm_8h.html#a6da60dbd4d5790ee0df30d6c3048f977">LBM_TRANSPORT_STAT_TCP</a>:</div><div class="line">                        <span class="keywordflow">if</span> (modver &gt;= LBMMON_FORMAT_CSV_VERSION_CURRENT)</div><div class="line">                        {</div><div class="line">                                stat_layout = csv_rcv_tcp_stat_layout[LBMMON_FORMAT_CSV_VERSION_CURRENT].layout;</div><div class="line">                                stat_count = csv_rcv_tcp_stat_layout[LBMMON_FORMAT_CSV_VERSION_CURRENT].count;</div><div class="line">                        }</div><div class="line">                        <span class="keywordflow">else</span></div><div class="line">                        {</div><div class="line">                                stat_layout = csv_rcv_tcp_stat_layout[modver].layout;</div><div class="line">                                stat_count = csv_rcv_tcp_stat_layout[modver].count;</div><div class="line">                        }</div><div class="line">                        memset((<span class="keywordtype">void</span> *) &amp;(Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a998cbe5e073d540fc60536cb85bd1971">tcp</a>), 0, <span class="keyword">sizeof</span>(<a class="code" href="structlbm__rcv__transport__stats__tcp__t__stct.html">lbm_rcv_transport_stats_tcp_t</a>));</div><div class="line">                        <span class="keywordflow">for</span> (idx = 0; idx &lt; stat_count; ++idx)</div><div class="line">                        {</div><div class="line">                                ptr = next_csv_value(ptr, value, <span class="keyword">sizeof</span>(value), fmt-&gt;mSeparator);</div><div class="line">                                <span class="keywordflow">if</span> (ptr == NULL)</div><div class="line">                                {</div><div class="line">                                        strncpy(ErrorString, <span class="stringliteral">&quot;Data contains too few fields&quot;</span>, <span class="keyword">sizeof</span>(ErrorString));</div><div class="line">                                        <span class="keywordflow">return</span> (-1);</div><div class="line">                                }</div><div class="line">                                *((<a class="code" href="lbm_8h.html#a72438fab15bf500af58d2a8a521e470d">lbm_ulong_t</a> *)(((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)&amp;(Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a998cbe5e073d540fc60536cb85bd1971">tcp</a>)) + stat_layout[idx])) = convert_value(value);</div><div class="line">                        }</div><div class="line">                        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">                <span class="keywordflow">case</span> <a class="code" href="lbm_8h.html#a32e0d3eee1fe69fa87e985f3343830b3">LBM_TRANSPORT_STAT_LBTRM</a>:</div><div class="line">                        <span class="keywordflow">if</span> (modver &gt;= LBMMON_FORMAT_CSV_VERSION_CURRENT)</div><div class="line">                        {</div><div class="line">                                stat_layout = csv_rcv_lbtrm_stat_layout[LBMMON_FORMAT_CSV_VERSION_CURRENT].layout;</div><div class="line">                                stat_count = csv_rcv_lbtrm_stat_layout[LBMMON_FORMAT_CSV_VERSION_CURRENT].count;</div><div class="line">                        }</div><div class="line">                        <span class="keywordflow">else</span></div><div class="line">                        {</div><div class="line">                                stat_layout = csv_rcv_lbtrm_stat_layout[modver].layout;</div><div class="line">                                stat_count = csv_rcv_lbtrm_stat_layout[modver].count;</div><div class="line">                        }</div><div class="line">                        memset((<span class="keywordtype">void</span> *) &amp;(Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a9d167f0dc09f15c84983e6ab4caefa97">lbtrm</a>), 0, <span class="keyword">sizeof</span>(<a class="code" href="structlbm__rcv__transport__stats__lbtrm__t__stct.html">lbm_rcv_transport_stats_lbtrm_t</a>));</div><div class="line">                        </div><div class="line">                        <span class="keywordflow">for</span> (idx = 0; idx &lt; stat_count; ++idx)</div><div class="line">                        {</div><div class="line">                                ptr = next_csv_value(ptr, value, <span class="keyword">sizeof</span>(value), fmt-&gt;mSeparator);</div><div class="line">                                <span class="keywordflow">if</span> (ptr == NULL)</div><div class="line">                                {</div><div class="line">                                        <span class="comment">/* Due to an ambiguous case with version 3 lbtrm rcv stats,</span></div><div class="line"><span class="comment">                                         * older releases of lbm may have 26 fields and newer releases may have 27 fields.</span></div><div class="line"><span class="comment">                                         * See bug 5002 for more information.</span></div><div class="line"><span class="comment">                                         * For version 3, we will not consider it an error if there are only 26 fields.</span></div><div class="line"><span class="comment">                                         */</span></div><div class="line">                                        <span class="keywordflow">if</span>(modver == MODULE_VERSION(3) &amp;&amp; idx == 26) {</div><div class="line">                                                <span class="keywordflow">return</span> 0;</div><div class="line">                                        }</div><div class="line">                                        </div><div class="line">                                        strncpy(ErrorString, <span class="stringliteral">&quot;Data contains too few fields&quot;</span>, <span class="keyword">sizeof</span>(ErrorString));</div><div class="line">                                        <span class="keywordflow">return</span> (-1);</div><div class="line">                                }</div><div class="line">                                *((<a class="code" href="lbm_8h.html#a72438fab15bf500af58d2a8a521e470d">lbm_ulong_t</a> *)(((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)&amp;(Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a9d167f0dc09f15c84983e6ab4caefa97">lbtrm</a>)) + stat_layout[idx])) = convert_value(value);</div><div class="line">                        }</div><div class="line">                        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">                <span class="keywordflow">case</span> <a class="code" href="lbm_8h.html#a1f4acd28e4192be6809ce2cc496cb514">LBM_TRANSPORT_STAT_LBTRU</a>:</div><div class="line">                        <span class="keywordflow">if</span> (modver &gt;= LBMMON_FORMAT_CSV_VERSION_CURRENT)</div><div class="line">                        {</div><div class="line">                                stat_layout = csv_rcv_lbtru_stat_layout[LBMMON_FORMAT_CSV_VERSION_CURRENT].layout;</div><div class="line">                                stat_count = csv_rcv_lbtru_stat_layout[LBMMON_FORMAT_CSV_VERSION_CURRENT].count;</div><div class="line">                        }</div><div class="line">                        <span class="keywordflow">else</span></div><div class="line">                        {</div><div class="line">                                stat_layout = csv_rcv_lbtru_stat_layout[modver].layout;</div><div class="line">                                stat_count = csv_rcv_lbtru_stat_layout[modver].count;</div><div class="line">                        }</div><div class="line">                        memset((<span class="keywordtype">void</span> *) &amp;(Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a6d5ff286865d47f6fd74e08c0e1692e5">lbtru</a>), 0, <span class="keyword">sizeof</span>(<a class="code" href="structlbm__rcv__transport__stats__lbtru__t__stct.html">lbm_rcv_transport_stats_lbtru_t</a>));</div><div class="line">                        <span class="keywordflow">for</span> (idx = 0; idx &lt; stat_count; ++idx)</div><div class="line">                        {</div><div class="line">                                ptr = next_csv_value(ptr, value, <span class="keyword">sizeof</span>(value), fmt-&gt;mSeparator);</div><div class="line">                                <span class="keywordflow">if</span> (ptr == NULL)</div><div class="line">                                {</div><div class="line">                                        strncpy(ErrorString, <span class="stringliteral">&quot;Data contains too few fields&quot;</span>, <span class="keyword">sizeof</span>(ErrorString));</div><div class="line">                                        <span class="keywordflow">return</span> (-1);</div><div class="line">                                }</div><div class="line">                                *((<a class="code" href="lbm_8h.html#a72438fab15bf500af58d2a8a521e470d">lbm_ulong_t</a> *)(((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)&amp;(Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a6d5ff286865d47f6fd74e08c0e1692e5">lbtru</a>)) + stat_layout[idx])) = convert_value(value);</div><div class="line">                        }</div><div class="line">                        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">                <span class="keywordflow">case</span> <a class="code" href="lbm_8h.html#a64de821cc3a1afda47c5668996d16d9b">LBM_TRANSPORT_STAT_LBTIPC</a>:</div><div class="line">                        <span class="keywordflow">if</span> (modver &gt;= LBMMON_FORMAT_CSV_VERSION_CURRENT)</div><div class="line">                        {</div><div class="line">                                stat_layout = csv_rcv_lbtipc_stat_layout[LBMMON_FORMAT_CSV_VERSION_CURRENT].layout;</div><div class="line">                                stat_count = csv_rcv_lbtipc_stat_layout[LBMMON_FORMAT_CSV_VERSION_CURRENT].count;</div><div class="line">                        }</div><div class="line">                        <span class="keywordflow">else</span></div><div class="line">                        {</div><div class="line">                                stat_layout = csv_rcv_lbtipc_stat_layout[modver].layout;</div><div class="line">                                stat_count = csv_rcv_lbtipc_stat_layout[modver].count;</div><div class="line">                        }</div><div class="line">                        memset((<span class="keywordtype">void</span> *) &amp;(Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#aa0bb3ff2725d54aca064608777ab4fbc">lbtipc</a>), 0, <span class="keyword">sizeof</span>(<a class="code" href="structlbm__rcv__transport__stats__lbtipc__t__stct.html">lbm_rcv_transport_stats_lbtipc_t</a>));</div><div class="line">                        <span class="keywordflow">for</span> (idx = 0; idx &lt; stat_count; ++idx)</div><div class="line">                        {</div><div class="line">                                ptr = next_csv_value(ptr, value, <span class="keyword">sizeof</span>(value), fmt-&gt;mSeparator);</div><div class="line">                                <span class="keywordflow">if</span> (ptr == NULL)</div><div class="line">                                {</div><div class="line">                                        strncpy(ErrorString, <span class="stringliteral">&quot;Data contains too few fields&quot;</span>, <span class="keyword">sizeof</span>(ErrorString));</div><div class="line">                                        <span class="keywordflow">return</span> (-1);</div><div class="line">                                }</div><div class="line">                                *((<a class="code" href="lbm_8h.html#a72438fab15bf500af58d2a8a521e470d">lbm_ulong_t</a> *)(((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)&amp;(Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#aa0bb3ff2725d54aca064608777ab4fbc">lbtipc</a>)) + stat_layout[idx])) = convert_value(value);</div><div class="line">                        }</div><div class="line">                        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">                <span class="keywordflow">case</span> <a class="code" href="lbm_8h.html#af5d79fa0d57faa68dfa42b20401a94d8">LBM_TRANSPORT_STAT_LBTSMX</a>:</div><div class="line">                        <span class="keywordflow">if</span> (modver &gt;= LBMMON_FORMAT_CSV_VERSION_CURRENT)</div><div class="line">                        {</div><div class="line">                                stat_layout = csv_rcv_lbtsmx_stat_layout[LBMMON_FORMAT_CSV_VERSION_CURRENT].layout;</div><div class="line">                                stat_count = csv_rcv_lbtsmx_stat_layout[LBMMON_FORMAT_CSV_VERSION_CURRENT].count;</div><div class="line">                        }</div><div class="line">                        <span class="keywordflow">else</span></div><div class="line">                        {</div><div class="line">                                stat_layout = csv_rcv_lbtsmx_stat_layout[modver].layout;</div><div class="line">                                stat_count = csv_rcv_lbtsmx_stat_layout[modver].count;</div><div class="line">                        }</div><div class="line">                        memset((<span class="keywordtype">void</span> *) &amp;(Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a17af117bb25bde181c35ac551bedfbd8">lbtsmx</a>), 0, <span class="keyword">sizeof</span>(<a class="code" href="structlbm__rcv__transport__stats__lbtsmx__t__stct.html">lbm_rcv_transport_stats_lbtsmx_t</a>));</div><div class="line">                        <span class="keywordflow">for</span> (idx = 0; idx &lt; stat_count; ++idx)</div><div class="line">                        {</div><div class="line">                                ptr = next_csv_value(ptr, value, <span class="keyword">sizeof</span>(value), fmt-&gt;mSeparator);</div><div class="line">                                <span class="keywordflow">if</span> (ptr == NULL)</div><div class="line">                                {</div><div class="line">                                        strncpy(ErrorString, <span class="stringliteral">&quot;Data contains too few fields&quot;</span>, <span class="keyword">sizeof</span>(ErrorString));</div><div class="line">                                        <span class="keywordflow">return</span> (-1);</div><div class="line">                                }</div><div class="line">                                *((<a class="code" href="lbm_8h.html#a72438fab15bf500af58d2a8a521e470d">lbm_ulong_t</a> *)(((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)&amp;(Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a17af117bb25bde181c35ac551bedfbd8">lbtsmx</a>)) + stat_layout[idx])) = convert_value(value);</div><div class="line">                        }</div><div class="line">                        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">                <span class="keywordflow">case</span> <a class="code" href="lbm_8h.html#ab8fc2e2fb0287dfa80713fb8fb6c23df">LBM_TRANSPORT_STAT_LBTRDMA</a>:</div><div class="line">                        <span class="keywordflow">if</span> (modver &gt;= LBMMON_FORMAT_CSV_VERSION_CURRENT)</div><div class="line">                        {</div><div class="line">                                stat_layout = csv_rcv_lbtrdma_stat_layout[LBMMON_FORMAT_CSV_VERSION_CURRENT].layout;</div><div class="line">                                stat_count = csv_rcv_lbtrdma_stat_layout[LBMMON_FORMAT_CSV_VERSION_CURRENT].count;</div><div class="line">                        }</div><div class="line">                        <span class="keywordflow">else</span></div><div class="line">                        {</div><div class="line">                                stat_layout = csv_rcv_lbtrdma_stat_layout[modver].layout;</div><div class="line">                                stat_count = csv_rcv_lbtrdma_stat_layout[modver].count;</div><div class="line">                        }</div><div class="line">                        memset((<span class="keywordtype">void</span> *) &amp;(Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a39a686e01bb9a0956f5fdaee87d3fc46">lbtrdma</a>), 0, <span class="keyword">sizeof</span>(<a class="code" href="structlbm__rcv__transport__stats__lbtrdma__t__stct.html">lbm_rcv_transport_stats_lbtrdma_t</a>));</div><div class="line">                        <span class="keywordflow">for</span> (idx = 0; idx &lt; stat_count; ++idx)</div><div class="line">                        {</div><div class="line">                                ptr = next_csv_value(ptr, value, <span class="keyword">sizeof</span>(value), fmt-&gt;mSeparator);</div><div class="line">                                <span class="keywordflow">if</span> (ptr == NULL)</div><div class="line">                                {</div><div class="line">                                        strncpy(ErrorString, <span class="stringliteral">&quot;Data contains too few fields&quot;</span>, <span class="keyword">sizeof</span>(ErrorString));</div><div class="line">                                        <span class="keywordflow">return</span> (-1);</div><div class="line">                                }</div><div class="line">                                *((<a class="code" href="lbm_8h.html#a72438fab15bf500af58d2a8a521e470d">lbm_ulong_t</a> *)(((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)&amp;(Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a39a686e01bb9a0956f5fdaee87d3fc46">lbtrdma</a>)) + stat_layout[idx])) = convert_value(value);</div><div class="line">                        }</div><div class="line">                        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">                <span class="keywordflow">case</span> <a class="code" href="lbm_8h.html#a95057b42f21bc8bd15702a4a23ffeda8">LBM_TRANSPORT_STAT_BROKER</a>:</div><div class="line">                        <span class="keywordflow">if</span> (modver &gt;= LBMMON_FORMAT_CSV_VERSION_CURRENT)</div><div class="line">                        {</div><div class="line">                                stat_layout = csv_rcv_broker_stat_layout[LBMMON_FORMAT_CSV_VERSION_CURRENT].layout;</div><div class="line">                                stat_count = csv_rcv_broker_stat_layout[LBMMON_FORMAT_CSV_VERSION_CURRENT].count;</div><div class="line">                        }</div><div class="line">                        <span class="keywordflow">else</span></div><div class="line">                        {</div><div class="line">                                stat_layout = csv_rcv_broker_stat_layout[modver].layout;</div><div class="line">                                stat_count = csv_rcv_broker_stat_layout[modver].count;</div><div class="line">                        }</div><div class="line">                        memset((<span class="keywordtype">void</span> *) &amp;(Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#afc76c551b56f9a24745b0d0e1c2c8e1d">broker</a>), 0, <span class="keyword">sizeof</span>(<a class="code" href="structlbm__rcv__transport__stats__broker__t__stct.html">lbm_rcv_transport_stats_broker_t</a>));</div><div class="line">                        <span class="keywordflow">for</span> (idx = 0; idx &lt; stat_count; ++idx)</div><div class="line">                        {</div><div class="line">                                ptr = next_csv_value(ptr, value, <span class="keyword">sizeof</span>(value), fmt-&gt;mSeparator);</div><div class="line">                                <span class="keywordflow">if</span> (ptr == NULL)</div><div class="line">                                {</div><div class="line">                                        strncpy(ErrorString, <span class="stringliteral">&quot;Data contains too few fields&quot;</span>, <span class="keyword">sizeof</span>(ErrorString));</div><div class="line">                                        <span class="keywordflow">return</span> (-1);</div><div class="line">                                }</div><div class="line">                                *((<a class="code" href="lbm_8h.html#a72438fab15bf500af58d2a8a521e470d">lbm_ulong_t</a> *)(((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)&amp;(Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#afc76c551b56f9a24745b0d0e1c2c8e1d">broker</a>)) + stat_layout[idx])) = convert_value(value);</div><div class="line">                        }</div><div class="line">                        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">                <span class="keywordflow">default</span>:</div><div class="line">                        strncpy(ErrorString, <span class="stringliteral">&quot;Invalid LBM transport type&quot;</span>, <span class="keyword">sizeof</span>(ErrorString));</div><div class="line">                        <span class="keywordflow">return</span> (-1);</div><div class="line">        }</div><div class="line">        <span class="keywordflow">return</span> (0);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">static</span> <span class="keywordtype">size_t</span> csv_src_tcp_stat_offset_v1[] =</div><div class="line">{</div><div class="line">        offsetof(<a class="code" href="structlbm__src__transport__stats__tcp__t__stct.html">lbm_src_transport_stats_tcp_t</a>, num_clients),</div><div class="line">        offsetof(<a class="code" href="structlbm__src__transport__stats__tcp__t__stct.html">lbm_src_transport_stats_tcp_t</a>, bytes_buffered)</div><div class="line">};</div><div class="line"><span class="preprocessor">#define csv_src_tcp_stat_offset_v2 csv_src_tcp_stat_offset_v1</span></div><div class="line"><span class="preprocessor">#define csv_src_tcp_stat_offset_v3 csv_src_tcp_stat_offset_v2</span></div><div class="line"><span class="preprocessor">#define csv_src_tcp_stat_offset_v4 csv_src_tcp_stat_offset_v3</span></div><div class="line"><span class="preprocessor">#define csv_src_tcp_stat_offset_v5 csv_src_tcp_stat_offset_v4</span></div><div class="line"><span class="keyword">static</span> <span class="keyword">const</span> lbmmon_csv_layout_t csv_src_tcp_stat_layout[LBMMON_FORMAT_CSV_VERSION_CURRENT+1] =</div><div class="line">{</div><div class="line">        { NULL, 0 },</div><div class="line">        { csv_src_tcp_stat_offset_v1, <span class="keyword">sizeof</span>(csv_src_tcp_stat_offset_v1)/<span class="keyword">sizeof</span>(csv_src_tcp_stat_offset_v1[0]) },</div><div class="line">        { csv_src_tcp_stat_offset_v2, <span class="keyword">sizeof</span>(csv_src_tcp_stat_offset_v2)/<span class="keyword">sizeof</span>(csv_src_tcp_stat_offset_v2[0]) },</div><div class="line">        { csv_src_tcp_stat_offset_v3, <span class="keyword">sizeof</span>(csv_src_tcp_stat_offset_v3)/<span class="keyword">sizeof</span>(csv_src_tcp_stat_offset_v3[0]) },</div><div class="line">        { csv_src_tcp_stat_offset_v4, <span class="keyword">sizeof</span>(csv_src_tcp_stat_offset_v4)/<span class="keyword">sizeof</span>(csv_src_tcp_stat_offset_v4[0]) },</div><div class="line">        { csv_src_tcp_stat_offset_v5, <span class="keyword">sizeof</span>(csv_src_tcp_stat_offset_v5)/<span class="keyword">sizeof</span>(csv_src_tcp_stat_offset_v5[0]) }</div><div class="line">};</div><div class="line"></div><div class="line"><span class="keyword">static</span> <span class="keywordtype">size_t</span> csv_src_lbtrm_stat_offset_v1[] =</div><div class="line">{</div><div class="line">        offsetof(<a class="code" href="structlbm__src__transport__stats__lbtrm__t__stct.html">lbm_src_transport_stats_lbtrm_t</a>, msgs_sent),</div><div class="line">        offsetof(<a class="code" href="structlbm__src__transport__stats__lbtrm__t__stct.html">lbm_src_transport_stats_lbtrm_t</a>, bytes_sent),</div><div class="line">        offsetof(<a class="code" href="structlbm__src__transport__stats__lbtrm__t__stct.html">lbm_src_transport_stats_lbtrm_t</a>, txw_msgs),</div><div class="line">        offsetof(<a class="code" href="structlbm__src__transport__stats__lbtrm__t__stct.html">lbm_src_transport_stats_lbtrm_t</a>, txw_bytes),</div><div class="line">        offsetof(<a class="code" href="structlbm__src__transport__stats__lbtrm__t__stct.html">lbm_src_transport_stats_lbtrm_t</a>, nak_pckts_rcved),</div><div class="line">        offsetof(<a class="code" href="structlbm__src__transport__stats__lbtrm__t__stct.html">lbm_src_transport_stats_lbtrm_t</a>, naks_rcved),</div><div class="line">        offsetof(<a class="code" href="structlbm__src__transport__stats__lbtrm__t__stct.html">lbm_src_transport_stats_lbtrm_t</a>, naks_ignored),</div><div class="line">        offsetof(<a class="code" href="structlbm__src__transport__stats__lbtrm__t__stct.html">lbm_src_transport_stats_lbtrm_t</a>, naks_shed),</div><div class="line">        offsetof(<a class="code" href="structlbm__src__transport__stats__lbtrm__t__stct.html">lbm_src_transport_stats_lbtrm_t</a>, naks_rx_delay_ignored),</div><div class="line">        offsetof(<a class="code" href="structlbm__src__transport__stats__lbtrm__t__stct.html">lbm_src_transport_stats_lbtrm_t</a>, rxs_sent),</div><div class="line">        offsetof(<a class="code" href="structlbm__src__transport__stats__lbtrm__t__stct.html">lbm_src_transport_stats_lbtrm_t</a>, rctlr_data_msgs),</div><div class="line">        offsetof(<a class="code" href="structlbm__src__transport__stats__lbtrm__t__stct.html">lbm_src_transport_stats_lbtrm_t</a>, rctlr_rx_msgs)</div><div class="line">};</div><div class="line"><span class="keyword">static</span> <span class="keywordtype">size_t</span> csv_src_lbtrm_stat_offset_v2[] =</div><div class="line">{</div><div class="line">        offsetof(<a class="code" href="structlbm__src__transport__stats__lbtrm__t__stct.html">lbm_src_transport_stats_lbtrm_t</a>, msgs_sent),</div><div class="line">        offsetof(<a class="code" href="structlbm__src__transport__stats__lbtrm__t__stct.html">lbm_src_transport_stats_lbtrm_t</a>, bytes_sent),</div><div class="line">        offsetof(<a class="code" href="structlbm__src__transport__stats__lbtrm__t__stct.html">lbm_src_transport_stats_lbtrm_t</a>, txw_msgs),</div><div class="line">        offsetof(<a class="code" href="structlbm__src__transport__stats__lbtrm__t__stct.html">lbm_src_transport_stats_lbtrm_t</a>, txw_bytes),</div><div class="line">        offsetof(<a class="code" href="structlbm__src__transport__stats__lbtrm__t__stct.html">lbm_src_transport_stats_lbtrm_t</a>, nak_pckts_rcved),</div><div class="line">        offsetof(<a class="code" href="structlbm__src__transport__stats__lbtrm__t__stct.html">lbm_src_transport_stats_lbtrm_t</a>, naks_rcved),</div><div class="line">        offsetof(<a class="code" href="structlbm__src__transport__stats__lbtrm__t__stct.html">lbm_src_transport_stats_lbtrm_t</a>, naks_ignored),</div><div class="line">        offsetof(<a class="code" href="structlbm__src__transport__stats__lbtrm__t__stct.html">lbm_src_transport_stats_lbtrm_t</a>, naks_shed),</div><div class="line">        offsetof(<a class="code" href="structlbm__src__transport__stats__lbtrm__t__stct.html">lbm_src_transport_stats_lbtrm_t</a>, naks_rx_delay_ignored),</div><div class="line">        offsetof(<a class="code" href="structlbm__src__transport__stats__lbtrm__t__stct.html">lbm_src_transport_stats_lbtrm_t</a>, rxs_sent),</div><div class="line">        offsetof(<a class="code" href="structlbm__src__transport__stats__lbtrm__t__stct.html">lbm_src_transport_stats_lbtrm_t</a>, rctlr_data_msgs),</div><div class="line">        offsetof(<a class="code" href="structlbm__src__transport__stats__lbtrm__t__stct.html">lbm_src_transport_stats_lbtrm_t</a>, rctlr_rx_msgs),</div><div class="line">        offsetof(<a class="code" href="structlbm__src__transport__stats__lbtrm__t__stct.html">lbm_src_transport_stats_lbtrm_t</a>, rx_bytes_sent)</div><div class="line">};</div><div class="line"><span class="preprocessor">#define csv_src_lbtrm_stat_offset_v3 csv_src_lbtrm_stat_offset_v2</span></div><div class="line"><span class="preprocessor">#define csv_src_lbtrm_stat_offset_v4 csv_src_lbtrm_stat_offset_v3</span></div><div class="line"><span class="preprocessor">#define csv_src_lbtrm_stat_offset_v5 csv_src_lbtrm_stat_offset_v4</span></div><div class="line"><span class="keyword">static</span> <span class="keyword">const</span> lbmmon_csv_layout_t csv_src_lbtrm_stat_layout[LBMMON_FORMAT_CSV_VERSION_CURRENT+1] =</div><div class="line">{</div><div class="line">        { NULL, 0 },</div><div class="line">        { csv_src_lbtrm_stat_offset_v1, <span class="keyword">sizeof</span>(csv_src_lbtrm_stat_offset_v1)/<span class="keyword">sizeof</span>(csv_src_lbtrm_stat_offset_v1[0]) },</div><div class="line">        { csv_src_lbtrm_stat_offset_v2, <span class="keyword">sizeof</span>(csv_src_lbtrm_stat_offset_v2)/<span class="keyword">sizeof</span>(csv_src_lbtrm_stat_offset_v2[0]) },</div><div class="line">        { csv_src_lbtrm_stat_offset_v3, <span class="keyword">sizeof</span>(csv_src_lbtrm_stat_offset_v3)/<span class="keyword">sizeof</span>(csv_src_lbtrm_stat_offset_v3[0]) },</div><div class="line">        { csv_src_lbtrm_stat_offset_v4, <span class="keyword">sizeof</span>(csv_src_lbtrm_stat_offset_v4)/<span class="keyword">sizeof</span>(csv_src_lbtrm_stat_offset_v4[0]) },</div><div class="line">        { csv_src_lbtrm_stat_offset_v5, <span class="keyword">sizeof</span>(csv_src_lbtrm_stat_offset_v5)/<span class="keyword">sizeof</span>(csv_src_lbtrm_stat_offset_v5[0]) }</div><div class="line">};</div><div class="line"></div><div class="line"><span class="keyword">static</span> <span class="keywordtype">size_t</span> csv_src_lbtru_stat_offset_v1[] =</div><div class="line">{</div><div class="line">        offsetof(<a class="code" href="structlbm__src__transport__stats__lbtru__t__stct.html">lbm_src_transport_stats_lbtru_t</a>, msgs_sent),</div><div class="line">        offsetof(<a class="code" href="structlbm__src__transport__stats__lbtru__t__stct.html">lbm_src_transport_stats_lbtru_t</a>, bytes_sent),</div><div class="line">        offsetof(<a class="code" href="structlbm__src__transport__stats__lbtru__t__stct.html">lbm_src_transport_stats_lbtru_t</a>, nak_pckts_rcved),</div><div class="line">        offsetof(<a class="code" href="structlbm__src__transport__stats__lbtru__t__stct.html">lbm_src_transport_stats_lbtru_t</a>, naks_rcved),</div><div class="line">        offsetof(<a class="code" href="structlbm__src__transport__stats__lbtru__t__stct.html">lbm_src_transport_stats_lbtru_t</a>, naks_ignored),</div><div class="line">        offsetof(<a class="code" href="structlbm__src__transport__stats__lbtru__t__stct.html">lbm_src_transport_stats_lbtru_t</a>, naks_shed),</div><div class="line">        offsetof(<a class="code" href="structlbm__src__transport__stats__lbtru__t__stct.html">lbm_src_transport_stats_lbtru_t</a>, naks_rx_delay_ignored),</div><div class="line">        offsetof(<a class="code" href="structlbm__src__transport__stats__lbtru__t__stct.html">lbm_src_transport_stats_lbtru_t</a>, rxs_sent),</div><div class="line">        offsetof(<a class="code" href="structlbm__src__transport__stats__lbtru__t__stct.html">lbm_src_transport_stats_lbtru_t</a>, num_clients)</div><div class="line">};</div><div class="line"><span class="keyword">static</span> <span class="keywordtype">size_t</span> csv_src_lbtru_stat_offset_v2[] =</div><div class="line">{</div><div class="line">        offsetof(<a class="code" href="structlbm__src__transport__stats__lbtru__t__stct.html">lbm_src_transport_stats_lbtru_t</a>, msgs_sent),</div><div class="line">        offsetof(<a class="code" href="structlbm__src__transport__stats__lbtru__t__stct.html">lbm_src_transport_stats_lbtru_t</a>, bytes_sent),</div><div class="line">        offsetof(<a class="code" href="structlbm__src__transport__stats__lbtru__t__stct.html">lbm_src_transport_stats_lbtru_t</a>, nak_pckts_rcved),</div><div class="line">        offsetof(<a class="code" href="structlbm__src__transport__stats__lbtru__t__stct.html">lbm_src_transport_stats_lbtru_t</a>, naks_rcved),</div><div class="line">        offsetof(<a class="code" href="structlbm__src__transport__stats__lbtru__t__stct.html">lbm_src_transport_stats_lbtru_t</a>, naks_ignored),</div><div class="line">        offsetof(<a class="code" href="structlbm__src__transport__stats__lbtru__t__stct.html">lbm_src_transport_stats_lbtru_t</a>, naks_shed),</div><div class="line">        offsetof(<a class="code" href="structlbm__src__transport__stats__lbtru__t__stct.html">lbm_src_transport_stats_lbtru_t</a>, naks_rx_delay_ignored),</div><div class="line">        offsetof(<a class="code" href="structlbm__src__transport__stats__lbtru__t__stct.html">lbm_src_transport_stats_lbtru_t</a>, rxs_sent),</div><div class="line">        offsetof(<a class="code" href="structlbm__src__transport__stats__lbtru__t__stct.html">lbm_src_transport_stats_lbtru_t</a>, num_clients),</div><div class="line">        offsetof(<a class="code" href="structlbm__src__transport__stats__lbtru__t__stct.html">lbm_src_transport_stats_lbtru_t</a>, rx_bytes_sent)</div><div class="line">};</div><div class="line"><span class="preprocessor">#define csv_src_lbtru_stat_offset_v3 csv_src_lbtru_stat_offset_v2</span></div><div class="line"><span class="preprocessor">#define csv_src_lbtru_stat_offset_v4 csv_src_lbtru_stat_offset_v3</span></div><div class="line"><span class="preprocessor">#define csv_src_lbtru_stat_offset_v5 csv_src_lbtru_stat_offset_v4</span></div><div class="line"><span class="keyword">static</span> <span class="keyword">const</span> lbmmon_csv_layout_t csv_src_lbtru_stat_layout[LBMMON_FORMAT_CSV_VERSION_CURRENT+1] =</div><div class="line">{</div><div class="line">        { NULL, 0 },</div><div class="line">        { csv_src_lbtru_stat_offset_v1, <span class="keyword">sizeof</span>(csv_src_lbtru_stat_offset_v1)/<span class="keyword">sizeof</span>(csv_src_lbtru_stat_offset_v1[0]) },</div><div class="line">        { csv_src_lbtru_stat_offset_v2, <span class="keyword">sizeof</span>(csv_src_lbtru_stat_offset_v2)/<span class="keyword">sizeof</span>(csv_src_lbtru_stat_offset_v2[0]) },</div><div class="line">        { csv_src_lbtru_stat_offset_v3, <span class="keyword">sizeof</span>(csv_src_lbtru_stat_offset_v3)/<span class="keyword">sizeof</span>(csv_src_lbtru_stat_offset_v3[0]) },</div><div class="line">        { csv_src_lbtru_stat_offset_v4, <span class="keyword">sizeof</span>(csv_src_lbtru_stat_offset_v4)/<span class="keyword">sizeof</span>(csv_src_lbtru_stat_offset_v4[0]) },</div><div class="line">        { csv_src_lbtru_stat_offset_v5, <span class="keyword">sizeof</span>(csv_src_lbtru_stat_offset_v5)/<span class="keyword">sizeof</span>(csv_src_lbtru_stat_offset_v5[0]) }</div><div class="line">};</div><div class="line"></div><div class="line"><span class="keyword">static</span> <span class="keywordtype">size_t</span> csv_src_lbtipc_stat_offset_v2[] =</div><div class="line">{</div><div class="line">        offsetof(<a class="code" href="structlbm__src__transport__stats__lbtipc__t__stct.html">lbm_src_transport_stats_lbtipc_t</a>, num_clients),</div><div class="line">        offsetof(<a class="code" href="structlbm__src__transport__stats__lbtipc__t__stct.html">lbm_src_transport_stats_lbtipc_t</a>, msgs_sent),</div><div class="line">        offsetof(<a class="code" href="structlbm__src__transport__stats__lbtipc__t__stct.html">lbm_src_transport_stats_lbtipc_t</a>, bytes_sent)</div><div class="line">};</div><div class="line"><span class="preprocessor">#define csv_src_lbtipc_stat_offset_v3 csv_src_lbtipc_stat_offset_v2</span></div><div class="line"><span class="preprocessor">#define csv_src_lbtipc_stat_offset_v4 csv_src_lbtipc_stat_offset_v3</span></div><div class="line"><span class="preprocessor">#define csv_src_lbtipc_stat_offset_v5 csv_src_lbtipc_stat_offset_v4</span></div><div class="line"><span class="keyword">static</span> <span class="keyword">const</span> lbmmon_csv_layout_t csv_src_lbtipc_stat_layout[LBMMON_FORMAT_CSV_VERSION_CURRENT+1] =</div><div class="line">{</div><div class="line">        { NULL, 0 },</div><div class="line">        { NULL, 0 },</div><div class="line">        { csv_src_lbtipc_stat_offset_v2, <span class="keyword">sizeof</span>(csv_src_lbtipc_stat_offset_v2)/<span class="keyword">sizeof</span>(csv_src_lbtipc_stat_offset_v2[0]) },</div><div class="line">        { csv_src_lbtipc_stat_offset_v3, <span class="keyword">sizeof</span>(csv_src_lbtipc_stat_offset_v3)/<span class="keyword">sizeof</span>(csv_src_lbtipc_stat_offset_v3[0]) },</div><div class="line">        { csv_src_lbtipc_stat_offset_v4, <span class="keyword">sizeof</span>(csv_src_lbtipc_stat_offset_v4)/<span class="keyword">sizeof</span>(csv_src_lbtipc_stat_offset_v4[0]) },</div><div class="line">        { csv_src_lbtipc_stat_offset_v5, <span class="keyword">sizeof</span>(csv_src_lbtipc_stat_offset_v5)/<span class="keyword">sizeof</span>(csv_src_lbtipc_stat_offset_v5[0]) }</div><div class="line">};</div><div class="line"></div><div class="line"><span class="keyword">static</span> <span class="keywordtype">size_t</span> csv_src_lbtsmx_stat_offset_v2[] =</div><div class="line">{</div><div class="line">        offsetof(<a class="code" href="structlbm__src__transport__stats__lbtsmx__t__stct.html">lbm_src_transport_stats_lbtsmx_t</a>, num_clients),</div><div class="line">        offsetof(<a class="code" href="structlbm__src__transport__stats__lbtsmx__t__stct.html">lbm_src_transport_stats_lbtsmx_t</a>, msgs_sent),</div><div class="line">        offsetof(<a class="code" href="structlbm__src__transport__stats__lbtsmx__t__stct.html">lbm_src_transport_stats_lbtsmx_t</a>, bytes_sent)</div><div class="line">};</div><div class="line"><span class="preprocessor">#define csv_src_lbtsmx_stat_offset_v3 csv_src_lbtsmx_stat_offset_v2</span></div><div class="line"><span class="preprocessor">#define csv_src_lbtsmx_stat_offset_v4 csv_src_lbtsmx_stat_offset_v3</span></div><div class="line"><span class="preprocessor">#define csv_src_lbtsmx_stat_offset_v5 csv_src_lbtsmx_stat_offset_v4</span></div><div class="line"><span class="keyword">static</span> <span class="keyword">const</span> lbmmon_csv_layout_t csv_src_lbtsmx_stat_layout[LBMMON_FORMAT_CSV_VERSION_CURRENT+1] =</div><div class="line">{</div><div class="line">        { NULL, 0 },</div><div class="line">        { NULL, 0 },</div><div class="line">        { csv_src_lbtsmx_stat_offset_v2, <span class="keyword">sizeof</span>(csv_src_lbtsmx_stat_offset_v2)/<span class="keyword">sizeof</span>(csv_src_lbtsmx_stat_offset_v2[0]) },</div><div class="line">        { csv_src_lbtsmx_stat_offset_v3, <span class="keyword">sizeof</span>(csv_src_lbtsmx_stat_offset_v3)/<span class="keyword">sizeof</span>(csv_src_lbtsmx_stat_offset_v3[0]) },</div><div class="line">        { csv_src_lbtsmx_stat_offset_v4, <span class="keyword">sizeof</span>(csv_src_lbtsmx_stat_offset_v4)/<span class="keyword">sizeof</span>(csv_src_lbtsmx_stat_offset_v4[0]) },</div><div class="line">        { csv_src_lbtsmx_stat_offset_v5, <span class="keyword">sizeof</span>(csv_src_lbtsmx_stat_offset_v5)/<span class="keyword">sizeof</span>(csv_src_lbtsmx_stat_offset_v5[0]) }</div><div class="line">};</div><div class="line"></div><div class="line"><span class="keyword">static</span> <span class="keywordtype">size_t</span> csv_src_lbtrdma_stat_offset_v2[] =</div><div class="line">{</div><div class="line">        offsetof(<a class="code" href="structlbm__src__transport__stats__lbtrdma__t__stct.html">lbm_src_transport_stats_lbtrdma_t</a>, num_clients),</div><div class="line">        offsetof(<a class="code" href="structlbm__src__transport__stats__lbtrdma__t__stct.html">lbm_src_transport_stats_lbtrdma_t</a>, msgs_sent),</div><div class="line">        offsetof(<a class="code" href="structlbm__src__transport__stats__lbtrdma__t__stct.html">lbm_src_transport_stats_lbtrdma_t</a>, bytes_sent)</div><div class="line">};</div><div class="line"><span class="preprocessor">#define csv_src_lbtrdma_stat_offset_v3 csv_src_lbtrdma_stat_offset_v2</span></div><div class="line"><span class="preprocessor">#define csv_src_lbtrdma_stat_offset_v4 csv_src_lbtrdma_stat_offset_v3</span></div><div class="line"><span class="preprocessor">#define csv_src_lbtrdma_stat_offset_v5 csv_src_lbtrdma_stat_offset_v4</span></div><div class="line"><span class="keyword">static</span> <span class="keyword">const</span> lbmmon_csv_layout_t csv_src_lbtrdma_stat_layout[LBMMON_FORMAT_CSV_VERSION_CURRENT+1] =</div><div class="line">{</div><div class="line">        { NULL, 0 },</div><div class="line">        { NULL, 0 },</div><div class="line">        { csv_src_lbtrdma_stat_offset_v2, <span class="keyword">sizeof</span>(csv_src_lbtrdma_stat_offset_v2)/<span class="keyword">sizeof</span>(csv_src_lbtrdma_stat_offset_v2[0]) },</div><div class="line">        { csv_src_lbtrdma_stat_offset_v3, <span class="keyword">sizeof</span>(csv_src_lbtrdma_stat_offset_v3)/<span class="keyword">sizeof</span>(csv_src_lbtrdma_stat_offset_v3[0]) },</div><div class="line">        { csv_src_lbtrdma_stat_offset_v4, <span class="keyword">sizeof</span>(csv_src_lbtrdma_stat_offset_v4)/<span class="keyword">sizeof</span>(csv_src_lbtrdma_stat_offset_v4[0]) },</div><div class="line">        { csv_src_lbtrdma_stat_offset_v5, <span class="keyword">sizeof</span>(csv_src_lbtrdma_stat_offset_v5)/<span class="keyword">sizeof</span>(csv_src_lbtrdma_stat_offset_v5[0]) }</div><div class="line">};</div><div class="line"></div><div class="line"><span class="keyword">static</span> <span class="keywordtype">size_t</span> csv_src_broker_stat_offset_v2[] =</div><div class="line">{</div><div class="line">        offsetof(<a class="code" href="structlbm__src__transport__stats__broker__t__stct.html">lbm_src_transport_stats_broker_t</a>, msgs_sent),</div><div class="line">        offsetof(<a class="code" href="structlbm__src__transport__stats__broker__t__stct.html">lbm_src_transport_stats_broker_t</a>, bytes_sent)</div><div class="line">};</div><div class="line"><span class="preprocessor">#define csv_src_broker_stat_offset_v3 csv_src_broker_stat_offset_v2</span></div><div class="line"><span class="preprocessor">#define csv_src_broker_stat_offset_v4 csv_src_broker_stat_offset_v3</span></div><div class="line"><span class="preprocessor">#define csv_src_broker_stat_offset_v5 csv_src_broker_stat_offset_v4</span></div><div class="line"><span class="keyword">static</span> <span class="keyword">const</span> lbmmon_csv_layout_t csv_src_broker_stat_layout[LBMMON_FORMAT_CSV_VERSION_CURRENT+1] =</div><div class="line">{</div><div class="line">        { NULL, 0 },</div><div class="line">        { NULL, 0 },</div><div class="line">        { csv_src_broker_stat_offset_v2, <span class="keyword">sizeof</span>(csv_src_broker_stat_offset_v2)/<span class="keyword">sizeof</span>(csv_src_broker_stat_offset_v2[0]) },</div><div class="line">        { csv_src_broker_stat_offset_v3, <span class="keyword">sizeof</span>(csv_src_broker_stat_offset_v3)/<span class="keyword">sizeof</span>(csv_src_broker_stat_offset_v3[0]) },</div><div class="line">        { csv_src_broker_stat_offset_v4, <span class="keyword">sizeof</span>(csv_src_broker_stat_offset_v4)/<span class="keyword">sizeof</span>(csv_src_broker_stat_offset_v4[0]) },</div><div class="line">        { csv_src_broker_stat_offset_v5, <span class="keyword">sizeof</span>(csv_src_broker_stat_offset_v5)/<span class="keyword">sizeof</span>(csv_src_broker_stat_offset_v5[0]) }</div><div class="line">};</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> lbmmon_src_format_csv_deserialize(<a class="code" href="structlbm__src__transport__stats__t__stct.html">lbm_src_transport_stats_t</a> * Statistics, <span class="keyword">const</span> <span class="keywordtype">char</span> * Source, <span class="keywordtype">size_t</span> Length,</div><div class="line">                                                                          <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> ModuleID, <span class="keywordtype">void</span> * FormatClientData)</div><div class="line">{</div><div class="line">        <span class="keyword">const</span> <span class="keywordtype">char</span> * ptr;</div><div class="line">        <span class="keywordtype">char</span> value[1024];</div><div class="line">        lbmmon_format_csv_t * fmt;</div><div class="line">        <span class="keywordtype">size_t</span> idx;</div><div class="line">        <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> modid;</div><div class="line">        <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> modver;</div><div class="line">        <span class="keyword">const</span> <span class="keywordtype">size_t</span> * stat_layout = NULL;</div><div class="line">        <span class="keywordtype">size_t</span> stat_count = 0;</div><div class="line"></div><div class="line">        <span class="keywordflow">if</span> ((Statistics == NULL) || (Source == NULL) || (*Source == <span class="charliteral">&#39;\0&#39;</span>) || (Length == 0) || (FormatClientData == NULL) )</div><div class="line">        {</div><div class="line">                strncpy(ErrorString, <span class="stringliteral">&quot;Invalid parameter&quot;</span>, <span class="keyword">sizeof</span>(ErrorString));</div><div class="line">                <span class="keywordflow">return</span> (-1);</div><div class="line">        }</div><div class="line">        fmt = (lbmmon_format_csv_t *) FormatClientData;</div><div class="line"></div><div class="line">        modid = MODULE_ID(ModuleID);</div><div class="line">        modver = MODULE_VERSION(ModuleID);</div><div class="line">        <span class="keywordflow">if</span> (modid != LBMMON_FORMAT_CSV_MODULE_ID)</div><div class="line">        {</div><div class="line">                strncpy(ErrorString, <span class="stringliteral">&quot;Invalid module ID&quot;</span>, <span class="keyword">sizeof</span>(ErrorString));</div><div class="line">                <span class="keywordflow">return</span> (-1);</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="keywordflow">if</span> (fmt-&gt;mBuffer == NULL)</div><div class="line">        {</div><div class="line">                fmt-&gt;mBufferSize = 1024;</div><div class="line">                fmt-&gt;mBuffer = malloc(fmt-&gt;mBufferSize);</div><div class="line">                <span class="keywordflow">if</span> (fmt-&gt;mBuffer == NULL)</div><div class="line">                {</div><div class="line">                        lbmmon_format_csv_report_allocation_error(fmt-&gt;mBufferSize);</div><div class="line">                        <span class="keywordflow">return</span> (-1);    </div><div class="line">                }</div><div class="line">        }</div><div class="line">        <span class="keywordflow">if</span> (Length &gt;= fmt-&gt;mBufferSize)</div><div class="line">        {</div><div class="line">                fmt-&gt;mBufferSize = 2 * Length;</div><div class="line">                free(fmt-&gt;mBuffer);</div><div class="line">                fmt-&gt;mBuffer = malloc(fmt-&gt;mBufferSize);</div><div class="line">                <span class="keywordflow">if</span> (fmt-&gt;mBuffer == NULL)</div><div class="line">                {</div><div class="line">                        lbmmon_format_csv_report_allocation_error(fmt-&gt;mBufferSize);</div><div class="line">                        <span class="keywordflow">return</span> (-1);    </div><div class="line">                }</div><div class="line">        }</div><div class="line">        memset(fmt-&gt;mBuffer, 0, fmt-&gt;mBufferSize);</div><div class="line">        memcpy(fmt-&gt;mBuffer, Source, Length);</div><div class="line">        ptr = fmt-&gt;mBuffer;</div><div class="line">        ptr = next_csv_value(ptr, value, <span class="keyword">sizeof</span>(value), fmt-&gt;mSeparator);</div><div class="line">        <span class="keywordflow">if</span> (ptr == NULL)</div><div class="line">        {</div><div class="line">                strncpy(ErrorString, <span class="stringliteral">&quot;No type field found&quot;</span>, <span class="keyword">sizeof</span>(ErrorString));</div><div class="line">                <span class="keywordflow">return</span> (-1);</div><div class="line">        }</div><div class="line">        Statistics-&gt;<a class="code" href="structlbm__src__transport__stats__t__stct.html#a9f9aef06b06d3432b1b7ba10583413ce">type</a> = atoi(value);</div><div class="line">        ptr = next_csv_value(ptr, Statistics-&gt;<a class="code" href="structlbm__src__transport__stats__t__stct.html#aac9bc9a4d1f84c3cdc7dd83521b3ff70">source</a>, <span class="keyword">sizeof</span>(Statistics-&gt;<a class="code" href="structlbm__src__transport__stats__t__stct.html#aac9bc9a4d1f84c3cdc7dd83521b3ff70">source</a>), fmt-&gt;mSeparator);</div><div class="line">        <span class="keywordflow">if</span> (ptr == NULL)</div><div class="line">        {</div><div class="line">                strncpy(ErrorString, <span class="stringliteral">&quot;No source field found&quot;</span>, <span class="keyword">sizeof</span>(ErrorString));</div><div class="line">                <span class="keywordflow">return</span> (-1);</div><div class="line">        }</div><div class="line">        <span class="keywordflow">switch</span> (Statistics-&gt;<a class="code" href="structlbm__src__transport__stats__t__stct.html#a9f9aef06b06d3432b1b7ba10583413ce">type</a>)</div><div class="line">        {</div><div class="line">                <span class="keywordflow">case</span> <a class="code" href="lbm_8h.html#a6da60dbd4d5790ee0df30d6c3048f977">LBM_TRANSPORT_STAT_TCP</a>:</div><div class="line">                        <span class="keywordflow">if</span> (modver &gt;= LBMMON_FORMAT_CSV_VERSION_CURRENT)</div><div class="line">                        {</div><div class="line">                                stat_layout = csv_src_tcp_stat_layout[LBMMON_FORMAT_CSV_VERSION_CURRENT].layout;</div><div class="line">                                stat_count = csv_src_tcp_stat_layout[LBMMON_FORMAT_CSV_VERSION_CURRENT].count;</div><div class="line">                        }</div><div class="line">                        <span class="keywordflow">else</span></div><div class="line">                        {</div><div class="line">                                stat_layout = csv_src_tcp_stat_layout[modver].layout;</div><div class="line">                                stat_count = csv_src_tcp_stat_layout[modver].count;</div><div class="line">                        }</div><div class="line">                        memset((<span class="keywordtype">void</span> *) &amp;(Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#a7c2b714d68f2ca2fe56632c185c9a163">tcp</a>), 0, <span class="keyword">sizeof</span>(<a class="code" href="structlbm__src__transport__stats__tcp__t__stct.html">lbm_src_transport_stats_tcp_t</a>));</div><div class="line">                        <span class="keywordflow">for</span> (idx = 0; idx &lt; stat_count; ++idx)</div><div class="line">                        {</div><div class="line">                                ptr = next_csv_value(ptr, value, <span class="keyword">sizeof</span>(value), fmt-&gt;mSeparator);</div><div class="line">                                <span class="keywordflow">if</span> (ptr == NULL)</div><div class="line">                                {</div><div class="line">                                        strncpy(ErrorString, <span class="stringliteral">&quot;Data contains too few fields&quot;</span>, <span class="keyword">sizeof</span>(ErrorString));</div><div class="line">                                        <span class="keywordflow">return</span> (-1);</div><div class="line">                                }</div><div class="line">                                *((<a class="code" href="lbm_8h.html#a72438fab15bf500af58d2a8a521e470d">lbm_ulong_t</a> *)(((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)&amp;(Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#a7c2b714d68f2ca2fe56632c185c9a163">tcp</a>)) + stat_layout[idx])) = convert_value(value);</div><div class="line">                        }</div><div class="line">                        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">                <span class="keywordflow">case</span> <a class="code" href="lbm_8h.html#a32e0d3eee1fe69fa87e985f3343830b3">LBM_TRANSPORT_STAT_LBTRM</a>:</div><div class="line">                        <span class="keywordflow">if</span> (modver &gt;= LBMMON_FORMAT_CSV_VERSION_CURRENT)</div><div class="line">                        {</div><div class="line">                                stat_layout = csv_src_lbtrm_stat_layout[LBMMON_FORMAT_CSV_VERSION_CURRENT].layout;</div><div class="line">                                stat_count = csv_src_lbtrm_stat_layout[LBMMON_FORMAT_CSV_VERSION_CURRENT].count;</div><div class="line">                        }</div><div class="line">                        <span class="keywordflow">else</span></div><div class="line">                        {</div><div class="line">                                stat_layout = csv_src_lbtrm_stat_layout[modver].layout;</div><div class="line">                                stat_count = csv_src_lbtrm_stat_layout[modver].count;</div><div class="line">                        }</div><div class="line">                        memset((<span class="keywordtype">void</span> *) &amp;(Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#a6bad1e2180589dd3c3fdc9ddd3b24a38">lbtrm</a>), 0, <span class="keyword">sizeof</span>(<a class="code" href="structlbm__src__transport__stats__lbtrm__t__stct.html">lbm_src_transport_stats_lbtrm_t</a>));</div><div class="line">                        <span class="keywordflow">for</span> (idx = 0; idx &lt; stat_count; ++idx)</div><div class="line">                        {</div><div class="line">                                ptr = next_csv_value(ptr, value, <span class="keyword">sizeof</span>(value), fmt-&gt;mSeparator);</div><div class="line">                                <span class="keywordflow">if</span> (ptr == NULL)</div><div class="line">                                {</div><div class="line">                                        strncpy(ErrorString, <span class="stringliteral">&quot;Data contains too few fields&quot;</span>, <span class="keyword">sizeof</span>(ErrorString));</div><div class="line">                                        <span class="keywordflow">return</span> (-1);</div><div class="line">                                }</div><div class="line">                                *((<a class="code" href="lbm_8h.html#a72438fab15bf500af58d2a8a521e470d">lbm_ulong_t</a> *)(((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)&amp;(Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#a6bad1e2180589dd3c3fdc9ddd3b24a38">lbtrm</a>)) + stat_layout[idx])) = convert_value(value);</div><div class="line">                        }</div><div class="line">                        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">                <span class="keywordflow">case</span> <a class="code" href="lbm_8h.html#a1f4acd28e4192be6809ce2cc496cb514">LBM_TRANSPORT_STAT_LBTRU</a>:</div><div class="line">                        <span class="keywordflow">if</span> (modver &gt;= LBMMON_FORMAT_CSV_VERSION_CURRENT)</div><div class="line">                        {</div><div class="line">                                stat_layout = csv_src_lbtru_stat_layout[LBMMON_FORMAT_CSV_VERSION_CURRENT].layout;</div><div class="line">                                stat_count = csv_src_lbtru_stat_layout[LBMMON_FORMAT_CSV_VERSION_CURRENT].count;</div><div class="line">                        }</div><div class="line">                        <span class="keywordflow">else</span></div><div class="line">                        {</div><div class="line">                                stat_layout = csv_src_lbtru_stat_layout[modver].layout;</div><div class="line">                                stat_count = csv_src_lbtru_stat_layout[modver].count;</div><div class="line">                        }</div><div class="line">                        memset((<span class="keywordtype">void</span> *) &amp;(Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#acd0a2c474f818d9f43afb504bcdac266">lbtru</a>), 0, <span class="keyword">sizeof</span>(<a class="code" href="structlbm__src__transport__stats__lbtru__t__stct.html">lbm_src_transport_stats_lbtru_t</a>));</div><div class="line">                        <span class="keywordflow">for</span> (idx = 0; idx &lt; stat_count; ++idx)</div><div class="line">                        {</div><div class="line">                                ptr = next_csv_value(ptr, value, <span class="keyword">sizeof</span>(value), fmt-&gt;mSeparator);</div><div class="line">                                <span class="keywordflow">if</span> (ptr == NULL)</div><div class="line">                                {</div><div class="line">                                        strncpy(ErrorString, <span class="stringliteral">&quot;Data contains too few fields&quot;</span>, <span class="keyword">sizeof</span>(ErrorString));</div><div class="line">                                        <span class="keywordflow">return</span> (-1);</div><div class="line">                                }</div><div class="line">                                *((<a class="code" href="lbm_8h.html#a72438fab15bf500af58d2a8a521e470d">lbm_ulong_t</a> *)(((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)&amp;(Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#acd0a2c474f818d9f43afb504bcdac266">lbtru</a>)) + stat_layout[idx])) = convert_value(value);</div><div class="line">                        }</div><div class="line">                        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">                <span class="keywordflow">case</span> <a class="code" href="lbm_8h.html#a64de821cc3a1afda47c5668996d16d9b">LBM_TRANSPORT_STAT_LBTIPC</a>:</div><div class="line">                        <span class="keywordflow">if</span> (modver &gt;= LBMMON_FORMAT_CSV_VERSION_CURRENT)</div><div class="line">                        {</div><div class="line">                                stat_layout = csv_src_lbtipc_stat_layout[LBMMON_FORMAT_CSV_VERSION_CURRENT].layout;</div><div class="line">                                stat_count = csv_src_lbtipc_stat_layout[LBMMON_FORMAT_CSV_VERSION_CURRENT].count;</div><div class="line">                        }</div><div class="line">                        <span class="keywordflow">else</span></div><div class="line">                        {</div><div class="line">                                stat_layout = csv_src_lbtipc_stat_layout[modver].layout;</div><div class="line">                                stat_count = csv_src_lbtipc_stat_layout[modver].count;</div><div class="line">                        }</div><div class="line">                        memset((<span class="keywordtype">void</span> *) &amp;(Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#a7b4175075377813b21794285ebad2a30">lbtipc</a>), 0, <span class="keyword">sizeof</span>(<a class="code" href="structlbm__src__transport__stats__lbtipc__t__stct.html">lbm_src_transport_stats_lbtipc_t</a>));</div><div class="line">                        <span class="keywordflow">for</span> (idx = 0; idx &lt; stat_count; ++idx)</div><div class="line">                        {</div><div class="line">                                ptr = next_csv_value(ptr, value, <span class="keyword">sizeof</span>(value), fmt-&gt;mSeparator);</div><div class="line">                                <span class="keywordflow">if</span> (ptr == NULL)</div><div class="line">                                {</div><div class="line">                                        strncpy(ErrorString, <span class="stringliteral">&quot;Data contains too few fields&quot;</span>, <span class="keyword">sizeof</span>(ErrorString));</div><div class="line">                                        <span class="keywordflow">return</span> (-1);</div><div class="line">                                }</div><div class="line">                                *((<a class="code" href="lbm_8h.html#a72438fab15bf500af58d2a8a521e470d">lbm_ulong_t</a> *)(((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)&amp;(Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#a7b4175075377813b21794285ebad2a30">lbtipc</a>)) + stat_layout[idx])) = convert_value(value);</div><div class="line">                        }</div><div class="line">                        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">                <span class="keywordflow">case</span> <a class="code" href="lbm_8h.html#af5d79fa0d57faa68dfa42b20401a94d8">LBM_TRANSPORT_STAT_LBTSMX</a>:</div><div class="line">                        <span class="keywordflow">if</span> (modver &gt;= LBMMON_FORMAT_CSV_VERSION_CURRENT)</div><div class="line">                        {</div><div class="line">                                stat_layout = csv_src_lbtsmx_stat_layout[LBMMON_FORMAT_CSV_VERSION_CURRENT].layout;</div><div class="line">                                stat_count = csv_src_lbtsmx_stat_layout[LBMMON_FORMAT_CSV_VERSION_CURRENT].count;</div><div class="line">                        }</div><div class="line">                        <span class="keywordflow">else</span></div><div class="line">                        {</div><div class="line">                                stat_layout = csv_src_lbtsmx_stat_layout[modver].layout;</div><div class="line">                                stat_count = csv_src_lbtsmx_stat_layout[modver].count;</div><div class="line">                        }</div><div class="line">                        memset((<span class="keywordtype">void</span> *) &amp;(Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#abcd38be1b1e24c25185a5bfcfd0919f2">lbtsmx</a>), 0, <span class="keyword">sizeof</span>(<a class="code" href="structlbm__src__transport__stats__lbtsmx__t__stct.html">lbm_src_transport_stats_lbtsmx_t</a>));</div><div class="line">                        <span class="keywordflow">for</span> (idx = 0; idx &lt; stat_count; ++idx)</div><div class="line">                        {</div><div class="line">                                ptr = next_csv_value(ptr, value, <span class="keyword">sizeof</span>(value), fmt-&gt;mSeparator);</div><div class="line">                                <span class="keywordflow">if</span> (ptr == NULL)</div><div class="line">                                {</div><div class="line">                                        strncpy(ErrorString, <span class="stringliteral">&quot;Data contains too few fields&quot;</span>, <span class="keyword">sizeof</span>(ErrorString));</div><div class="line">                                        <span class="keywordflow">return</span> (-1);</div><div class="line">                                }</div><div class="line">                                *((<a class="code" href="lbm_8h.html#a72438fab15bf500af58d2a8a521e470d">lbm_ulong_t</a> *)(((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)&amp;(Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#abcd38be1b1e24c25185a5bfcfd0919f2">lbtsmx</a>)) + stat_layout[idx])) = convert_value(value);</div><div class="line">                        }</div><div class="line">                        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">                <span class="keywordflow">case</span> <a class="code" href="lbm_8h.html#ab8fc2e2fb0287dfa80713fb8fb6c23df">LBM_TRANSPORT_STAT_LBTRDMA</a>:</div><div class="line">                        <span class="keywordflow">if</span> (modver &gt;= LBMMON_FORMAT_CSV_VERSION_CURRENT)</div><div class="line">                        {</div><div class="line">                                stat_layout = csv_src_lbtrdma_stat_layout[LBMMON_FORMAT_CSV_VERSION_CURRENT].layout;</div><div class="line">                                stat_count = csv_src_lbtrdma_stat_layout[LBMMON_FORMAT_CSV_VERSION_CURRENT].count;</div><div class="line">                        }</div><div class="line">                        <span class="keywordflow">else</span></div><div class="line">                        {</div><div class="line">                                stat_layout = csv_src_lbtrdma_stat_layout[modver].layout;</div><div class="line">                                stat_count = csv_src_lbtrdma_stat_layout[modver].count;</div><div class="line">                        }</div><div class="line">                        memset((<span class="keywordtype">void</span> *) &amp;(Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#a6b871c0b09182aaf4d819458f4ea8c66">lbtrdma</a>), 0, <span class="keyword">sizeof</span>(<a class="code" href="structlbm__src__transport__stats__lbtrdma__t__stct.html">lbm_src_transport_stats_lbtrdma_t</a>));</div><div class="line">                        <span class="keywordflow">for</span> (idx = 0; idx &lt; stat_count; ++idx)</div><div class="line">                        {</div><div class="line">                                ptr = next_csv_value(ptr, value, <span class="keyword">sizeof</span>(value), fmt-&gt;mSeparator);</div><div class="line">                                <span class="keywordflow">if</span> (ptr == NULL)</div><div class="line">                                {</div><div class="line">                                        strncpy(ErrorString, <span class="stringliteral">&quot;Data contains too few fields&quot;</span>, <span class="keyword">sizeof</span>(ErrorString));</div><div class="line">                                        <span class="keywordflow">return</span> (-1);</div><div class="line">                                }</div><div class="line">                                *((<a class="code" href="lbm_8h.html#a72438fab15bf500af58d2a8a521e470d">lbm_ulong_t</a> *)(((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)&amp;(Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#a6b871c0b09182aaf4d819458f4ea8c66">lbtrdma</a>)) + stat_layout[idx])) = convert_value(value);</div><div class="line">                        }</div><div class="line">                        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">                <span class="keywordflow">case</span> <a class="code" href="lbm_8h.html#a95057b42f21bc8bd15702a4a23ffeda8">LBM_TRANSPORT_STAT_BROKER</a>:</div><div class="line">                        <span class="keywordflow">if</span> (modver &gt;= LBMMON_FORMAT_CSV_VERSION_CURRENT)</div><div class="line">                        {</div><div class="line">                                stat_layout = csv_rcv_broker_stat_layout[LBMMON_FORMAT_CSV_VERSION_CURRENT].layout;</div><div class="line">                                stat_count = csv_rcv_broker_stat_layout[LBMMON_FORMAT_CSV_VERSION_CURRENT].count;</div><div class="line">                        }</div><div class="line">                        <span class="keywordflow">else</span></div><div class="line">                        {</div><div class="line">                                stat_layout = csv_rcv_broker_stat_layout[modver].layout;</div><div class="line">                                stat_count = csv_rcv_broker_stat_layout[modver].count;</div><div class="line">                        }</div><div class="line">                        memset((<span class="keywordtype">void</span> *) &amp;(Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#a8ecbc253a05324609c3bcd6bb1b9cc53">broker</a>), 0, <span class="keyword">sizeof</span>(<a class="code" href="structlbm__rcv__transport__stats__broker__t__stct.html">lbm_rcv_transport_stats_broker_t</a>));</div><div class="line">                        <span class="keywordflow">for</span> (idx = 0; idx &lt; stat_count; ++idx)</div><div class="line">                        {</div><div class="line">                                ptr = next_csv_value(ptr, value, <span class="keyword">sizeof</span>(value), fmt-&gt;mSeparator);</div><div class="line">                                <span class="keywordflow">if</span> (ptr == NULL)</div><div class="line">                                {</div><div class="line">                                        strncpy(ErrorString, <span class="stringliteral">&quot;Data contains too few fields&quot;</span>, <span class="keyword">sizeof</span>(ErrorString));</div><div class="line">                                        <span class="keywordflow">return</span> (-1);</div><div class="line">                                }</div><div class="line">                                *((<a class="code" href="lbm_8h.html#a72438fab15bf500af58d2a8a521e470d">lbm_ulong_t</a> *)(((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)&amp;(Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#a8ecbc253a05324609c3bcd6bb1b9cc53">broker</a>)) + stat_layout[idx])) = convert_value(value);</div><div class="line">                        }</div><div class="line">                        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">                <span class="keywordflow">default</span>:</div><div class="line">                        strncpy(ErrorString, <span class="stringliteral">&quot;Invalid LBM transport type&quot;</span>, <span class="keyword">sizeof</span>(ErrorString));</div><div class="line">                        <span class="keywordflow">return</span> (-1);</div><div class="line">        }</div><div class="line">        <span class="keywordflow">return</span> (0);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">static</span> <span class="keywordtype">size_t</span> csv_evq_stat_offset_v2[] =</div><div class="line">{</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, data_msgs),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, data_msgs_tot),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, data_msgs_svc_min),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, data_msgs_svc_mean),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, data_msgs_svc_max),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, resp_msgs),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, resp_msgs_tot),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, resp_msgs_svc_min),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, resp_msgs_svc_mean),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, resp_msgs_svc_max),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, topicless_im_msgs),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, topicless_im_msgs_tot),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, topicless_im_msgs_svc_min),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, topicless_im_msgs_svc_mean),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, topicless_im_msgs_svc_max),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, wrcv_msgs),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, wrcv_msgs_tot),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, wrcv_msgs_svc_min),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, wrcv_msgs_svc_mean),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, wrcv_msgs_svc_max),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, io_events),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, io_events_tot),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, io_events_svc_min),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, io_events_svc_mean),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, io_events_svc_max),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, timer_events),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, timer_events_tot),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, timer_events_svc_min),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, timer_events_svc_mean),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, timer_events_svc_max),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, source_events),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, source_events_tot),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, source_events_svc_min),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, source_events_svc_mean),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, source_events_svc_max),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, unblock_events),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, unblock_events_tot),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, cancel_events),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, cancel_events_tot),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, cancel_events_svc_min),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, cancel_events_svc_mean),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, cancel_events_svc_max),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, context_source_events),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, context_source_events_tot),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, context_source_events_svc_min),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, context_source_events_svc_mean),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, context_source_events_svc_max),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, events),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, events_tot),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, age_min),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, age_mean),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, age_max)</div><div class="line">};</div><div class="line"><span class="keyword">static</span> <span class="keywordtype">size_t</span> csv_evq_stat_offset_v3[] =</div><div class="line">{</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, data_msgs),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, data_msgs_tot),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, data_msgs_svc_min),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, data_msgs_svc_mean),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, data_msgs_svc_max),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, resp_msgs),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, resp_msgs_tot),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, resp_msgs_svc_min),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, resp_msgs_svc_mean),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, resp_msgs_svc_max),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, topicless_im_msgs),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, topicless_im_msgs_tot),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, topicless_im_msgs_svc_min),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, topicless_im_msgs_svc_mean),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, topicless_im_msgs_svc_max),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, wrcv_msgs),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, wrcv_msgs_tot),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, wrcv_msgs_svc_min),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, wrcv_msgs_svc_mean),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, wrcv_msgs_svc_max),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, io_events),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, io_events_tot),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, io_events_svc_min),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, io_events_svc_mean),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, io_events_svc_max),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, timer_events),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, timer_events_tot),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, timer_events_svc_min),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, timer_events_svc_mean),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, timer_events_svc_max),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, source_events),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, source_events_tot),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, source_events_svc_min),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, source_events_svc_mean),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, source_events_svc_max),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, unblock_events),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, unblock_events_tot),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, cancel_events),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, cancel_events_tot),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, cancel_events_svc_min),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, cancel_events_svc_mean),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, cancel_events_svc_max),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, context_source_events),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, context_source_events_tot),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, context_source_events_svc_min),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, context_source_events_svc_mean),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, context_source_events_svc_max),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, events),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, events_tot),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, age_min),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, age_mean),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, age_max),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, callback_events),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, callback_events_tot),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, callback_events_svc_min),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, callback_events_svc_mean),</div><div class="line">        offsetof(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>, callback_events_svc_max)</div><div class="line">};</div><div class="line"><span class="preprocessor">#define csv_evq_stat_offset_v4 csv_evq_stat_offset_v3</span></div><div class="line"><span class="preprocessor">#define csv_evq_stat_offset_v5 csv_evq_stat_offset_v4</span></div><div class="line"><span class="keyword">static</span> <span class="keyword">const</span> lbmmon_csv_layout_t csv_evq_stat_layout[LBMMON_FORMAT_CSV_VERSION_CURRENT+1] =</div><div class="line">{</div><div class="line">        { NULL, 0 },</div><div class="line">        { NULL, 0 },</div><div class="line">        { csv_evq_stat_offset_v2, <span class="keyword">sizeof</span>(csv_evq_stat_offset_v2)/<span class="keyword">sizeof</span>(csv_evq_stat_offset_v2[0]) },</div><div class="line">        { csv_evq_stat_offset_v3, <span class="keyword">sizeof</span>(csv_evq_stat_offset_v3)/<span class="keyword">sizeof</span>(csv_evq_stat_offset_v3[0]) },</div><div class="line">        { csv_evq_stat_offset_v4, <span class="keyword">sizeof</span>(csv_evq_stat_offset_v4)/<span class="keyword">sizeof</span>(csv_evq_stat_offset_v4[0]) },</div><div class="line">        { csv_evq_stat_offset_v5, <span class="keyword">sizeof</span>(csv_evq_stat_offset_v5)/<span class="keyword">sizeof</span>(csv_evq_stat_offset_v5[0]) }</div><div class="line">};</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> lbmmon_evq_format_csv_deserialize(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a> * Statistics, <span class="keyword">const</span> <span class="keywordtype">char</span> * Source, <span class="keywordtype">size_t</span> Length,</div><div class="line">                                                                          <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> ModuleID, <span class="keywordtype">void</span> * FormatClientData)</div><div class="line">{</div><div class="line">        <span class="keyword">const</span> <span class="keywordtype">char</span> * ptr;</div><div class="line">        <span class="keywordtype">char</span> value[1024];</div><div class="line">        lbmmon_format_csv_t * fmt;</div><div class="line">        <span class="keywordtype">size_t</span> idx;</div><div class="line">        <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> modid;</div><div class="line">        <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> modver;</div><div class="line">        <span class="keyword">const</span> <span class="keywordtype">size_t</span> * stat_layout = NULL;</div><div class="line">        <span class="keywordtype">size_t</span> stat_count = 0;</div><div class="line"></div><div class="line">        <span class="keywordflow">if</span> ((Statistics == NULL) || (Source == NULL) || (*Source == <span class="charliteral">&#39;\0&#39;</span>) || (Length == 0) || (FormatClientData == NULL) )</div><div class="line">        {</div><div class="line">                strncpy(ErrorString, <span class="stringliteral">&quot;Invalid parameter&quot;</span>, <span class="keyword">sizeof</span>(ErrorString));</div><div class="line">                <span class="keywordflow">return</span> (-1);</div><div class="line">        }</div><div class="line">        fmt = (lbmmon_format_csv_t *) FormatClientData;</div><div class="line"></div><div class="line">        modid = MODULE_ID(ModuleID);</div><div class="line">        modver = MODULE_VERSION(ModuleID);</div><div class="line">        <span class="keywordflow">if</span> (modid != LBMMON_FORMAT_CSV_MODULE_ID)</div><div class="line">        {</div><div class="line">                strncpy(ErrorString, <span class="stringliteral">&quot;Invalid module ID&quot;</span>, <span class="keyword">sizeof</span>(ErrorString));</div><div class="line">                <span class="keywordflow">return</span> (-1);</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="keywordflow">if</span> (fmt-&gt;mBuffer == NULL)</div><div class="line">        {</div><div class="line">                fmt-&gt;mBufferSize = 1024;</div><div class="line">                fmt-&gt;mBuffer = malloc(fmt-&gt;mBufferSize);</div><div class="line">                <span class="keywordflow">if</span> (fmt-&gt;mBuffer == NULL)</div><div class="line">                {</div><div class="line">                        lbmmon_format_csv_report_allocation_error(fmt-&gt;mBufferSize);</div><div class="line">                        <span class="keywordflow">return</span> (-1);    </div><div class="line">                }</div><div class="line">        }</div><div class="line">        <span class="keywordflow">if</span> (Length &gt;= fmt-&gt;mBufferSize)</div><div class="line">        {</div><div class="line">                fmt-&gt;mBufferSize = 2 * Length;</div><div class="line">                free(fmt-&gt;mBuffer);</div><div class="line">                fmt-&gt;mBuffer = malloc(fmt-&gt;mBufferSize);</div><div class="line">                <span class="keywordflow">if</span> (fmt-&gt;mBuffer == NULL)</div><div class="line">                {</div><div class="line">                        lbmmon_format_csv_report_allocation_error(fmt-&gt;mBufferSize);</div><div class="line">                        <span class="keywordflow">return</span> (-1);    </div><div class="line">                }</div><div class="line">        }</div><div class="line">        memset(fmt-&gt;mBuffer, 0, fmt-&gt;mBufferSize);</div><div class="line">        memcpy(fmt-&gt;mBuffer, Source, Length);</div><div class="line">        ptr = fmt-&gt;mBuffer;</div><div class="line">        <span class="keywordflow">if</span> (modver &gt;= LBMMON_FORMAT_CSV_VERSION_CURRENT)</div><div class="line">        {</div><div class="line">                stat_layout = csv_evq_stat_layout[LBMMON_FORMAT_CSV_VERSION_CURRENT].layout;</div><div class="line">                stat_count = csv_evq_stat_layout[LBMMON_FORMAT_CSV_VERSION_CURRENT].count;</div><div class="line">        }</div><div class="line">        <span class="keywordflow">else</span></div><div class="line">        {</div><div class="line">                stat_layout = csv_evq_stat_layout[modver].layout;</div><div class="line">                stat_count = csv_evq_stat_layout[modver].count;</div><div class="line">        }</div><div class="line">        memset((<span class="keywordtype">void</span> *) Statistics, 0, <span class="keyword">sizeof</span>(<a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a>));</div><div class="line">        <span class="keywordflow">for</span> (idx = 0; idx &lt; stat_count; ++idx)</div><div class="line">        {</div><div class="line">                ptr = next_csv_value(ptr, value, <span class="keyword">sizeof</span>(value), fmt-&gt;mSeparator);</div><div class="line">                <span class="keywordflow">if</span> (ptr == NULL)</div><div class="line">                {</div><div class="line">                        strncpy(ErrorString, <span class="stringliteral">&quot;Data contains too few fields&quot;</span>, <span class="keyword">sizeof</span>(ErrorString));</div><div class="line">                        <span class="keywordflow">return</span> (-1);</div><div class="line">                }</div><div class="line">                *((<a class="code" href="lbm_8h.html#a72438fab15bf500af58d2a8a521e470d">lbm_ulong_t</a> *)(((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *) Statistics) + stat_layout[idx])) = convert_value(value);</div><div class="line">        }</div><div class="line">        <span class="keywordflow">return</span> (0);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">static</span> <span class="keywordtype">size_t</span> csv_ctx_stat_offset_v2[] =</div><div class="line">{</div><div class="line">        offsetof(<a class="code" href="structlbm__context__stats__t__stct.html">lbm_context_stats_t</a>, tr_dgrams_sent),</div><div class="line">        offsetof(<a class="code" href="structlbm__context__stats__t__stct.html">lbm_context_stats_t</a>, tr_bytes_sent),</div><div class="line">        offsetof(<a class="code" href="structlbm__context__stats__t__stct.html">lbm_context_stats_t</a>, tr_dgrams_rcved),</div><div class="line">        offsetof(<a class="code" href="structlbm__context__stats__t__stct.html">lbm_context_stats_t</a>, tr_bytes_rcved),</div><div class="line">        offsetof(<a class="code" href="structlbm__context__stats__t__stct.html">lbm_context_stats_t</a>, tr_dgrams_dropped_ver),</div><div class="line">        offsetof(<a class="code" href="structlbm__context__stats__t__stct.html">lbm_context_stats_t</a>, tr_dgrams_dropped_type),</div><div class="line">        offsetof(<a class="code" href="structlbm__context__stats__t__stct.html">lbm_context_stats_t</a>, tr_dgrams_dropped_malformed),</div><div class="line">        offsetof(<a class="code" href="structlbm__context__stats__t__stct.html">lbm_context_stats_t</a>, tr_dgrams_send_failed),</div><div class="line">        offsetof(<a class="code" href="structlbm__context__stats__t__stct.html">lbm_context_stats_t</a>, tr_src_topics),</div><div class="line">        offsetof(<a class="code" href="structlbm__context__stats__t__stct.html">lbm_context_stats_t</a>, tr_rcv_topics),</div><div class="line">        offsetof(<a class="code" href="structlbm__context__stats__t__stct.html">lbm_context_stats_t</a>, tr_rcv_unresolved_topics),</div><div class="line">        offsetof(<a class="code" href="structlbm__context__stats__t__stct.html">lbm_context_stats_t</a>, lbtrm_unknown_msgs_rcved),</div><div class="line">        offsetof(<a class="code" href="structlbm__context__stats__t__stct.html">lbm_context_stats_t</a>, lbtru_unknown_msgs_rcved),</div><div class="line">        offsetof(<a class="code" href="structlbm__context__stats__t__stct.html">lbm_context_stats_t</a>, send_blocked),</div><div class="line">        offsetof(<a class="code" href="structlbm__context__stats__t__stct.html">lbm_context_stats_t</a>, send_would_block),</div><div class="line">        offsetof(<a class="code" href="structlbm__context__stats__t__stct.html">lbm_context_stats_t</a>, resp_blocked),</div><div class="line">        offsetof(<a class="code" href="structlbm__context__stats__t__stct.html">lbm_context_stats_t</a>, resp_would_block)</div><div class="line">};</div><div class="line"><span class="preprocessor">#define csv_ctx_stat_offset_v3 csv_ctx_stat_offset_v2</span></div><div class="line"><span class="keyword">static</span> <span class="keywordtype">size_t</span> csv_ctx_stat_offset_v4[] =</div><div class="line">{</div><div class="line">        offsetof(<a class="code" href="structlbm__context__stats__t__stct.html">lbm_context_stats_t</a>, tr_dgrams_sent),</div><div class="line">        offsetof(<a class="code" href="structlbm__context__stats__t__stct.html">lbm_context_stats_t</a>, tr_bytes_sent),</div><div class="line">        offsetof(<a class="code" href="structlbm__context__stats__t__stct.html">lbm_context_stats_t</a>, tr_dgrams_rcved),</div><div class="line">        offsetof(<a class="code" href="structlbm__context__stats__t__stct.html">lbm_context_stats_t</a>, tr_bytes_rcved),</div><div class="line">        offsetof(<a class="code" href="structlbm__context__stats__t__stct.html">lbm_context_stats_t</a>, tr_dgrams_dropped_ver),</div><div class="line">        offsetof(<a class="code" href="structlbm__context__stats__t__stct.html">lbm_context_stats_t</a>, tr_dgrams_dropped_type),</div><div class="line">        offsetof(<a class="code" href="structlbm__context__stats__t__stct.html">lbm_context_stats_t</a>, tr_dgrams_dropped_malformed),</div><div class="line">        offsetof(<a class="code" href="structlbm__context__stats__t__stct.html">lbm_context_stats_t</a>, tr_dgrams_send_failed),</div><div class="line">        offsetof(<a class="code" href="structlbm__context__stats__t__stct.html">lbm_context_stats_t</a>, tr_src_topics),</div><div class="line">        offsetof(<a class="code" href="structlbm__context__stats__t__stct.html">lbm_context_stats_t</a>, tr_rcv_topics),</div><div class="line">        offsetof(<a class="code" href="structlbm__context__stats__t__stct.html">lbm_context_stats_t</a>, tr_rcv_unresolved_topics),</div><div class="line">        offsetof(<a class="code" href="structlbm__context__stats__t__stct.html">lbm_context_stats_t</a>, lbtrm_unknown_msgs_rcved),</div><div class="line">        offsetof(<a class="code" href="structlbm__context__stats__t__stct.html">lbm_context_stats_t</a>, lbtru_unknown_msgs_rcved),</div><div class="line">        offsetof(<a class="code" href="structlbm__context__stats__t__stct.html">lbm_context_stats_t</a>, send_blocked),</div><div class="line">        offsetof(<a class="code" href="structlbm__context__stats__t__stct.html">lbm_context_stats_t</a>, send_would_block),</div><div class="line">        offsetof(<a class="code" href="structlbm__context__stats__t__stct.html">lbm_context_stats_t</a>, resp_blocked),</div><div class="line">        offsetof(<a class="code" href="structlbm__context__stats__t__stct.html">lbm_context_stats_t</a>, resp_would_block),</div><div class="line">        offsetof(<a class="code" href="structlbm__context__stats__t__stct.html">lbm_context_stats_t</a>, uim_dup_msgs_rcved),</div><div class="line">        offsetof(<a class="code" href="structlbm__context__stats__t__stct.html">lbm_context_stats_t</a>, uim_msgs_no_stream_rcved)</div><div class="line">};</div><div class="line"><span class="keyword">static</span> <span class="keywordtype">size_t</span> csv_ctx_stat_offset_v5[] =</div><div class="line">{</div><div class="line">        offsetof(<a class="code" href="structlbm__context__stats__t__stct.html">lbm_context_stats_t</a>, tr_dgrams_sent),</div><div class="line">        offsetof(<a class="code" href="structlbm__context__stats__t__stct.html">lbm_context_stats_t</a>, tr_bytes_sent),</div><div class="line">        offsetof(<a class="code" href="structlbm__context__stats__t__stct.html">lbm_context_stats_t</a>, tr_dgrams_rcved),</div><div class="line">        offsetof(<a class="code" href="structlbm__context__stats__t__stct.html">lbm_context_stats_t</a>, tr_bytes_rcved),</div><div class="line">        offsetof(<a class="code" href="structlbm__context__stats__t__stct.html">lbm_context_stats_t</a>, tr_dgrams_dropped_ver),</div><div class="line">        offsetof(<a class="code" href="structlbm__context__stats__t__stct.html">lbm_context_stats_t</a>, tr_dgrams_dropped_type),</div><div class="line">        offsetof(<a class="code" href="structlbm__context__stats__t__stct.html">lbm_context_stats_t</a>, tr_dgrams_dropped_malformed),</div><div class="line">        offsetof(<a class="code" href="structlbm__context__stats__t__stct.html">lbm_context_stats_t</a>, tr_dgrams_send_failed),</div><div class="line">        offsetof(<a class="code" href="structlbm__context__stats__t__stct.html">lbm_context_stats_t</a>, tr_src_topics),</div><div class="line">        offsetof(<a class="code" href="structlbm__context__stats__t__stct.html">lbm_context_stats_t</a>, tr_rcv_topics),</div><div class="line">        offsetof(<a class="code" href="structlbm__context__stats__t__stct.html">lbm_context_stats_t</a>, tr_rcv_unresolved_topics),</div><div class="line">        offsetof(<a class="code" href="structlbm__context__stats__t__stct.html">lbm_context_stats_t</a>, lbtrm_unknown_msgs_rcved),</div><div class="line">        offsetof(<a class="code" href="structlbm__context__stats__t__stct.html">lbm_context_stats_t</a>, lbtru_unknown_msgs_rcved),</div><div class="line">        offsetof(<a class="code" href="structlbm__context__stats__t__stct.html">lbm_context_stats_t</a>, send_blocked),</div><div class="line">        offsetof(<a class="code" href="structlbm__context__stats__t__stct.html">lbm_context_stats_t</a>, send_would_block),</div><div class="line">        offsetof(<a class="code" href="structlbm__context__stats__t__stct.html">lbm_context_stats_t</a>, resp_blocked),</div><div class="line">        offsetof(<a class="code" href="structlbm__context__stats__t__stct.html">lbm_context_stats_t</a>, resp_would_block),</div><div class="line">        offsetof(<a class="code" href="structlbm__context__stats__t__stct.html">lbm_context_stats_t</a>, uim_dup_msgs_rcved),</div><div class="line">        offsetof(<a class="code" href="structlbm__context__stats__t__stct.html">lbm_context_stats_t</a>, uim_msgs_no_stream_rcved),</div><div class="line">        offsetof(<a class="code" href="structlbm__context__stats__t__stct.html">lbm_context_stats_t</a>, fragments_lost),</div><div class="line">        offsetof(<a class="code" href="structlbm__context__stats__t__stct.html">lbm_context_stats_t</a>, fragments_unrecoverably_lost),</div><div class="line">        offsetof(<a class="code" href="structlbm__context__stats__t__stct.html">lbm_context_stats_t</a>, rcv_cb_svc_time_min),</div><div class="line">        offsetof(<a class="code" href="structlbm__context__stats__t__stct.html">lbm_context_stats_t</a>, rcv_cb_svc_time_max),</div><div class="line">        offsetof(<a class="code" href="structlbm__context__stats__t__stct.html">lbm_context_stats_t</a>, rcv_cb_svc_time_mean)</div><div class="line">};</div><div class="line"><span class="keyword">static</span> <span class="keyword">const</span> lbmmon_csv_layout_t csv_ctx_stat_layout[LBMMON_FORMAT_CSV_VERSION_CURRENT+1] =</div><div class="line">{</div><div class="line">        { NULL, 0 },</div><div class="line">        { NULL, 0 },</div><div class="line">        { csv_ctx_stat_offset_v2, <span class="keyword">sizeof</span>(csv_ctx_stat_offset_v2)/<span class="keyword">sizeof</span>(csv_ctx_stat_offset_v2[0]) },</div><div class="line">        { csv_ctx_stat_offset_v3, <span class="keyword">sizeof</span>(csv_ctx_stat_offset_v3)/<span class="keyword">sizeof</span>(csv_ctx_stat_offset_v3[0]) },</div><div class="line">        { csv_ctx_stat_offset_v4, <span class="keyword">sizeof</span>(csv_ctx_stat_offset_v4)/<span class="keyword">sizeof</span>(csv_ctx_stat_offset_v4[0]) },</div><div class="line">        { csv_ctx_stat_offset_v5, <span class="keyword">sizeof</span>(csv_ctx_stat_offset_v5)/<span class="keyword">sizeof</span>(csv_ctx_stat_offset_v5[0]) }</div><div class="line">};</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> lbmmon_ctx_format_csv_deserialize(<a class="code" href="structlbm__context__stats__t__stct.html">lbm_context_stats_t</a> * Statistics, <span class="keyword">const</span> <span class="keywordtype">char</span> * Source, <span class="keywordtype">size_t</span> Length,</div><div class="line">                                                                          <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> ModuleID, <span class="keywordtype">void</span> * FormatClientData)</div><div class="line">{</div><div class="line">        <span class="keyword">const</span> <span class="keywordtype">char</span> * ptr;</div><div class="line">        <span class="keywordtype">char</span> value[1024];</div><div class="line">        lbmmon_format_csv_t * fmt;</div><div class="line">        <span class="keywordtype">size_t</span> idx;</div><div class="line">        <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> modid;</div><div class="line">        <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> modver;</div><div class="line">        <span class="keyword">const</span> <span class="keywordtype">size_t</span> * stat_layout = NULL;</div><div class="line">        <span class="keywordtype">size_t</span> stat_count = 0;</div><div class="line"></div><div class="line">        <span class="keywordflow">if</span> ((Statistics == NULL) || (Source == NULL) || (*Source == <span class="charliteral">&#39;\0&#39;</span>) || (Length == 0) || (FormatClientData == NULL) )</div><div class="line">        {</div><div class="line">                strncpy(ErrorString, <span class="stringliteral">&quot;Invalid parameter&quot;</span>, <span class="keyword">sizeof</span>(ErrorString));</div><div class="line">                <span class="keywordflow">return</span> (-1);</div><div class="line">        }</div><div class="line">        fmt = (lbmmon_format_csv_t *) FormatClientData;</div><div class="line"></div><div class="line">        modid = MODULE_ID(ModuleID);</div><div class="line">        modver = MODULE_VERSION(ModuleID);</div><div class="line">        <span class="keywordflow">if</span> (modid != LBMMON_FORMAT_CSV_MODULE_ID)</div><div class="line">        {</div><div class="line">                strncpy(ErrorString, <span class="stringliteral">&quot;Invalid module ID&quot;</span>, <span class="keyword">sizeof</span>(ErrorString));</div><div class="line">                <span class="keywordflow">return</span> (-1);</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="keywordflow">if</span> (fmt-&gt;mBuffer == NULL)</div><div class="line">        {</div><div class="line">                fmt-&gt;mBufferSize = 1024;</div><div class="line">                fmt-&gt;mBuffer = malloc(fmt-&gt;mBufferSize);</div><div class="line">                <span class="keywordflow">if</span> (fmt-&gt;mBuffer == NULL)</div><div class="line">                {</div><div class="line">                        lbmmon_format_csv_report_allocation_error(fmt-&gt;mBufferSize);</div><div class="line">                        <span class="keywordflow">return</span> (-1);    </div><div class="line">                }</div><div class="line">        }</div><div class="line">        <span class="keywordflow">if</span> (Length &gt;= fmt-&gt;mBufferSize)</div><div class="line">        {</div><div class="line">                fmt-&gt;mBufferSize = 2 * Length;</div><div class="line">                free(fmt-&gt;mBuffer);</div><div class="line">                fmt-&gt;mBuffer = malloc(fmt-&gt;mBufferSize);</div><div class="line">                <span class="keywordflow">if</span> (fmt-&gt;mBuffer == NULL)</div><div class="line">                {</div><div class="line">                        lbmmon_format_csv_report_allocation_error(fmt-&gt;mBufferSize);</div><div class="line">                        <span class="keywordflow">return</span> (-1);    </div><div class="line">                }</div><div class="line">        }</div><div class="line">        memset(fmt-&gt;mBuffer, 0, fmt-&gt;mBufferSize);</div><div class="line">        memcpy(fmt-&gt;mBuffer, Source, Length);</div><div class="line">        ptr = fmt-&gt;mBuffer;</div><div class="line">        <span class="keywordflow">if</span> (modver &gt;= LBMMON_FORMAT_CSV_VERSION_CURRENT)</div><div class="line">        {</div><div class="line">                stat_layout = csv_ctx_stat_layout[LBMMON_FORMAT_CSV_VERSION_CURRENT].layout;</div><div class="line">                stat_count = csv_ctx_stat_layout[LBMMON_FORMAT_CSV_VERSION_CURRENT].count;</div><div class="line">        }</div><div class="line">        <span class="keywordflow">else</span></div><div class="line">        {</div><div class="line">                stat_layout = csv_ctx_stat_layout[modver].layout;</div><div class="line">                stat_count = csv_ctx_stat_layout[modver].count;</div><div class="line">        }</div><div class="line">        memset((<span class="keywordtype">void</span> *) Statistics, 0, <span class="keyword">sizeof</span>(<a class="code" href="structlbm__context__stats__t__stct.html">lbm_context_stats_t</a>));</div><div class="line">        <span class="keywordflow">for</span> (idx = 0; idx &lt; stat_count; ++idx)</div><div class="line">        {</div><div class="line">                ptr = next_csv_value(ptr, value, <span class="keyword">sizeof</span>(value), fmt-&gt;mSeparator);</div><div class="line">                <span class="keywordflow">if</span> (ptr == NULL)</div><div class="line">                {</div><div class="line">                        strncpy(ErrorString, <span class="stringliteral">&quot;Data contains too few fields&quot;</span>, <span class="keyword">sizeof</span>(ErrorString));</div><div class="line">                        <span class="keywordflow">return</span> (-1);</div><div class="line">                }</div><div class="line">                *((<a class="code" href="lbm_8h.html#a72438fab15bf500af58d2a8a521e470d">lbm_ulong_t</a> *)(((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *) Statistics) + stat_layout[idx])) = convert_value(value);</div><div class="line">        }</div><div class="line">        <span class="keywordflow">return</span> (0);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> lbmmon_rcv_topic_format_csv_deserialize(<span class="keywordtype">size_t</span> * Count, <a class="code" href="structlbm__rcv__topic__stats__t__stct.html">lbm_rcv_topic_stats_t</a> * Statistics, <span class="keyword">const</span> <span class="keywordtype">char</span> * Source,</div><div class="line">                                                                                        <span class="keywordtype">size_t</span> Length, <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> ModuleID, <span class="keywordtype">void</span> * FormatClientData)</div><div class="line">{</div><div class="line">        <span class="keyword">const</span> <span class="keywordtype">char</span> * ptr;</div><div class="line">        <span class="keywordtype">char</span> value[1024];</div><div class="line">        lbmmon_format_csv_t * fmt;</div><div class="line">        <span class="keywordtype">size_t</span> idx;</div><div class="line">        <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> modid;</div><div class="line">        <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> modver;</div><div class="line">        <span class="keywordtype">char</span> topic[LBM_MSG_MAX_TOPIC_LEN + 1];</div><div class="line">        <span class="keywordtype">size_t</span> src_count;</div><div class="line"></div><div class="line">        <span class="keywordflow">if</span> ((Count == NULL) || (*Count == 0) || (Statistics == NULL) || (Source == NULL) || (*Source == <span class="charliteral">&#39;\0&#39;</span>) || (Length == 0) || (FormatClientData == NULL) )</div><div class="line">        {</div><div class="line">                strncpy(ErrorString, <span class="stringliteral">&quot;Invalid parameter&quot;</span>, <span class="keyword">sizeof</span>(ErrorString));</div><div class="line">                <span class="keywordflow">return</span> (-1);</div><div class="line">        }</div><div class="line">        fmt = (lbmmon_format_csv_t *) FormatClientData;</div><div class="line"></div><div class="line">        modid = MODULE_ID(ModuleID);</div><div class="line">        modver = MODULE_VERSION(ModuleID);</div><div class="line">        <span class="keywordflow">if</span> (modid != LBMMON_FORMAT_CSV_MODULE_ID)</div><div class="line">        {</div><div class="line">                strncpy(ErrorString, <span class="stringliteral">&quot;Invalid module ID&quot;</span>, <span class="keyword">sizeof</span>(ErrorString));</div><div class="line">                <span class="keywordflow">return</span> (-1);</div><div class="line">        }</div><div class="line">        <span class="keywordflow">if</span> (modver != LBMMON_FORMAT_CSV_VERSION_5)</div><div class="line">        {</div><div class="line">                strncpy(ErrorString, <span class="stringliteral">&quot;Unknown version&quot;</span>, <span class="keyword">sizeof</span>(ErrorString));</div><div class="line">                <span class="keywordflow">return</span> (-1);</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="keywordflow">if</span> (fmt-&gt;mBuffer == NULL)</div><div class="line">        {</div><div class="line">                fmt-&gt;mBufferSize = 1024;</div><div class="line">                fmt-&gt;mBuffer = malloc(fmt-&gt;mBufferSize);</div><div class="line">                <span class="keywordflow">if</span> (fmt-&gt;mBuffer == NULL)</div><div class="line">                {</div><div class="line">                        lbmmon_format_csv_report_allocation_error(fmt-&gt;mBufferSize);</div><div class="line">                        <span class="keywordflow">return</span> (-1);    </div><div class="line">                }</div><div class="line">        }</div><div class="line">        <span class="keywordflow">if</span> (Length &gt;= fmt-&gt;mBufferSize)</div><div class="line">        {</div><div class="line">                fmt-&gt;mBufferSize = 2 * Length;</div><div class="line">                free(fmt-&gt;mBuffer);</div><div class="line">                fmt-&gt;mBuffer = malloc(fmt-&gt;mBufferSize);</div><div class="line">                <span class="keywordflow">if</span> (fmt-&gt;mBuffer == NULL)</div><div class="line">                {</div><div class="line">                        lbmmon_format_csv_report_allocation_error(fmt-&gt;mBufferSize);</div><div class="line">                        <span class="keywordflow">return</span> (-1);    </div><div class="line">                }</div><div class="line">        }</div><div class="line">        memset(fmt-&gt;mBuffer, 0, fmt-&gt;mBufferSize);</div><div class="line">        memcpy(fmt-&gt;mBuffer, Source, Length);</div><div class="line">        ptr = fmt-&gt;mBuffer;</div><div class="line"></div><div class="line">        ptr = next_csv_value(ptr, value, <span class="keyword">sizeof</span>(value), fmt-&gt;mSeparator);</div><div class="line">        <span class="keywordflow">if</span> (ptr == NULL)</div><div class="line">        {</div><div class="line">                strncpy(ErrorString, <span class="stringliteral">&quot;Data contains too few fields&quot;</span>, <span class="keyword">sizeof</span>(ErrorString));</div><div class="line">                <span class="keywordflow">return</span> (-1);</div><div class="line">        }</div><div class="line">        strncpy(topic, value, <span class="keyword">sizeof</span>(topic));</div><div class="line">        ptr = next_csv_value(ptr, value, <span class="keyword">sizeof</span>(value), fmt-&gt;mSeparator);</div><div class="line">        <span class="keywordflow">if</span> (ptr == NULL)</div><div class="line">        {</div><div class="line">                strncpy(ErrorString, <span class="stringliteral">&quot;Data contains too few fields&quot;</span>, <span class="keyword">sizeof</span>(ErrorString));</div><div class="line">                <span class="keywordflow">return</span> (-1);</div><div class="line">        }</div><div class="line">        src_count = (size_t) convert_value(value);</div><div class="line">        <span class="keywordflow">if</span> (*Count &lt; src_count)</div><div class="line">        {</div><div class="line">                <span class="comment">/* Not enough entries. */</span></div><div class="line">                *Count = src_count;</div><div class="line">                <span class="keywordflow">return</span> (-2);</div><div class="line">        }</div><div class="line">        <span class="keywordflow">if</span> (src_count == 0)</div><div class="line">        {</div><div class="line">                memset((<span class="keywordtype">void</span> *) &amp;(Statistics[0]), 0, <span class="keyword">sizeof</span>(<a class="code" href="structlbm__rcv__topic__stats__t__stct.html">lbm_rcv_topic_stats_t</a>));</div><div class="line">                strncpy(Statistics[0].topic, topic, <span class="keyword">sizeof</span>(Statistics[idx].topic));</div><div class="line">                src_count = 1;</div><div class="line">        }</div><div class="line">        <span class="keywordflow">else</span></div><div class="line">        {</div><div class="line">                <span class="keywordflow">for</span> (idx = 0; idx &lt; src_count; ++idx)</div><div class="line">                {</div><div class="line">                        memset((<span class="keywordtype">void</span> *) &amp;(Statistics[idx]), 0, <span class="keyword">sizeof</span>(<a class="code" href="structlbm__rcv__topic__stats__t__stct.html">lbm_rcv_topic_stats_t</a>));</div><div class="line">                        strncpy(Statistics[idx].topic, topic, <span class="keyword">sizeof</span>(Statistics[idx].topic));</div><div class="line">                        Statistics[idx].<a class="code" href="structlbm__rcv__topic__stats__t__stct.html#a068955b59605ff12802ede240e15924b">flags</a> |= <a class="code" href="lbm_8h.html#ad6c9ae15fde189f4f9d178a4b3033521">LBM_RCV_TOPIC_STATS_FLAG_SRC_VALID</a>;</div><div class="line">                        ptr = next_csv_value(ptr, value, <span class="keyword">sizeof</span>(value), fmt-&gt;mSeparator);</div><div class="line">                        <span class="keywordflow">if</span> (ptr == NULL)</div><div class="line">                        {</div><div class="line">                                strncpy(ErrorString, <span class="stringliteral">&quot;Data contains too few fields&quot;</span>, <span class="keyword">sizeof</span>(ErrorString));</div><div class="line">                                <span class="keywordflow">return</span> (-1);</div><div class="line">                        }</div><div class="line">                        strncpy(Statistics[idx].source, (<span class="keywordtype">void</span> *) value, <span class="keyword">sizeof</span>(Statistics[idx].source));</div><div class="line">                        ptr = next_csv_value(ptr, value, <span class="keyword">sizeof</span>(value), fmt-&gt;mSeparator);</div><div class="line">                        <span class="keywordflow">if</span> (ptr == NULL)</div><div class="line">                        {</div><div class="line">                                strncpy(ErrorString, <span class="stringliteral">&quot;Data contains too few fields&quot;</span>, <span class="keyword">sizeof</span>(ErrorString));</div><div class="line">                                <span class="keywordflow">return</span> (-1);</div><div class="line">                        }</div><div class="line">                        lbmmon_format_csv_convert_from_hex((<span class="keywordtype">char</span> *) &amp;(Statistics[idx].otid), (<a class="code" href="lbm_8h.html#a09c7963deb485135d5bb29c84cd7d3a9">lbm_uint8_t</a> *) value, strlen(value));</div><div class="line">                        ptr = next_csv_value(ptr, value, <span class="keyword">sizeof</span>(value), fmt-&gt;mSeparator);</div><div class="line">                        <span class="keywordflow">if</span> (ptr == NULL)</div><div class="line">                        {</div><div class="line">                                strncpy(ErrorString, <span class="stringliteral">&quot;Data contains too few fields&quot;</span>, <span class="keyword">sizeof</span>(ErrorString));</div><div class="line">                                <span class="keywordflow">return</span> (-1);</div><div class="line">                        }</div><div class="line">                        Statistics[idx].<a class="code" href="structlbm__rcv__topic__stats__t__stct.html#a1c7eeb9a981d4be6ab9d989177f7e602">topic_idx</a> = (<a class="code" href="lbm_8h.html#a5dfd61ade99cd24213125c293b15ef4a">lbm_uint32_t</a>) convert_value(value);</div><div class="line">                }</div><div class="line">        }</div><div class="line">        *Count = src_count;</div><div class="line">        <span class="keywordflow">return</span> (0);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">/* Note: these are currently not used. */</span></div><div class="line"><span class="keyword">static</span> <span class="keywordtype">size_t</span> csv_wrcv_stat_offset_v5[] =</div><div class="line">{</div><div class="line">        offsetof(<a class="code" href="structlbm__wildcard__rcv__stats__t__stct.html">lbm_wildcard_rcv_stats_t</a>, pattern),</div><div class="line">        offsetof(<a class="code" href="structlbm__wildcard__rcv__stats__t__stct.html">lbm_wildcard_rcv_stats_t</a>, type)</div><div class="line">};</div><div class="line"><span class="keyword">static</span> <span class="keyword">const</span> lbmmon_csv_layout_t csv_wrcv_stat_layout[LBMMON_FORMAT_CSV_VERSION_CURRENT+1] =</div><div class="line">{</div><div class="line">        { NULL, 0 },</div><div class="line">        { NULL, 0 },</div><div class="line">        { NULL, 0 },</div><div class="line">        { NULL, 0 },</div><div class="line">        { NULL, 0 },</div><div class="line">        { csv_wrcv_stat_offset_v5, <span class="keyword">sizeof</span>(csv_wrcv_stat_offset_v5)/<span class="keyword">sizeof</span>(csv_wrcv_stat_offset_v5[0]) }</div><div class="line">};</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> lbmmon_wildcard_rcv_format_csv_deserialize(<a class="code" href="structlbm__wildcard__rcv__stats__t__stct.html">lbm_wildcard_rcv_stats_t</a> * Statistics, <span class="keyword">const</span> <span class="keywordtype">char</span> * Source,</div><div class="line">                                                                                           <span class="keywordtype">size_t</span> Length, <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> ModuleID, <span class="keywordtype">void</span> * FormatClientData)</div><div class="line">{</div><div class="line">        <span class="keyword">const</span> <span class="keywordtype">char</span> * ptr;</div><div class="line">        <span class="keywordtype">char</span> value[1024];</div><div class="line">        lbmmon_format_csv_t * fmt;</div><div class="line">        <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> modid;</div><div class="line">        <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> modver;</div><div class="line"></div><div class="line">        <span class="keywordflow">if</span> ((Statistics == NULL) || (Source == NULL) || (*Source == <span class="charliteral">&#39;\0&#39;</span>) || (Length == 0) || (FormatClientData == NULL) )</div><div class="line">        {</div><div class="line">                strncpy(ErrorString, <span class="stringliteral">&quot;Invalid parameter&quot;</span>, <span class="keyword">sizeof</span>(ErrorString));</div><div class="line">                <span class="keywordflow">return</span> (-1);</div><div class="line">        }</div><div class="line">        fmt = (lbmmon_format_csv_t *) FormatClientData;</div><div class="line"></div><div class="line">        modid = MODULE_ID(ModuleID);</div><div class="line">        modver = MODULE_VERSION(ModuleID);</div><div class="line">        <span class="keywordflow">if</span> (modid != LBMMON_FORMAT_CSV_MODULE_ID)</div><div class="line">        {</div><div class="line">                strncpy(ErrorString, <span class="stringliteral">&quot;Invalid module ID&quot;</span>, <span class="keyword">sizeof</span>(ErrorString));</div><div class="line">                <span class="keywordflow">return</span> (-1);</div><div class="line">        }</div><div class="line">        <span class="keywordflow">if</span> (modver != LBMMON_FORMAT_CSV_VERSION_5)</div><div class="line">        {</div><div class="line">                strncpy(ErrorString, <span class="stringliteral">&quot;Unknown version&quot;</span>, <span class="keyword">sizeof</span>(ErrorString));</div><div class="line">                <span class="keywordflow">return</span> (-1);</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="keywordflow">if</span> (fmt-&gt;mBuffer == NULL)</div><div class="line">        {</div><div class="line">                fmt-&gt;mBufferSize = 1024;</div><div class="line">                fmt-&gt;mBuffer = malloc(fmt-&gt;mBufferSize);</div><div class="line">                <span class="keywordflow">if</span> (fmt-&gt;mBuffer == NULL)</div><div class="line">                {</div><div class="line">                        lbmmon_format_csv_report_allocation_error(fmt-&gt;mBufferSize);</div><div class="line">                        <span class="keywordflow">return</span> (-1);    </div><div class="line">                }</div><div class="line">        }</div><div class="line">        <span class="keywordflow">if</span> (Length &gt;= fmt-&gt;mBufferSize)</div><div class="line">        {</div><div class="line">                fmt-&gt;mBufferSize = 2 * Length;</div><div class="line">                free(fmt-&gt;mBuffer);</div><div class="line">                fmt-&gt;mBuffer = malloc(fmt-&gt;mBufferSize);</div><div class="line">                <span class="keywordflow">if</span> (fmt-&gt;mBuffer == NULL)</div><div class="line">                {</div><div class="line">                        lbmmon_format_csv_report_allocation_error(fmt-&gt;mBufferSize);</div><div class="line">                        <span class="keywordflow">return</span> (-1);    </div><div class="line">                }</div><div class="line">        }</div><div class="line">        memset(fmt-&gt;mBuffer, 0, fmt-&gt;mBufferSize);</div><div class="line">        memcpy(fmt-&gt;mBuffer, Source, Length);</div><div class="line">        ptr = fmt-&gt;mBuffer;</div><div class="line">        memset((<span class="keywordtype">void</span> *) Statistics, 0, <span class="keyword">sizeof</span>(<a class="code" href="structlbm__wildcard__rcv__stats__t__stct.html">lbm_wildcard_rcv_stats_t</a>));</div><div class="line">        ptr = next_csv_value(ptr, value, <span class="keyword">sizeof</span>(value), fmt-&gt;mSeparator);</div><div class="line">        <span class="keywordflow">if</span> (ptr == NULL)</div><div class="line">        {</div><div class="line">                strncpy(ErrorString, <span class="stringliteral">&quot;Data contains too few fields&quot;</span>, <span class="keyword">sizeof</span>(ErrorString));</div><div class="line">                <span class="keywordflow">return</span> (-1);</div><div class="line">        }</div><div class="line">        strncpy(Statistics-&gt;<a class="code" href="structlbm__wildcard__rcv__stats__t__stct.html#a45dcb7dd7131525d0eaa525d013be336">pattern</a>, value, <span class="keyword">sizeof</span>(Statistics-&gt;<a class="code" href="structlbm__wildcard__rcv__stats__t__stct.html#a45dcb7dd7131525d0eaa525d013be336">pattern</a>));</div><div class="line">        ptr = next_csv_value(ptr, value, <span class="keyword">sizeof</span>(value), fmt-&gt;mSeparator);</div><div class="line">        <span class="keywordflow">if</span> (ptr == NULL)</div><div class="line">        {</div><div class="line">                strncpy(ErrorString, <span class="stringliteral">&quot;Data contains too few fields&quot;</span>, <span class="keyword">sizeof</span>(ErrorString));</div><div class="line">                <span class="keywordflow">return</span> (-1);</div><div class="line">        }</div><div class="line">        Statistics-&gt;<a class="code" href="structlbm__wildcard__rcv__stats__t__stct.html#a013c6df622d0fcc55e426242a3fae1f9">type</a> = (<a class="code" href="lbm_8h.html#a09c7963deb485135d5bb29c84cd7d3a9">lbm_uint8_t</a>) convert_value(value);</div><div class="line">        <span class="keywordflow">return</span> (0);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> lbmmon_format_csv_finish(<span class="keywordtype">void</span> * FormatClientData)</div><div class="line">{</div><div class="line">        <span class="keywordflow">if</span> (FormatClientData != NULL)</div><div class="line">        {</div><div class="line">                lbmmon_format_csv_t * data = (lbmmon_format_csv_t *) FormatClientData;</div><div class="line">                <span class="keywordflow">if</span> (data-&gt;mBuffer != NULL)</div><div class="line">                {</div><div class="line">                        free(data-&gt;mBuffer);</div><div class="line">                        data-&gt;mBuffer = NULL;</div><div class="line">                }</div><div class="line">                free(data);</div><div class="line">        }</div><div class="line">        <span class="keywordflow">return</span> (0);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> * lbmmon_format_csv_errmsg(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">        <span class="keywordflow">return</span> (ErrorString);</div><div class="line">}</div><div class="line"></div></div><!-- fragment --> </div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="lbmmon_examples.html">LBMMON Example source code</a></li><li class="navelem"><a class="el" href="lbmmon_csv_format.html">LBMMON CSV format module</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
