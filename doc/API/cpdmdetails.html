<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>UM C API: C PDM Details</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen_api.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">UM C API
   &#160;<span id="projectnumber">6.17</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('cpdmdetails.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">C PDM Details </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The LBM Pre-Defined Message(PDM) API provides a framework for applications to create message definitions and messages from those definitions. A PDM definition contains a list of field information describing the fields that will be contained in a message. A PDM message contains one or more <b>fields</b> with each field corresponding to a specific field information object in the definition. Field info consists of:</p><ul>
<li>A name (string names or integer names are supported).</li>
<li>A type (discussed below).</li>
<li>If the field is required. Message fields consist of:</li>
<li>A handle to the corresponding field info.</li>
<li>A value (particular to the field type). Each named field may only appear once in a message. If multiple fields of the same name and type are needed, an array field can be used to store multiple values for that field. PDM messages can be added as a field to other PDM messages by using the field type PDM_MESSAGE.</li>
</ul>
<dl class="section user"><dt>Field types</dt><dd>The following field types (and arrays thereof) are supported by PDM: <table class="doxtable">
<tr>
<th>Description </th><th>PDM Type </th><th>C Type  </th></tr>
<tr>
<td>Boolean </td><td>PDM_TYPE_BOOLEAN </td><td><code>uint8_t</code>  </td></tr>
<tr>
<td>8-bit signed integer </td><td>PDM_TYPE_INT8 </td><td><code>int8_t</code>  </td></tr>
<tr>
<td>8-bit unsigned integer </td><td>PDM_TYPE_UINT8 </td><td><code>uint8_t</code>  </td></tr>
<tr>
<td>16-bit signed integer </td><td>PDM_TYPE_INT16 </td><td><code>int16_t</code>  </td></tr>
<tr>
<td>16-bit unsigned integer </td><td>PDM_TYPE_UINT16 </td><td><code>uint16_t</code>  </td></tr>
<tr>
<td>32-bit signed integer </td><td>PDM_TYPE_INT32 </td><td><code>int32_t</code>  </td></tr>
<tr>
<td>32-bit unsigned integer </td><td>PDM_TYPE_UINT32 </td><td><code>uint32_t</code>  </td></tr>
<tr>
<td>64-bit signed integer </td><td>PDM_TYPE_INT64 </td><td><code>int64_t</code>  </td></tr>
<tr>
<td>64-bit unsigned integer </td><td>PDM_TYPE_UINT64 </td><td><code>uint64_t</code>  </td></tr>
<tr>
<td>Single-precision floating point </td><td>PDM_TYPE_FLOAT </td><td><code>float</code>  </td></tr>
<tr>
<td>Double-precision floating point </td><td>PDM_TYPE_DOUBLE </td><td><code>double</code>  </td></tr>
<tr>
<td>Decimal </td><td>PDM_TYPE_DECIMAL </td><td><code>struct decimal</code>  </td></tr>
<tr>
<td>Timestamp </td><td>PDM_TYPE_TIMESTAMP </td><td><code>struct timestamp</code>  </td></tr>
<tr>
<td>Fixed Length String </td><td>PDM_TYPE_FIX_STRING </td><td><code>char *</code>  </td></tr>
<tr>
<td>String </td><td>PDM_TYPE_STRING </td><td><code>char *</code>  </td></tr>
<tr>
<td>Fixed Length Unicode </td><td>PDM_TYPE_FIX_UNICODE </td><td><code>char *</code>  </td></tr>
<tr>
<td>Unicode </td><td>PDM_TYPE_UNICODE </td><td><code>char *</code>  </td></tr>
<tr>
<td>Nested PDM message </td><td>PDM_TYPE_MESSAGE </td><td><code>lbmpdm_msg_t *</code>  </td></tr>
<tr>
<td>Binary large object (BLOB) </td><td>PDM_TYPE_BLOB </td><td><code>void *</code>  </td></tr>
</table>
</dd></dl>
<dl class="section user"><dt></dt><dd>Note that arrays are homogeneous. </dd></dl>
<dl class="section user"><dt>Creating a message definition</dt><dd>A message definition must be defined (via <a class="el" href="lbmpdm_8h.html#afac501a4f9032d9aaab647524cd38ad0" title="Create a definition, with the passed number of fields. The num_fields is required to be at least 1...">lbmpdm_defn_create()</a>) before a message can be created. After creating the definition, field info can be added. Once all field information has been added to a definition, the definition must be finalized (<a class="el" href="lbmpdm_8h.html#a8bc605087565b0f37f794519686dceaf" title="make this definition final. This needs to be done before using it in a message. ">lbmpdm_defn_finalize()</a>). Each definition must be given an id to identify that definition (and messages created with the definition) to all consumers of the message. This allows all messaging participants to define the message and for PDM to quickly deserialize the messages. As an example, we will create a simple definition with two fields, a 32-bit signed integer and a string array. We will give the definition an id of 1000. <div class="fragment"><div class="line"><a class="code" href="lbmpdm_8h.html#ad126192d38c55f166c4906e07c208c94">lbmpdm_defn_t</a> *defn;</div><div class="line"><a class="code" href="lbmpdm_8h.html#af6cc4b7f75624df760d2e24e2a2dca86">lbmpdm_field_handle_t</a> h1;</div><div class="line"><a class="code" href="lbmpdm_8h.html#af6cc4b7f75624df760d2e24e2a2dca86">lbmpdm_field_handle_t</a> h2;</div><div class="line"><a class="code" href="structlbmpdm__field__info__attr__stct__t.html">lbmpdm_field_info_attr_t</a> info_attr;</div><div class="line"></div><div class="line"><span class="keywordflow">if</span> (<a class="code" href="lbmpdm_8h.html#afac501a4f9032d9aaab647524cd38ad0">lbmpdm_defn_create</a>(&amp;defn, 2, 1000, 1, 0, <a class="code" href="lbmpdm_8h.html#a01302cf1a32bbb0ef73dd71b58446820">PDM_DEFN_STR_FIELD_NAMES</a>) != <a class="code" href="lbmpdm_8h.html#ac8117591a466bb017280a0b25a14b26b">PDM_SUCCESS</a>) {</div><div class="line">  printf(<span class="stringliteral">&quot;Failed to create the definition&quot;</span>);</div><div class="line">  <span class="keywordflow">return</span>;</div><div class="line">}</div><div class="line"></div><div class="line">info_attr.flags = 0;</div><div class="line"></div><div class="line">h1 = <a class="code" href="lbmpdm_8h.html#af1471ec98610e1c24a28a35174b82d40">lbmpdm_defn_add_field_info_by_str_name</a>(defn, <span class="stringliteral">&quot;Field1&quot;</span>, <a class="code" href="lbmpdm_8h.html#af12a68f492b085464e66a0bfbe0e5517">PDM_TYPE_INT32</a>, NULL);</div><div class="line"></div><div class="line">info_attr.flags |= <a class="code" href="lbmpdm_8h.html#a72ee975501e090537a04fc0a932b0f46">PDM_FIELD_INFO_FLAG_REQ</a>;</div><div class="line">info_attr.<a class="code" href="structlbmpdm__field__info__attr__stct__t.html#a1d28469e5c7ef23ce9023e8246022d5b">req</a> = <a class="code" href="lbmpdm_8h.html#a9348a7b9edd19f99986e653feeff8583">PDM_FALSE</a>;</div><div class="line">h2 = <a class="code" href="lbmpdm_8h.html#af1471ec98610e1c24a28a35174b82d40">lbmpdm_defn_add_field_info_by_str_name</a>(defn, <span class="stringliteral">&quot;Field2&quot;</span>, <a class="code" href="lbmpdm_8h.html#a1ddbbc82479aca3fbb17d9a4f26d0f4a">PDM_TYPE_STRING_ARR</a>, &amp;info_attr);</div><div class="line"></div><div class="line"><a class="code" href="lbmpdm_8h.html#a8bc605087565b0f37f794519686dceaf">lbmpdm_defn_finalize</a>(defn);</div></div><!-- fragment --> </dd></dl>
<dl class="section user"><dt></dt><dd>The values of the info_attr struct will only be examined if the corresponding PDM_FIELD_INFO_FLAG_* has been set when it is passed to the add_field_info function. If NULL is passed instead of an info_attr pointer or any of the flags are not set, then default values will be used when adding the field info(which are: required = PDM_TRUE, fixed string length = 0, and number of array elements = 0). </dd></dl>
<dl class="section user"><dt></dt><dd>Once the definition exists, a message can be created and field values can be set in the message. The fields can be set by using the field handle that was returned from the call to the definition to add field info (or the field handle can be looked up from the definition). </dd></dl>
<dl class="section user"><dt>Sample code</dt><dd>Checking of return codes has been omitted but should be done during actual usage of pdm. <div class="fragment"><div class="line">{</div><div class="line"><span class="keywordtype">int</span> rc;</div><div class="line"><a class="code" href="lbmpdm_8h.html#aed27358686e15b88a7b8d8d5e1b843d9">lbmpdm_msg_t</a> *msg1;</div><div class="line"><a class="code" href="lbmpdm_8h.html#aed27358686e15b88a7b8d8d5e1b843d9">lbmpdm_msg_t</a> *msg2;</div><div class="line"><span class="keywordtype">char</span> *msg_buffer;</div><div class="line"><span class="keywordtype">int</span> msg_len;</div><div class="line"></div><div class="line">int32_t quant = 50;</div><div class="line"><span class="keywordtype">char</span> *str_arr[3] = {<span class="stringliteral">&quot;s1&quot;</span>, <span class="stringliteral">&quot;str2&quot;</span>, <span class="stringliteral">&quot;string3&quot;</span>};</div><div class="line"><span class="keywordtype">size_t</span> str_len_arr[3] = {3, 5, 8};</div><div class="line"><span class="keywordtype">size_t</span> str_arr_num_elem = 3;</div><div class="line"></div><div class="line">int32_t rcv_quant;</div><div class="line"><span class="keywordtype">size_t</span> rcv_quant_sz = <span class="keyword">sizeof</span>(int32_t);</div><div class="line"><span class="keywordtype">char</span> *rcv_str_arr[3];</div><div class="line">rcv_str_arr[0] = malloc(3);</div><div class="line">rcv_str_arr[1] = malloc(5);</div><div class="line">rcv_str_arr[2] = malloc(8);</div><div class="line"></div><div class="line"><a class="code" href="lbmpdm_8h.html#a0c8ea41ea50d7038b004e1a58d30e889">lbmpdm_msg_create</a>(&amp;msg1, defn, 0);</div><div class="line"></div><div class="line">rc = <a class="code" href="lbmpdm_8h.html#a5a9134bdf5a5afb783ed7b7682167bc6">lbmpdm_msg_set_field_value</a>(msg1, h1, &amp;quant, 0);</div><div class="line">rc = <a class="code" href="lbmpdm_8h.html#a6b09afd7fda35639d0d881402a10b41b">lbmpdm_msg_set_field_value_vec</a>(msg1, h2, str_arr, str_len_arr, str_arr_num_elem);</div><div class="line"></div><div class="line">msg_len = <a class="code" href="lbmpdm_8h.html#a155729726308268862c3b203bd6368e4">lbmpdm_msg_get_length</a>(msg1);</div><div class="line">msg_buffer = malloc(msg_len);</div><div class="line">rc = <a class="code" href="lbmpdm_8h.html#aaca8e29f68839a2e5acb3e33c66cae31">lbmpdm_msg_serialize</a>(msg1, msg_buffer);</div><div class="line"></div><div class="line">rc = <a class="code" href="lbmpdm_8h.html#a0c8ea41ea50d7038b004e1a58d30e889">lbmpdm_msg_create</a>(&amp;msg2, defn, 0);</div><div class="line">rc = <a class="code" href="lbmpdm_8h.html#a34ddcf116cbd1ac3eb66b0b807a6f8b2">lbmpdm_msg_deserialize</a>(msg2, msg_buffer, msg_len);</div><div class="line"></div><div class="line">rc = <a class="code" href="lbmpdm_8h.html#a20ac76203ec2a0ff03ced0ca4bade8b2">lbmpdm_msg_get_field_value</a>(msg2, h1, &amp;rcv_quant, &amp;rcv_quant_sz);</div><div class="line">rc = <a class="code" href="lbmpdm_8h.html#ab580aa15bd53732319084fca621f2420">lbmpdm_msg_get_field_value_vec</a>(msg2, h2, rcv_str_arr, str_len_arr, &amp;str_arr_num_elem);</div><div class="line"></div><div class="line">printf(<span class="stringliteral">&quot;rcv_quant = %d\n&quot;</span>, rcv_quant);</div><div class="line">printf(<span class="stringliteral">&quot;rcv_str_arr[0] = %s\n&quot;</span>, rcv_str_arr[0]);</div><div class="line">printf(<span class="stringliteral">&quot;rcv_str_arr[1] = %s\n&quot;</span>, rcv_str_arr[1]);</div><div class="line">printf(<span class="stringliteral">&quot;rcv_str_arr[2] = %s\n&quot;</span>, rcv_str_arr[2]);</div><div class="line"></div><div class="line">free(rcv_str_arr[0]);</div><div class="line">free(rcv_str_arr[1]);</div><div class="line">free(rcv_str_arr[2]);</div><div class="line"></div><div class="line">free(msg_buffer);</div><div class="line"></div><div class="line"><a class="code" href="lbmpdm_8h.html#af7a52a13d996c9dbcb881a9e1ba8f54d">lbmpdm_msg_delete</a>(msg1);</div><div class="line"><a class="code" href="lbmpdm_8h.html#af7a52a13d996c9dbcb881a9e1ba8f54d">lbmpdm_msg_delete</a>(msg2);</div><div class="line"><a class="code" href="lbmpdm_8h.html#a77f9511293bc55e02f3f27a7ea54b847">lbmpdm_defn_delete</a>(defn);</div><div class="line">}</div></div><!-- fragment --> </dd></dl>
<dl class="section user"><dt>Creating a message</dt><dd>Messages are created from definitions. The line above that is used to create the message: <div class="fragment"><div class="line"><a class="code" href="lbmpdm_8h.html#a0c8ea41ea50d7038b004e1a58d30e889">lbmpdm_msg_create</a>(&amp;msg1, defn, 0);</div></div><!-- fragment --> </dd></dl>
<dl class="section user"><dt>Setting field values in a message</dt><dd>Scalar (non-array) fields are added to a message via the <code><a class="el" href="lbmpdm_8h.html#a5a9134bdf5a5afb783ed7b7682167bc6" title="Sets a field value in a message. ">lbmpdm_msg_set_field_value()</a></code> to set a field's value using its handle. </dd></dl>
<dl class="section user"><dt></dt><dd>When setting a field's value, data of the appropriate type must be supplied. A 0 length can be supplied for fixed length fields but it is recommended to pass the correct size in bytes to ensure the correct number of bytes are copied into the message. As an example, to set a 32-bit signed integer field to a message: <div class="fragment"><div class="line">rc = <a class="code" href="lbmpdm_8h.html#a5a9134bdf5a5afb783ed7b7682167bc6">lbmpdm_msg_set_field_value</a>(msg1, h1, &amp;quant, 0);</div></div><!-- fragment --> </dd></dl>
<dl class="section user"><dt></dt><dd>Setting a string value is done by passing the char * and the actual size of the string in bytes (normally this is the num_chars + 1 to account for the null character but for UNICODE types this value will be larger). For the MESSAGE type, the value argument should be a lbmpdm_msg_t * and the length argument should be sizeof(lbmpdm_msg_t *) because the setter will attempt to access the lbmpdm_msg_t via the pointer and then serialize it to bytes via its serialize method. </dd></dl>
<dl class="section user"><dt>Setting the value of array fields in a message</dt><dd>To set an array's value in a message, call the <code><a class="el" href="lbmpdm_8h.html#a6b09afd7fda35639d0d881402a10b41b" title="Sets an array of field values in a message. ">lbmpdm_msg_set_field_value_vec()</a></code> API function. </dd></dl>
<dl class="section user"><dt></dt><dd>As an example, the code that sets the string array field value is: <div class="fragment"><div class="line">rc = <a class="code" href="lbmpdm_8h.html#a6b09afd7fda35639d0d881402a10b41b">lbmpdm_msg_set_field_value_vec</a>(msg1, h2, str_arr, str_len_arr, str_arr_num_elem);</div></div><!-- fragment --> </dd></dl>
<dl class="section user"><dt></dt><dd>Setting an array field value requires an addition number of elements parameter and expects an array of lengths (one for each element in the array). Again, string types should pass a length array that indicates the size in bytes of each string rather than the number of characters as shown in the example code which uses sizes a length array of {3, 5, 8}. </dd></dl>
<dl class="section user"><dt>Serializing the message</dt><dd>Once a PDM message is constructed, it must be serialized for transmission. The API function <a class="el" href="lbmpdm_8h.html#aaca8e29f68839a2e5acb3e33c66cae31" title="Serialize a message to a buffer. The message that is passed in is serialized into the caller&#39;s suppli...">lbmpdm_msg_serialize()</a> serializes the message to the buffer provided. The length of the serialized data may be obtained via the API function <a class="el" href="lbmpdm_8h.html#a155729726308268862c3b203bd6368e4" title="Gets the exact length of the serialized message. This can be used to allocate a buffer of the exact l...">lbmpdm_msg_get_length()</a>. For example, a constructed message may be sent by: <div class="fragment"><div class="line">rc = <a class="code" href="lbmpdm_8h.html#aaca8e29f68839a2e5acb3e33c66cae31">lbmpdm_msg_serialize</a>(msg1, msg_buffer);</div><div class="line">rc = <a class="code" href="lbm_8h.html#a91f4b9cb04fe1323ec56833211cc5cb7">lbm_src_send</a>(src, msg_buffer, msg_len, 0);</div></div><!-- fragment --> </dd></dl>
<dl class="section user"><dt>Deserializing a message</dt><dd>When the bytes for a pdm message are received, they must be deserialized so that individual fields can be accessed. The lbmpdm_msg_t should be reused when possible to deserialize multiple incoming messages. This is done via the <a class="el" href="lbmpdm_8h.html#a34ddcf116cbd1ac3eb66b0b807a6f8b2" title="Deserialize the associated buffer into a newly created message. ">lbmpdm_msg_deserialize()</a> API function: <div class="fragment"><div class="line">rc = <a class="code" href="lbmpdm_8h.html#a34ddcf116cbd1ac3eb66b0b807a6f8b2">lbmpdm_msg_deserialize</a>(msg2, msg_buffer, msg_len);</div><div class="line"><span class="comment">// Deserializing an lbm message would be the following</span></div><div class="line"><span class="comment">//rc = lbmpdm_msg_deserialize(msg2, lbmmsg-&gt;data, lbmmsg-&gt;len);</span></div></div><!-- fragment --> </dd></dl>
<dl class="section user"><dt>Fetching fields from a message</dt><dd>When fetching a field from a message, the field should be accessed by its handle. </dd></dl>
<dl class="section user"><dt></dt><dd>Scalar (non-array) fields may be retrieved via the <code><a class="el" href="lbmpdm_8h.html#a20ac76203ec2a0ff03ced0ca4bade8b2" title="Gets a field value from the message. ">lbmpdm_msg_get_field_value()</a></code>. <div class="fragment"><div class="line">rc = <a class="code" href="lbmpdm_8h.html#a20ac76203ec2a0ff03ced0ca4bade8b2">lbmpdm_msg_get_field_value</a>(msg2, h1, &amp;rcv_quant, &amp;rcv_quant_sz);</div></div><!-- fragment --> </dd></dl>
<dl class="section user"><dt></dt><dd>Array fields may be retrieved via the <code><a class="el" href="lbmpdm_8h.html#ab580aa15bd53732319084fca621f2420" title="Gets an array of field values from the message. ">lbmpdm_msg_get_field_value_vec()</a></code>. <div class="fragment"><div class="line">rc = <a class="code" href="lbmpdm_8h.html#ab580aa15bd53732319084fca621f2420">lbmpdm_msg_get_field_value_vec</a>(msg2, h2, rcv_str_arr, str_len_arr, &amp;str_arr_num_elem);</div></div><!-- fragment --> </dd></dl>
<dl class="section user"><dt></dt><dd>When accessing a field, it is expected that value pointer being provided already points to an area of sufficient size to hold the field's value. The len argument should indicate the size or sizes (for array types) of the available space. If the size is not sufficient, a PDM_FAILURE will be returned and the failing len argument will be updated to indicate the actual size needed. For array types, the same logic applies to the number of elements argument, where if the number of allocated elements indicated by the input parameter is insufficient, the call will fail and the value will be updated to indicate the needed number of elements. For the MESSAGE type, the value argument should be a lbmpdm_msg_t * that points to an empty lbmpdm_msg_t which has been created with a NULL definition. The length argument should be sizeof(lbmpdm_msg_t *) because the setter will attempt to access the lbmpdm_msg_t via the pointer and then deserialize the bytes into it. </dd></dl>
<dl class="section user"><dt>Disposing of a message and definition</dt><dd>Once a PDM message (created by either the <a class="el" href="lbmpdm_8h.html#a0c8ea41ea50d7038b004e1a58d30e889" title="creates a message with the specified definition ">lbmpdm_msg_create()</a> or <a class="el" href="lbmpdm_8h.html#a34ddcf116cbd1ac3eb66b0b807a6f8b2" title="Deserialize the associated buffer into a newly created message. ">lbmpdm_msg_deserialize()</a> API calls) is no longer needed, it must be deleted to avoid a resource leak. This is done via the <a class="el" href="lbmpdm_8h.html#af7a52a13d996c9dbcb881a9e1ba8f54d" title="Delete an lbmpdm_msg_t object and all associated resources (except the defn) This deletes a previousl...">lbmpdm_msg_delete()</a> API call. <div class="fragment"><div class="line"><a class="code" href="lbmpdm_8h.html#af7a52a13d996c9dbcb881a9e1ba8f54d">lbmpdm_msg_delete</a>(msg1);</div><div class="line"><a class="code" href="lbmpdm_8h.html#af7a52a13d996c9dbcb881a9e1ba8f54d">lbmpdm_msg_delete</a>(msg2);</div><div class="line"><a class="code" href="lbmpdm_8h.html#a77f9511293bc55e02f3f27a7ea54b847">lbmpdm_defn_delete</a>(defn);</div></div><!-- fragment --> </dd></dl>
<dl class="section user"><dt>Error information</dt><dd>All functions return a value to indicate the success of failure of the operation. Most return PDM_SUCCESS to indicate success, or PDM_FAILURE otherwise. Consult the individual function documentation for exceptions. </dd></dl>
<dl class="section user"><dt></dt><dd>The function <a class="el" href="lbmpdm_8h.html#ad97f807e5d28af6d72695012e7e24d10" title="Return an ASCII string containing the error message last encountered by this thread. ">lbmpdm_errmsg()</a> will return a descriptive error message. </dd></dl>
<dl class="section user"><dt>Additional Information</dt><dd>When adding arrays to a definition, an array length can be specified in the info attributes. A 0 length means that the array's length is variable and will be determined when the array is set in the actual message. A positive number for the array length will create a fixed array of that size. </dd></dl>
<dl class="section user"><dt></dt><dd>When adding PDM_TYPE_FIX_STRING, PDM_TYPE_FIX_STRING_ARR, PDM_TYPE_FIX_UNICODE, or PDM_TYPE_FIX_UNICODE_ARR, field information to a definition, a fixed string length must be specified in the info attributes. The value should be the number of characters in the string (excluding the null character). The appropriate amount of space will be then allocated in the message for each of the expected fixed strings (for the FIX_STRING types, there will be num_chars + 1 bytes allocated per string and for the FIX_UNICODE types, there will be 4 * num_chars + 1 bytes allocated per string). By using fixed strings for a field, as well as making the field required (and specifying a fixed size for the array types), the best performance and size can be achieved because the field will be optimized as a "fixed required" field. </dd></dl>
<dl class="section user"><dt></dt><dd>When setting and getting field values of type FIX_STRING and FIX_UNICODE (and the corresponding arrays), extra care should be made to ensure the len parameters are correct. When setting the value, the len should indicate the actual number of bytes represented by the string that should be copied (which should include the null character). If this is less than the size indicated to the definition when setting up the field information, the rest of the space will be zeroed out. When getting the value, enough space should be allocated for the entire size of the fixed string field, which as described above should be the number of characters + 1 for the string types and 4 * the number of characters + 1 for the unicode types. </dd></dl>
<dl class="section user"><dt></dt><dd>An additional way to get a field value from a message is by using the lbmpdm_msg_get_field_value_stct method, which does not require the storage and lengths to be allocated beforehand but instead will allocate everything during the call and set all of the appropriate values of the provided lbmpdm_field_value_t. Although simpler to use, the drawback is not being able to use preallocated space to hold the field value as the other get_field_value methods are able to do. It also requires the application to manage the field_value_t and call the field_value_stct_delete method when finished to clean up the allocated memory inside the field_value_t.</dd></dl>
<p><br />
<br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 <br />
 </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
