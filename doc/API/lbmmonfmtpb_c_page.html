<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>UM C API: Source code for lbmmonfmtpb.c</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen_api.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">UM C API
   &#160;<span id="projectnumber">6.14</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('lbmmonfmtpb_c_page.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">Source code for lbmmonfmtpb.c </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><div class="fragment"><div class="line"><span class="comment">/*</span></div><div class="line"><span class="comment">  All of the documentation and software included in this and any</span></div><div class="line"><span class="comment">  other Informatica Corporation Ultra Messaging Releases</span></div><div class="line"><span class="comment">  Copyright (C) Informatica Corporation. All rights reserved.</span></div><div class="line"><span class="comment"></span></div><div class="line"><span class="comment">  Redistribution and use in source and binary forms, with or without</span></div><div class="line"><span class="comment">  modification, are permitted only as covered by the terms of a</span></div><div class="line"><span class="comment">  valid software license agreement with Informatica Corporation.</span></div><div class="line"><span class="comment"></span></div><div class="line"><span class="comment">  Copyright (C) 2004-2021, Informatica Corporation. All Rights Reserved.</span></div><div class="line"><span class="comment"></span></div><div class="line"><span class="comment">  THE SOFTWARE IS PROVIDED &quot;AS IS&quot; AND INFORMATICA DISCLAIMS ALL WARRANTIES</span></div><div class="line"><span class="comment">  EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION, ANY IMPLIED WARRANTIES OF</span></div><div class="line"><span class="comment">  NON-INFRINGEMENT, MERCHANTABILITY OR FITNESS FOR A PARTICULAR</span></div><div class="line"><span class="comment">  PURPOSE.  INFORMATICA DOES NOT WARRANT THAT USE OF THE SOFTWARE WILL BE</span></div><div class="line"><span class="comment">  UNINTERRUPTED OR ERROR-FREE.  INFORMATICA SHALL NOT, UNDER ANY CIRCUMSTANCES, BE</span></div><div class="line"><span class="comment">  LIABLE TO LICENSEE FOR LOST PROFITS, CONSEQUENTIAL, INCIDENTAL, SPECIAL OR</span></div><div class="line"><span class="comment">  INDIRECT DAMAGES ARISING OUT OF OR RELATED TO THIS AGREEMENT OR THE</span></div><div class="line"><span class="comment">  TRANSACTIONS CONTEMPLATED HEREUNDER, EVEN IF INFORMATICA HAS BEEN APPRISED OF</span></div><div class="line"><span class="comment">  THE LIKELIHOOD OF SUCH DAMAGES.</span></div><div class="line"><span class="comment"></span></div><div class="line"><span class="comment">  */</span></div><div class="line"></div><div class="line"><span class="preprocessor">#ifdef __VOS__</span></div><div class="line"><span class="preprocessor">#define _POSIX_C_SOURCE 200112L</span></div><div class="line"><span class="preprocessor">#include &lt;sys/time.h&gt;</span></div><div class="line"><span class="preprocessor">#endif</span></div><div class="line"></div><div class="line"><span class="preprocessor">#include &lt;stdlib.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;string.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;stddef.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;time.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;limits.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;errno.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;ctype.h&gt;</span></div><div class="line"><span class="preprocessor">#ifdef _WIN32</span></div><div class="line"><span class="preprocessor">#define strcasecmp stricmp</span></div><div class="line"><span class="preprocessor">#define snprintf _snprintf</span></div><div class="line"><span class="preprocessor">#else</span></div><div class="line"><span class="preprocessor">#endif</span></div><div class="line"><span class="preprocessor">#if defined(__TANDEM)</span></div><div class="line"><span class="preprocessor">#include &lt;strings.h&gt;</span></div><div class="line"><span class="preprocessor">#endif</span></div><div class="line"></div><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="lbmmon_8h.html">lbm/lbmmon.h</a>&gt;</span></div><div class="line"><span class="preprocessor">#include &quot;lbmmon_int.h&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;lbmcommon.h&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;mullog.h&quot;</span></div><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="lbmaux_8h.html">lbm/lbmaux.h</a>&gt;</span></div><div class="line"><span class="preprocessor">#include &quot;lbmconf.h&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;lbmmon_store_filter_options.h&quot;</span></div><div class="line"></div><div class="line"><span class="comment">/* Generated structures have unnamed unions which C99 complains about but are valid in C11 */</span></div><div class="line">LBM_GNU_PRAGMA(GCC diagnostic ignored <span class="stringliteral">&quot;-Wpedantic&quot;</span>)</div><div class="line"><span class="preprocessor">#include &quot;gen/ums_mon_filters.pb-c.h&quot;</span></div><div class="line">LBM_GNU_PRAGMA_RESET()</div><div class="line"></div><div class="line">static const <a class="code" href="structlbmmon__format__func__t__stct.html">lbmmon_format_func_t</a> LBMMON_FORMAT_PB =</div><div class="line">{</div><div class="line">        lbmmon_format_pb_init,</div><div class="line">        lbmmon_format_pb_apply_format_options,</div><div class="line">        lbmmon_rcv_format_pb_serialize,</div><div class="line">        lbmmon_src_format_pb_serialize,</div><div class="line">        lbmmon_rcv_format_pb_deserialize,</div><div class="line">        lbmmon_src_format_pb_deserialize,</div><div class="line">        lbmmon_format_pb_finish,</div><div class="line">        lbmmon_format_pb_errmsg,</div><div class="line">        lbmmon_evq_format_pb_serialize,</div><div class="line">        lbmmon_evq_format_pb_deserialize,</div><div class="line">        lbmmon_ctx_format_pb_serialize,</div><div class="line">        lbmmon_ctx_format_pb_deserialize,</div><div class="line">        lbmmon_rcv_topic_format_pb_serialize,</div><div class="line">        lbmmon_rcv_topic_format_pb_deserialize,</div><div class="line">        lbmmon_wildcard_rcv_format_pb_serialize,</div><div class="line">        lbmmon_wildcard_rcv_format_pb_deserialize,</div><div class="line">        lbmmon_store_format_pb_serialize,</div><div class="line">        lbmmon_store_format_pb_deserialize,</div><div class="line">        lbmmon_store_format_pb_filter_options,</div><div class="line">        lbmmon_store_free_unpacked,</div><div class="line">        lbmmon_gateway_format_pb_serialize,</div><div class="line">        lbmmon_gateway_format_pb_deserialize,</div><div class="line">        lbmmon_gateway_free_unpacked</div><div class="line">};</div><div class="line"></div><div class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span></div><div class="line">{</div><div class="line">        <span class="keywordtype">int</span> mPassthrough;</div><div class="line">        Lbmmon_Filter__UMSMonMsg__Stats__ReceiverTransport__TCP mRcvTcpFilter;</div><div class="line">        Lbmmon_Filter__UMSMonMsg__Stats__ReceiverTransport__LBTRM mRcvLbtrmFilter;</div><div class="line">        Lbmmon_Filter__UMSMonMsg__Stats__ReceiverTransport__LBTRU mRcvLbtruFilter;</div><div class="line">        Lbmmon_Filter__UMSMonMsg__Stats__ReceiverTransport__LBTIPC mRcvLbtipcFilter;</div><div class="line">        Lbmmon_Filter__UMSMonMsg__Stats__ReceiverTransport__LBTSMX mRcvLbtsmxFilter;</div><div class="line">        Lbmmon_Filter__UMSMonMsg__Stats__SourceTransport__TCP mSrcTcpFilter;</div><div class="line">        Lbmmon_Filter__UMSMonMsg__Stats__SourceTransport__LBTRM mSrcLbtrmFilter;</div><div class="line">        Lbmmon_Filter__UMSMonMsg__Stats__SourceTransport__LBTRU mSrcLbtruFilter;</div><div class="line">        Lbmmon_Filter__UMSMonMsg__Stats__SourceTransport__LBTIPC mSrcLbtipcFilter;</div><div class="line">        Lbmmon_Filter__UMSMonMsg__Stats__SourceTransport__LBTSMX mSrcLbtsmxFilter;</div><div class="line">        Lbmmon_Filter__UMSMonMsg__Stats__EventQueue mEventQueueFilter;</div><div class="line">        Lbmmon_Filter__UMSMonMsg__Stats__Context mContextFilter;</div><div class="line">        Lbmmon_FilterMessage ** filters;</div><div class="line">} lbmmon_format_pb_t;</div><div class="line"></div><div class="line"><span class="preprocessor">#define LBMMON_NUM_FILTER_MSGS 12</span></div><div class="line"></div><div class="line"><span class="keyword">static</span> <span class="keywordtype">char</span> ErrorString[LBM_CONFIG_MAX_LINE_LEN];</div><div class="line"></div><div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> lbmmon_format_pb_report_allocation_error(<span class="keywordtype">size_t</span> Size)</div><div class="line">{</div><div class="line">        snprintf(ErrorString, <span class="keyword">sizeof</span>(ErrorString), <span class="stringliteral">&quot;Unable to allocate %u bytes&quot;</span>, (<span class="keywordtype">unsigned</span>)Size);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">const</span> <a class="code" href="structlbmmon__format__func__t__stct.html">lbmmon_format_func_t</a> * lbmmon_format_pb_module(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">        <span class="keywordflow">return</span> (&amp;LBMMON_FORMAT_PB);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> typeFor(<span class="keywordtype">char</span> * type_name)</div><div class="line">{</div><div class="line">        <span class="keywordtype">int</span> type = 0;</div><div class="line">        <span class="keywordflow">if</span> (strcasecmp(type_name, <span class="stringliteral">&quot;LBMMON_FORMAT_FILTER_OFF&quot;</span>) == 0) {</div><div class="line">                type = <a class="code" href="lbmmon_8h.html#a91178cae7174c2583258aac6325a4fef">LBMMON_FORMAT_FILTER_OFF</a>;</div><div class="line">        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcasecmp(type_name, <span class="stringliteral">&quot;LBMMON_FORMAT_FILTER_ON&quot;</span>) == 0) {</div><div class="line">                type = <a class="code" href="lbmmon_8h.html#a7e0c40fbe54470fae114f1ac18bfd21f">LBMMON_FORMAT_FILTER_ON</a>;</div><div class="line">        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcasecmp(type_name, <span class="stringliteral">&quot;LBMMON_FORMAT_FILTER_EQ&quot;</span>) == 0) {</div><div class="line">                type = <a class="code" href="lbmmon_8h.html#af5ca4b2bdb98ef4da291adc02ac98242">LBMMON_FORMAT_FILTER_EQ</a>;</div><div class="line">        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcasecmp(type_name, <span class="stringliteral">&quot;LBMMON_FORMAT_FILTER_NE&quot;</span>) == 0) {</div><div class="line">                type = <a class="code" href="lbmmon_8h.html#ae26224534ba968f50cc5b42261009390">LBMMON_FORMAT_FILTER_NE</a>;</div><div class="line">        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcasecmp(type_name, <span class="stringliteral">&quot;LBMMON_FORMAT_FILTER_LT&quot;</span>) == 0) {</div><div class="line">                type = <a class="code" href="lbmmon_8h.html#af0846f5b246636408d734ba797a47acb">LBMMON_FORMAT_FILTER_LT</a>;</div><div class="line">        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcasecmp(type_name, <span class="stringliteral">&quot;LBMMON_FORMAT_FILTER_GT&quot;</span>) == 0) {</div><div class="line">                type = <a class="code" href="lbmmon_8h.html#a8e3d87ef6c33dbb1fd47f41d551c25d0">LBMMON_FORMAT_FILTER_GT</a>;</div><div class="line">        } <span class="keywordflow">else</span> {</div><div class="line">                <span class="keywordflow">return</span> (-1);</div><div class="line">        }</div><div class="line">        <span class="keywordflow">return</span> type;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">/* Return 1 if filter applied, -1 if error, 0 otherwise. */</span></div><div class="line"><span class="keywordtype">int</span> lbmmon_apply_filter(<span class="keywordtype">char</span> * message, <span class="keyword">const</span> ProtobufCMessageDescriptor *descriptor, <span class="keywordtype">char</span> *key, <span class="keywordtype">char</span> *value)</div><div class="line">{</div><div class="line">        <span class="keywordtype">size_t</span> message_len;</div><div class="line">        <span class="keywordtype">char</span> name[LBMMON_MAX_LEN];</div><div class="line">        <span class="keywordtype">char</span> *last;</div><div class="line">        <span class="keywordtype">int</span> i;</div><div class="line">        <span class="keywordtype">char</span> * typeString = NULL;</div><div class="line">        <span class="keywordtype">char</span> * valueString = NULL;</div><div class="line">        <span class="keywordtype">int</span> type = 0;</div><div class="line"></div><div class="line">        <span class="keywordflow">if</span> (descriptor == NULL) {</div><div class="line">                snprintf(ErrorString, <span class="keyword">sizeof</span>(ErrorString), <span class="stringliteral">&quot;[lbmmon_apply_filter] Descriptor was NULL.\n&quot;</span>);</div><div class="line">                <span class="keywordflow">return</span> (-1);</div><div class="line">        }</div><div class="line">        message_len = strlen(descriptor-&gt;name);</div><div class="line">        <span class="keywordflow">if</span> (strncasecmp(descriptor-&gt;name, key, message_len) == 0) {</div><div class="line">                strncpy(name, &amp;key[message_len + 1], LBMMON_MAX_LEN);</div><div class="line">                MUL_DEBUG(LBM_DEBUG_LBMMON, (<span class="stringliteral">&quot;[lbmmon_apply_filter] Key[%s] Value[%s] \n&quot;</span>, name, value));</div><div class="line"></div><div class="line">                <span class="keywordflow">for</span> (i = 0; i &lt; descriptor-&gt;n_fields; i++) {</div><div class="line">                        <span class="keywordflow">if</span> (strcasecmp(name, descriptor-&gt;fields[i].name) == 0) {</div><div class="line"></div><div class="line">                                typeString = mul_strtok_r(value, <span class="stringliteral">&quot;(&quot;</span>, &amp;last);</div><div class="line">                                <span class="keywordflow">if</span> (typeString == NULL) {</div><div class="line">                                        snprintf(ErrorString, <span class="keyword">sizeof</span>(ErrorString), <span class="stringliteral">&quot;[lbmmon_apply_filter] Invalid option for %s given Value[%s]\n&quot;</span>, key, value);</div><div class="line">                                        <span class="keywordflow">return</span> (-1);</div><div class="line">                                }</div><div class="line">                                type = typeFor(typeString);</div><div class="line">                                <span class="keywordflow">if</span> (type == -1) {</div><div class="line">                                        snprintf(ErrorString, <span class="keyword">sizeof</span>(ErrorString), <span class="stringliteral">&quot;[lbmmon_apply_filter] Invalid option for %s given Value[%s]\n&quot;</span>, key, value);</div><div class="line">                                        <span class="keywordflow">return</span> (-1);</div><div class="line">                                }</div><div class="line">                                valueString = mul_strtok_r(0, <span class="stringliteral">&quot;)&quot;</span>, &amp;last);</div><div class="line">                                <span class="keywordflow">if</span> ((type &gt;= <a class="code" href="lbmmon_8h.html#af5ca4b2bdb98ef4da291adc02ac98242">LBMMON_FORMAT_FILTER_EQ</a>) &amp;&amp; (valueString == NULL)) {</div><div class="line">                                        snprintf(ErrorString, <span class="keyword">sizeof</span>(ErrorString), <span class="stringliteral">&quot;[lbmmon_apply_filter] Value %s must be in the form %s(number);\n&quot;</span>, typeString, typeString);</div><div class="line">                                        <span class="keywordflow">return</span> (-1);</div><div class="line">                                }</div><div class="line"></div><div class="line">                                <span class="keywordflow">switch</span> (descriptor-&gt;fields[i].type)</div><div class="line">                                {</div><div class="line">                                <span class="keywordflow">case</span> PROTOBUF_C_TYPE_UINT64:</div><div class="line">                                <span class="keywordflow">case</span> PROTOBUF_C_TYPE_INT64:</div><div class="line">                                <span class="keywordflow">case</span> PROTOBUF_C_TYPE_SINT64:</div><div class="line">                                <span class="keywordflow">case</span> PROTOBUF_C_TYPE_SFIXED64:</div><div class="line">                                <span class="keywordflow">case</span> PROTOBUF_C_TYPE_FIXED64:</div><div class="line">                                {</div><div class="line">                                        lbmmon_filter_uint64_t * filter = ((lbmmon_filter_uint64_t *)(message + descriptor-&gt;fields[i].offset));</div><div class="line">                                        filter-&gt;type = type;</div><div class="line">                                        <span class="keywordflow">if</span> (valueString != NULL) {</div><div class="line">                                                <span class="keywordflow">if</span> ((lbm_conf_parse_uint64(&amp;filter-&gt;value, valueString) != <a class="code" href="lbm_8h.html#a06fc87d81c62e9abb8790b6e5713c55ba948616ca0c841dc522b196a23736b639">LBM_OK</a>)) {</div><div class="line">                                                        snprintf(ErrorString, <span class="keyword">sizeof</span>(ErrorString), <span class="stringliteral">&quot;[lbmmon_apply_filter] Value %s must be a 64-bit number in the form %s(number);\n&quot;</span>, valueString, typeString);</div><div class="line">                                                        <span class="keywordflow">return</span> (-1);</div><div class="line">                                                }</div><div class="line">                                        } <span class="keywordflow">else</span> {</div><div class="line">                                                filter-&gt;value = 0;</div><div class="line">                                        }</div><div class="line">                                        MUL_DEBUG(LBM_DEBUG_LBMMON, (<span class="stringliteral">&quot;[lbmmon_apply_filter] filter.type[%d] filter.value[%lu] \n&quot;</span>, filter-&gt;type, filter-&gt;value));</div><div class="line">                                        <span class="keywordflow">return</span> (1);</div><div class="line">                                }</div><div class="line">                                <span class="keywordflow">case</span> PROTOBUF_C_TYPE_UINT32:</div><div class="line">                                <span class="keywordflow">case</span> PROTOBUF_C_TYPE_INT32:</div><div class="line">                                <span class="keywordflow">case</span> PROTOBUF_C_TYPE_SINT32:</div><div class="line">                                <span class="keywordflow">case</span> PROTOBUF_C_TYPE_SFIXED32:</div><div class="line">                                <span class="keywordflow">case</span> PROTOBUF_C_TYPE_FIXED32:</div><div class="line">                                <span class="keywordflow">case</span> PROTOBUF_C_TYPE_STRING:</div><div class="line">                                {</div><div class="line">                                        <span class="comment">/* Not currently used so any code here would be untestable */</span></div><div class="line">                                }</div><div class="line">                                <span class="keywordflow">case</span> PROTOBUF_C_TYPE_BYTES:</div><div class="line">                                <span class="keywordflow">case</span> PROTOBUF_C_TYPE_FLOAT:</div><div class="line">                                <span class="keywordflow">case</span> PROTOBUF_C_TYPE_DOUBLE:</div><div class="line">                                <span class="keywordflow">case</span> PROTOBUF_C_TYPE_BOOL:</div><div class="line">                                <span class="keywordflow">case</span> PROTOBUF_C_TYPE_ENUM:</div><div class="line">                                <span class="keywordflow">case</span> PROTOBUF_C_TYPE_MESSAGE:</div><div class="line">                                {</div><div class="line">                                        <span class="comment">/* Unsupported Field Types */</span></div><div class="line">                                }</div><div class="line"></div><div class="line">                                }</div><div class="line">                                snprintf(ErrorString, <span class="keyword">sizeof</span>(ErrorString), <span class="stringliteral">&quot;[lbmmon_apply_filter] Invalid Key %s Value %s\n&quot;</span>, key, value);</div><div class="line">                                <span class="keywordflow">return</span> (-1);</div><div class="line">                        }</div><div class="line">                }</div><div class="line">                <span class="comment">/* Intentionally don&#39;t complain about field names we don&#39;t recognize</span></div><div class="line"><span class="comment">                * as they could be from the future */</span></div><div class="line">        }</div><div class="line">        <span class="keywordflow">return</span> (0);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">/* This function can apply format options at startup or dynamically from a received command message */</span></div><div class="line"><span class="keywordtype">int</span> lbmmon_format_pb_apply_format_options(<span class="keywordtype">void</span> * FormatClientData, <span class="keyword">const</span> <span class="keywordtype">void</span> * FormatOptions)</div><div class="line">{</div><div class="line">        lbmmon_format_pb_t * data = FormatClientData;</div><div class="line">        <span class="keyword">const</span> <span class="keywordtype">char</span> * ptr = (<span class="keyword">const</span> <span class="keywordtype">char</span> *)FormatOptions;</div><div class="line">        <span class="keywordtype">char</span> key[LBMMON_MAX_LEN];</div><div class="line">        <span class="keywordtype">char</span> value[LBMMON_MAX_LEN];</div><div class="line"></div><div class="line">        <span class="keywordflow">while</span> ((ptr = <a class="code" href="lbmmon_8h.html#a92cdb7dc9ffbf2d68742d3762b974073">lbmmon_next_key_value_pair</a>(ptr, key, <span class="keyword">sizeof</span>(key), value, <span class="keyword">sizeof</span>(value))) != NULL)</div><div class="line">        {</div><div class="line">                <span class="keywordflow">if</span> (strcasecmp(key, <span class="stringliteral">&quot;passthrough&quot;</span>) == 0)</div><div class="line">                {</div><div class="line">                        <span class="keywordflow">if</span> (strcasecmp(value, <span class="stringliteral">&quot;off&quot;</span>) == 0) {</div><div class="line">                                data-&gt;mPassthrough = <a class="code" href="lbmmon_8h.html#ac073dee1b827482f3983dd93eaed8027">LBMMON_FORMAT_PASSTHROUGH_OFF</a>;</div><div class="line">                        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcasecmp(value, <span class="stringliteral">&quot;on&quot;</span>) == 0) {</div><div class="line">                                data-&gt;mPassthrough = <a class="code" href="lbmmon_8h.html#a265a0bad79606bd0882b0eeeae2ad0c0">LBMMON_FORMAT_PASSTHROUGH_ON</a>;</div><div class="line">                        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcasecmp(value, <span class="stringliteral">&quot;convert&quot;</span>) == 0) {</div><div class="line">                                <span class="comment">/* No need to convert so just set to passthrough */</span></div><div class="line">                                data-&gt;mPassthrough = <a class="code" href="lbmmon_8h.html#a265a0bad79606bd0882b0eeeae2ad0c0">LBMMON_FORMAT_PASSTHROUGH_ON</a>;</div><div class="line">                        } <span class="keywordflow">else</span> {</div><div class="line">                                strncpy(ErrorString, <span class="stringliteral">&quot;Value must be \&quot;off\&quot;, \&quot;on\&quot; or \&quot;convert\&quot; for monitor format option \&quot;passthrough\&quot;.&quot;</span>, <span class="keyword">sizeof</span>(ErrorString));</div><div class="line">                                <span class="keywordflow">return</span> (-1);</div><div class="line">                        }</div><div class="line">                } <span class="keywordflow">else</span> {</div><div class="line">                        <span class="keywordtype">int</span> i = 0;</div><div class="line">                        <span class="keywordtype">int</span> rc;</div><div class="line"></div><div class="line">                        <span class="keywordflow">for</span> (i = 0; i &lt; LBMMON_NUM_FILTER_MSGS; i++) {</div><div class="line">                                rc = lbmmon_apply_filter((<span class="keywordtype">char</span> *)(data-&gt;filters[i]), data-&gt;filters[i]-&gt;base.descriptor, key, value);</div><div class="line">                                <span class="keywordflow">if</span> (rc == 1) {</div><div class="line">                                        <span class="comment">/* Found message and applied filter.  Move on to next one */</span></div><div class="line">                                        <span class="keywordflow">break</span>;</div><div class="line">                                }</div><div class="line">                                <span class="keywordflow">if</span> (rc == -1) {</div><div class="line">                                        <span class="comment">/* Found message but there was a problem applying the filter. Error message set in lbmmon_apply_filter*/</span></div><div class="line">                                        <span class="keywordflow">return</span> (-1);</div><div class="line">                                }</div><div class="line">                                <span class="comment">/* Otherwise, keep looping through all messages. */</span></div><div class="line">                        }</div><div class="line">                }</div><div class="line">        }</div><div class="line">        <span class="comment">/*  Intentionally don&#39;t complain about key/value pairs we don&#39;t recognize </span></div><div class="line"><span class="comment">         * as they could be for the store or from the future */</span></div><div class="line">        <span class="keywordflow">return</span> (0);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> lbmmon_format_pb_init(<span class="keywordtype">void</span> * * FormatClientData, <span class="keyword">const</span> <span class="keywordtype">void</span> * FormatOptions)</div><div class="line">{</div><div class="line">        lbmmon_format_pb_t * data;</div><div class="line">        <span class="keywordtype">char</span> format_options_file[LBMMON_MAX_LEN];</div><div class="line">        <span class="keywordtype">char</span> * FormatOptionsBuffer = NULL;</div><div class="line">        <span class="keywordtype">char</span> key[LBMMON_MAX_LEN];</div><div class="line">        <span class="keywordtype">char</span> value[LBMMON_MAX_LEN];</div><div class="line">        <span class="keyword">const</span> <span class="keywordtype">char</span> * ptr = (<span class="keyword">const</span> <span class="keywordtype">char</span> *)FormatOptions;</div><div class="line"></div><div class="line">        memset(ErrorString, 0, <span class="keyword">sizeof</span>(ErrorString));</div><div class="line">        *FormatClientData = NULL;</div><div class="line">        data = malloc(<span class="keyword">sizeof</span>(lbmmon_format_pb_t));</div><div class="line">        <span class="keywordflow">if</span> (data == NULL)</div><div class="line">        {</div><div class="line">                lbmmon_format_pb_report_allocation_error(<span class="keyword">sizeof</span>(lbmmon_format_pb_t));</div><div class="line">                <span class="keywordflow">return</span> (-1);</div><div class="line">        }</div><div class="line">        data-&gt;filters = malloc(<span class="keyword">sizeof</span>(Lbmmon_FilterMessage *) * LBMMON_NUM_FILTER_MSGS);</div><div class="line">        <span class="keywordflow">if</span> (data-&gt;filters == NULL)</div><div class="line">        {</div><div class="line">                lbmmon_format_pb_report_allocation_error(<span class="keyword">sizeof</span>(<span class="keyword">sizeof</span>(Lbmmon_FilterMessage *) * LBMMON_NUM_FILTER_MSGS));</div><div class="line">                <span class="keywordflow">return</span> (-1);</div><div class="line">        }</div><div class="line">        data-&gt;mPassthrough = <a class="code" href="lbmmon_8h.html#ac073dee1b827482f3983dd93eaed8027">LBMMON_FORMAT_PASSTHROUGH_OFF</a>;</div><div class="line">        lbmmon_filter__umsmon_msg__stats__receiver_transport__tcp__init(&amp;(data-&gt;mRcvTcpFilter));</div><div class="line">        lbmmon_filter__umsmon_msg__stats__receiver_transport__lbtrm__init(&amp;(data-&gt;mRcvLbtrmFilter));</div><div class="line">        lbmmon_filter__umsmon_msg__stats__receiver_transport__lbtru__init(&amp;(data-&gt;mRcvLbtruFilter));</div><div class="line">        lbmmon_filter__umsmon_msg__stats__receiver_transport__lbtipc__init(&amp;(data-&gt;mRcvLbtipcFilter));</div><div class="line">        lbmmon_filter__umsmon_msg__stats__receiver_transport__lbtsmx__init(&amp;(data-&gt;mRcvLbtsmxFilter));</div><div class="line">        lbmmon_filter__umsmon_msg__stats__source_transport__tcp__init(&amp;(data-&gt;mSrcTcpFilter));</div><div class="line">        lbmmon_filter__umsmon_msg__stats__source_transport__lbtrm__init(&amp;(data-&gt;mSrcLbtrmFilter));</div><div class="line">        lbmmon_filter__umsmon_msg__stats__source_transport__lbtru__init(&amp;(data-&gt;mSrcLbtruFilter));</div><div class="line">        lbmmon_filter__umsmon_msg__stats__source_transport__lbtipc__init(&amp;(data-&gt;mSrcLbtipcFilter));</div><div class="line">        lbmmon_filter__umsmon_msg__stats__source_transport__lbtsmx__init(&amp;(data-&gt;mSrcLbtsmxFilter));</div><div class="line">        lbmmon_filter__umsmon_msg__stats__event_queue__init(&amp;(data-&gt;mEventQueueFilter));</div><div class="line">        lbmmon_filter__umsmon_msg__stats__context__init(&amp;(data-&gt;mContextFilter));</div><div class="line"></div><div class="line">        data-&gt;filters[0] = (Lbmmon_FilterMessage *)&amp;(data-&gt;mRcvTcpFilter);</div><div class="line">        data-&gt;filters[1] = (Lbmmon_FilterMessage *)&amp;(data-&gt;mRcvLbtrmFilter);</div><div class="line">        data-&gt;filters[2] = (Lbmmon_FilterMessage *)&amp;(data-&gt;mRcvLbtruFilter);</div><div class="line">        data-&gt;filters[3] = (Lbmmon_FilterMessage *)&amp;(data-&gt;mRcvLbtipcFilter);</div><div class="line">        data-&gt;filters[4] = (Lbmmon_FilterMessage *)&amp;(data-&gt;mRcvLbtsmxFilter);</div><div class="line">        data-&gt;filters[5] = (Lbmmon_FilterMessage *)&amp;(data-&gt;mSrcTcpFilter);</div><div class="line">        data-&gt;filters[6] = (Lbmmon_FilterMessage *)&amp;(data-&gt;mSrcLbtrmFilter);</div><div class="line">        data-&gt;filters[7] = (Lbmmon_FilterMessage *)&amp;(data-&gt;mSrcLbtruFilter);</div><div class="line">        data-&gt;filters[8] = (Lbmmon_FilterMessage *)&amp;(data-&gt;mSrcLbtipcFilter);</div><div class="line">        data-&gt;filters[9] = (Lbmmon_FilterMessage *)&amp;(data-&gt;mSrcLbtsmxFilter);</div><div class="line">        data-&gt;filters[10] = (Lbmmon_FilterMessage *)&amp;(data-&gt;mEventQueueFilter);</div><div class="line">        data-&gt;filters[11] = (Lbmmon_FilterMessage *)&amp;(data-&gt;mContextFilter);</div><div class="line"></div><div class="line">        <span class="comment">/* Process format options */</span></div><div class="line">        memset(format_options_file, 0, <span class="keyword">sizeof</span>(format_options_file));</div><div class="line">        <span class="keywordflow">while</span> ((ptr = <a class="code" href="lbmmon_8h.html#a92cdb7dc9ffbf2d68742d3762b974073">lbmmon_next_key_value_pair</a>(ptr, key, <span class="keyword">sizeof</span>(key), value, <span class="keyword">sizeof</span>(value))) != NULL)</div><div class="line">        {</div><div class="line">                <span class="keywordflow">if</span> (strcasecmp(key, <span class="stringliteral">&quot;filters&quot;</span>) == 0)</div><div class="line">                {</div><div class="line">                        strncpy(format_options_file, value, <span class="keyword">sizeof</span>(format_options_file));</div><div class="line">                        <span class="keywordflow">if</span> (<a class="code" href="lbmaux_8h.html#a4fa5ddd965a91173bc310fdb2b0d4034">lbmaux_lbmmon_format_options_from_file</a>(&amp;FormatOptionsBuffer, format_options_file, ErrorString) != 0) {</div><div class="line">                                free(data-&gt;filters);</div><div class="line">                                free(data);</div><div class="line">                                <span class="keywordflow">return</span> -1;</div><div class="line">                        }</div><div class="line">                        <span class="keywordflow">if</span> (lbmmon_format_pb_apply_format_options(data, (<span class="keyword">const</span> <span class="keywordtype">char</span> *)FormatOptionsBuffer) != 0) {</div><div class="line">                                free(FormatOptionsBuffer);</div><div class="line">                                free(data-&gt;filters);</div><div class="line">                                free(data);</div><div class="line">                                <span class="keywordflow">return</span> -1;</div><div class="line">                        }</div><div class="line">                        free(FormatOptionsBuffer);</div><div class="line">                }</div><div class="line">        }</div><div class="line">        <span class="keywordflow">if</span> (lbmmon_format_pb_apply_format_options(data, (<span class="keyword">const</span> <span class="keywordtype">char</span> *)FormatOptions) != 0) {</div><div class="line">                free(data-&gt;filters);</div><div class="line">                free(data);</div><div class="line">                <span class="keywordflow">return</span> -1;</div><div class="line">        }</div><div class="line"></div><div class="line">        *FormatClientData = (<span class="keywordtype">void</span> *)data;</div><div class="line">        <span class="keywordflow">return</span> (0);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> lbmmon_format_pb_default_filter_options(<span class="keywordtype">void</span> * FormatClientData, <span class="keywordtype">char</span> * Destination, <span class="keywordtype">size_t</span> Size)</div><div class="line">{</div><div class="line">        lbmmon_format_pb_t * data = FormatClientData;</div><div class="line">        <span class="keyword">const</span> ProtobufCMessageDescriptor *descriptor;</div><div class="line">        <span class="keywordtype">int</span> i, j = 0;</div><div class="line">        <span class="keywordtype">char</span> work[LBMMON_MAX_LEN];</div><div class="line">        <span class="keywordtype">char</span> lbmmon_filter_options_prologue[] =</div><div class="line">                <span class="stringliteral">&quot;# LBM filter option settings\n&quot;</span></div><div class="line">                <span class="stringliteral">&quot;#   LBMMON_FORMAT_FILTER_OFF - include field in message(default)\n&quot;</span></div><div class="line">                <span class="stringliteral">&quot;#   LBMMON_FORMAT_FILTER_ON - exclude field from message\n&quot;</span></div><div class="line">                <span class="stringliteral">&quot;#   LBMMON_FORMAT_FILTER_EQ(numeric value) - exclude field from message when field == value\n&quot;</span></div><div class="line">                <span class="stringliteral">&quot;#   LBMMON_FORMAT_FILTER_NE(numeric value) - exclude field from message field != value\n&quot;</span></div><div class="line">                <span class="stringliteral">&quot;#   LBMMON_FORMAT_FILTER_LT(numeric value) - exclude field from message field &lt; value\n&quot;</span></div><div class="line">                <span class="stringliteral">&quot;#   LBMMON_FORMAT_FILTER_GT(numeric value) - exclude field from message field &gt; value\n&quot;</span></div><div class="line">                <span class="stringliteral">&quot;#\n&quot;</span></div><div class="line">                <span class="stringliteral">&quot;# LBM default filter options\n&quot;</span></div><div class="line">                ;</div><div class="line"></div><div class="line">        <span class="keywordflow">if</span> ((data == NULL) || (data-&gt;filters == NULL)) {</div><div class="line">                <span class="keywordflow">return</span> (-1);</div><div class="line">        }</div><div class="line">        strncpy(Destination, lbmmon_filter_options_prologue, Size);</div><div class="line"></div><div class="line">        <span class="keywordflow">for</span> (i = 0; i &lt; LBMMON_NUM_FILTER_MSGS; i++) {</div><div class="line">                <span class="keywordflow">if</span> (data-&gt;filters[i] == NULL) {</div><div class="line">                        <span class="keywordflow">return</span> (-1);</div><div class="line">                }</div><div class="line">                descriptor = data-&gt;filters[i]-&gt;base.descriptor;</div><div class="line">                <span class="keywordflow">for</span> (j = 0; j &lt; descriptor-&gt;n_fields; j++) {</div><div class="line">                        snprintf(work, <span class="keyword">sizeof</span>(work), <span class="stringliteral">&quot;%s.%s=LBMMON_FORMAT_FILTER_OFF;\n&quot;</span>, descriptor-&gt;name, descriptor-&gt;fields[j].name);</div><div class="line">                        <span class="keywordflow">if</span> ((strlen(Destination) + strlen(work) + 1) &gt; Size) {</div><div class="line">                                snprintf(ErrorString, <span class="keyword">sizeof</span>(ErrorString), <span class="stringliteral">&quot;[lbmmon_format_pb_default_filter_options] Destination buffer too small. Buffer is %lu but need %lu.\n&quot;</span>, </div><div class="line">                                        Size, strlen(Destination) + strlen(work));</div><div class="line">                                <span class="keywordflow">return</span> (-1);</div><div class="line">                        }</div><div class="line">                        strncat(Destination, work, Size - strlen(Destination) - 1);</div><div class="line">                }</div><div class="line">        }</div><div class="line">        <span class="keywordflow">return</span> 0;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">/* lbmmon_store_free_msg_filter_option_strings - free message filter strings */</span></div><div class="line"><span class="keywordtype">void</span> lbmmon_store_free_msg_filter_option_strings(Lbmmon__UMPMonMsg *store_msg) {</div><div class="line">        ProtobufCMessageDescriptor *base_descriptor = (ProtobufCMessageDescriptor *)store_msg-&gt;base.descriptor;</div><div class="line">        <span class="keywordtype">int</span> i;</div><div class="line">        for (i = 0; i &lt; base_descriptor-&gt;n_fields; ++i) {</div><div class="line">                <span class="keywordflow">if</span> (base_descriptor-&gt;fields[i].type == PROTOBUF_C_TYPE_STRING) {</div><div class="line">                        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> *opt = (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> *)(store_msg-&gt;base.unknown_fields);</div><div class="line">                        <span class="keywordflow">if</span> (opt[base_descriptor-&gt;fields[i].id - 1] == <a class="code" href="lbmmon_8h.html#adc258c84435fc84094d6d3c640c9a048">LBMMON_FORMAT_SELECT_MATCH_REGX</a>) {</div><div class="line">                                <span class="keywordtype">char</span> *regex_t_ptr;</div><div class="line">                                <span class="keywordtype">char</span> *p = (<span class="keywordtype">char</span> *)(store_msg);                  <span class="comment">/* the stored value is actually a regex_t pointer */</span></div><div class="line">                                p += base_descriptor-&gt;fields[i].offset;</div><div class="line">                                regex_t_ptr = *(<span class="keywordtype">char</span> **)p;</div><div class="line"><span class="preprocessor">#if defined(LBM_HAS_REGEX_H)</span></div><div class="line">                                regfree((regex_t *)regex_t_ptr);</div><div class="line"><span class="preprocessor">#endif</span></div><div class="line">                                free(regex_t_ptr);</div><div class="line">                        }</div><div class="line">                        <span class="keywordflow">else</span> {</div><div class="line">                                <span class="keywordflow">if</span> (opt[base_descriptor-&gt;fields[i].id - 1] == <a class="code" href="lbmmon_8h.html#ac513d54528d2763f897863995cb2e7d9">LBMMON_FORMAT_SELECT_MATCH</a>) {</div><div class="line">                                        <span class="keywordtype">char</span> *p = (<span class="keywordtype">char</span> *)(store_msg);</div><div class="line">                                        p += base_descriptor-&gt;fields[i].offset;</div><div class="line">                                        <span class="keywordflow">if</span> (*(<span class="keywordtype">char</span> **)p != NULL) {</div><div class="line">                                                free(*(<span class="keywordtype">char</span> **)p);</div><div class="line">                                        }</div><div class="line">                                }</div><div class="line">                        }</div><div class="line">                }</div><div class="line">        }</div><div class="line">} <span class="comment">/* lbmmon_store_free_msg_filter_option_strings */</span></div><div class="line"></div><div class="line"><span class="comment">/* lbmmon_store_init_filter_options - initialize the set of messages to hold filter options settings for the designated store */</span></div><div class="line"><span class="keywordtype">void</span> lbmmon_store_init_filter_options(store_filter_t *store_filter_options) {</div><div class="line">        STORE_FILTER_OPTIONS_INIT(store_filter_options, configs, configs, <a class="code" href="struct__Lbmmon____UMPMonMsg____Configs.html">Lbmmon__UMPMonMsg__Configs</a>);</div><div class="line">        STORE_FILTER_OPTIONS_INIT(store_filter_options, pattern_config, configs__pattern_config, <a class="code" href="struct__Lbmmon____UMPMonMsg____Configs____PatternConfig.html">Lbmmon__UMPMonMsg__Configs__PatternConfig</a>);</div><div class="line">        STORE_FILTER_OPTIONS_INIT(store_filter_options, topic_config, configs__topic_config, <a class="code" href="struct__Lbmmon____UMPMonMsg____Configs____TopicConfig.html">Lbmmon__UMPMonMsg__Configs__TopicConfig</a>);</div><div class="line">        STORE_FILTER_OPTIONS_INIT(store_filter_options, repo_config, configs__topic_config__repo_config, <a class="code" href="struct__Lbmmon____UMPMonMsg____Configs____TopicConfig____RepoConfig.html">Lbmmon__UMPMonMsg__Configs__TopicConfig__RepoConfig</a>);</div><div class="line">        STORE_FILTER_OPTIONS_INIT(store_filter_options, rcv_config, configs__topic_config__repo_config__rcv_config, <a class="code" href="struct__Lbmmon____UMPMonMsg____Configs____TopicConfig____RepoConfig____RcvConfig.html">Lbmmon__UMPMonMsg__Configs__TopicConfig__RepoConfig__RcvConfig</a>);</div><div class="line">        STORE_FILTER_OPTIONS_INIT(store_filter_options, stats, stats, <a class="code" href="struct__Lbmmon____UMPMonMsg____Stats.html">Lbmmon__UMPMonMsg__Stats</a>);</div><div class="line">        STORE_FILTER_OPTIONS_INIT(store_filter_options, smart_heap_stat, stats__smart_heap_stat, <a class="code" href="struct__Lbmmon____UMPMonMsg____Stats____SmartHeapStat.html">Lbmmon__UMPMonMsg__Stats__SmartHeapStat</a>);</div><div class="line">        STORE_FILTER_OPTIONS_INIT(store_filter_options, src_repo_stat, stats__src_repo_stat, <a class="code" href="struct__Lbmmon____UMPMonMsg____Stats____SrcRepoStat.html">Lbmmon__UMPMonMsg__Stats__SrcRepoStat</a>);</div><div class="line">        STORE_FILTER_OPTIONS_INIT(store_filter_options, src_disk_stat, stats__src_repo_stat__src_disk_stat, <a class="code" href="struct__Lbmmon____UMPMonMsg____Stats____SrcRepoStat____SrcDiskStat.html">Lbmmon__UMPMonMsg__Stats__SrcRepoStat__SrcDiskStat</a>);</div><div class="line">        STORE_FILTER_OPTIONS_INIT(store_filter_options, rcv_stat, stats__src_repo_stat__rcv_stat, <a class="code" href="struct__Lbmmon____UMPMonMsg____Stats____SrcRepoStat____RcvStat.html">Lbmmon__UMPMonMsg__Stats__SrcRepoStat__RcvStat</a>);</div><div class="line">} <span class="comment">/* lbmmon_store_init_filter_options */</span></div><div class="line"></div><div class="line"><span class="comment">/* lbmmon_store_free_filter_options - free the set of messages that hold filter options settings for the designated store */</span></div><div class="line"><span class="keywordtype">void</span> lbmmon_store_free_filter_options(store_filter_t *store_filter_options) {</div><div class="line">        STORE_FREE_FILTER_OPTIONS(store_filter_options, configs);</div><div class="line">        STORE_FREE_FILTER_OPTIONS(store_filter_options, pattern_config);</div><div class="line">        STORE_FREE_FILTER_OPTIONS(store_filter_options, topic_config);</div><div class="line">        STORE_FREE_FILTER_OPTIONS(store_filter_options, repo_config);</div><div class="line">        STORE_FREE_FILTER_OPTIONS(store_filter_options, rcv_config);</div><div class="line">        STORE_FREE_FILTER_OPTIONS(store_filter_options, stats);</div><div class="line">        STORE_FREE_FILTER_OPTIONS(store_filter_options, smart_heap_stat);</div><div class="line">        STORE_FREE_FILTER_OPTIONS(store_filter_options, src_repo_stat);</div><div class="line">        STORE_FREE_FILTER_OPTIONS(store_filter_options, src_disk_stat);</div><div class="line">        STORE_FREE_FILTER_OPTIONS(store_filter_options, rcv_stat);</div><div class="line">} <span class="comment">/* lbmmon_store_free_filter_options */</span></div><div class="line"></div><div class="line"><span class="comment">/* lbmmon_list_field_names - list field names with the qualifier prefix */</span></div><div class="line"><span class="keywordtype">int</span> lbmmon_list_field_names(ProtobufCMessageDescriptor *msg_descriptor, <span class="keywordtype">char</span> * default_filter_options_buffer, <span class="keywordtype">size_t</span> default_filter_options_buffer_size) {</div><div class="line">        <span class="keywordtype">int</span> field_idx;</div><div class="line">        <span class="keywordtype">char</span> field_name_default[LBMMON_MAX_LEN];</div><div class="line"></div><div class="line">        <span class="keywordflow">for</span> (field_idx = 0; field_idx &lt; msg_descriptor-&gt;n_fields; ++field_idx) {</div><div class="line">                <span class="keywordflow">if</span> (msg_descriptor-&gt;fields[field_idx].type != PROTOBUF_C_TYPE_MESSAGE) {        <span class="comment">/* skips &quot;lbmmon.&quot; prefix leader */</span></div><div class="line">                        snprintf(field_name_default, <span class="keyword">sizeof</span>(field_name_default), <span class="stringliteral">&quot;%s.%s=LBMMON_FORMAT_FILTER_OFF;\n&quot;</span>, &amp;msg_descriptor-&gt;name[7], msg_descriptor-&gt;fields[field_idx].name);</div><div class="line">                        <span class="keywordflow">if</span> ((strlen(default_filter_options_buffer) + strlen(field_name_default) + 1) &gt; default_filter_options_buffer_size) {</div><div class="line">                                snprintf(ErrorString, <span class="keyword">sizeof</span>(ErrorString), <span class="stringliteral">&quot;[lbmmon_list_field_names] Destination buffer too small. Buffer is %lu but need %lu.\n&quot;</span>,</div><div class="line">                                        default_filter_options_buffer_size, strlen(default_filter_options_buffer) + strlen(field_name_default));</div><div class="line">                                <span class="keywordflow">return</span> (-1);</div><div class="line">                        }</div><div class="line">                        strncat(default_filter_options_buffer, field_name_default, default_filter_options_buffer_size);</div><div class="line">                }</div><div class="line">                <span class="keywordflow">else</span></div><div class="line">                        <span class="keywordflow">if</span> (lbmmon_list_field_names((ProtobufCMessageDescriptor *)msg_descriptor-&gt;fields[field_idx].descriptor, default_filter_options_buffer, default_filter_options_buffer_size) == -1) {</div><div class="line">                                <span class="keywordflow">return</span> (-1);</div><div class="line">                        }</div><div class="line">        }</div><div class="line">        <span class="keywordflow">return</span> 0;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> lbmmon_format_pb_default_store_filter_options(<span class="keywordtype">char</span> * Destination, <span class="keywordtype">size_t</span> Size)</div><div class="line">{</div><div class="line">        <span class="keywordtype">char</span> lbmmon_store_filter_options_prologue[] =</div><div class="line">                <span class="stringliteral">&quot;\n&quot;</span></div><div class="line">                <span class="stringliteral">&quot;# Store filter option settings\n&quot;</span></div><div class="line">                <span class="stringliteral">&quot;#   LBMMON_FORMAT_FILTER_OFF - include field in message(default)\n&quot;</span></div><div class="line">                <span class="stringliteral">&quot;#   LBMMON_FORMAT_FILTER_ON - exclude field from message\n&quot;</span></div><div class="line">                <span class="stringliteral">&quot;#   LBMMON_FORMAT_FILTER_EQ(numeric value) - exclude field from message when field == value\n&quot;</span></div><div class="line">                <span class="stringliteral">&quot;#   LBMMON_FORMAT_FILTER_NE(numeric value) - exclude field from message field != value\n&quot;</span></div><div class="line">                <span class="stringliteral">&quot;#   LBMMON_FORMAT_FILTER_LT(numeric value) - exclude field from message field &lt; value\n&quot;</span></div><div class="line">                <span class="stringliteral">&quot;#   LBMMON_FORMAT_FILTER_GT(numeric value) - exclude field from message field &gt; value\n&quot;</span></div><div class="line">                <span class="stringliteral">&quot;#   LBMMON_FORMAT_SELECT_EQ(numeric value) - send message when field == value\n&quot;</span></div><div class="line">                <span class="stringliteral">&quot;#   LBMMON_FORMAT_SELECT_NE(numeric value) - send message when field != value\n&quot;</span></div><div class="line">                <span class="stringliteral">&quot;#   LBMMON_FORMAT_SELECT_LT(numeric value) - send message when field &lt; value\n&quot;</span></div><div class="line">                <span class="stringliteral">&quot;#   LBMMON_FORMAT_SELECT_GT(numeric value) - send message when field &gt; value\n&quot;</span></div><div class="line">                <span class="stringliteral">&quot;#   LBMMON_FORMAT_SELECT_MATCH(string) - send message with an exact string match\n&quot;</span></div><div class="line">                <span class="stringliteral">&quot;#   LBMMON_FORMAT_SELECT_MATCH_REGX(regx string) - send message with a regular expression string match\n&quot;</span></div><div class="line">                <span class="stringliteral">&quot;#\n&quot;</span></div><div class="line">                <span class="stringliteral">&quot;# Store default filter options\n&quot;</span></div><div class="line">                ;</div><div class="line">        store_filter_t *store_filter_options;</div><div class="line"></div><div class="line">        LBM_MALLOC(store_filter_options, <span class="keyword">sizeof</span>(store_filter_t));</div><div class="line">        memset(store_filter_options, 0, <span class="keyword">sizeof</span>(store_filter_t));</div><div class="line">        lbmmon_store_init_filter_options(store_filter_options);</div><div class="line">        <span class="keywordflow">if</span> ((strlen(Destination) + strlen(lbmmon_store_filter_options_prologue) + 1) &gt; Size) {</div><div class="line">                snprintf(ErrorString, <span class="keyword">sizeof</span>(ErrorString), <span class="stringliteral">&quot;[lbmmon_format_pb_default_store_filter_options] Destination buffer too small. Buffer is %lu but need %lu.\n&quot;</span>,</div><div class="line">                        Size, strlen(Destination) + strlen(lbmmon_store_filter_options_prologue));</div><div class="line">                <span class="keywordflow">return</span> (-1);</div><div class="line">        }</div><div class="line">        strcat(Destination, lbmmon_store_filter_options_prologue);</div><div class="line">        <span class="keywordflow">if</span> (lbmmon_list_field_names((ProtobufCMessageDescriptor *)store_filter_options-&gt;configs-&gt;base.descriptor, Destination, Size - 1) != 0) {</div><div class="line">                <span class="keywordflow">return</span> -1;</div><div class="line">        }</div><div class="line">        <span class="keywordflow">if</span> (lbmmon_list_field_names((ProtobufCMessageDescriptor *)store_filter_options-&gt;stats-&gt;base.descriptor, Destination, Size - 1) != 0) {</div><div class="line">                <span class="keywordflow">return</span> -1;</div><div class="line">        }</div><div class="line">        lbmmon_store_free_filter_options(store_filter_options);</div><div class="line">        free(store_filter_options);</div><div class="line">        <span class="keywordflow">return</span> 0;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">char</span> * lbmmon_store_format_pb_filter_options(<span class="keyword">const</span> <span class="keywordtype">char</span> * FormatOptions)</div><div class="line">{</div><div class="line">        <span class="keywordtype">char</span> key[LBMMON_MAX_LEN];</div><div class="line">        <span class="keywordtype">char</span> value[LBMMON_MAX_LEN];</div><div class="line">        <span class="keyword">const</span> <span class="keywordtype">char</span> * ptr = (<span class="keyword">const</span> <span class="keywordtype">char</span> *)FormatOptions;</div><div class="line">        <span class="keywordtype">char</span> * store_filters = NULL;</div><div class="line">        <span class="keywordtype">int</span> store_filter_size = 0;</div><div class="line">        <span class="keyword">const</span> ProtobufCMessageDescriptor *store_descriptor = &amp;lbmmon__umpmon_msg__descriptor;</div><div class="line"></div><div class="line">        <span class="keywordflow">while</span> ((ptr = <a class="code" href="lbmmon_8h.html#a92cdb7dc9ffbf2d68742d3762b974073">lbmmon_next_key_value_pair</a>(ptr, key, <span class="keyword">sizeof</span>(key), value, <span class="keyword">sizeof</span>(value))) != NULL)</div><div class="line">        {</div><div class="line">                <span class="keywordflow">if</span> (strcasecmp(key, <span class="stringliteral">&quot;filters&quot;</span>) == 0)</div><div class="line">                {</div><div class="line">                        <span class="keywordtype">char</span> format_options_file[LBMMON_MAX_LEN];</div><div class="line">                        <span class="keywordtype">char</span> * FormatOptionsBuffer;</div><div class="line">                        <span class="keywordtype">char</span> * tmp_buf;</div><div class="line"></div><div class="line">                        strncpy(format_options_file, value, <span class="keyword">sizeof</span>(format_options_file));</div><div class="line">                        <span class="keywordflow">if</span> (<a class="code" href="lbmaux_8h.html#a4fa5ddd965a91173bc310fdb2b0d4034">lbmaux_lbmmon_format_options_from_file</a>(&amp;FormatOptionsBuffer, format_options_file, ErrorString) != 0) {</div><div class="line">                                <span class="keywordflow">if</span> (store_filters != NULL) {</div><div class="line">                                        free(store_filters);</div><div class="line">                                }</div><div class="line">                                <span class="keywordflow">return</span> NULL;</div><div class="line">                        }</div><div class="line">                        tmp_buf = lbmmon_store_format_pb_filter_options((<span class="keyword">const</span> <span class="keywordtype">char</span> *)FormatOptionsBuffer);</div><div class="line">                        <span class="keywordflow">if</span> (tmp_buf != NULL) {</div><div class="line">                                <span class="keywordflow">if</span> (store_filters == NULL) {</div><div class="line">                                        store_filter_size = strlen(tmp_buf + 1) * 2;</div><div class="line">                                        store_filters = malloc(store_filter_size);</div><div class="line">                                        <span class="keywordflow">if</span> (store_filters == NULL)</div><div class="line">                                        {</div><div class="line">                                                lbmmon_format_pb_report_allocation_error(store_filter_size);</div><div class="line">                                                <span class="keywordflow">return</span> NULL;</div><div class="line">                                        }</div><div class="line">                                        strncpy(store_filters, tmp_buf, store_filter_size);</div><div class="line">                                } <span class="keywordflow">else</span> {</div><div class="line">                                        <span class="keywordflow">if</span> ((strlen(tmp_buf) + strlen(store_filters)) &gt; store_filter_size) {</div><div class="line">                                                <span class="keywordtype">char</span> * new_buf;</div><div class="line">                                                store_filter_size = (strlen(tmp_buf) + strlen(store_filters)) * 2;</div><div class="line">                                                new_buf = malloc(store_filter_size);</div><div class="line">                                                <span class="keywordflow">if</span> (new_buf == NULL)</div><div class="line">                                                {</div><div class="line">                                                        lbmmon_format_pb_report_allocation_error(store_filter_size);</div><div class="line">                                                        <span class="keywordflow">return</span> NULL;</div><div class="line">                                                }</div><div class="line">                                                strncpy(new_buf, store_filters, store_filter_size);</div><div class="line">                                                free(store_filters);</div><div class="line">                                                store_filters = new_buf;</div><div class="line">                                        }</div><div class="line">                                        strncat(store_filters, tmp_buf, <span class="keyword">sizeof</span>(store_filter_size) - strlen(store_filters) - 1);</div><div class="line">                                }</div><div class="line">                                free(tmp_buf);</div><div class="line">                        }</div><div class="line">                        free(FormatOptionsBuffer);</div><div class="line">                }</div><div class="line">                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strncasecmp(key, store_descriptor-&gt;short_name, strlen(store_descriptor-&gt;short_name)) == 0){</div><div class="line">                        <span class="keywordflow">if</span> (store_filters == NULL) {</div><div class="line">                                store_filter_size = 1000 * LBM_CONFIG_MAX_LINE_LEN;</div><div class="line">                                store_filters = malloc(store_filter_size);</div><div class="line">                                <span class="keywordflow">if</span> (store_filters == NULL)</div><div class="line">                                {</div><div class="line">                                        lbmmon_format_pb_report_allocation_error(store_filter_size);</div><div class="line">                                        <span class="keywordflow">return</span> NULL;</div><div class="line">                                }</div><div class="line">                                memset(store_filters, 0, store_filter_size);</div><div class="line">                        }</div><div class="line">                        <span class="keywordflow">if</span> (strlen(store_filters) + LBM_CONFIG_MAX_LINE_LEN &gt;= store_filter_size)</div><div class="line">                        {</div><div class="line">                                <span class="keywordtype">char</span> * new_buf;</div><div class="line">                                store_filter_size *= 2;</div><div class="line">                                new_buf = malloc(store_filter_size);</div><div class="line">                                <span class="keywordflow">if</span> (new_buf == NULL)</div><div class="line">                                {</div><div class="line">                                        lbmmon_format_pb_report_allocation_error(store_filter_size);</div><div class="line">                                        <span class="keywordflow">return</span> NULL;</div><div class="line">                                }</div><div class="line">                                strncpy(new_buf, store_filters, store_filter_size);</div><div class="line">                                free(store_filters);</div><div class="line">                                store_filters = new_buf;</div><div class="line">                        }</div><div class="line">                        snprintf(store_filters + strlen(store_filters), store_filter_size, <span class="stringliteral">&quot;%s=%s;&quot;</span>, key, value);</div><div class="line">                }</div><div class="line">        }</div><div class="line">        <span class="keywordflow">return</span> store_filters;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">void</span> lbmmon_attributes_format_pb_serialize(Lbmmon__UMMonAttributes *AttributeBlock, <span class="keyword">const</span> <a class="code" href="structlbmmon__packet__attributes__t__stct.html">lbmmon_packet_attributes_t</a> * Attributes)</div><div class="line">{</div><div class="line">        <span class="keyword">struct </span>in_addr addr;</div><div class="line"></div><div class="line">        addr.s_addr = Attributes-&gt;<a class="code" href="structlbmmon__packet__attributes__t__stct.html#a2a61c709b02d89f842cf95b6e31bd644">mAddress</a>;</div><div class="line">        AttributeBlock-&gt;sender_ipv4_address = inet_ntoa(addr);</div><div class="line">        AttributeBlock-&gt;timestamp = time(NULL);</div><div class="line">        <span class="keywordflow">if</span> ((Attributes-&gt;<a class="code" href="structlbmmon__packet__attributes__t__stct.html#a119363483bbc2e3b326b18e785d8eadd">mFlags</a> &amp; PACKET_ATTRIBUTES_FLAG_APPSOURCE_ID) != 0) {</div><div class="line">                AttributeBlock-&gt;application_id = (<span class="keywordtype">char</span> *)&amp;Attributes-&gt;<a class="code" href="structlbmmon__packet__attributes__t__stct.html#aea5005828511b60549bde44e27f0d998">mApplicationSourceID</a>;</div><div class="line">        }</div><div class="line">        <span class="comment">/* Move in the object (context) ID. It&#39;s a pointer, but we treat it as an integer. */</span></div><div class="line">        AttributeBlock-&gt;object_id = (uint64_t)Attributes-&gt;<a class="code" href="structlbmmon__packet__attributes__t__stct.html#ad69e7ff819fda7b8ce190360a9dbd5dd">mObjectID</a>;</div><div class="line">        AttributeBlock-&gt;process_id = Attributes-&gt;<a class="code" href="structlbmmon__packet__attributes__t__stct.html#afc4f40bac783c2fd1ac72c603fe9920f">mProcessID</a>;</div><div class="line">        AttributeBlock-&gt;domain_id = Attributes-&gt;<a class="code" href="structlbmmon__packet__attributes__t__stct.html#aa86ca67069f59861766b439ad73a39c9">mDomainID</a>;</div><div class="line">        if ((Attributes-&gt;<a class="code" href="structlbmmon__packet__attributes__t__stct.html#a119363483bbc2e3b326b18e785d8eadd">mFlags</a> &amp; PACKET_ATTRIBUTES_FLAG_CTXINST) != 0) {</div><div class="line">                AttributeBlock-&gt;context_instance.data = (<a class="code" href="lbm_8h.html#a09c7963deb485135d5bb29c84cd7d3a9">lbm_uint8_t</a> *)Attributes-&gt;<a class="code" href="structlbmmon__packet__attributes__t__stct.html#a101203a0224a1fdb40f3512272ea4938">mContextInstance</a>;</div><div class="line">                AttributeBlock-&gt;context_instance.len = LBM_CONTEXT_INSTANCE_BLOCK_SZ;</div><div class="line">        }</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> lbmmon_rcv_format_pb_serialize(<span class="keywordtype">char</span> * Destination, <span class="keywordtype">size_t</span> * Size, <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> * ModuleID,</div><div class="line">        <span class="keyword">const</span> <a class="code" href="structlbmmon__packet__attributes__t__stct.html">lbmmon_packet_attributes_t</a> * Attributes, <span class="keyword">const</span> <a class="code" href="structlbm__rcv__transport__stats__t__stct.html">lbm_rcv_transport_stats_t</a> * Statistics, <span class="keywordtype">void</span> * FormatClientData)</div><div class="line">{</div><div class="line">        lbmmon_format_pb_t * fmt = (lbmmon_format_pb_t *)FormatClientData;</div><div class="line">        Lbmmon__UMSMonMsg lbmmon_msg = LBMMON__UMSMON_MSG__INIT;</div><div class="line">        <a class="code" href="struct__Lbmmon____UMSMonMsg____Stats.html">Lbmmon__UMSMonMsg__Stats</a> lbmmon_msg_stats = LBMMON__UMSMON_MSG__STATS__INIT;</div><div class="line">        <a class="code" href="struct__Lbmmon____UMSMonMsg____Stats____ReceiverTransport.html">Lbmmon__UMSMonMsg__Stats__ReceiverTransport</a> msg = LBMMON__UMSMON_MSG__STATS__RECEIVER_TRANSPORT__INIT;</div><div class="line">        <a class="code" href="struct__Lbmmon____UMSMonMsg____Stats____ReceiverTransport.html">Lbmmon__UMSMonMsg__Stats__ReceiverTransport</a> * msg_ptr = &amp;msg;</div><div class="line">        Lbmmon__UMMonAttributes attributes = LBMMON__UMMON_ATTRIBUTES__INIT;</div><div class="line">        <a class="code" href="struct__Lbmmon____UMSMonMsg____Stats____ReceiverTransport____TCP.html">Lbmmon__UMSMonMsg__Stats__ReceiverTransport__TCP</a> tcp = LBMMON__UMSMON_MSG__STATS__RECEIVER_TRANSPORT__TCP__INIT;</div><div class="line">        <a class="code" href="struct__Lbmmon____UMSMonMsg____Stats____ReceiverTransport____LBTRM.html">Lbmmon__UMSMonMsg__Stats__ReceiverTransport__LBTRM</a> lbtrm = LBMMON__UMSMON_MSG__STATS__RECEIVER_TRANSPORT__LBTRM__INIT;</div><div class="line">        <a class="code" href="struct__Lbmmon____UMSMonMsg____Stats____ReceiverTransport____LBTRU.html">Lbmmon__UMSMonMsg__Stats__ReceiverTransport__LBTRU</a> lbtru = LBMMON__UMSMON_MSG__STATS__RECEIVER_TRANSPORT__LBTRU__INIT;</div><div class="line">        <a class="code" href="struct__Lbmmon____UMSMonMsg____Stats____ReceiverTransport____LBTIPC.html">Lbmmon__UMSMonMsg__Stats__ReceiverTransport__LBTIPC</a> lbtipc = LBMMON__UMSMON_MSG__STATS__RECEIVER_TRANSPORT__LBTIPC__INIT;</div><div class="line">        <a class="code" href="struct__Lbmmon____UMSMonMsg____Stats____ReceiverTransport____LBTSMX.html">Lbmmon__UMSMonMsg__Stats__ReceiverTransport__LBTSMX</a> lbtsmx = LBMMON__UMSMON_MSG__STATS__RECEIVER_TRANSPORT__LBTSMX__INIT;</div><div class="line">        Lbmmon_Filter__UMSMonMsg__Stats__ReceiverTransport__TCP filter_tcp = fmt-&gt;mRcvTcpFilter;</div><div class="line">        Lbmmon_Filter__UMSMonMsg__Stats__ReceiverTransport__LBTRM filter_lbtrm = fmt-&gt;mRcvLbtrmFilter;</div><div class="line">        Lbmmon_Filter__UMSMonMsg__Stats__ReceiverTransport__LBTRU filter_lbtru = fmt-&gt;mRcvLbtruFilter;</div><div class="line">        Lbmmon_Filter__UMSMonMsg__Stats__ReceiverTransport__LBTIPC filter_lbtipc = fmt-&gt;mRcvLbtipcFilter;</div><div class="line">        Lbmmon_Filter__UMSMonMsg__Stats__ReceiverTransport__LBTSMX filter_lbtsmx = fmt-&gt;mRcvLbtsmxFilter;</div><div class="line"></div><div class="line">        <span class="keywordflow">if</span> ((Destination == NULL) || (Size == NULL) || (*Size == 0) || (Statistics == NULL))</div><div class="line">        {</div><div class="line">                <span class="keywordflow">return</span> (-1);</div><div class="line">        }</div><div class="line"></div><div class="line">        *ModuleID = MAKE_MODULE_VERSION(<a class="code" href="lbmmon_8h.html#a337193651e5882ba963aea467f8de94e">LBMMON_FORMAT_PB_MODULE_ID</a>, LBMMON_FORMAT_PB_VERSION_CURRENT);</div><div class="line">        lbmmon_attributes_format_pb_serialize(&amp;attributes, Attributes);</div><div class="line">        lbmmon_msg.attributes = &amp;attributes;</div><div class="line">        lbmmon_msg.stats = &amp;lbmmon_msg_stats;</div><div class="line">        lbmmon_msg_stats.n_receiver_transports = 1;</div><div class="line">        lbmmon_msg_stats.receiver_transports = &amp;msg_ptr;</div><div class="line">        msg.source_string = (<span class="keywordtype">char</span> *)Statistics-&gt;<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#ac333fa92e503d7d399c0a7e4fe0a07c3">source</a>;</div><div class="line">        msg.source_flag = Attributes-&gt;<a class="code" href="structlbmmon__packet__attributes__t__stct.html#a6985d9164eff32c6b9659d4e5f015b11">mSourceFlag</a>;</div><div class="line"></div><div class="line">        switch (Statistics-&gt;<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a3111b4af23afc72ffb71b3794b4a0835">type</a>)</div><div class="line">        {</div><div class="line">        <span class="keywordflow">case</span> <a class="code" href="lbm_8h.html#a6da60dbd4d5790ee0df30d6c3048f977">LBM_TRANSPORT_STAT_TCP</a>:</div><div class="line">                msg.transport_type_case = LBMMON__UMSMON_MSG__STATS__RECEIVER_TRANSPORT__TRANSPORT_TYPE_TCP;</div><div class="line">                LBMMON_UINT64_SET(filter_tcp, tcp, Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a998cbe5e073d540fc60536cb85bd1971">tcp</a>, bytes_rcved);</div><div class="line">                LBMMON_UINT64_SET(filter_tcp, tcp, Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a998cbe5e073d540fc60536cb85bd1971">tcp</a>, lbm_msgs_rcved);</div><div class="line">                LBMMON_UINT64_SET(filter_tcp, tcp, Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a998cbe5e073d540fc60536cb85bd1971">tcp</a>, lbm_msgs_no_topic_rcved);</div><div class="line">                LBMMON_UINT64_SET(filter_tcp, tcp, Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a998cbe5e073d540fc60536cb85bd1971">tcp</a>, lbm_reqs_rcved);</div><div class="line">                msg.tcp = &amp;tcp;</div><div class="line">                <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">        <span class="keywordflow">case</span> <a class="code" href="lbm_8h.html#a32e0d3eee1fe69fa87e985f3343830b3">LBM_TRANSPORT_STAT_LBTRM</a>:</div><div class="line">                msg.transport_type_case = LBMMON__UMSMON_MSG__STATS__RECEIVER_TRANSPORT__TRANSPORT_TYPE_LBTRM;</div><div class="line">                LBMMON_UINT64_SET(filter_lbtrm, lbtrm, Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a9d167f0dc09f15c84983e6ab4caefa97">lbtrm</a>, msgs_rcved);</div><div class="line">                LBMMON_UINT64_SET(filter_lbtrm, lbtrm, Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a9d167f0dc09f15c84983e6ab4caefa97">lbtrm</a>, bytes_rcved);</div><div class="line">                LBMMON_UINT64_SET(filter_lbtrm, lbtrm, Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a9d167f0dc09f15c84983e6ab4caefa97">lbtrm</a>, nak_pckts_sent);</div><div class="line">                LBMMON_UINT64_SET(filter_lbtrm, lbtrm, Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a9d167f0dc09f15c84983e6ab4caefa97">lbtrm</a>, naks_sent);</div><div class="line">                LBMMON_UINT64_SET(filter_lbtrm, lbtrm, Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a9d167f0dc09f15c84983e6ab4caefa97">lbtrm</a>, lost);</div><div class="line">                LBMMON_UINT64_SET(filter_lbtrm, lbtrm, Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a9d167f0dc09f15c84983e6ab4caefa97">lbtrm</a>, ncfs_ignored);</div><div class="line">                LBMMON_UINT64_SET(filter_lbtrm, lbtrm, Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a9d167f0dc09f15c84983e6ab4caefa97">lbtrm</a>, ncfs_shed);</div><div class="line">                LBMMON_UINT64_SET(filter_lbtrm, lbtrm, Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a9d167f0dc09f15c84983e6ab4caefa97">lbtrm</a>, ncfs_rx_delay);</div><div class="line">                LBMMON_UINT64_SET(filter_lbtrm, lbtrm, Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a9d167f0dc09f15c84983e6ab4caefa97">lbtrm</a>, ncfs_unknown);</div><div class="line">                LBMMON_UINT64_SET(filter_lbtrm, lbtrm, Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a9d167f0dc09f15c84983e6ab4caefa97">lbtrm</a>, nak_stm_min);</div><div class="line">                LBMMON_UINT64_SET(filter_lbtrm, lbtrm, Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a9d167f0dc09f15c84983e6ab4caefa97">lbtrm</a>, nak_stm_mean);</div><div class="line">                LBMMON_UINT64_SET(filter_lbtrm, lbtrm, Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a9d167f0dc09f15c84983e6ab4caefa97">lbtrm</a>, nak_stm_max);</div><div class="line">                LBMMON_UINT64_SET(filter_lbtrm, lbtrm, Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a9d167f0dc09f15c84983e6ab4caefa97">lbtrm</a>, nak_tx_min);</div><div class="line">                LBMMON_UINT64_SET(filter_lbtrm, lbtrm, Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a9d167f0dc09f15c84983e6ab4caefa97">lbtrm</a>, nak_tx_mean);</div><div class="line">                LBMMON_UINT64_SET(filter_lbtrm, lbtrm, Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a9d167f0dc09f15c84983e6ab4caefa97">lbtrm</a>, nak_tx_max);</div><div class="line">                LBMMON_UINT64_SET(filter_lbtrm, lbtrm, Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a9d167f0dc09f15c84983e6ab4caefa97">lbtrm</a>, duplicate_data);</div><div class="line">                LBMMON_UINT64_SET(filter_lbtrm, lbtrm, Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a9d167f0dc09f15c84983e6ab4caefa97">lbtrm</a>, unrecovered_txw);</div><div class="line">                LBMMON_UINT64_SET(filter_lbtrm, lbtrm, Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a9d167f0dc09f15c84983e6ab4caefa97">lbtrm</a>, unrecovered_tmo);</div><div class="line">                LBMMON_UINT64_SET(filter_lbtrm, lbtrm, Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a9d167f0dc09f15c84983e6ab4caefa97">lbtrm</a>, lbm_msgs_rcved);</div><div class="line">                LBMMON_UINT64_SET(filter_lbtrm, lbtrm, Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a9d167f0dc09f15c84983e6ab4caefa97">lbtrm</a>, lbm_msgs_no_topic_rcved);</div><div class="line">                LBMMON_UINT64_SET(filter_lbtrm, lbtrm, Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a9d167f0dc09f15c84983e6ab4caefa97">lbtrm</a>, lbm_reqs_rcved);</div><div class="line">                LBMMON_UINT64_SET(filter_lbtrm, lbtrm, Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a9d167f0dc09f15c84983e6ab4caefa97">lbtrm</a>, dgrams_dropped_size);</div><div class="line">                LBMMON_UINT64_SET(filter_lbtrm, lbtrm, Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a9d167f0dc09f15c84983e6ab4caefa97">lbtrm</a>, dgrams_dropped_type);</div><div class="line">                LBMMON_UINT64_SET(filter_lbtrm, lbtrm, Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a9d167f0dc09f15c84983e6ab4caefa97">lbtrm</a>, dgrams_dropped_version);</div><div class="line">                LBMMON_UINT64_SET(filter_lbtrm, lbtrm, Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a9d167f0dc09f15c84983e6ab4caefa97">lbtrm</a>, dgrams_dropped_hdr);</div><div class="line">                LBMMON_UINT64_SET(filter_lbtrm, lbtrm, Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a9d167f0dc09f15c84983e6ab4caefa97">lbtrm</a>, dgrams_dropped_other);</div><div class="line">                LBMMON_UINT64_SET(filter_lbtrm, lbtrm, Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a9d167f0dc09f15c84983e6ab4caefa97">lbtrm</a>, out_of_order);</div><div class="line">                msg.lbtrm = &amp;lbtrm;</div><div class="line">                <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">        <span class="keywordflow">case</span> <a class="code" href="lbm_8h.html#a1f4acd28e4192be6809ce2cc496cb514">LBM_TRANSPORT_STAT_LBTRU</a>:</div><div class="line">                msg.transport_type_case = LBMMON__UMSMON_MSG__STATS__RECEIVER_TRANSPORT__TRANSPORT_TYPE_LBTRU;</div><div class="line">                LBMMON_UINT64_SET(filter_lbtru, lbtru, Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a6d5ff286865d47f6fd74e08c0e1692e5">lbtru</a>, msgs_rcved);</div><div class="line">                LBMMON_UINT64_SET(filter_lbtru, lbtru, Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a6d5ff286865d47f6fd74e08c0e1692e5">lbtru</a>, bytes_rcved);</div><div class="line">                LBMMON_UINT64_SET(filter_lbtru, lbtru, Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a6d5ff286865d47f6fd74e08c0e1692e5">lbtru</a>, nak_pckts_sent);</div><div class="line">                LBMMON_UINT64_SET(filter_lbtru, lbtru, Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a6d5ff286865d47f6fd74e08c0e1692e5">lbtru</a>, naks_sent);</div><div class="line">                LBMMON_UINT64_SET(filter_lbtru, lbtru, Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a6d5ff286865d47f6fd74e08c0e1692e5">lbtru</a>, lost);</div><div class="line">                LBMMON_UINT64_SET(filter_lbtru, lbtru, Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a6d5ff286865d47f6fd74e08c0e1692e5">lbtru</a>, ncfs_ignored);</div><div class="line">                LBMMON_UINT64_SET(filter_lbtru, lbtru, Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a6d5ff286865d47f6fd74e08c0e1692e5">lbtru</a>, ncfs_shed);</div><div class="line">                LBMMON_UINT64_SET(filter_lbtru, lbtru, Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a6d5ff286865d47f6fd74e08c0e1692e5">lbtru</a>, ncfs_rx_delay);</div><div class="line">                LBMMON_UINT64_SET(filter_lbtru, lbtru, Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a6d5ff286865d47f6fd74e08c0e1692e5">lbtru</a>, ncfs_unknown);</div><div class="line">                LBMMON_UINT64_SET(filter_lbtru, lbtru, Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a6d5ff286865d47f6fd74e08c0e1692e5">lbtru</a>, nak_stm_min);</div><div class="line">                LBMMON_UINT64_SET(filter_lbtru, lbtru, Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a6d5ff286865d47f6fd74e08c0e1692e5">lbtru</a>, nak_stm_mean);</div><div class="line">                LBMMON_UINT64_SET(filter_lbtru, lbtru, Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a6d5ff286865d47f6fd74e08c0e1692e5">lbtru</a>, nak_stm_max);</div><div class="line">                LBMMON_UINT64_SET(filter_lbtru, lbtru, Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a6d5ff286865d47f6fd74e08c0e1692e5">lbtru</a>, nak_tx_min);</div><div class="line">                LBMMON_UINT64_SET(filter_lbtru, lbtru, Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a6d5ff286865d47f6fd74e08c0e1692e5">lbtru</a>, nak_tx_mean);</div><div class="line">                LBMMON_UINT64_SET(filter_lbtru, lbtru, Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a6d5ff286865d47f6fd74e08c0e1692e5">lbtru</a>, nak_tx_max);</div><div class="line">                LBMMON_UINT64_SET(filter_lbtru, lbtru, Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a6d5ff286865d47f6fd74e08c0e1692e5">lbtru</a>, duplicate_data);</div><div class="line">                LBMMON_UINT64_SET(filter_lbtru, lbtru, Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a6d5ff286865d47f6fd74e08c0e1692e5">lbtru</a>, unrecovered_txw);</div><div class="line">                LBMMON_UINT64_SET(filter_lbtru, lbtru, Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a6d5ff286865d47f6fd74e08c0e1692e5">lbtru</a>, unrecovered_tmo);</div><div class="line">                LBMMON_UINT64_SET(filter_lbtru, lbtru, Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a6d5ff286865d47f6fd74e08c0e1692e5">lbtru</a>, lbm_msgs_rcved);</div><div class="line">                LBMMON_UINT64_SET(filter_lbtru, lbtru, Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a6d5ff286865d47f6fd74e08c0e1692e5">lbtru</a>, lbm_msgs_no_topic_rcved);</div><div class="line">                LBMMON_UINT64_SET(filter_lbtru, lbtru, Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a6d5ff286865d47f6fd74e08c0e1692e5">lbtru</a>, lbm_reqs_rcved);</div><div class="line">                LBMMON_UINT64_SET(filter_lbtru, lbtru, Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a6d5ff286865d47f6fd74e08c0e1692e5">lbtru</a>, dgrams_dropped_size);</div><div class="line">                LBMMON_UINT64_SET(filter_lbtru, lbtru, Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a6d5ff286865d47f6fd74e08c0e1692e5">lbtru</a>, dgrams_dropped_type);</div><div class="line">                LBMMON_UINT64_SET(filter_lbtru, lbtru, Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a6d5ff286865d47f6fd74e08c0e1692e5">lbtru</a>, dgrams_dropped_version);</div><div class="line">                LBMMON_UINT64_SET(filter_lbtru, lbtru, Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a6d5ff286865d47f6fd74e08c0e1692e5">lbtru</a>, dgrams_dropped_hdr);</div><div class="line">                LBMMON_UINT64_SET(filter_lbtru, lbtru, Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a6d5ff286865d47f6fd74e08c0e1692e5">lbtru</a>, dgrams_dropped_other);</div><div class="line">                LBMMON_UINT64_SET(filter_lbtru, lbtru, Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a6d5ff286865d47f6fd74e08c0e1692e5">lbtru</a>, dgrams_dropped_sid);</div><div class="line">                msg.lbtru = &amp;lbtru;</div><div class="line">                <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">        <span class="keywordflow">case</span> <a class="code" href="lbm_8h.html#a64de821cc3a1afda47c5668996d16d9b">LBM_TRANSPORT_STAT_LBTIPC</a>:</div><div class="line">                msg.transport_type_case = LBMMON__UMSMON_MSG__STATS__RECEIVER_TRANSPORT__TRANSPORT_TYPE_LBTIPC;</div><div class="line">                LBMMON_UINT64_SET(filter_lbtipc, lbtipc, Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#aa0bb3ff2725d54aca064608777ab4fbc">lbtipc</a>, msgs_rcved);</div><div class="line">                LBMMON_UINT64_SET(filter_lbtipc, lbtipc, Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#aa0bb3ff2725d54aca064608777ab4fbc">lbtipc</a>, bytes_rcved);</div><div class="line">                LBMMON_UINT64_SET(filter_lbtipc, lbtipc, Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#aa0bb3ff2725d54aca064608777ab4fbc">lbtipc</a>, lbm_msgs_rcved);</div><div class="line">                LBMMON_UINT64_SET(filter_lbtipc, lbtipc, Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#aa0bb3ff2725d54aca064608777ab4fbc">lbtipc</a>, lbm_msgs_no_topic_rcved);</div><div class="line">                LBMMON_UINT64_SET(filter_lbtipc, lbtipc, Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#aa0bb3ff2725d54aca064608777ab4fbc">lbtipc</a>, lbm_reqs_rcved);</div><div class="line">                msg.lbtipc = &amp;lbtipc;</div><div class="line">                <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">        <span class="keywordflow">case</span> <a class="code" href="lbm_8h.html#af5d79fa0d57faa68dfa42b20401a94d8">LBM_TRANSPORT_STAT_LBTSMX</a>:</div><div class="line">                msg.transport_type_case = LBMMON__UMSMON_MSG__STATS__RECEIVER_TRANSPORT__TRANSPORT_TYPE_LBTSMX;</div><div class="line">                LBMMON_UINT64_SET(filter_lbtsmx, lbtsmx, Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a17af117bb25bde181c35ac551bedfbd8">lbtsmx</a>, msgs_rcved);</div><div class="line">                LBMMON_UINT64_SET(filter_lbtsmx, lbtsmx, Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a17af117bb25bde181c35ac551bedfbd8">lbtsmx</a>, bytes_rcved);</div><div class="line">                LBMMON_UINT64_SET(filter_lbtsmx, lbtsmx, Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a17af117bb25bde181c35ac551bedfbd8">lbtsmx</a>, lbm_msgs_rcved);</div><div class="line">                LBMMON_UINT64_SET(filter_lbtsmx, lbtsmx, Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a17af117bb25bde181c35ac551bedfbd8">lbtsmx</a>, lbm_msgs_no_topic_rcved);</div><div class="line">                msg.lbtsmx = &amp;lbtsmx;</div><div class="line">                <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">        <span class="keywordflow">default</span>:</div><div class="line">                strncpy(ErrorString, <span class="stringliteral">&quot;Unknown LBM transport type&quot;</span>, <span class="keyword">sizeof</span>(ErrorString));</div><div class="line">                <span class="keywordflow">return</span> (-1);</div><div class="line">        }</div><div class="line"></div><div class="line">        *Size = lbmmon__umsmon_msg__get_packed_size(&amp;lbmmon_msg);</div><div class="line">        lbmmon__umsmon_msg__pack(&amp;lbmmon_msg, (<a class="code" href="lbm_8h.html#a09c7963deb485135d5bb29c84cd7d3a9">lbm_uint8_t</a> *)Destination);</div><div class="line">        <span class="keywordflow">return</span> (0);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> lbmmon_src_format_pb_serialize(<span class="keywordtype">char</span> * Destination, <span class="keywordtype">size_t</span> * Size, <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> * ModuleID,</div><div class="line">        <span class="keyword">const</span> <a class="code" href="structlbmmon__packet__attributes__t__stct.html">lbmmon_packet_attributes_t</a> * Attributes, <span class="keyword">const</span> <a class="code" href="structlbm__src__transport__stats__t__stct.html">lbm_src_transport_stats_t</a> * Statistics, <span class="keywordtype">void</span> * FormatClientData)</div><div class="line">{</div><div class="line">        lbmmon_format_pb_t * fmt = (lbmmon_format_pb_t *)FormatClientData;</div><div class="line">        Lbmmon__UMSMonMsg lbmmon_msg = LBMMON__UMSMON_MSG__INIT;</div><div class="line">        <a class="code" href="struct__Lbmmon____UMSMonMsg____Stats.html">Lbmmon__UMSMonMsg__Stats</a> lbmmon_msg_stats = LBMMON__UMSMON_MSG__STATS__INIT;</div><div class="line">        <a class="code" href="struct__Lbmmon____UMSMonMsg____Stats____SourceTransport.html">Lbmmon__UMSMonMsg__Stats__SourceTransport</a> msg = LBMMON__UMSMON_MSG__STATS__SOURCE_TRANSPORT__INIT;</div><div class="line">        <a class="code" href="struct__Lbmmon____UMSMonMsg____Stats____SourceTransport.html">Lbmmon__UMSMonMsg__Stats__SourceTransport</a> * msg_ptr = &amp;msg;</div><div class="line">        Lbmmon__UMMonAttributes attributes = LBMMON__UMMON_ATTRIBUTES__INIT;</div><div class="line">        <a class="code" href="struct__Lbmmon____UMSMonMsg____Stats____SourceTransport____TCP.html">Lbmmon__UMSMonMsg__Stats__SourceTransport__TCP</a> tcp = LBMMON__UMSMON_MSG__STATS__SOURCE_TRANSPORT__TCP__INIT;</div><div class="line">        <a class="code" href="struct__Lbmmon____UMSMonMsg____Stats____SourceTransport____LBTRM.html">Lbmmon__UMSMonMsg__Stats__SourceTransport__LBTRM</a> lbtrm = LBMMON__UMSMON_MSG__STATS__SOURCE_TRANSPORT__LBTRM__INIT;</div><div class="line">        <a class="code" href="struct__Lbmmon____UMSMonMsg____Stats____SourceTransport____LBTRU.html">Lbmmon__UMSMonMsg__Stats__SourceTransport__LBTRU</a> lbtru = LBMMON__UMSMON_MSG__STATS__SOURCE_TRANSPORT__LBTRU__INIT;</div><div class="line">        <a class="code" href="struct__Lbmmon____UMSMonMsg____Stats____SourceTransport____LBTIPC.html">Lbmmon__UMSMonMsg__Stats__SourceTransport__LBTIPC</a> lbtipc = LBMMON__UMSMON_MSG__STATS__SOURCE_TRANSPORT__LBTIPC__INIT;</div><div class="line">        <a class="code" href="struct__Lbmmon____UMSMonMsg____Stats____SourceTransport____LBTSMX.html">Lbmmon__UMSMonMsg__Stats__SourceTransport__LBTSMX</a> lbtsmx = LBMMON__UMSMON_MSG__STATS__SOURCE_TRANSPORT__LBTSMX__INIT;</div><div class="line">        Lbmmon_Filter__UMSMonMsg__Stats__SourceTransport__TCP filter_tcp = fmt-&gt;mSrcTcpFilter;</div><div class="line">        Lbmmon_Filter__UMSMonMsg__Stats__SourceTransport__LBTRM filter_lbtrm = fmt-&gt;mSrcLbtrmFilter;</div><div class="line">        Lbmmon_Filter__UMSMonMsg__Stats__SourceTransport__LBTRU filter_lbtru = fmt-&gt;mSrcLbtruFilter;</div><div class="line">        Lbmmon_Filter__UMSMonMsg__Stats__SourceTransport__LBTIPC filter_lbtipc = fmt-&gt;mSrcLbtipcFilter;</div><div class="line">        Lbmmon_Filter__UMSMonMsg__Stats__SourceTransport__LBTSMX filter_lbtsmx = fmt-&gt;mSrcLbtsmxFilter;</div><div class="line"></div><div class="line">        <span class="keywordflow">if</span> ((Destination == NULL) || (Size == NULL) || (*Size == 0) || (Statistics == NULL))</div><div class="line">        {</div><div class="line">                <span class="keywordflow">return</span> (-1);</div><div class="line">        }</div><div class="line"></div><div class="line">        *ModuleID = MAKE_MODULE_VERSION(<a class="code" href="lbmmon_8h.html#a337193651e5882ba963aea467f8de94e">LBMMON_FORMAT_PB_MODULE_ID</a>,LBMMON_FORMAT_PB_VERSION_CURRENT);</div><div class="line">        lbmmon_attributes_format_pb_serialize(&amp;attributes, Attributes);</div><div class="line">        lbmmon_msg.attributes = &amp;attributes;</div><div class="line">        lbmmon_msg.stats = &amp;lbmmon_msg_stats;</div><div class="line">        lbmmon_msg_stats.n_source_transports = 1;</div><div class="line">        lbmmon_msg_stats.source_transports = &amp;msg_ptr;</div><div class="line">        msg.source_string = (<span class="keywordtype">char</span> *)Statistics-&gt;<a class="code" href="structlbm__src__transport__stats__t__stct.html#aac9bc9a4d1f84c3cdc7dd83521b3ff70">source</a>;</div><div class="line">        msg.source_flag = Attributes-&gt;<a class="code" href="structlbmmon__packet__attributes__t__stct.html#a6985d9164eff32c6b9659d4e5f015b11">mSourceFlag</a>;</div><div class="line"></div><div class="line">        switch (Statistics-&gt;<a class="code" href="structlbm__src__transport__stats__t__stct.html#a9f9aef06b06d3432b1b7ba10583413ce">type</a>)</div><div class="line">        {</div><div class="line">        <span class="keywordflow">case</span> <a class="code" href="lbm_8h.html#a6da60dbd4d5790ee0df30d6c3048f977">LBM_TRANSPORT_STAT_TCP</a>:</div><div class="line">                msg.transport_type_case = LBMMON__UMSMON_MSG__STATS__SOURCE_TRANSPORT__TRANSPORT_TYPE_TCP;</div><div class="line">                LBMMON_UINT64_SET(filter_tcp, tcp, Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#a7c2b714d68f2ca2fe56632c185c9a163">tcp</a>, num_clients);</div><div class="line">                LBMMON_UINT64_SET(filter_tcp, tcp, Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#a7c2b714d68f2ca2fe56632c185c9a163">tcp</a>, bytes_buffered);</div><div class="line">                msg.tcp = &amp;tcp;</div><div class="line">                <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">        <span class="keywordflow">case</span> <a class="code" href="lbm_8h.html#a32e0d3eee1fe69fa87e985f3343830b3">LBM_TRANSPORT_STAT_LBTRM</a>:</div><div class="line">                msg.transport_type_case = LBMMON__UMSMON_MSG__STATS__SOURCE_TRANSPORT__TRANSPORT_TYPE_LBTRM;</div><div class="line">                LBMMON_UINT64_SET(filter_lbtrm, lbtrm, Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#a6bad1e2180589dd3c3fdc9ddd3b24a38">lbtrm</a>, msgs_sent);</div><div class="line">                LBMMON_UINT64_SET(filter_lbtrm, lbtrm, Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#a6bad1e2180589dd3c3fdc9ddd3b24a38">lbtrm</a>, bytes_sent);</div><div class="line">                LBMMON_UINT64_SET(filter_lbtrm, lbtrm, Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#a6bad1e2180589dd3c3fdc9ddd3b24a38">lbtrm</a>, txw_msgs);</div><div class="line">                LBMMON_UINT64_SET(filter_lbtrm, lbtrm, Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#a6bad1e2180589dd3c3fdc9ddd3b24a38">lbtrm</a>, txw_bytes);</div><div class="line">                LBMMON_UINT64_SET(filter_lbtrm, lbtrm, Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#a6bad1e2180589dd3c3fdc9ddd3b24a38">lbtrm</a>, nak_pckts_rcved);</div><div class="line">                LBMMON_UINT64_SET(filter_lbtrm, lbtrm, Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#a6bad1e2180589dd3c3fdc9ddd3b24a38">lbtrm</a>, naks_rcved);</div><div class="line">                LBMMON_UINT64_SET(filter_lbtrm, lbtrm, Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#a6bad1e2180589dd3c3fdc9ddd3b24a38">lbtrm</a>, naks_ignored);</div><div class="line">                LBMMON_UINT64_SET(filter_lbtrm, lbtrm, Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#a6bad1e2180589dd3c3fdc9ddd3b24a38">lbtrm</a>, naks_shed);</div><div class="line">                LBMMON_UINT64_SET(filter_lbtrm, lbtrm, Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#a6bad1e2180589dd3c3fdc9ddd3b24a38">lbtrm</a>, naks_rx_delay_ignored);</div><div class="line">                LBMMON_UINT64_SET(filter_lbtrm, lbtrm, Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#a6bad1e2180589dd3c3fdc9ddd3b24a38">lbtrm</a>, rxs_sent);</div><div class="line">                LBMMON_UINT64_SET(filter_lbtrm, lbtrm, Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#a6bad1e2180589dd3c3fdc9ddd3b24a38">lbtrm</a>, rctlr_data_msgs);</div><div class="line">                LBMMON_UINT64_SET(filter_lbtrm, lbtrm, Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#a6bad1e2180589dd3c3fdc9ddd3b24a38">lbtrm</a>, rctlr_rx_msgs);</div><div class="line">                LBMMON_UINT64_SET(filter_lbtrm, lbtrm, Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#a6bad1e2180589dd3c3fdc9ddd3b24a38">lbtrm</a>, rx_bytes_sent);</div><div class="line">                msg.lbtrm = &amp;lbtrm;</div><div class="line">                <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">        <span class="keywordflow">case</span> <a class="code" href="lbm_8h.html#a1f4acd28e4192be6809ce2cc496cb514">LBM_TRANSPORT_STAT_LBTRU</a>:</div><div class="line">                msg.transport_type_case = LBMMON__UMSMON_MSG__STATS__SOURCE_TRANSPORT__TRANSPORT_TYPE_LBTRU;</div><div class="line">                LBMMON_UINT64_SET(filter_lbtru, lbtru, Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#acd0a2c474f818d9f43afb504bcdac266">lbtru</a>, msgs_sent);</div><div class="line">                LBMMON_UINT64_SET(filter_lbtru, lbtru, Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#acd0a2c474f818d9f43afb504bcdac266">lbtru</a>, bytes_sent);</div><div class="line">                LBMMON_UINT64_SET(filter_lbtru, lbtru, Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#acd0a2c474f818d9f43afb504bcdac266">lbtru</a>, nak_pckts_rcved);</div><div class="line">                LBMMON_UINT64_SET(filter_lbtru, lbtru, Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#acd0a2c474f818d9f43afb504bcdac266">lbtru</a>, naks_rcved);</div><div class="line">                LBMMON_UINT64_SET(filter_lbtru, lbtru, Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#acd0a2c474f818d9f43afb504bcdac266">lbtru</a>, naks_ignored);</div><div class="line">                LBMMON_UINT64_SET(filter_lbtru, lbtru, Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#acd0a2c474f818d9f43afb504bcdac266">lbtru</a>, naks_shed);</div><div class="line">                LBMMON_UINT64_SET(filter_lbtru, lbtru, Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#acd0a2c474f818d9f43afb504bcdac266">lbtru</a>, naks_rx_delay_ignored);</div><div class="line">                LBMMON_UINT64_SET(filter_lbtru, lbtru, Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#acd0a2c474f818d9f43afb504bcdac266">lbtru</a>, rxs_sent);</div><div class="line">                LBMMON_UINT64_SET(filter_lbtru, lbtru, Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#acd0a2c474f818d9f43afb504bcdac266">lbtru</a>, num_clients);</div><div class="line">                LBMMON_UINT64_SET(filter_lbtru, lbtru, Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#acd0a2c474f818d9f43afb504bcdac266">lbtru</a>, rx_bytes_sent);</div><div class="line">                msg.lbtru = &amp;lbtru;</div><div class="line">                <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">        <span class="keywordflow">case</span> <a class="code" href="lbm_8h.html#a64de821cc3a1afda47c5668996d16d9b">LBM_TRANSPORT_STAT_LBTIPC</a>:</div><div class="line">                msg.transport_type_case = LBMMON__UMSMON_MSG__STATS__RECEIVER_TRANSPORT__TRANSPORT_TYPE_LBTIPC;</div><div class="line">                LBMMON_UINT64_SET(filter_lbtipc, lbtipc, Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#a7b4175075377813b21794285ebad2a30">lbtipc</a>, num_clients);</div><div class="line">                LBMMON_UINT64_SET(filter_lbtipc, lbtipc, Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#a7b4175075377813b21794285ebad2a30">lbtipc</a>, msgs_sent);</div><div class="line">                LBMMON_UINT64_SET(filter_lbtipc, lbtipc, Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#a7b4175075377813b21794285ebad2a30">lbtipc</a>, bytes_sent);</div><div class="line">                msg.lbtipc = &amp;lbtipc;</div><div class="line">                <span class="keywordflow">break</span>;</div><div class="line">        <span class="keywordflow">case</span> <a class="code" href="lbm_8h.html#af5d79fa0d57faa68dfa42b20401a94d8">LBM_TRANSPORT_STAT_LBTSMX</a>:</div><div class="line">                msg.transport_type_case = LBMMON__UMSMON_MSG__STATS__RECEIVER_TRANSPORT__TRANSPORT_TYPE_LBTSMX;</div><div class="line">                LBMMON_UINT64_SET(filter_lbtsmx, lbtsmx, Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#abcd38be1b1e24c25185a5bfcfd0919f2">lbtsmx</a>, num_clients);</div><div class="line">                LBMMON_UINT64_SET(filter_lbtsmx, lbtsmx, Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#abcd38be1b1e24c25185a5bfcfd0919f2">lbtsmx</a>, msgs_sent);</div><div class="line">                LBMMON_UINT64_SET(filter_lbtsmx, lbtsmx, Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#abcd38be1b1e24c25185a5bfcfd0919f2">lbtsmx</a>, bytes_sent);</div><div class="line">                msg.lbtsmx = &amp;lbtsmx;</div><div class="line">                <span class="keywordflow">break</span>;</div><div class="line">        <span class="keywordflow">default</span>:</div><div class="line">                strncpy(ErrorString, <span class="stringliteral">&quot;Unknown LBM transport type&quot;</span>, <span class="keyword">sizeof</span>(ErrorString));</div><div class="line">                <span class="keywordflow">return</span> (-1);</div><div class="line"></div><div class="line">        }</div><div class="line"></div><div class="line">        *Size = lbmmon__umsmon_msg__get_packed_size(&amp;lbmmon_msg);</div><div class="line">        lbmmon__umsmon_msg__pack(&amp;lbmmon_msg, (<a class="code" href="lbm_8h.html#a09c7963deb485135d5bb29c84cd7d3a9">lbm_uint8_t</a> *)Destination);</div><div class="line">        <span class="keywordflow">return</span> (0);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> lbmmon_evq_format_pb_serialize(<span class="keywordtype">char</span> * Destination, <span class="keywordtype">size_t</span> * Size, <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> * ModuleID,</div><div class="line">        <span class="keyword">const</span> <a class="code" href="structlbmmon__packet__attributes__t__stct.html">lbmmon_packet_attributes_t</a> * Attributes, <span class="keyword">const</span> <a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a> * Statistics, <span class="keywordtype">void</span> * FormatClientData)</div><div class="line">{</div><div class="line">        lbmmon_format_pb_t * fmt = (lbmmon_format_pb_t *)FormatClientData;</div><div class="line">        Lbmmon__UMSMonMsg lbmmon_msg = LBMMON__UMSMON_MSG__INIT;</div><div class="line">        <a class="code" href="struct__Lbmmon____UMSMonMsg____Stats.html">Lbmmon__UMSMonMsg__Stats</a> lbmmon_msg_stats = LBMMON__UMSMON_MSG__STATS__INIT;</div><div class="line">        <a class="code" href="struct__Lbmmon____UMSMonMsg____Stats____EventQueue.html">Lbmmon__UMSMonMsg__Stats__EventQueue</a> msg = LBMMON__UMSMON_MSG__STATS__EVENT_QUEUE__INIT;</div><div class="line">        <a class="code" href="struct__Lbmmon____UMSMonMsg____Stats____EventQueue.html">Lbmmon__UMSMonMsg__Stats__EventQueue</a> * msg_ptr = &amp;msg;</div><div class="line">        Lbmmon_Filter__UMSMonMsg__Stats__EventQueue filter_msg = fmt-&gt;mEventQueueFilter;</div><div class="line">        Lbmmon__UMMonAttributes attributes = LBMMON__UMMON_ATTRIBUTES__INIT;</div><div class="line"></div><div class="line">        <span class="keywordflow">if</span> ((Destination == NULL) || (Size == NULL) || (*Size == 0) || (Statistics == NULL))</div><div class="line">        {</div><div class="line">                <span class="keywordflow">return</span> (-1);</div><div class="line">        }</div><div class="line"></div><div class="line">        *ModuleID = MAKE_MODULE_VERSION(<a class="code" href="lbmmon_8h.html#a337193651e5882ba963aea467f8de94e">LBMMON_FORMAT_PB_MODULE_ID</a>,LBMMON_FORMAT_PB_VERSION_CURRENT);</div><div class="line">        lbmmon_attributes_format_pb_serialize(&amp;attributes, Attributes);</div><div class="line">        lbmmon_msg.attributes = &amp;attributes;</div><div class="line">        lbmmon_msg.stats = &amp;lbmmon_msg_stats;</div><div class="line">        lbmmon_msg_stats.n_event_queues = 1;</div><div class="line">        lbmmon_msg_stats.event_queues = &amp;msg_ptr;</div><div class="line">        LBMMON_UINT64_SET(filter_msg, msg, (*Statistics), data_msgs);</div><div class="line">        LBMMON_UINT64_SET(filter_msg, msg, (*Statistics), data_msgs_tot);</div><div class="line">        LBMMON_UINT64_SET(filter_msg, msg, (*Statistics), data_msgs_svc_min);</div><div class="line">        LBMMON_UINT64_SET(filter_msg, msg, (*Statistics), data_msgs_svc_mean);</div><div class="line">        LBMMON_UINT64_SET(filter_msg, msg, (*Statistics), data_msgs_svc_max);</div><div class="line">        LBMMON_UINT64_SET(filter_msg, msg, (*Statistics), resp_msgs);</div><div class="line">        LBMMON_UINT64_SET(filter_msg, msg, (*Statistics), resp_msgs_tot);</div><div class="line">        LBMMON_UINT64_SET(filter_msg, msg, (*Statistics), resp_msgs_svc_min);</div><div class="line">        LBMMON_UINT64_SET(filter_msg, msg, (*Statistics), resp_msgs_svc_mean);</div><div class="line">        LBMMON_UINT64_SET(filter_msg, msg, (*Statistics), resp_msgs_svc_max);</div><div class="line">        LBMMON_UINT64_SET(filter_msg, msg, (*Statistics), topicless_im_msgs);</div><div class="line">        LBMMON_UINT64_SET(filter_msg, msg, (*Statistics), topicless_im_msgs_tot);</div><div class="line">        LBMMON_UINT64_SET(filter_msg, msg, (*Statistics), topicless_im_msgs_svc_min);</div><div class="line">        LBMMON_UINT64_SET(filter_msg, msg, (*Statistics), topicless_im_msgs_svc_mean);</div><div class="line">        LBMMON_UINT64_SET(filter_msg, msg, (*Statistics), topicless_im_msgs_svc_max);</div><div class="line">        LBMMON_UINT64_SET(filter_msg, msg, (*Statistics), wrcv_msgs);</div><div class="line">        LBMMON_UINT64_SET(filter_msg, msg, (*Statistics), wrcv_msgs_tot);</div><div class="line">        LBMMON_UINT64_SET(filter_msg, msg, (*Statistics), wrcv_msgs_svc_min);</div><div class="line">        LBMMON_UINT64_SET(filter_msg, msg, (*Statistics), wrcv_msgs_svc_mean);</div><div class="line">        LBMMON_UINT64_SET(filter_msg, msg, (*Statistics), wrcv_msgs_svc_max);</div><div class="line">        LBMMON_UINT64_SET(filter_msg, msg, (*Statistics), io_events);</div><div class="line">        LBMMON_UINT64_SET(filter_msg, msg, (*Statistics), io_events_tot);</div><div class="line">        LBMMON_UINT64_SET(filter_msg, msg, (*Statistics), io_events_svc_min);</div><div class="line">        LBMMON_UINT64_SET(filter_msg, msg, (*Statistics), io_events_svc_mean);</div><div class="line">        LBMMON_UINT64_SET(filter_msg, msg, (*Statistics), io_events_svc_max);</div><div class="line">        LBMMON_UINT64_SET(filter_msg, msg, (*Statistics), timer_events);</div><div class="line">        LBMMON_UINT64_SET(filter_msg, msg, (*Statistics), timer_events_tot);</div><div class="line">        LBMMON_UINT64_SET(filter_msg, msg, (*Statistics), timer_events_svc_min);</div><div class="line">        LBMMON_UINT64_SET(filter_msg, msg, (*Statistics), timer_events_svc_mean);</div><div class="line">        LBMMON_UINT64_SET(filter_msg, msg, (*Statistics), timer_events_svc_max);</div><div class="line">        LBMMON_UINT64_SET(filter_msg, msg, (*Statistics), source_events);</div><div class="line">        LBMMON_UINT64_SET(filter_msg, msg, (*Statistics), source_events_tot);</div><div class="line">        LBMMON_UINT64_SET(filter_msg, msg, (*Statistics), source_events_svc_min);</div><div class="line">        LBMMON_UINT64_SET(filter_msg, msg, (*Statistics), source_events_svc_mean);</div><div class="line">        LBMMON_UINT64_SET(filter_msg, msg, (*Statistics), source_events_svc_max);</div><div class="line">        LBMMON_UINT64_SET(filter_msg, msg, (*Statistics), unblock_events);</div><div class="line">        LBMMON_UINT64_SET(filter_msg, msg, (*Statistics), unblock_events_tot);</div><div class="line">        LBMMON_UINT64_SET(filter_msg, msg, (*Statistics), cancel_events);</div><div class="line">        LBMMON_UINT64_SET(filter_msg, msg, (*Statistics), cancel_events_tot);</div><div class="line">        LBMMON_UINT64_SET(filter_msg, msg, (*Statistics), cancel_events_svc_min);</div><div class="line">        LBMMON_UINT64_SET(filter_msg, msg, (*Statistics), cancel_events_svc_mean);</div><div class="line">        LBMMON_UINT64_SET(filter_msg, msg, (*Statistics), cancel_events_svc_max);</div><div class="line">        LBMMON_UINT64_SET(filter_msg, msg, (*Statistics), context_source_events);</div><div class="line">        LBMMON_UINT64_SET(filter_msg, msg, (*Statistics), context_source_events_tot);</div><div class="line">        LBMMON_UINT64_SET(filter_msg, msg, (*Statistics), context_source_events_svc_min);</div><div class="line">        LBMMON_UINT64_SET(filter_msg, msg, (*Statistics), context_source_events_svc_mean);</div><div class="line">        LBMMON_UINT64_SET(filter_msg, msg, (*Statistics), context_source_events_svc_max);</div><div class="line">        LBMMON_UINT64_SET(filter_msg, msg, (*Statistics), events);</div><div class="line">        LBMMON_UINT64_SET(filter_msg, msg, (*Statistics), events_tot);</div><div class="line">        LBMMON_UINT64_SET(filter_msg, msg, (*Statistics), age_min);</div><div class="line">        LBMMON_UINT64_SET(filter_msg, msg, (*Statistics), age_mean);</div><div class="line">        LBMMON_UINT64_SET(filter_msg, msg, (*Statistics), age_max);</div><div class="line">        LBMMON_UINT64_SET(filter_msg, msg, (*Statistics), callback_events);</div><div class="line">        LBMMON_UINT64_SET(filter_msg, msg, (*Statistics), callback_events_tot);</div><div class="line">        LBMMON_UINT64_SET(filter_msg, msg, (*Statistics), callback_events_svc_min);</div><div class="line">        LBMMON_UINT64_SET(filter_msg, msg, (*Statistics), callback_events_svc_mean);</div><div class="line">        LBMMON_UINT64_SET(filter_msg, msg, (*Statistics), callback_events_svc_max);</div><div class="line"></div><div class="line">        *Size = lbmmon__umsmon_msg__get_packed_size(&amp;lbmmon_msg);</div><div class="line">        lbmmon__umsmon_msg__pack(&amp;lbmmon_msg, (<a class="code" href="lbm_8h.html#a09c7963deb485135d5bb29c84cd7d3a9">lbm_uint8_t</a> *)Destination);</div><div class="line">        <span class="keywordflow">return</span> (0);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> lbmmon_ctx_format_pb_serialize(<span class="keywordtype">char</span> * Destination, <span class="keywordtype">size_t</span> * Size, <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> * ModuleID,</div><div class="line">        <span class="keyword">const</span> <a class="code" href="structlbmmon__packet__attributes__t__stct.html">lbmmon_packet_attributes_t</a> * Attributes, <span class="keyword">const</span> <a class="code" href="structlbm__context__stats__t__stct.html">lbm_context_stats_t</a> * Statistics, <span class="keywordtype">void</span> * FormatClientData)</div><div class="line">{</div><div class="line">        lbmmon_format_pb_t * fmt = (lbmmon_format_pb_t *)FormatClientData;</div><div class="line">        Lbmmon__UMSMonMsg lbmmon_msg = LBMMON__UMSMON_MSG__INIT;</div><div class="line">        <a class="code" href="struct__Lbmmon____UMSMonMsg____Stats.html">Lbmmon__UMSMonMsg__Stats</a> lbmmon_msg_stats = LBMMON__UMSMON_MSG__STATS__INIT;</div><div class="line">        <a class="code" href="struct__Lbmmon____UMSMonMsg____Stats____Context.html">Lbmmon__UMSMonMsg__Stats__Context</a> msg = LBMMON__UMSMON_MSG__STATS__CONTEXT__INIT;</div><div class="line">        Lbmmon_Filter__UMSMonMsg__Stats__Context filter_msg = fmt-&gt;mContextFilter;</div><div class="line">        Lbmmon__UMMonAttributes attributes = LBMMON__UMMON_ATTRIBUTES__INIT;</div><div class="line"></div><div class="line">        <span class="keywordflow">if</span> ((Destination == NULL) || (Size == NULL) || (*Size == 0) || (Statistics == NULL))</div><div class="line">        {</div><div class="line">                <span class="keywordflow">return</span> (-1);</div><div class="line">        }</div><div class="line"></div><div class="line">        *ModuleID = MAKE_MODULE_VERSION(<a class="code" href="lbmmon_8h.html#a337193651e5882ba963aea467f8de94e">LBMMON_FORMAT_PB_MODULE_ID</a>, LBMMON_FORMAT_PB_VERSION_CURRENT);</div><div class="line">        lbmmon_attributes_format_pb_serialize(&amp;attributes, Attributes);</div><div class="line">        lbmmon_msg.attributes = &amp;attributes;</div><div class="line">        lbmmon_msg.stats = &amp;lbmmon_msg_stats;</div><div class="line">        lbmmon_msg_stats.context = &amp;msg;</div><div class="line">        LBMMON_UINT64_SET(filter_msg, msg, (*Statistics), tr_dgrams_sent);</div><div class="line">        LBMMON_UINT64_SET(filter_msg, msg, (*Statistics), tr_bytes_sent);</div><div class="line">        LBMMON_UINT64_SET(filter_msg, msg, (*Statistics), tr_dgrams_rcved);</div><div class="line">        LBMMON_UINT64_SET(filter_msg, msg, (*Statistics), tr_bytes_rcved);</div><div class="line">        LBMMON_UINT64_SET(filter_msg, msg, (*Statistics), tr_dgrams_dropped_ver);</div><div class="line">        LBMMON_UINT64_SET(filter_msg, msg, (*Statistics), tr_dgrams_dropped_type);</div><div class="line">        LBMMON_UINT64_SET(filter_msg, msg, (*Statistics), tr_dgrams_dropped_malformed);</div><div class="line">        LBMMON_UINT64_SET(filter_msg, msg, (*Statistics), tr_dgrams_send_failed);</div><div class="line">        LBMMON_UINT64_SET(filter_msg, msg, (*Statistics), tr_src_topics);</div><div class="line">        LBMMON_UINT64_SET(filter_msg, msg, (*Statistics), tr_rcv_topics);</div><div class="line">        LBMMON_UINT64_SET(filter_msg, msg, (*Statistics), tr_rcv_unresolved_topics);</div><div class="line">        LBMMON_UINT64_SET(filter_msg, msg, (*Statistics), lbtrm_unknown_msgs_rcved);</div><div class="line">        LBMMON_UINT64_SET(filter_msg, msg, (*Statistics), lbtru_unknown_msgs_rcved);</div><div class="line">        LBMMON_UINT64_SET(filter_msg, msg, (*Statistics), send_blocked);</div><div class="line">        LBMMON_UINT64_SET(filter_msg, msg, (*Statistics), send_would_block);</div><div class="line">        LBMMON_UINT64_SET(filter_msg, msg, (*Statistics), resp_blocked);</div><div class="line">        LBMMON_UINT64_SET(filter_msg, msg, (*Statistics), resp_would_block);</div><div class="line">        LBMMON_UINT64_SET(filter_msg, msg, (*Statistics), uim_dup_msgs_rcved);</div><div class="line">        LBMMON_UINT64_SET(filter_msg, msg, (*Statistics), uim_msgs_no_stream_rcved);</div><div class="line">        LBMMON_UINT64_SET(filter_msg, msg, (*Statistics), fragments_lost);</div><div class="line">        LBMMON_UINT64_SET(filter_msg, msg, (*Statistics), fragments_unrecoverably_lost);</div><div class="line">        LBMMON_UINT64_SET(filter_msg, msg, (*Statistics), rcv_cb_svc_time_min);</div><div class="line">        LBMMON_UINT64_SET(filter_msg, msg, (*Statistics), rcv_cb_svc_time_max);</div><div class="line">        LBMMON_UINT64_SET(filter_msg, msg, (*Statistics), rcv_cb_svc_time_mean);</div><div class="line"></div><div class="line">        *Size = lbmmon__umsmon_msg__get_packed_size(&amp;lbmmon_msg);</div><div class="line">        lbmmon__umsmon_msg__pack(&amp;lbmmon_msg, (<a class="code" href="lbm_8h.html#a09c7963deb485135d5bb29c84cd7d3a9">lbm_uint8_t</a> *)Destination);</div><div class="line">        <span class="keywordflow">return</span> (0);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> lbmmon_rcv_topic_format_pb_serialize(<span class="keywordtype">char</span> * Destination, <span class="keywordtype">size_t</span> * Size, <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> * ModuleID, </div><div class="line">        <span class="keyword">const</span> <a class="code" href="structlbmmon__packet__attributes__t__stct.html">lbmmon_packet_attributes_t</a> * Attributes, <span class="keyword">const</span> <span class="keywordtype">char</span> * Topic, <a class="code" href="lbm_8h.html#a72438fab15bf500af58d2a8a521e470d">lbm_ulong_t</a> SourceCount, </div><div class="line">        <span class="keyword">const</span> <a class="code" href="structlbm__rcv__topic__stats__t__stct.html">lbm_rcv_topic_stats_t</a> * Sources, <span class="keywordtype">void</span> * FormatClientData)</div><div class="line">{</div><div class="line">        Lbmmon__UMSMonMsg lbmmon_msg = LBMMON__UMSMON_MSG__INIT;</div><div class="line">        <a class="code" href="struct__Lbmmon____UMSMonMsg____Events.html">Lbmmon__UMSMonMsg__Events</a> lbmmon_msg_events = LBMMON__UMSMON_MSG__EVENTS__INIT;</div><div class="line">        <a class="code" href="struct__Lbmmon____UMSMonMsg____Events____ReceiverTopic.html">Lbmmon__UMSMonMsg__Events__ReceiverTopic</a> msg = LBMMON__UMSMON_MSG__EVENTS__RECEIVER_TOPIC__INIT;</div><div class="line">        <a class="code" href="struct__Lbmmon____UMSMonMsg____Events____ReceiverTopic.html">Lbmmon__UMSMonMsg__Events__ReceiverTopic</a> * msg_ptr = &amp;msg;</div><div class="line">        Lbmmon__UMMonAttributes attributes = LBMMON__UMMON_ATTRIBUTES__INIT;</div><div class="line">        <a class="code" href="struct__Lbmmon____UMSMonMsg____Events____ReceiverTopic____Source.html">Lbmmon__UMSMonMsg__Events__ReceiverTopic__Source</a> **sources = NULL;</div><div class="line">        <span class="keywordtype">char</span> **otid_strings = NULL;</div><div class="line">        <span class="keywordtype">int</span> idx;</div><div class="line">        <span class="keywordtype">size_t</span> packed_size;</div><div class="line"></div><div class="line">        <span class="keywordflow">if</span> ((Destination == NULL) || (Size == NULL) || (*Size == 0))</div><div class="line">        {</div><div class="line">                <span class="keywordflow">return</span> (-1);</div><div class="line">        }</div><div class="line">        *ModuleID = MAKE_MODULE_VERSION(<a class="code" href="lbmmon_8h.html#a337193651e5882ba963aea467f8de94e">LBMMON_FORMAT_PB_MODULE_ID</a>,LBMMON_FORMAT_PB_VERSION_CURRENT);</div><div class="line">        lbmmon_attributes_format_pb_serialize(&amp;attributes, Attributes);</div><div class="line">        lbmmon_msg.attributes = &amp;attributes;</div><div class="line">        lbmmon_msg.events = &amp;lbmmon_msg_events;</div><div class="line">        lbmmon_msg_events.n_receiver_topics = 1;</div><div class="line">        lbmmon_msg_events.receiver_topics = &amp;msg_ptr;</div><div class="line">        msg.topic = (<span class="keywordtype">char</span> *)Topic;</div><div class="line">        <span class="keywordflow">if</span> (SourceCount &gt; 0)</div><div class="line">        {</div><div class="line">                sources = malloc(<span class="keyword">sizeof</span>(<a class="code" href="struct__Lbmmon____UMSMonMsg____Events____ReceiverTopic____Source.html">Lbmmon__UMSMonMsg__Events__ReceiverTopic__Source</a> *) * SourceCount);</div><div class="line">                <span class="keywordflow">if</span> (sources == NULL)</div><div class="line">                {</div><div class="line">                        lbmmon_format_pb_report_allocation_error(<span class="keyword">sizeof</span>(<a class="code" href="struct__Lbmmon____UMSMonMsg____Events____ReceiverTopic____Source.html">Lbmmon__UMSMonMsg__Events__ReceiverTopic__Source</a> *) * SourceCount);</div><div class="line">                        <span class="keywordflow">return</span> (-1);</div><div class="line">                }</div><div class="line">                otid_strings = malloc(<span class="keyword">sizeof</span>(<span class="keywordtype">char</span> *) * SourceCount);</div><div class="line">                <span class="keywordflow">if</span> (otid_strings == NULL)</div><div class="line">                {</div><div class="line">                        lbmmon_format_pb_report_allocation_error(<span class="keyword">sizeof</span>(<span class="keywordtype">char</span> *) * SourceCount);</div><div class="line">                        free(sources);</div><div class="line">                        <span class="keywordflow">return</span> (-1);</div><div class="line">                }</div><div class="line">                <span class="keywordflow">for</span> (idx = 0; idx &lt; SourceCount; ++idx)</div><div class="line">                {</div><div class="line">                        sources[idx] = malloc(<span class="keyword">sizeof</span>(<a class="code" href="struct__Lbmmon____UMSMonMsg____Events____ReceiverTopic____Source.html">Lbmmon__UMSMonMsg__Events__ReceiverTopic__Source</a>));</div><div class="line">                        <span class="keywordflow">if</span> (sources[idx] == NULL)</div><div class="line">                        {</div><div class="line">                                lbmmon_format_pb_report_allocation_error(<span class="keyword">sizeof</span>(<a class="code" href="struct__Lbmmon____UMSMonMsg____Events____ReceiverTopic____Source.html">Lbmmon__UMSMonMsg__Events__ReceiverTopic__Source</a>));</div><div class="line">                                free(otid_strings);</div><div class="line">                                free(sources);</div><div class="line">                                <span class="keywordflow">return</span> (-1);</div><div class="line">                        }</div><div class="line">                        lbmmon__umsmon_msg__events__receiver_topic__source__init(sources[idx]);</div><div class="line">                        sources[idx]-&gt;source_string = (<span class="keywordtype">char</span> *)Sources[idx].source;</div><div class="line">                        otid_strings[idx] = malloc((LBM_OTID_BLOCK_SZ * 2) + 1);</div><div class="line">                        <span class="keywordflow">if</span> (otid_strings[idx] == NULL)</div><div class="line">                        {</div><div class="line">                                lbmmon_format_pb_report_allocation_error(LBM_OTID_BLOCK_SZ);</div><div class="line">                                free(sources);</div><div class="line">                                free(otid_strings);</div><div class="line">                                <span class="keywordflow">return</span> (-1);</div><div class="line">                        }</div><div class="line">                        strcpy(otid_strings[idx], (<span class="keywordtype">char</span> *)mul_hexdump((<span class="keyword">const</span> <span class="keywordtype">char</span> *)Sources[idx].otid, LBM_OTID_BLOCK_SZ));</div><div class="line">                        sources[idx]-&gt;otid = otid_strings[idx];</div><div class="line">                        sources[idx]-&gt;topic_idx = Sources[idx].<a class="code" href="structlbm__rcv__topic__stats__t__stct.html#a1c7eeb9a981d4be6ab9d989177f7e602">topic_idx</a>;</div><div class="line">                        sources[idx]-&gt;source_state = Sources[idx].<a class="code" href="structlbm__rcv__topic__stats__t__stct.html#a068955b59605ff12802ede240e15924b">flags</a>;</div><div class="line">                        sources[idx]-&gt;timestamp_sec = Sources[idx].<a class="code" href="structlbm__rcv__topic__stats__t__stct.html#ab9fb3f084e9c637edef9ac4c4630bc75">timestamp_sec</a>;</div><div class="line">                        sources[idx]-&gt;timestamp_usec = Sources[idx].<a class="code" href="structlbm__rcv__topic__stats__t__stct.html#a583197a249ff883258ea042e9cafca4a">timestamp_usec</a>;</div><div class="line">                }</div><div class="line">                msg.n_sources = SourceCount;</div><div class="line">                msg.sources = sources;</div><div class="line">        }</div><div class="line"></div><div class="line">        packed_size = lbmmon__umsmon_msg__get_packed_size(&amp;lbmmon_msg);</div><div class="line">        <span class="keywordflow">if</span> (packed_size &gt; *Size) {</div><div class="line">                snprintf(ErrorString, <span class="keyword">sizeof</span>(ErrorString), <span class="stringliteral">&quot;[LBMMON] Unable to send monitoring message that is larger than the maximum allowed size of %lu (size=%lu).\n&quot;</span>,</div><div class="line">                        *Size, packed_size);</div><div class="line">                <span class="keywordflow">return</span> (-1);</div><div class="line">        }</div><div class="line">        *Size = packed_size;</div><div class="line">        lbmmon__umsmon_msg__pack(&amp;lbmmon_msg, (<a class="code" href="lbm_8h.html#a09c7963deb485135d5bb29c84cd7d3a9">lbm_uint8_t</a> *)Destination);</div><div class="line">        <span class="keywordflow">for</span> (idx = 0; idx &lt; SourceCount; ++idx)</div><div class="line">        {</div><div class="line">                free(sources[idx]);</div><div class="line">                free(otid_strings[idx]);</div><div class="line">        }</div><div class="line">        free(sources);</div><div class="line">        free(otid_strings);</div><div class="line">        <span class="keywordflow">return</span> (0);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> lbmmon_wildcard_rcv_format_pb_serialize(<span class="keywordtype">char</span> * Destination, <span class="keywordtype">size_t</span> * Size, <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> * ModuleID,</div><div class="line">        <span class="keyword">const</span> <a class="code" href="structlbmmon__packet__attributes__t__stct.html">lbmmon_packet_attributes_t</a> * Attributes, <span class="keyword">const</span> <a class="code" href="structlbm__wildcard__rcv__stats__t__stct.html">lbm_wildcard_rcv_stats_t</a> * Statistics, <span class="keywordtype">void</span> * FormatClientData)</div><div class="line">{</div><div class="line">        Lbmmon__UMSMonMsg lbmmon_msg = LBMMON__UMSMON_MSG__INIT;</div><div class="line">        <a class="code" href="struct__Lbmmon____UMSMonMsg____Events.html">Lbmmon__UMSMonMsg__Events</a> lbmmon_msg_events = LBMMON__UMSMON_MSG__EVENTS__INIT;</div><div class="line">        <a class="code" href="struct__Lbmmon____UMSMonMsg____Events____WildcardReceiver.html">Lbmmon__UMSMonMsg__Events__WildcardReceiver</a> msg = LBMMON__UMSMON_MSG__EVENTS__WILDCARD_RECEIVER__INIT;</div><div class="line">        <a class="code" href="struct__Lbmmon____UMSMonMsg____Events____WildcardReceiver.html">Lbmmon__UMSMonMsg__Events__WildcardReceiver</a> * msg_ptr = &amp;msg;</div><div class="line">        Lbmmon__UMMonAttributes attributes = LBMMON__UMMON_ATTRIBUTES__INIT;</div><div class="line">        <span class="keywordtype">size_t</span> packed_size;</div><div class="line"></div><div class="line">        <span class="keywordflow">if</span> ((Destination == NULL) || (Size == NULL) || (*Size == 0) || (Statistics == NULL))</div><div class="line">        {</div><div class="line">                <span class="keywordflow">return</span> (-1);</div><div class="line">        }</div><div class="line"></div><div class="line">        *ModuleID = MAKE_MODULE_VERSION(<a class="code" href="lbmmon_8h.html#a337193651e5882ba963aea467f8de94e">LBMMON_FORMAT_PB_MODULE_ID</a>,LBMMON_FORMAT_PB_VERSION_CURRENT);</div><div class="line">        lbmmon_attributes_format_pb_serialize(&amp;attributes, Attributes);</div><div class="line">        lbmmon_msg.attributes = &amp;attributes;</div><div class="line">        lbmmon_msg.events = &amp;lbmmon_msg_events;</div><div class="line">        lbmmon_msg_events.n_wildcard_receivers = 1;</div><div class="line">        lbmmon_msg_events.wildcard_receivers = &amp;msg_ptr;</div><div class="line">        msg.pattern = (<span class="keywordtype">char</span> *)Statistics-&gt;<a class="code" href="structlbm__wildcard__rcv__stats__t__stct.html#a45dcb7dd7131525d0eaa525d013be336">pattern</a>;</div><div class="line">        msg.type = Statistics-&gt;<a class="code" href="structlbm__wildcard__rcv__stats__t__stct.html#a013c6df622d0fcc55e426242a3fae1f9">type</a>;</div><div class="line">        </div><div class="line">        packed_size = lbmmon__umsmon_msg__get_packed_size(&amp;lbmmon_msg);</div><div class="line">        <span class="keywordflow">if</span> (packed_size &gt; *Size) {</div><div class="line">                snprintf(ErrorString, <span class="keyword">sizeof</span>(ErrorString), <span class="stringliteral">&quot;[LBMMON] Unable to send monitoring message that is larger than the maximum allowed size of %lu (size=%lu).\n&quot;</span>,</div><div class="line">                        *Size, packed_size);</div><div class="line">                <span class="keywordflow">return</span> (-1);</div><div class="line">        }</div><div class="line">        *Size = packed_size;</div><div class="line">        lbmmon__umsmon_msg__pack(&amp;lbmmon_msg, (<a class="code" href="lbm_8h.html#a09c7963deb485135d5bb29c84cd7d3a9">lbm_uint8_t</a> *)Destination);</div><div class="line">        <span class="keywordflow">return</span> (0);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> lbmmon_store_format_pb_serialize(<span class="keywordtype">char</span> * Destination, <span class="keywordtype">size_t</span> * Size, <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> * ModuleID,</div><div class="line">        <span class="keyword">const</span> <a class="code" href="structlbmmon__packet__attributes__t__stct.html">lbmmon_packet_attributes_t</a> * Attributes, Lbmmon__UMPMonMsg * StoreMsg, <span class="keywordtype">void</span> * FormatClientData)</div><div class="line">{</div><div class="line">        Lbmmon__UMMonAttributes attributes = LBMMON__UMMON_ATTRIBUTES__INIT;</div><div class="line">        <span class="keywordtype">size_t</span> packed_size;</div><div class="line"></div><div class="line">        <span class="keywordflow">if</span> ((Destination == NULL) || (Size == NULL) || (*Size == 0) || (StoreMsg == NULL))</div><div class="line">        {</div><div class="line">                <span class="keywordflow">return</span> (-1);</div><div class="line">        }</div><div class="line"></div><div class="line">        *ModuleID = MAKE_MODULE_VERSION(<a class="code" href="lbmmon_8h.html#a337193651e5882ba963aea467f8de94e">LBMMON_FORMAT_PB_MODULE_ID</a>,LBMMON_FORMAT_PB_VERSION_CURRENT);</div><div class="line">        lbmmon_attributes_format_pb_serialize(&amp;attributes, Attributes);</div><div class="line">        StoreMsg-&gt;attributes = &amp;attributes;</div><div class="line"></div><div class="line">        packed_size = lbmmon__umpmon_msg__get_packed_size(StoreMsg);</div><div class="line">        <span class="keywordflow">if</span> (packed_size &gt; *Size) {</div><div class="line">                snprintf(ErrorString, <span class="keyword">sizeof</span>(ErrorString), <span class="stringliteral">&quot;[LBMMON] Unable to send monitoring message for store \&quot;%s\&quot; that is larger than the maximum allowed size of %lu (size=%lu).\n&quot;</span>,</div><div class="line">                        attributes.application_id, *Size, packed_size);</div><div class="line">                <span class="keywordflow">return</span> (-1);</div><div class="line">        }</div><div class="line">        *Size = packed_size;</div><div class="line">        lbmmon__umpmon_msg__pack(StoreMsg, (<a class="code" href="lbm_8h.html#a09c7963deb485135d5bb29c84cd7d3a9">lbm_uint8_t</a> *)Destination);</div><div class="line">        <span class="keywordflow">return</span> (0);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> lbmmon_gateway_format_pb_serialize(<span class="keywordtype">char</span> * Destination, <span class="keywordtype">size_t</span> * Size, <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> * ModuleID,</div><div class="line">        <span class="keyword">const</span> <a class="code" href="structlbmmon__packet__attributes__t__stct.html">lbmmon_packet_attributes_t</a> * Attributes, Lbmmon__DROMonMsg * GatewayMsg, <span class="keywordtype">void</span> * FormatClientData)</div><div class="line">{</div><div class="line">        Lbmmon__UMMonAttributes attributes = LBMMON__UMMON_ATTRIBUTES__INIT;</div><div class="line">        <span class="keywordtype">size_t</span> packed_size;</div><div class="line"></div><div class="line">        <span class="keywordflow">if</span> ((Destination == NULL) || (Size == NULL) || (*Size == 0) || (GatewayMsg == NULL))</div><div class="line">        {</div><div class="line">                <span class="keywordflow">return</span> (-1);</div><div class="line">        }</div><div class="line"></div><div class="line">        *ModuleID = MAKE_MODULE_VERSION(<a class="code" href="lbmmon_8h.html#a337193651e5882ba963aea467f8de94e">LBMMON_FORMAT_PB_MODULE_ID</a>, LBMMON_FORMAT_PB_VERSION_CURRENT);</div><div class="line">        lbmmon_attributes_format_pb_serialize(&amp;attributes, Attributes);</div><div class="line">        GatewayMsg-&gt;attributes = &amp;attributes;</div><div class="line"></div><div class="line">        packed_size = lbmmon__dromon_msg__get_packed_size(GatewayMsg);</div><div class="line">        <span class="keywordflow">if</span> (packed_size &gt; *Size) {</div><div class="line">                snprintf(ErrorString, <span class="keyword">sizeof</span>(ErrorString), <span class="stringliteral">&quot;[LBMMON] Unable to send monitoring message that is larger than the maximum allowed size of %lu (size=%lu).\n&quot;</span>,</div><div class="line">                        *Size, packed_size);</div><div class="line">                <span class="keywordflow">return</span> (-1);</div><div class="line">        }</div><div class="line">        *Size = packed_size;</div><div class="line">        lbmmon__dromon_msg__pack(GatewayMsg, (<a class="code" href="lbm_8h.html#a09c7963deb485135d5bb29c84cd7d3a9">lbm_uint8_t</a> *)Destination);</div><div class="line">        <span class="keywordflow">return</span> (0);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">void</span> lbmmon_attributes_format_pb_deserialize(<a class="code" href="structlbmmon__packet__attributes__t__stct.html">lbmmon_packet_attributes_t</a> * Attributes, Lbmmon__UMMonAttributes *attributes)</div><div class="line">{</div><div class="line">        <span class="keyword">struct </span>in_addr addr;</div><div class="line"></div><div class="line">        mul_inet_aton(attributes-&gt;sender_ipv4_address, &amp;addr);</div><div class="line">        Attributes-&gt;<a class="code" href="structlbmmon__packet__attributes__t__stct.html#a2a61c709b02d89f842cf95b6e31bd644">mAddress</a> = addr.s_addr;</div><div class="line">        Attributes-&gt;<a class="code" href="structlbmmon__packet__attributes__t__stct.html#a66e2e7e640f5b5a0cd53f0df089c77ec">mTimestamp</a> = attributes-&gt;timestamp;</div><div class="line">        strncpy(Attributes-&gt;<a class="code" href="structlbmmon__packet__attributes__t__stct.html#aea5005828511b60549bde44e27f0d998">mApplicationSourceID</a>, attributes-&gt;application_id, <span class="keyword">sizeof</span>(Attributes-&gt;<a class="code" href="structlbmmon__packet__attributes__t__stct.html#aea5005828511b60549bde44e27f0d998">mApplicationSourceID</a>));</div><div class="line">        Attributes-&gt;<a class="code" href="structlbmmon__packet__attributes__t__stct.html#ad69e7ff819fda7b8ce190360a9dbd5dd">mObjectID</a> = attributes-&gt;object_id;</div><div class="line">        Attributes-&gt;<a class="code" href="structlbmmon__packet__attributes__t__stct.html#afc4f40bac783c2fd1ac72c603fe9920f">mProcessID</a> = attributes-&gt;process_id;</div><div class="line">        <span class="keywordflow">if</span> (attributes-&gt;context_instance.len &gt; 0){</div><div class="line">                memcpy(Attributes-&gt;<a class="code" href="structlbmmon__packet__attributes__t__stct.html#a101203a0224a1fdb40f3512272ea4938">mContextInstance</a>, attributes-&gt;context_instance.data, LBM_CONTEXT_INSTANCE_BLOCK_SZ);</div><div class="line">        }</div><div class="line">        Attributes-&gt;<a class="code" href="structlbmmon__packet__attributes__t__stct.html#aa86ca67069f59861766b439ad73a39c9">mDomainID</a> = attributes-&gt;domain_id;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> lbmmon_rcv_format_pb_deserialize(<a class="code" href="structlbmmon__packet__attributes__t__stct.html">lbmmon_packet_attributes_t</a> * Attributes, <a class="code" href="structlbm__rcv__transport__stats__t__stct.html">lbm_rcv_transport_stats_t</a> * Statistics,</div><div class="line">        <span class="keyword">const</span> <span class="keywordtype">char</span> * Source, <span class="keywordtype">size_t</span> Length, <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> ModuleID, <span class="keywordtype">void</span> * FormatClientData)</div><div class="line">{</div><div class="line">        <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> modid;</div><div class="line">        lbmmon_format_pb_t * format_options;</div><div class="line">        Lbmmon__UMSMonMsg *lbmmon_msg = NULL;</div><div class="line">        <a class="code" href="struct__Lbmmon____UMSMonMsg____Stats____ReceiverTransport.html">Lbmmon__UMSMonMsg__Stats__ReceiverTransport</a> *msg = NULL;</div><div class="line">        <a class="code" href="struct__Lbmmon____UMSMonMsg____Stats____ReceiverTransport____TCP.html">Lbmmon__UMSMonMsg__Stats__ReceiverTransport__TCP</a> *tcp = NULL;</div><div class="line">        <a class="code" href="struct__Lbmmon____UMSMonMsg____Stats____ReceiverTransport____LBTRM.html">Lbmmon__UMSMonMsg__Stats__ReceiverTransport__LBTRM</a> *lbtrm = NULL;</div><div class="line">        <a class="code" href="struct__Lbmmon____UMSMonMsg____Stats____ReceiverTransport____LBTRU.html">Lbmmon__UMSMonMsg__Stats__ReceiverTransport__LBTRU</a> *lbtru = NULL;</div><div class="line">        <a class="code" href="struct__Lbmmon____UMSMonMsg____Stats____ReceiverTransport____LBTIPC.html">Lbmmon__UMSMonMsg__Stats__ReceiverTransport__LBTIPC</a> *lbtipc = NULL;</div><div class="line">        <a class="code" href="struct__Lbmmon____UMSMonMsg____Stats____ReceiverTransport____LBTSMX.html">Lbmmon__UMSMonMsg__Stats__ReceiverTransport__LBTSMX</a> *lbtsmx = NULL;</div><div class="line"></div><div class="line">        <span class="keywordflow">if</span> ((Statistics == NULL) || (Source == NULL) || (*Source == <span class="charliteral">&#39;\0&#39;</span>) || (Length == 0) || (FormatClientData == NULL))</div><div class="line">        {</div><div class="line">                strncpy(ErrorString, <span class="stringliteral">&quot;Invalid parameter&quot;</span>, <span class="keyword">sizeof</span>(ErrorString));</div><div class="line">                <span class="keywordflow">return</span> (<a class="code" href="lbmmon_8h.html#a5bd70f9862b6a7b177c7c1442c94bde7">LBMMON_FORMAT_DESERIALIZE_FAILURE</a>);</div><div class="line">        }</div><div class="line"></div><div class="line">        modid = <a class="code" href="lbmmon_8h.html#a287312187727602974c1d34fcedfce9d">MODULE_ID</a>(ModuleID);</div><div class="line">        <span class="keywordflow">if</span> (modid != <a class="code" href="lbmmon_8h.html#a337193651e5882ba963aea467f8de94e">LBMMON_FORMAT_PB_MODULE_ID</a>)</div><div class="line">        {</div><div class="line">                snprintf(ErrorString, <span class="keyword">sizeof</span>(ErrorString), <span class="stringliteral">&quot;Invalid module ID %u&quot;</span>, (<span class="keywordtype">unsigned</span>)modid);</div><div class="line">                <span class="keywordflow">return</span> (<a class="code" href="lbmmon_8h.html#a5bd70f9862b6a7b177c7c1442c94bde7">LBMMON_FORMAT_DESERIALIZE_FAILURE</a>);</div><div class="line">        }</div><div class="line"></div><div class="line">        format_options = (lbmmon_format_pb_t *)FormatClientData;</div><div class="line">        <span class="keywordflow">if</span> (format_options-&gt;mPassthrough == <a class="code" href="lbmmon_8h.html#a265a0bad79606bd0882b0eeeae2ad0c0">LBMMON_FORMAT_PASSTHROUGH_ON</a>)</div><div class="line">        {</div><div class="line">                <span class="keywordflow">return</span> (<a class="code" href="lbmmon_8h.html#a4f28d6f6bf8e4830d9e537dbb2318e3f">LBMMON_FORMAT_DESERIALIZE_PASSTHROUGH</a>);</div><div class="line">        }</div><div class="line"></div><div class="line">        lbmmon_msg = lbmmon__umsmon_msg__unpack(NULL, Length, (<a class="code" href="lbm_8h.html#a09c7963deb485135d5bb29c84cd7d3a9">lbm_uint8_t</a> *)Source);</div><div class="line">        <span class="keywordflow">if</span> ((lbmmon_msg == NULL) || (lbmmon_msg-&gt;attributes == NULL) || (lbmmon_msg-&gt;stats == NULL) ||</div><div class="line">                (lbmmon_msg-&gt;stats-&gt;receiver_transports == NULL) || (lbmmon_msg-&gt;stats-&gt;n_receiver_transports != 1))</div><div class="line">        {</div><div class="line">                snprintf(ErrorString, <span class="keyword">sizeof</span>(ErrorString), <span class="stringliteral">&quot;Error unpacking incoming receiver transport stats message\n&quot;</span>);</div><div class="line">                <span class="keywordflow">return</span> (<a class="code" href="lbmmon_8h.html#a5bd70f9862b6a7b177c7c1442c94bde7">LBMMON_FORMAT_DESERIALIZE_FAILURE</a>);</div><div class="line">        }</div><div class="line">        lbmmon_attributes_format_pb_deserialize(Attributes, lbmmon_msg-&gt;attributes);</div><div class="line">        msg = *(lbmmon_msg-&gt;stats-&gt;receiver_transports);</div><div class="line">        Attributes-&gt;<a class="code" href="structlbmmon__packet__attributes__t__stct.html#a6985d9164eff32c6b9659d4e5f015b11">mSourceFlag</a> = msg-&gt;source_flag;</div><div class="line">        strncpy(Statistics-&gt;<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#ac333fa92e503d7d399c0a7e4fe0a07c3">source</a>, msg-&gt;source_string, <span class="keyword">sizeof</span>(Statistics-&gt;<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#ac333fa92e503d7d399c0a7e4fe0a07c3">source</a>));</div><div class="line"></div><div class="line">        <span class="keywordflow">switch</span> (msg-&gt;transport_type_case)</div><div class="line">        {</div><div class="line">        <span class="keywordflow">case</span> LBMMON__UMSMON_MSG__STATS__RECEIVER_TRANSPORT__TRANSPORT_TYPE_TCP:</div><div class="line">                memset((<span class="keywordtype">void</span> *)&amp;(Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a998cbe5e073d540fc60536cb85bd1971">tcp</a>), 0, <span class="keyword">sizeof</span>(<a class="code" href="structlbm__rcv__transport__stats__tcp__t__stct.html">lbm_rcv_transport_stats_tcp_t</a>));</div><div class="line">                Statistics-&gt;<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a3111b4af23afc72ffb71b3794b4a0835">type</a> = <a class="code" href="lbm_8h.html#a6da60dbd4d5790ee0df30d6c3048f977">LBM_TRANSPORT_STAT_TCP</a>;</div><div class="line">                tcp = msg-&gt;tcp;</div><div class="line">                Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a998cbe5e073d540fc60536cb85bd1971">tcp</a>.<a class="code" href="structlbm__rcv__transport__stats__tcp__t__stct.html#a8ec5b29d4398555010cd1c2f86f8ee7b">bytes_rcved</a> = tcp-&gt;bytes_rcved;</div><div class="line">                Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a998cbe5e073d540fc60536cb85bd1971">tcp</a>.<a class="code" href="structlbm__rcv__transport__stats__tcp__t__stct.html#a811cb200997a8c9a82629a8e07d978b7">lbm_msgs_rcved</a> = tcp-&gt;lbm_msgs_rcved;</div><div class="line">                Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a998cbe5e073d540fc60536cb85bd1971">tcp</a>.<a class="code" href="structlbm__rcv__transport__stats__tcp__t__stct.html#abc3f6d30390080f692d039313413f3cb">lbm_msgs_no_topic_rcved</a> = tcp-&gt;lbm_msgs_no_topic_rcved;</div><div class="line">                Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a998cbe5e073d540fc60536cb85bd1971">tcp</a>.<a class="code" href="structlbm__rcv__transport__stats__tcp__t__stct.html#ab0b34db08c2e2021958f893b5c113f36">lbm_reqs_rcved</a> = tcp-&gt;lbm_reqs_rcved;</div><div class="line">                <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">        <span class="keywordflow">case</span> LBMMON__UMSMON_MSG__STATS__RECEIVER_TRANSPORT__TRANSPORT_TYPE_LBTRM:</div><div class="line">                memset((<span class="keywordtype">void</span> *)&amp;(Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a9d167f0dc09f15c84983e6ab4caefa97">lbtrm</a>), 0, <span class="keyword">sizeof</span>(<a class="code" href="structlbm__rcv__transport__stats__lbtrm__t__stct.html">lbm_rcv_transport_stats_lbtrm_t</a>));</div><div class="line">                Statistics-&gt;<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a3111b4af23afc72ffb71b3794b4a0835">type</a> = <a class="code" href="lbm_8h.html#a32e0d3eee1fe69fa87e985f3343830b3">LBM_TRANSPORT_STAT_LBTRM</a>;</div><div class="line">                lbtrm = msg-&gt;lbtrm;</div><div class="line">                Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a9d167f0dc09f15c84983e6ab4caefa97">lbtrm</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtrm__t__stct.html#a9c6f317be17cafd8678ac556217657cd">msgs_rcved</a> = lbtrm-&gt;msgs_rcved;</div><div class="line">                Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a9d167f0dc09f15c84983e6ab4caefa97">lbtrm</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtrm__t__stct.html#a809e0276efc23e130955b2fa3ee44643">bytes_rcved</a> = lbtrm-&gt;bytes_rcved;</div><div class="line">                Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a9d167f0dc09f15c84983e6ab4caefa97">lbtrm</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtrm__t__stct.html#ab9ef79e2b06d41e2a6d9cbe92c2332fa">nak_pckts_sent</a> = lbtrm-&gt;nak_pckts_sent;</div><div class="line">                Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a9d167f0dc09f15c84983e6ab4caefa97">lbtrm</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtrm__t__stct.html#a57f62048694eb73cc60ce00baddfdf05">naks_sent</a> = lbtrm-&gt;naks_sent;</div><div class="line">                Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a9d167f0dc09f15c84983e6ab4caefa97">lbtrm</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtrm__t__stct.html#ac0a27c8589c7062ba030e5a4dfc041f3">lost</a> = lbtrm-&gt;lost;</div><div class="line">                Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a9d167f0dc09f15c84983e6ab4caefa97">lbtrm</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtrm__t__stct.html#a55cb75058b7b6e55c910209322a4e18c">ncfs_ignored</a> = lbtrm-&gt;ncfs_ignored;</div><div class="line">                Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a9d167f0dc09f15c84983e6ab4caefa97">lbtrm</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtrm__t__stct.html#a8107c61ab08eb2ac6503e66be252dc24">ncfs_shed</a> = lbtrm-&gt;ncfs_shed;</div><div class="line">                Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a9d167f0dc09f15c84983e6ab4caefa97">lbtrm</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtrm__t__stct.html#a16fd860fd8a52f13c17476b58aec513e">ncfs_rx_delay</a> = lbtrm-&gt;ncfs_rx_delay;</div><div class="line">                Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a9d167f0dc09f15c84983e6ab4caefa97">lbtrm</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtrm__t__stct.html#aab6fe15baa5eec8a0d59ef94d8e5f610">ncfs_unknown</a> = lbtrm-&gt;ncfs_unknown;</div><div class="line">                Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a9d167f0dc09f15c84983e6ab4caefa97">lbtrm</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtrm__t__stct.html#afd4f04163e43692b04b5f03e98ab992a">nak_stm_min</a> = lbtrm-&gt;nak_stm_min;</div><div class="line">                Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a9d167f0dc09f15c84983e6ab4caefa97">lbtrm</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtrm__t__stct.html#aed1de00bb7f581547cfe09a1e3959bfc">nak_stm_mean</a> = lbtrm-&gt;nak_stm_mean;</div><div class="line">                Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a9d167f0dc09f15c84983e6ab4caefa97">lbtrm</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtrm__t__stct.html#add6b8fd1bce9506ce9b92e6de0bcba0f">nak_stm_max</a> = lbtrm-&gt;nak_stm_max;</div><div class="line">                Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a9d167f0dc09f15c84983e6ab4caefa97">lbtrm</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtrm__t__stct.html#a8ea05ee4effe7f8e41e45051741ee1c6">nak_tx_min</a> = lbtrm-&gt;nak_tx_min;</div><div class="line">                Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a9d167f0dc09f15c84983e6ab4caefa97">lbtrm</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtrm__t__stct.html#a343438c2f8bfdefec97f582896c3e9d2">nak_tx_mean</a> = lbtrm-&gt;nak_tx_mean;</div><div class="line">                Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a9d167f0dc09f15c84983e6ab4caefa97">lbtrm</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtrm__t__stct.html#a7f3c1007b41498884e17a80c60313aa4">nak_tx_max</a> = lbtrm-&gt;nak_tx_max;</div><div class="line">                Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a9d167f0dc09f15c84983e6ab4caefa97">lbtrm</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtrm__t__stct.html#a2ffe0be11e5dc229572d873cd45ebcac">duplicate_data</a> = lbtrm-&gt;duplicate_data;</div><div class="line">                Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a9d167f0dc09f15c84983e6ab4caefa97">lbtrm</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtrm__t__stct.html#a677ea15bc8a2621f13a774a1a2514899">unrecovered_txw</a> = lbtrm-&gt;unrecovered_txw;</div><div class="line">                Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a9d167f0dc09f15c84983e6ab4caefa97">lbtrm</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtrm__t__stct.html#aec81f344ce20a3485bbf2f5a65b5c61e">unrecovered_tmo</a> = lbtrm-&gt;unrecovered_tmo;</div><div class="line">                Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a9d167f0dc09f15c84983e6ab4caefa97">lbtrm</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtrm__t__stct.html#a44b91569d70c2c5d30e7ec0dcf987b14">lbm_msgs_rcved</a> = lbtrm-&gt;lbm_msgs_rcved;</div><div class="line">                Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a9d167f0dc09f15c84983e6ab4caefa97">lbtrm</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtrm__t__stct.html#a62c19c1a782919ff9ef69cc72ff0a853">lbm_msgs_no_topic_rcved</a> = lbtrm-&gt;lbm_msgs_no_topic_rcved;</div><div class="line">                Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a9d167f0dc09f15c84983e6ab4caefa97">lbtrm</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtrm__t__stct.html#aa4a004fe858a82c61c202d6d154ff8d5">lbm_reqs_rcved</a> = lbtrm-&gt;lbm_reqs_rcved;</div><div class="line">                Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a9d167f0dc09f15c84983e6ab4caefa97">lbtrm</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtrm__t__stct.html#a1c209454ba9fe6b52f903021b14d1e9c">dgrams_dropped_size</a> = lbtrm-&gt;dgrams_dropped_size;</div><div class="line">                Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a9d167f0dc09f15c84983e6ab4caefa97">lbtrm</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtrm__t__stct.html#acad07e2da34793dbaf3dac991f0d997a">dgrams_dropped_type</a> = lbtrm-&gt;dgrams_dropped_type;</div><div class="line">                Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a9d167f0dc09f15c84983e6ab4caefa97">lbtrm</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtrm__t__stct.html#af2fe38df948b4166b599fb7e58bdf027">dgrams_dropped_version</a> = lbtrm-&gt;dgrams_dropped_version;</div><div class="line">                Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a9d167f0dc09f15c84983e6ab4caefa97">lbtrm</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtrm__t__stct.html#a8df967fc7b7c8a0a864709c07a1772aa">dgrams_dropped_hdr</a> = lbtrm-&gt;dgrams_dropped_hdr;</div><div class="line">                Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a9d167f0dc09f15c84983e6ab4caefa97">lbtrm</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtrm__t__stct.html#add62b45ed2e496c7856cdabfcbd56d1f">dgrams_dropped_other</a> = lbtrm-&gt;dgrams_dropped_other;</div><div class="line">                Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a9d167f0dc09f15c84983e6ab4caefa97">lbtrm</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtrm__t__stct.html#a64fcdfea3284b3a1745c33cf8c35005d">out_of_order</a> = lbtrm-&gt;out_of_order;</div><div class="line">                <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">        <span class="keywordflow">case</span> LBMMON__UMSMON_MSG__STATS__RECEIVER_TRANSPORT__TRANSPORT_TYPE_LBTRU:</div><div class="line">                memset((<span class="keywordtype">void</span> *)&amp;(Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a6d5ff286865d47f6fd74e08c0e1692e5">lbtru</a>), 0, <span class="keyword">sizeof</span>(<a class="code" href="structlbm__rcv__transport__stats__lbtru__t__stct.html">lbm_rcv_transport_stats_lbtru_t</a>));</div><div class="line">                Statistics-&gt;<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a3111b4af23afc72ffb71b3794b4a0835">type</a> = <a class="code" href="lbm_8h.html#a1f4acd28e4192be6809ce2cc496cb514">LBM_TRANSPORT_STAT_LBTRU</a>;</div><div class="line">                lbtru = msg-&gt;lbtru;</div><div class="line">                Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a6d5ff286865d47f6fd74e08c0e1692e5">lbtru</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtru__t__stct.html#a5c2054b4aa164bf7619b97f955f00d54">msgs_rcved</a> = lbtru-&gt;msgs_rcved;</div><div class="line">                Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a6d5ff286865d47f6fd74e08c0e1692e5">lbtru</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtru__t__stct.html#aa593773ff216394dfdf15d11d269dbac">bytes_rcved</a> = lbtru-&gt;bytes_rcved;</div><div class="line">                Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a6d5ff286865d47f6fd74e08c0e1692e5">lbtru</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtru__t__stct.html#ab5148dc50512b48023436e9f3d443aa5">nak_pckts_sent</a> = lbtru-&gt;nak_pckts_sent;</div><div class="line">                Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a6d5ff286865d47f6fd74e08c0e1692e5">lbtru</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtru__t__stct.html#a140320be28f195412b1bd15caa772ba1">naks_sent</a> = lbtru-&gt;naks_sent;</div><div class="line">                Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a6d5ff286865d47f6fd74e08c0e1692e5">lbtru</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtru__t__stct.html#a9717bf76222b09c31cbc3d48d79860f3">lost</a> = lbtru-&gt;lost;</div><div class="line">                Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a6d5ff286865d47f6fd74e08c0e1692e5">lbtru</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtru__t__stct.html#aa49935c7f9d89d7abb376d34fce47bbf">ncfs_ignored</a> = lbtru-&gt;ncfs_ignored;</div><div class="line">                Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a6d5ff286865d47f6fd74e08c0e1692e5">lbtru</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtru__t__stct.html#a5bc0857e04113ead3dfb6f85792d998e">ncfs_shed</a> = lbtru-&gt;ncfs_shed;</div><div class="line">                Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a6d5ff286865d47f6fd74e08c0e1692e5">lbtru</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtru__t__stct.html#aa4d08eb201eade79404f781426497473">ncfs_rx_delay</a> = lbtru-&gt;ncfs_rx_delay;</div><div class="line">                Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a6d5ff286865d47f6fd74e08c0e1692e5">lbtru</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtru__t__stct.html#a271dc5422247a3ccb5de7b5446c04bf7">ncfs_unknown</a> = lbtru-&gt;ncfs_unknown;</div><div class="line">                Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a6d5ff286865d47f6fd74e08c0e1692e5">lbtru</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtru__t__stct.html#a41e3790513a832cf98010628a7c65738">nak_stm_min</a> = lbtru-&gt;nak_stm_min;</div><div class="line">                Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a6d5ff286865d47f6fd74e08c0e1692e5">lbtru</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtru__t__stct.html#ae0a95541614e9ce88deb38ac67fad294">nak_stm_mean</a> = lbtru-&gt;nak_stm_mean;</div><div class="line">                Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a6d5ff286865d47f6fd74e08c0e1692e5">lbtru</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtru__t__stct.html#a8f88f7abf87dfabbb8103136ad19146c">nak_stm_max</a> = lbtru-&gt;nak_stm_max;</div><div class="line">                Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a6d5ff286865d47f6fd74e08c0e1692e5">lbtru</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtru__t__stct.html#ae6992801ec5a1ff304792fb9ef6e7184">nak_tx_min</a> = lbtru-&gt;nak_tx_min;</div><div class="line">                Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a6d5ff286865d47f6fd74e08c0e1692e5">lbtru</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtru__t__stct.html#a1b1fbdc65da559b822cbe1085d25c190">nak_tx_mean</a> = lbtru-&gt;nak_tx_mean;</div><div class="line">                Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a6d5ff286865d47f6fd74e08c0e1692e5">lbtru</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtru__t__stct.html#a409294bf165b51774b9503509ef214cf">nak_tx_max</a> = lbtru-&gt;nak_tx_max;</div><div class="line">                Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a6d5ff286865d47f6fd74e08c0e1692e5">lbtru</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtru__t__stct.html#af00ef0896a0ac36a6161664c69e90a81">duplicate_data</a> = lbtru-&gt;duplicate_data;</div><div class="line">                Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a6d5ff286865d47f6fd74e08c0e1692e5">lbtru</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtru__t__stct.html#aa549f88cacfa672176746a6643c37a2f">unrecovered_txw</a> = lbtru-&gt;unrecovered_txw;</div><div class="line">                Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a6d5ff286865d47f6fd74e08c0e1692e5">lbtru</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtru__t__stct.html#a9c6f09ca548af94cc5e0c83257ec3a5f">unrecovered_tmo</a> = lbtru-&gt;unrecovered_tmo;</div><div class="line">                Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a6d5ff286865d47f6fd74e08c0e1692e5">lbtru</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtru__t__stct.html#a076b988c5320c520222eed5e29bfe8e0">lbm_msgs_rcved</a> = lbtru-&gt;lbm_msgs_rcved;</div><div class="line">                Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a6d5ff286865d47f6fd74e08c0e1692e5">lbtru</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtru__t__stct.html#a83c799da110d0f2036111dd7de4fce56">lbm_msgs_no_topic_rcved</a> = lbtru-&gt;lbm_msgs_no_topic_rcved;</div><div class="line">                Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a6d5ff286865d47f6fd74e08c0e1692e5">lbtru</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtru__t__stct.html#a3f62a1925bcc9a4b08f8bb445003c6ee">lbm_reqs_rcved</a> = lbtru-&gt;lbm_reqs_rcved;</div><div class="line">                Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a6d5ff286865d47f6fd74e08c0e1692e5">lbtru</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtru__t__stct.html#a2cb0c80324a1b038de32baae0367bedf">dgrams_dropped_size</a> = lbtru-&gt;dgrams_dropped_size;</div><div class="line">                Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a6d5ff286865d47f6fd74e08c0e1692e5">lbtru</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtru__t__stct.html#ab14a9ed18d2f4c52f22d1e3a200ebc5b">dgrams_dropped_type</a> = lbtru-&gt;dgrams_dropped_type;</div><div class="line">                Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a6d5ff286865d47f6fd74e08c0e1692e5">lbtru</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtru__t__stct.html#a3bc35b655534753f990b1ac3d1bf434d">dgrams_dropped_version</a> = lbtru-&gt;dgrams_dropped_version;</div><div class="line">                Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a6d5ff286865d47f6fd74e08c0e1692e5">lbtru</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtru__t__stct.html#afd3d754cff49f6f9317c1a5e82e7d5e9">dgrams_dropped_hdr</a> = lbtru-&gt;dgrams_dropped_hdr;</div><div class="line">                Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a6d5ff286865d47f6fd74e08c0e1692e5">lbtru</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtru__t__stct.html#a19058480206858399c4820c799ebd35d">dgrams_dropped_other</a> = lbtru-&gt;dgrams_dropped_other;</div><div class="line">                Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a6d5ff286865d47f6fd74e08c0e1692e5">lbtru</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtru__t__stct.html#a3e01c4f5f70e0b7b94d8787308c0367c">dgrams_dropped_sid</a> = lbtru-&gt;dgrams_dropped_sid;</div><div class="line">                <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">        <span class="keywordflow">case</span> LBMMON__UMSMON_MSG__STATS__RECEIVER_TRANSPORT__TRANSPORT_TYPE_LBTIPC:</div><div class="line">                memset((<span class="keywordtype">void</span> *)&amp;(Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#aa0bb3ff2725d54aca064608777ab4fbc">lbtipc</a>), 0, <span class="keyword">sizeof</span>(<a class="code" href="structlbm__rcv__transport__stats__lbtipc__t__stct.html">lbm_rcv_transport_stats_lbtipc_t</a>));</div><div class="line">                Statistics-&gt;<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a3111b4af23afc72ffb71b3794b4a0835">type</a> = <a class="code" href="lbm_8h.html#a64de821cc3a1afda47c5668996d16d9b">LBM_TRANSPORT_STAT_LBTIPC</a>;</div><div class="line">                lbtipc = msg-&gt;lbtipc;</div><div class="line">                Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#aa0bb3ff2725d54aca064608777ab4fbc">lbtipc</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtipc__t__stct.html#a57eb8d53386d3ba41f9edaccfd2ffa76">msgs_rcved</a> = lbtipc-&gt;msgs_rcved;</div><div class="line">                Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#aa0bb3ff2725d54aca064608777ab4fbc">lbtipc</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtipc__t__stct.html#ab6a6d8204a7b58550836838b6746229d">bytes_rcved</a> = lbtipc-&gt;bytes_rcved;</div><div class="line">                Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#aa0bb3ff2725d54aca064608777ab4fbc">lbtipc</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtipc__t__stct.html#aaff870f9a054a44765d715e0a2d06097">lbm_msgs_rcved</a> = lbtipc-&gt;lbm_msgs_rcved;</div><div class="line">                Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#aa0bb3ff2725d54aca064608777ab4fbc">lbtipc</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtipc__t__stct.html#a553ed8203a547d1749bfe69a75264e38">lbm_msgs_no_topic_rcved</a> = lbtipc-&gt;lbm_msgs_no_topic_rcved;</div><div class="line">                Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#aa0bb3ff2725d54aca064608777ab4fbc">lbtipc</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtipc__t__stct.html#a00f50ab6cfa952436b8d378cbe303879">lbm_reqs_rcved</a> = lbtipc-&gt;lbm_reqs_rcved;</div><div class="line">                <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">        <span class="keywordflow">case</span> LBMMON__UMSMON_MSG__STATS__RECEIVER_TRANSPORT__TRANSPORT_TYPE_LBTSMX:</div><div class="line">                memset((<span class="keywordtype">void</span> *)&amp;(Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a17af117bb25bde181c35ac551bedfbd8">lbtsmx</a>), 0, <span class="keyword">sizeof</span>(<a class="code" href="structlbm__rcv__transport__stats__lbtsmx__t__stct.html">lbm_rcv_transport_stats_lbtsmx_t</a>));</div><div class="line">                Statistics-&gt;<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a3111b4af23afc72ffb71b3794b4a0835">type</a> = <a class="code" href="lbm_8h.html#af5d79fa0d57faa68dfa42b20401a94d8">LBM_TRANSPORT_STAT_LBTSMX</a>;</div><div class="line">                lbtsmx = msg-&gt;lbtsmx;</div><div class="line">                Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a17af117bb25bde181c35ac551bedfbd8">lbtsmx</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtsmx__t__stct.html#acbe5de43d70aa5aefd3fdff79d473202">msgs_rcved</a> = lbtsmx-&gt;msgs_rcved;</div><div class="line">                Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a17af117bb25bde181c35ac551bedfbd8">lbtsmx</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtsmx__t__stct.html#a30e882a825c46f220429a772b19481e7">bytes_rcved</a> = lbtsmx-&gt;bytes_rcved;</div><div class="line">                Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a17af117bb25bde181c35ac551bedfbd8">lbtsmx</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtsmx__t__stct.html#a3364756c1a6b45556f560c22aad7a3ae">lbm_msgs_rcved</a> = lbtsmx-&gt;lbm_msgs_rcved;</div><div class="line">                Statistics-&gt;transport.<a class="code" href="structlbm__rcv__transport__stats__t__stct.html#a17af117bb25bde181c35ac551bedfbd8">lbtsmx</a>.<a class="code" href="structlbm__rcv__transport__stats__lbtsmx__t__stct.html#af2d4d5893e40b28bdfaa0c2e32ecd532">lbm_msgs_no_topic_rcved</a> = lbtsmx-&gt;lbm_msgs_no_topic_rcved;</div><div class="line">                <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">        <span class="keywordflow">default</span>:</div><div class="line">                strncpy(ErrorString, <span class="stringliteral">&quot;Invalid LBM transport type&quot;</span>, <span class="keyword">sizeof</span>(ErrorString));</div><div class="line">                <span class="keywordflow">return</span> (<a class="code" href="lbmmon_8h.html#a5bd70f9862b6a7b177c7c1442c94bde7">LBMMON_FORMAT_DESERIALIZE_FAILURE</a>);</div><div class="line">        }</div><div class="line"></div><div class="line">        lbmmon__umsmon_msg__free_unpacked(lbmmon_msg, NULL);</div><div class="line">        <span class="keywordflow">return</span> (<a class="code" href="lbmmon_8h.html#a57b11ffc78d3df723e3d6f70d400d6fe">LBMMON_FORMAT_DESERIALIZE_OK</a>);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> lbmmon_src_format_pb_deserialize(<a class="code" href="structlbmmon__packet__attributes__t__stct.html">lbmmon_packet_attributes_t</a> * Attributes, <a class="code" href="structlbm__src__transport__stats__t__stct.html">lbm_src_transport_stats_t</a> * Statistics, </div><div class="line">        <span class="keyword">const</span> <span class="keywordtype">char</span> * Source, <span class="keywordtype">size_t</span> Length, <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> ModuleID, <span class="keywordtype">void</span> * FormatClientData)</div><div class="line">{</div><div class="line">        <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> modid;</div><div class="line">        lbmmon_format_pb_t * format_options;</div><div class="line">        Lbmmon__UMSMonMsg *lbmmon_msg = NULL;</div><div class="line">        <a class="code" href="struct__Lbmmon____UMSMonMsg____Stats____SourceTransport.html">Lbmmon__UMSMonMsg__Stats__SourceTransport</a> *msg = NULL;</div><div class="line">        <a class="code" href="struct__Lbmmon____UMSMonMsg____Stats____SourceTransport____TCP.html">Lbmmon__UMSMonMsg__Stats__SourceTransport__TCP</a> *tcp = NULL;</div><div class="line">        <a class="code" href="struct__Lbmmon____UMSMonMsg____Stats____SourceTransport____LBTRM.html">Lbmmon__UMSMonMsg__Stats__SourceTransport__LBTRM</a> *lbtrm = NULL;</div><div class="line">        <a class="code" href="struct__Lbmmon____UMSMonMsg____Stats____SourceTransport____LBTRU.html">Lbmmon__UMSMonMsg__Stats__SourceTransport__LBTRU</a> *lbtru = NULL;</div><div class="line">        <a class="code" href="struct__Lbmmon____UMSMonMsg____Stats____SourceTransport____LBTIPC.html">Lbmmon__UMSMonMsg__Stats__SourceTransport__LBTIPC</a> *lbtipc = NULL;</div><div class="line">        <a class="code" href="struct__Lbmmon____UMSMonMsg____Stats____SourceTransport____LBTSMX.html">Lbmmon__UMSMonMsg__Stats__SourceTransport__LBTSMX</a> *lbtsmx = NULL;</div><div class="line"></div><div class="line">        <span class="keywordflow">if</span> ((Statistics == NULL) || (Source == NULL) || (*Source == <span class="charliteral">&#39;\0&#39;</span>) || (Length == 0) || (FormatClientData == NULL))</div><div class="line">        {</div><div class="line">                strncpy(ErrorString, <span class="stringliteral">&quot;Invalid parameter&quot;</span>, <span class="keyword">sizeof</span>(ErrorString));</div><div class="line">                <span class="keywordflow">return</span> (<a class="code" href="lbmmon_8h.html#a5bd70f9862b6a7b177c7c1442c94bde7">LBMMON_FORMAT_DESERIALIZE_FAILURE</a>);</div><div class="line">        }</div><div class="line"></div><div class="line">        modid = <a class="code" href="lbmmon_8h.html#a287312187727602974c1d34fcedfce9d">MODULE_ID</a>(ModuleID);</div><div class="line">        <span class="keywordflow">if</span> (modid != <a class="code" href="lbmmon_8h.html#a337193651e5882ba963aea467f8de94e">LBMMON_FORMAT_PB_MODULE_ID</a>)</div><div class="line">        {</div><div class="line">                snprintf(ErrorString, <span class="keyword">sizeof</span>(ErrorString), <span class="stringliteral">&quot;Invalid module ID %u&quot;</span>, (<span class="keywordtype">unsigned</span>)modid);</div><div class="line">                <span class="keywordflow">return</span> (<a class="code" href="lbmmon_8h.html#a5bd70f9862b6a7b177c7c1442c94bde7">LBMMON_FORMAT_DESERIALIZE_FAILURE</a>);</div><div class="line">        }</div><div class="line"></div><div class="line">        format_options = (lbmmon_format_pb_t *)FormatClientData;</div><div class="line">        <span class="keywordflow">if</span> (format_options-&gt;mPassthrough == <a class="code" href="lbmmon_8h.html#a265a0bad79606bd0882b0eeeae2ad0c0">LBMMON_FORMAT_PASSTHROUGH_ON</a>)</div><div class="line">        {</div><div class="line">                <span class="keywordflow">return</span> (<a class="code" href="lbmmon_8h.html#a4f28d6f6bf8e4830d9e537dbb2318e3f">LBMMON_FORMAT_DESERIALIZE_PASSTHROUGH</a>);</div><div class="line">        }</div><div class="line"></div><div class="line">        lbmmon_msg = lbmmon__umsmon_msg__unpack(NULL, Length, (<a class="code" href="lbm_8h.html#a09c7963deb485135d5bb29c84cd7d3a9">lbm_uint8_t</a> *)Source);</div><div class="line">        <span class="keywordflow">if</span> ((lbmmon_msg == NULL) || (lbmmon_msg-&gt;attributes == NULL) || (lbmmon_msg-&gt;stats == NULL) ||</div><div class="line">                (lbmmon_msg-&gt;stats-&gt;source_transports == NULL) || (lbmmon_msg-&gt;stats-&gt;n_source_transports != 1))</div><div class="line">        {</div><div class="line">                snprintf(ErrorString, <span class="keyword">sizeof</span>(ErrorString), <span class="stringliteral">&quot;Error unpacking incoming source transport stats message\n&quot;</span>);</div><div class="line">                <span class="keywordflow">return</span> (<a class="code" href="lbmmon_8h.html#a5bd70f9862b6a7b177c7c1442c94bde7">LBMMON_FORMAT_DESERIALIZE_FAILURE</a>);</div><div class="line">        }</div><div class="line">        lbmmon_attributes_format_pb_deserialize(Attributes, lbmmon_msg-&gt;attributes);</div><div class="line">        msg = *(lbmmon_msg-&gt;stats-&gt;source_transports);</div><div class="line">        Attributes-&gt;<a class="code" href="structlbmmon__packet__attributes__t__stct.html#a6985d9164eff32c6b9659d4e5f015b11">mSourceFlag</a> = msg-&gt;source_flag;</div><div class="line">        strncpy(Statistics-&gt;<a class="code" href="structlbm__src__transport__stats__t__stct.html#aac9bc9a4d1f84c3cdc7dd83521b3ff70">source</a>, msg-&gt;source_string, <span class="keyword">sizeof</span>(Statistics-&gt;<a class="code" href="structlbm__src__transport__stats__t__stct.html#aac9bc9a4d1f84c3cdc7dd83521b3ff70">source</a>));</div><div class="line">        MUL_DEBUG(LBM_DEBUG_LBMMON, (<span class="stringliteral">&quot;lbmmon_src_format_pb_deserialize (%s) (%d) (%d)\n&quot;</span>, Statistics-&gt;<a class="code" href="structlbm__src__transport__stats__t__stct.html#aac9bc9a4d1f84c3cdc7dd83521b3ff70">source</a>, msg-&gt;transport_type_case, Length));</div><div class="line"></div><div class="line">        <span class="keywordflow">switch</span> (msg-&gt;transport_type_case)</div><div class="line">        {</div><div class="line">        <span class="keywordflow">case</span> LBMMON__UMSMON_MSG__STATS__SOURCE_TRANSPORT__TRANSPORT_TYPE_TCP:</div><div class="line">                memset((<span class="keywordtype">void</span> *)&amp;(Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#a7c2b714d68f2ca2fe56632c185c9a163">tcp</a>), 0, <span class="keyword">sizeof</span>(<a class="code" href="structlbm__src__transport__stats__tcp__t__stct.html">lbm_src_transport_stats_tcp_t</a>));</div><div class="line">                Statistics-&gt;<a class="code" href="structlbm__src__transport__stats__t__stct.html#a9f9aef06b06d3432b1b7ba10583413ce">type</a> = <a class="code" href="lbm_8h.html#a6da60dbd4d5790ee0df30d6c3048f977">LBM_TRANSPORT_STAT_TCP</a>;</div><div class="line">                tcp = msg-&gt;tcp;</div><div class="line">                Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#a7c2b714d68f2ca2fe56632c185c9a163">tcp</a>.<a class="code" href="structlbm__src__transport__stats__tcp__t__stct.html#afdbea18ebdc5f2370f617ed561e1caef">num_clients</a> = tcp-&gt;num_clients;</div><div class="line">                Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#a7c2b714d68f2ca2fe56632c185c9a163">tcp</a>.<a class="code" href="structlbm__src__transport__stats__tcp__t__stct.html#ab658e0534a60e6f8b0ea4ee07d6a7351">bytes_buffered</a> = tcp-&gt;bytes_buffered;</div><div class="line">                <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">        <span class="keywordflow">case</span> LBMMON__UMSMON_MSG__STATS__SOURCE_TRANSPORT__TRANSPORT_TYPE_LBTRM:</div><div class="line">                memset((<span class="keywordtype">void</span> *)&amp;(Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#a6bad1e2180589dd3c3fdc9ddd3b24a38">lbtrm</a>), 0, <span class="keyword">sizeof</span>(<a class="code" href="structlbm__src__transport__stats__lbtrm__t__stct.html">lbm_src_transport_stats_lbtrm_t</a>));</div><div class="line">                Statistics-&gt;<a class="code" href="structlbm__src__transport__stats__t__stct.html#a9f9aef06b06d3432b1b7ba10583413ce">type</a> = <a class="code" href="lbm_8h.html#a32e0d3eee1fe69fa87e985f3343830b3">LBM_TRANSPORT_STAT_LBTRM</a>;</div><div class="line">                lbtrm = msg-&gt;lbtrm;</div><div class="line">                Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#a6bad1e2180589dd3c3fdc9ddd3b24a38">lbtrm</a>.<a class="code" href="structlbm__src__transport__stats__lbtrm__t__stct.html#afdb40daed5c3da97e44b495649d063be">msgs_sent</a> = msg-&gt;lbtrm-&gt;msgs_sent;</div><div class="line">                Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#a6bad1e2180589dd3c3fdc9ddd3b24a38">lbtrm</a>.<a class="code" href="structlbm__src__transport__stats__lbtrm__t__stct.html#ac9e8875bb28fa479cc3425a69b821fae">bytes_sent</a> = lbtrm-&gt;bytes_sent;</div><div class="line">                Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#a6bad1e2180589dd3c3fdc9ddd3b24a38">lbtrm</a>.<a class="code" href="structlbm__src__transport__stats__lbtrm__t__stct.html#a523f274dc1a3c9d8ab2f8cf5761f89f6">txw_msgs</a> = lbtrm-&gt;txw_msgs;</div><div class="line">                Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#a6bad1e2180589dd3c3fdc9ddd3b24a38">lbtrm</a>.<a class="code" href="structlbm__src__transport__stats__lbtrm__t__stct.html#afeaeca726b303f4f70fa5e5c016c6a1a">txw_bytes</a> = lbtrm-&gt;txw_bytes;</div><div class="line">                Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#a6bad1e2180589dd3c3fdc9ddd3b24a38">lbtrm</a>.<a class="code" href="structlbm__src__transport__stats__lbtrm__t__stct.html#a274fbe52a206df04a56e4011dc43f3b5">nak_pckts_rcved</a> = lbtrm-&gt;nak_pckts_rcved;</div><div class="line">                Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#a6bad1e2180589dd3c3fdc9ddd3b24a38">lbtrm</a>.<a class="code" href="structlbm__src__transport__stats__lbtrm__t__stct.html#a363c5c9c4b5a44e1eced9ad7a2892473">naks_rcved</a> = lbtrm-&gt;naks_rcved;</div><div class="line">                Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#a6bad1e2180589dd3c3fdc9ddd3b24a38">lbtrm</a>.<a class="code" href="structlbm__src__transport__stats__lbtrm__t__stct.html#a2ce4464adca5085460282d5f24e824e5">naks_ignored</a> = lbtrm-&gt;naks_ignored;</div><div class="line">                Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#a6bad1e2180589dd3c3fdc9ddd3b24a38">lbtrm</a>.<a class="code" href="structlbm__src__transport__stats__lbtrm__t__stct.html#accf51bbd30c14ed1c88582aa6f0400b6">naks_shed</a> = lbtrm-&gt;naks_shed;</div><div class="line">                Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#a6bad1e2180589dd3c3fdc9ddd3b24a38">lbtrm</a>.<a class="code" href="structlbm__src__transport__stats__lbtrm__t__stct.html#a93605cc2dcfac90aecd4736439c3bdea">naks_rx_delay_ignored</a> = lbtrm-&gt;naks_rx_delay_ignored;</div><div class="line">                Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#a6bad1e2180589dd3c3fdc9ddd3b24a38">lbtrm</a>.<a class="code" href="structlbm__src__transport__stats__lbtrm__t__stct.html#aa422cfe9a6d2943554a5bcac082e267a">rxs_sent</a> = lbtrm-&gt;rxs_sent;</div><div class="line">                Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#a6bad1e2180589dd3c3fdc9ddd3b24a38">lbtrm</a>.<a class="code" href="structlbm__src__transport__stats__lbtrm__t__stct.html#a1b06028d9780a5c230ccb9daf51c2a13">rctlr_data_msgs</a> = lbtrm-&gt;rctlr_data_msgs;</div><div class="line">                Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#a6bad1e2180589dd3c3fdc9ddd3b24a38">lbtrm</a>.<a class="code" href="structlbm__src__transport__stats__lbtrm__t__stct.html#ac872c31f04d67e7bcd833e185697c378">rctlr_rx_msgs</a> = lbtrm-&gt;rctlr_rx_msgs;</div><div class="line">                Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#a6bad1e2180589dd3c3fdc9ddd3b24a38">lbtrm</a>.<a class="code" href="structlbm__src__transport__stats__lbtrm__t__stct.html#a7fac3436d89273a06a810e79fc482cd5">rx_bytes_sent</a> = lbtrm-&gt;rx_bytes_sent;</div><div class="line">                <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">        <span class="keywordflow">case</span> LBMMON__UMSMON_MSG__STATS__SOURCE_TRANSPORT__TRANSPORT_TYPE_LBTRU:</div><div class="line">                memset((<span class="keywordtype">void</span> *)&amp;(Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#acd0a2c474f818d9f43afb504bcdac266">lbtru</a>), 0, <span class="keyword">sizeof</span>(<a class="code" href="structlbm__src__transport__stats__lbtru__t__stct.html">lbm_src_transport_stats_lbtru_t</a>));</div><div class="line">                Statistics-&gt;<a class="code" href="structlbm__src__transport__stats__t__stct.html#a9f9aef06b06d3432b1b7ba10583413ce">type</a> = <a class="code" href="lbm_8h.html#a1f4acd28e4192be6809ce2cc496cb514">LBM_TRANSPORT_STAT_LBTRU</a>;</div><div class="line">                lbtru = msg-&gt;lbtru;</div><div class="line">                Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#acd0a2c474f818d9f43afb504bcdac266">lbtru</a>.<a class="code" href="structlbm__src__transport__stats__lbtru__t__stct.html#a33977a0a14846929f481fa61b10a45fe">msgs_sent</a> = lbtru-&gt;msgs_sent;</div><div class="line">                Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#acd0a2c474f818d9f43afb504bcdac266">lbtru</a>.<a class="code" href="structlbm__src__transport__stats__lbtru__t__stct.html#a9851cc6a90ccb8e318b022818ea57c58">bytes_sent</a> = lbtru-&gt;bytes_sent;</div><div class="line">                Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#acd0a2c474f818d9f43afb504bcdac266">lbtru</a>.<a class="code" href="structlbm__src__transport__stats__lbtru__t__stct.html#ae567bd7f28c540faecf2864e8829af8a">nak_pckts_rcved</a> = lbtru-&gt;nak_pckts_rcved;</div><div class="line">                Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#acd0a2c474f818d9f43afb504bcdac266">lbtru</a>.<a class="code" href="structlbm__src__transport__stats__lbtru__t__stct.html#a9833ac2f8d6a9e6708a6848b641a6a4c">naks_rcved</a> = lbtru-&gt;naks_rcved;</div><div class="line">                Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#acd0a2c474f818d9f43afb504bcdac266">lbtru</a>.<a class="code" href="structlbm__src__transport__stats__lbtru__t__stct.html#a3f2a675528727a6d758cc41a8d8f5201">naks_ignored</a> = lbtru-&gt;naks_ignored;</div><div class="line">                Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#acd0a2c474f818d9f43afb504bcdac266">lbtru</a>.<a class="code" href="structlbm__src__transport__stats__lbtru__t__stct.html#a8b27273ad2887a0d7d11a91d6cd28258">naks_shed</a> = lbtru-&gt;naks_shed;</div><div class="line">                Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#acd0a2c474f818d9f43afb504bcdac266">lbtru</a>.<a class="code" href="structlbm__src__transport__stats__lbtru__t__stct.html#a1c46665e5d1c207ff52d5bdc5777a8c6">naks_rx_delay_ignored</a> = lbtru-&gt;naks_rx_delay_ignored;</div><div class="line">                Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#acd0a2c474f818d9f43afb504bcdac266">lbtru</a>.<a class="code" href="structlbm__src__transport__stats__lbtru__t__stct.html#a118a840dd8a4c9a65f4a947784e19080">rxs_sent</a> = lbtru-&gt;rxs_sent;</div><div class="line">                Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#acd0a2c474f818d9f43afb504bcdac266">lbtru</a>.<a class="code" href="structlbm__src__transport__stats__lbtru__t__stct.html#af77f17b77c54450902654a0482dcd8f9">num_clients</a> = lbtru-&gt;num_clients;</div><div class="line">                Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#acd0a2c474f818d9f43afb504bcdac266">lbtru</a>.<a class="code" href="structlbm__src__transport__stats__lbtru__t__stct.html#ae40c00c037145b33a904f232cb633740">rx_bytes_sent</a> = lbtru-&gt;rx_bytes_sent;</div><div class="line">                <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">        <span class="keywordflow">case</span> LBMMON__UMSMON_MSG__STATS__SOURCE_TRANSPORT__TRANSPORT_TYPE_LBTIPC:</div><div class="line">                memset((<span class="keywordtype">void</span> *)&amp;(Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#a7b4175075377813b21794285ebad2a30">lbtipc</a>), 0, <span class="keyword">sizeof</span>(<a class="code" href="structlbm__src__transport__stats__lbtipc__t__stct.html">lbm_src_transport_stats_lbtipc_t</a>));</div><div class="line">                Statistics-&gt;<a class="code" href="structlbm__src__transport__stats__t__stct.html#a9f9aef06b06d3432b1b7ba10583413ce">type</a> = <a class="code" href="lbm_8h.html#a64de821cc3a1afda47c5668996d16d9b">LBM_TRANSPORT_STAT_LBTIPC</a>;</div><div class="line">                lbtipc = msg-&gt;lbtipc;</div><div class="line">                Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#a7b4175075377813b21794285ebad2a30">lbtipc</a>.<a class="code" href="structlbm__src__transport__stats__lbtipc__t__stct.html#a4cab35a71697d41cd9884878ece220ae">num_clients</a> = lbtipc-&gt;num_clients;</div><div class="line">                Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#a7b4175075377813b21794285ebad2a30">lbtipc</a>.<a class="code" href="structlbm__src__transport__stats__lbtipc__t__stct.html#aa71c033adada3522adc4ee6fdcee7502">msgs_sent</a> = lbtipc-&gt;msgs_sent;</div><div class="line">                Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#a7b4175075377813b21794285ebad2a30">lbtipc</a>.<a class="code" href="structlbm__src__transport__stats__lbtipc__t__stct.html#a640ee5a27d5d2659c1e74ffb3d39b00e">bytes_sent</a> = lbtipc-&gt;bytes_sent;</div><div class="line">                <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">        <span class="keywordflow">case</span> LBMMON__UMSMON_MSG__STATS__SOURCE_TRANSPORT__TRANSPORT_TYPE_LBTSMX:</div><div class="line">                memset((<span class="keywordtype">void</span> *)&amp;(Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#abcd38be1b1e24c25185a5bfcfd0919f2">lbtsmx</a>), 0, <span class="keyword">sizeof</span>(<a class="code" href="structlbm__src__transport__stats__lbtsmx__t__stct.html">lbm_src_transport_stats_lbtsmx_t</a>));</div><div class="line">                Statistics-&gt;<a class="code" href="structlbm__src__transport__stats__t__stct.html#a9f9aef06b06d3432b1b7ba10583413ce">type</a> = <a class="code" href="lbm_8h.html#af5d79fa0d57faa68dfa42b20401a94d8">LBM_TRANSPORT_STAT_LBTSMX</a>;</div><div class="line">                lbtsmx = msg-&gt;lbtsmx;</div><div class="line">                Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#abcd38be1b1e24c25185a5bfcfd0919f2">lbtsmx</a>.<a class="code" href="structlbm__src__transport__stats__lbtsmx__t__stct.html#a23f7ba1e7a44b9223ef29f8bdfe0c570">num_clients</a> = lbtsmx-&gt;num_clients;</div><div class="line">                Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#abcd38be1b1e24c25185a5bfcfd0919f2">lbtsmx</a>.<a class="code" href="structlbm__src__transport__stats__lbtsmx__t__stct.html#aa5a75358d3fa9f713bbf231dd8b9bc3d">msgs_sent</a> = lbtsmx-&gt;msgs_sent;</div><div class="line">                Statistics-&gt;transport.<a class="code" href="structlbm__src__transport__stats__t__stct.html#abcd38be1b1e24c25185a5bfcfd0919f2">lbtsmx</a>.<a class="code" href="structlbm__src__transport__stats__lbtsmx__t__stct.html#a94b73c843dee38fa088cef85d86defb5">bytes_sent</a> = lbtsmx-&gt;bytes_sent;</div><div class="line">                <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">        <span class="keywordflow">default</span>:</div><div class="line">                strncpy(ErrorString, <span class="stringliteral">&quot;Invalid LBM transport type&quot;</span>, <span class="keyword">sizeof</span>(ErrorString));</div><div class="line">                <span class="keywordflow">return</span> (<a class="code" href="lbmmon_8h.html#a5bd70f9862b6a7b177c7c1442c94bde7">LBMMON_FORMAT_DESERIALIZE_FAILURE</a>);</div><div class="line">        }</div><div class="line"></div><div class="line">        lbmmon__umsmon_msg__free_unpacked(lbmmon_msg, NULL);</div><div class="line">        <span class="keywordflow">return</span> (<a class="code" href="lbmmon_8h.html#a57b11ffc78d3df723e3d6f70d400d6fe">LBMMON_FORMAT_DESERIALIZE_OK</a>);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> lbmmon_evq_format_pb_deserialize(<a class="code" href="structlbmmon__packet__attributes__t__stct.html">lbmmon_packet_attributes_t</a> * Attributes, <a class="code" href="structlbm__event__queue__stats__t__stct.html">lbm_event_queue_stats_t</a> * Statistics,</div><div class="line">        <span class="keyword">const</span> <span class="keywordtype">char</span> * Source, <span class="keywordtype">size_t</span> Length, <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> ModuleID, <span class="keywordtype">void</span> * FormatClientData)</div><div class="line">{</div><div class="line">        <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> modid;</div><div class="line">        lbmmon_format_pb_t * format_options;</div><div class="line">        Lbmmon__UMSMonMsg *lbmmon_msg = NULL;</div><div class="line">        <a class="code" href="struct__Lbmmon____UMSMonMsg____Stats____EventQueue.html">Lbmmon__UMSMonMsg__Stats__EventQueue</a> *msg = NULL;</div><div class="line"></div><div class="line">        <span class="keywordflow">if</span> ((Statistics == NULL) || (Source == NULL) || (*Source == <span class="charliteral">&#39;\0&#39;</span>) || (Length == 0) || (FormatClientData == NULL))</div><div class="line">        {</div><div class="line">                strncpy(ErrorString, <span class="stringliteral">&quot;Invalid parameter&quot;</span>, <span class="keyword">sizeof</span>(ErrorString));</div><div class="line">                <span class="keywordflow">return</span> (<a class="code" href="lbmmon_8h.html#a5bd70f9862b6a7b177c7c1442c94bde7">LBMMON_FORMAT_DESERIALIZE_FAILURE</a>);</div><div class="line">        }</div><div class="line"></div><div class="line">        modid = <a class="code" href="lbmmon_8h.html#a287312187727602974c1d34fcedfce9d">MODULE_ID</a>(ModuleID);</div><div class="line">        <span class="keywordflow">if</span> (modid != <a class="code" href="lbmmon_8h.html#a337193651e5882ba963aea467f8de94e">LBMMON_FORMAT_PB_MODULE_ID</a>)</div><div class="line">        {</div><div class="line">                snprintf(ErrorString, <span class="keyword">sizeof</span>(ErrorString), <span class="stringliteral">&quot;Invalid module ID %u&quot;</span>, (<span class="keywordtype">unsigned</span>)modid);</div><div class="line">                <span class="keywordflow">return</span> (<a class="code" href="lbmmon_8h.html#a5bd70f9862b6a7b177c7c1442c94bde7">LBMMON_FORMAT_DESERIALIZE_FAILURE</a>);</div><div class="line">        }</div><div class="line"></div><div class="line">        format_options = (lbmmon_format_pb_t *)FormatClientData;</div><div class="line">        <span class="keywordflow">if</span> (format_options-&gt;mPassthrough == <a class="code" href="lbmmon_8h.html#a265a0bad79606bd0882b0eeeae2ad0c0">LBMMON_FORMAT_PASSTHROUGH_ON</a>)</div><div class="line">        {</div><div class="line">                <span class="keywordflow">return</span> (<a class="code" href="lbmmon_8h.html#a4f28d6f6bf8e4830d9e537dbb2318e3f">LBMMON_FORMAT_DESERIALIZE_PASSTHROUGH</a>);</div><div class="line">        }</div><div class="line"></div><div class="line">        lbmmon_msg = lbmmon__umsmon_msg__unpack(NULL, Length, (<a class="code" href="lbm_8h.html#a09c7963deb485135d5bb29c84cd7d3a9">lbm_uint8_t</a> *)Source);</div><div class="line">        <span class="keywordflow">if</span> ((lbmmon_msg == NULL) || (lbmmon_msg-&gt;attributes == NULL) || (lbmmon_msg-&gt;stats == NULL) ||</div><div class="line">                (lbmmon_msg-&gt;stats-&gt;event_queues == NULL) || (lbmmon_msg-&gt;stats-&gt;n_event_queues != 1))</div><div class="line">        {</div><div class="line">                snprintf(ErrorString, <span class="keyword">sizeof</span>(ErrorString), <span class="stringliteral">&quot;Error unpacking incoming event queue stats message\n&quot;</span>);</div><div class="line">                <span class="keywordflow">return</span> (<a class="code" href="lbmmon_8h.html#a5bd70f9862b6a7b177c7c1442c94bde7">LBMMON_FORMAT_DESERIALIZE_FAILURE</a>);</div><div class="line">        }</div><div class="line">        lbmmon_attributes_format_pb_deserialize(Attributes, lbmmon_msg-&gt;attributes);</div><div class="line">        msg = *(lbmmon_msg-&gt;stats-&gt;event_queues);</div><div class="line">        memset((<span class="keywordtype">void</span> *)Statistics, 0, <span class="keyword">sizeof</span>(<a class="code" href="lbm_8h.html#a6897baf281a5b4729e05c873aacac420">lbm_event_queue_t</a>));</div><div class="line">        Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#a0eb4cee05632d02b092146ed4ed5200a">data_msgs</a> = msg-&gt;data_msgs;</div><div class="line">        Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#a9faa0fa2f108f2d7453463745bd370f7">data_msgs_tot</a> = msg-&gt;data_msgs_tot;</div><div class="line">        Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#a61020bab146e49bcd7f47c1b377501a9">data_msgs_svc_min</a> = msg-&gt;data_msgs_svc_min;</div><div class="line">        Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#a39d290d6a68777df3ac57b18d30aa498">data_msgs_svc_mean</a> = msg-&gt;data_msgs_svc_mean;</div><div class="line">        Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#a02a466471faa160f1acda2705c16283c">data_msgs_svc_max</a> = msg-&gt;data_msgs_svc_max;</div><div class="line">        Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#aea791390a064056a8f93c6addbba96a8">resp_msgs</a> = msg-&gt;resp_msgs;</div><div class="line">        Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#afaad01b23b601dd35615084a0a662591">resp_msgs_tot</a> = msg-&gt;resp_msgs_tot;</div><div class="line">        Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#aa1e9f026e3b15a2e92cf57c8c50db249">resp_msgs_svc_min</a> = msg-&gt;resp_msgs_svc_min;</div><div class="line">        Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#a7e7a4dfe0dec175231cf33881b420296">resp_msgs_svc_mean</a> = msg-&gt;resp_msgs_svc_mean;</div><div class="line">        Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#a29eb14834e33025db465ba84d70326b1">resp_msgs_svc_max</a> = msg-&gt;resp_msgs_svc_max;</div><div class="line">        Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#a05d3309ba0ef8de6fe1674eaab8c16f2">topicless_im_msgs</a> = msg-&gt;topicless_im_msgs;</div><div class="line">        Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#a8ba2a1749eddf7008fd32c667bbfd485">topicless_im_msgs_tot</a> = msg-&gt;topicless_im_msgs_tot;</div><div class="line">        Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#a5891b3bc602b6816a1efe9237dc01411">topicless_im_msgs_svc_min</a> = msg-&gt;topicless_im_msgs_svc_min;</div><div class="line">        Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#a8324e427c8f5dacfce62688d8c55300d">topicless_im_msgs_svc_mean</a> = msg-&gt;topicless_im_msgs_svc_mean;</div><div class="line">        Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#aea741e1c779554d67f5f7b7bdad102a2">topicless_im_msgs_svc_max</a> = msg-&gt;topicless_im_msgs_svc_max;</div><div class="line">        Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#a12172195c123c5784da72d54d813a077">wrcv_msgs</a> = msg-&gt;wrcv_msgs;</div><div class="line">        Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#aa7caaedadd941ad9e2a44a70f17bda35">wrcv_msgs_tot</a> = msg-&gt;wrcv_msgs_tot;</div><div class="line">        Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#a1338b7cd203824e5a4c25e98a69ee5fa">wrcv_msgs_svc_min</a> = msg-&gt;wrcv_msgs_svc_min;</div><div class="line">        Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#a6f4d0f070261fbc8592929fe977206a2">wrcv_msgs_svc_mean</a> = msg-&gt;wrcv_msgs_svc_mean;</div><div class="line">        Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#ae6cd233101e3d1a20505566f1e8de8f0">wrcv_msgs_svc_max</a> = msg-&gt;wrcv_msgs_svc_max;</div><div class="line">        Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#a911742fa8ccb9784face0821990a98ba">io_events</a> = msg-&gt;io_events;</div><div class="line">        Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#a6b825e930161fad24afc7eb4123f2378">io_events_tot</a> = msg-&gt;io_events_tot;</div><div class="line">        Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#ae79f4afec8375c71f7628b79898b33d6">io_events_svc_min</a> = msg-&gt;io_events_svc_min;</div><div class="line">        Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#afc5a4e0b7bebe116436cf602893f317c">io_events_svc_mean</a> = msg-&gt;io_events_svc_mean;</div><div class="line">        Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#aec0eb221a80f6a4030add93f7fee0027">io_events_svc_max</a> = msg-&gt;io_events_svc_max;</div><div class="line">        Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#afa54b79ba6470e45cddf3a0269489886">timer_events</a> = msg-&gt;timer_events;</div><div class="line">        Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#a5d038b42d24be8fa8f0c44a510da3db7">timer_events_tot</a> = msg-&gt;timer_events_tot;</div><div class="line">        Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#a42d79e18289e480ac888a724e1ad0251">timer_events_svc_min</a> = msg-&gt;timer_events_svc_min;</div><div class="line">        Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#ae5aae9b986f94c8b7af90933c10bc98b">timer_events_svc_mean</a> = msg-&gt;timer_events_svc_mean;</div><div class="line">        Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#a5ef4fd1e121074234107927c319316dc">timer_events_svc_max</a> = msg-&gt;timer_events_svc_max;</div><div class="line">        Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#aec20f141f6232d4643cd39ad46fb8854">source_events</a> = msg-&gt;source_events;</div><div class="line">        Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#a3ba4acbab434e33351d1e72809929dc4">source_events_tot</a> = msg-&gt;source_events_tot;</div><div class="line">        Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#a4a47c62b6209c4fe60cf5aad5533d0ee">source_events_svc_min</a> = msg-&gt;source_events_svc_min;</div><div class="line">        Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#ac642c3796cd2fa665e773d051570151f">source_events_svc_mean</a> = msg-&gt;source_events_svc_mean;</div><div class="line">        Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#a12d4ae0b315775583e428df1f8b6f9ac">source_events_svc_max</a> = msg-&gt;source_events_svc_max;</div><div class="line">        Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#a062d3c2f4cad5e79a6085f160c7d11e2">unblock_events</a> = msg-&gt;unblock_events;</div><div class="line">        Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#ad0bdbf867a54b0532d6a6e34f0ff7dcd">unblock_events_tot</a> = msg-&gt;unblock_events_tot;</div><div class="line">        Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#a3de0b0f2a1a0e28eda7139391f129282">cancel_events</a> = msg-&gt;cancel_events;</div><div class="line">        Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#ae132a9532a3cd9e8cb2a848f7bc21310">cancel_events_tot</a> = msg-&gt;cancel_events_tot;</div><div class="line">        Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#ab4c9d672da911a1480dae57afb4d9f02">cancel_events_svc_min</a> = msg-&gt;cancel_events_svc_min;</div><div class="line">        Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#a052dbba776635e77a4120e5ef6e90c91">cancel_events_svc_mean</a> = msg-&gt;cancel_events_svc_mean;</div><div class="line">        Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#a7cd4f559697c4d5f78faa9a62ef84a2a">cancel_events_svc_max</a> = msg-&gt;cancel_events_svc_max;</div><div class="line">        Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#a282f43818b35a6eb065c0921c6da2ffa">context_source_events</a> = msg-&gt;context_source_events;</div><div class="line">        Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#a717995ba4aec1a7f6015845c1559ee1f">context_source_events_tot</a> = msg-&gt;context_source_events_tot;</div><div class="line">        Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#a47427d10f3c5b85f171df27d7e8d6167">context_source_events_svc_min</a> = msg-&gt;context_source_events_svc_min;</div><div class="line">        Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#a8ddc8a009868eec5805c8f3ef4c0dd30">context_source_events_svc_mean</a> = msg-&gt;context_source_events_svc_mean;</div><div class="line">        Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#ae7acc69ae5bdb19d6c9cf24da124ffe1">context_source_events_svc_max</a> = msg-&gt;context_source_events_svc_max;</div><div class="line">        Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#aa277eb758107dc807eb871f389d21f02">events</a> = msg-&gt;events;</div><div class="line">        Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#a5eca47585017c10b9fcfb66189bea1f3">events_tot</a> = msg-&gt;events_tot;</div><div class="line">        Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#a9841f3a2b8e513a6d7f34358e92b817f">age_min</a> = msg-&gt;age_min;</div><div class="line">        Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#a3b67a68331cfceee0d7a72a14a87cde3">age_mean</a> = msg-&gt;age_mean;</div><div class="line">        Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#a3d0a5bc4f1e5f1b8c63882ccefb89fb6">age_max</a> = msg-&gt;age_max;</div><div class="line">        Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#a6acd77a2ec28565a90e49158e0fb3487">callback_events</a> = msg-&gt;callback_events;</div><div class="line">        Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#ac3368332b158a18c24c0158c31816237">callback_events_tot</a> = msg-&gt;callback_events_tot;</div><div class="line">        Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#ac266ed66cddfe0368d4cbafa4197ab04">callback_events_svc_min</a> = msg-&gt;callback_events_svc_min;</div><div class="line">        Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#a78f8a82d99aeead6a864db8e80284693">callback_events_svc_mean</a> = msg-&gt;callback_events_svc_mean;</div><div class="line">        Statistics-&gt;<a class="code" href="structlbm__event__queue__stats__t__stct.html#ae20d931a2302674c0c8ac765671e5a10">callback_events_svc_max</a> = msg-&gt;callback_events_svc_max;</div><div class="line"></div><div class="line">        lbmmon__umsmon_msg__free_unpacked(lbmmon_msg, NULL);</div><div class="line">        <span class="keywordflow">return</span> (<a class="code" href="lbmmon_8h.html#a57b11ffc78d3df723e3d6f70d400d6fe">LBMMON_FORMAT_DESERIALIZE_OK</a>);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> lbmmon_ctx_format_pb_deserialize(<a class="code" href="structlbmmon__packet__attributes__t__stct.html">lbmmon_packet_attributes_t</a> * Attributes, <a class="code" href="structlbm__context__stats__t__stct.html">lbm_context_stats_t</a> * Statistics,</div><div class="line">        <span class="keyword">const</span> <span class="keywordtype">char</span> * Source, <span class="keywordtype">size_t</span> Length, <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> ModuleID, <span class="keywordtype">void</span> * FormatClientData)</div><div class="line">{</div><div class="line">        <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> modid;</div><div class="line">        lbmmon_format_pb_t * format_options;</div><div class="line">        Lbmmon__UMSMonMsg *lbmmon_msg = NULL;</div><div class="line">        <a class="code" href="struct__Lbmmon____UMSMonMsg____Stats____Context.html">Lbmmon__UMSMonMsg__Stats__Context</a> *msg = NULL;</div><div class="line"></div><div class="line">        <span class="keywordflow">if</span> ((Statistics == NULL) || (Source == NULL) || (*Source == <span class="charliteral">&#39;\0&#39;</span>) || (Length == 0) || (FormatClientData == NULL))</div><div class="line">        {</div><div class="line">                strncpy(ErrorString, <span class="stringliteral">&quot;Invalid parameter&quot;</span>, <span class="keyword">sizeof</span>(ErrorString));</div><div class="line">                <span class="keywordflow">return</span> (<a class="code" href="lbmmon_8h.html#a5bd70f9862b6a7b177c7c1442c94bde7">LBMMON_FORMAT_DESERIALIZE_FAILURE</a>);</div><div class="line">        }</div><div class="line"></div><div class="line">        modid = <a class="code" href="lbmmon_8h.html#a287312187727602974c1d34fcedfce9d">MODULE_ID</a>(ModuleID);</div><div class="line">        <span class="keywordflow">if</span> (modid != <a class="code" href="lbmmon_8h.html#a337193651e5882ba963aea467f8de94e">LBMMON_FORMAT_PB_MODULE_ID</a>)</div><div class="line">        {</div><div class="line">                snprintf(ErrorString, <span class="keyword">sizeof</span>(ErrorString), <span class="stringliteral">&quot;Invalid module ID %u&quot;</span>, (<span class="keywordtype">unsigned</span>)modid);</div><div class="line">                <span class="keywordflow">return</span> (<a class="code" href="lbmmon_8h.html#a5bd70f9862b6a7b177c7c1442c94bde7">LBMMON_FORMAT_DESERIALIZE_FAILURE</a>);</div><div class="line">        }</div><div class="line"></div><div class="line">        format_options = (lbmmon_format_pb_t *)FormatClientData;</div><div class="line">        <span class="keywordflow">if</span> (format_options-&gt;mPassthrough == <a class="code" href="lbmmon_8h.html#a265a0bad79606bd0882b0eeeae2ad0c0">LBMMON_FORMAT_PASSTHROUGH_ON</a>)</div><div class="line">        {</div><div class="line">                <span class="keywordflow">return</span> (<a class="code" href="lbmmon_8h.html#a4f28d6f6bf8e4830d9e537dbb2318e3f">LBMMON_FORMAT_DESERIALIZE_PASSTHROUGH</a>);</div><div class="line">        }</div><div class="line"></div><div class="line">        lbmmon_msg = lbmmon__umsmon_msg__unpack(NULL, Length, (<a class="code" href="lbm_8h.html#a09c7963deb485135d5bb29c84cd7d3a9">lbm_uint8_t</a> *)Source);</div><div class="line">        <span class="keywordflow">if</span> ((lbmmon_msg == NULL) || (lbmmon_msg-&gt;attributes == NULL) || (lbmmon_msg-&gt;stats == NULL) ||</div><div class="line">                (lbmmon_msg-&gt;stats-&gt;context == NULL))</div><div class="line">        {</div><div class="line">                snprintf(ErrorString, <span class="keyword">sizeof</span>(ErrorString), <span class="stringliteral">&quot;Error unpacking incoming context stats message\n&quot;</span>);</div><div class="line">                <span class="keywordflow">return</span> (<a class="code" href="lbmmon_8h.html#a5bd70f9862b6a7b177c7c1442c94bde7">LBMMON_FORMAT_DESERIALIZE_FAILURE</a>);</div><div class="line">        }</div><div class="line">        lbmmon_attributes_format_pb_deserialize(Attributes, lbmmon_msg-&gt;attributes);</div><div class="line">        msg = lbmmon_msg-&gt;stats-&gt;context;</div><div class="line">        memset((<span class="keywordtype">void</span> *)Statistics, 0, <span class="keyword">sizeof</span>(<a class="code" href="structlbm__context__stats__t__stct.html">lbm_context_stats_t</a>));</div><div class="line">        Statistics-&gt;<a class="code" href="structlbm__context__stats__t__stct.html#af81b4e84e386bd78281c6ae10311bb88">tr_dgrams_sent</a> = msg-&gt;tr_dgrams_sent;</div><div class="line">        Statistics-&gt;<a class="code" href="structlbm__context__stats__t__stct.html#adad0991cb75599de9f1aca11fc774d3b">tr_bytes_sent</a> = msg-&gt;tr_bytes_sent;</div><div class="line">        Statistics-&gt;<a class="code" href="structlbm__context__stats__t__stct.html#ac098444f61f7b93a1291187f7b7b099c">tr_dgrams_rcved</a> = msg-&gt;tr_dgrams_rcved;</div><div class="line">        Statistics-&gt;<a class="code" href="structlbm__context__stats__t__stct.html#a1bf2557cdbc5c7c1114ef73366448083">tr_bytes_rcved</a> = msg-&gt;tr_bytes_rcved;</div><div class="line">        Statistics-&gt;<a class="code" href="structlbm__context__stats__t__stct.html#a4af77dcdede237ff289bf1085f4d9030">tr_dgrams_dropped_ver</a> = msg-&gt;tr_dgrams_dropped_ver;</div><div class="line">        Statistics-&gt;<a class="code" href="structlbm__context__stats__t__stct.html#a9477e4a48c6cceabea9450e0f85276da">tr_dgrams_dropped_type</a> = msg-&gt;tr_dgrams_dropped_type;</div><div class="line">        Statistics-&gt;<a class="code" href="structlbm__context__stats__t__stct.html#aaba67cae496b93572e2455a25776babe">tr_dgrams_dropped_malformed</a> = msg-&gt;tr_dgrams_dropped_malformed;</div><div class="line">        Statistics-&gt;<a class="code" href="structlbm__context__stats__t__stct.html#a7b42a82511c67ae2dd0ae7803c15e750">tr_dgrams_send_failed</a> = msg-&gt;tr_dgrams_send_failed;</div><div class="line">        Statistics-&gt;<a class="code" href="structlbm__context__stats__t__stct.html#affb4eeb9919e7b2551d890ff84fb9581">tr_src_topics</a> = msg-&gt;tr_src_topics;</div><div class="line">        Statistics-&gt;<a class="code" href="structlbm__context__stats__t__stct.html#a0c14976cf3ef474b6601f968587153f4">tr_rcv_topics</a> = msg-&gt;tr_rcv_topics;</div><div class="line">        Statistics-&gt;<a class="code" href="structlbm__context__stats__t__stct.html#accf9ebc73f241bc2c7f0043e75d89d2c">tr_rcv_unresolved_topics</a> = msg-&gt;tr_rcv_unresolved_topics;</div><div class="line">        Statistics-&gt;<a class="code" href="structlbm__context__stats__t__stct.html#ad2fd3379b1a47479c7b64e873118be5c">lbtrm_unknown_msgs_rcved</a> = msg-&gt;lbtrm_unknown_msgs_rcved;</div><div class="line">        Statistics-&gt;<a class="code" href="structlbm__context__stats__t__stct.html#a68d5c0b331abcd3d229e718762348500">lbtru_unknown_msgs_rcved</a> = msg-&gt;lbtru_unknown_msgs_rcved;</div><div class="line">        Statistics-&gt;<a class="code" href="structlbm__context__stats__t__stct.html#a092960998a64a6e810381e5770da7dac">send_blocked</a> = msg-&gt;send_blocked;</div><div class="line">        Statistics-&gt;<a class="code" href="structlbm__context__stats__t__stct.html#a7c7d7bca55193f5e400f63bc1f86b8da">send_would_block</a> = msg-&gt;send_would_block;</div><div class="line">        Statistics-&gt;<a class="code" href="structlbm__context__stats__t__stct.html#ac8ffb608dcbaea5347343aa1fcbcefad">resp_blocked</a> = msg-&gt;resp_blocked;</div><div class="line">        Statistics-&gt;<a class="code" href="structlbm__context__stats__t__stct.html#a9e6492f0efa2a1387cc74108900b9b50">resp_would_block</a> = msg-&gt;resp_would_block;</div><div class="line">        Statistics-&gt;<a class="code" href="structlbm__context__stats__t__stct.html#a96e30b87315deb7bbb3754bbf8b1ef44">uim_dup_msgs_rcved</a> = msg-&gt;uim_dup_msgs_rcved;</div><div class="line">        Statistics-&gt;<a class="code" href="structlbm__context__stats__t__stct.html#acd0917cbb558c6aa709f058a5cfc4179">uim_msgs_no_stream_rcved</a> = msg-&gt;uim_msgs_no_stream_rcved;</div><div class="line">        Statistics-&gt;<a class="code" href="structlbm__context__stats__t__stct.html#ad80f9f30910a7468de9863238cdf126d">fragments_lost</a> = msg-&gt;fragments_lost;</div><div class="line">        Statistics-&gt;<a class="code" href="structlbm__context__stats__t__stct.html#a368bb93a5038b98e6e59b62c34a3d5b4">fragments_unrecoverably_lost</a> = msg-&gt;fragments_unrecoverably_lost;</div><div class="line">        Statistics-&gt;<a class="code" href="structlbm__context__stats__t__stct.html#ad6dc0c61916512a1d385501d8d635fe3">rcv_cb_svc_time_min</a> = msg-&gt;rcv_cb_svc_time_min;</div><div class="line">        Statistics-&gt;<a class="code" href="structlbm__context__stats__t__stct.html#a6e7fd17516ad5bd894bd47b1c506d91f">rcv_cb_svc_time_max</a> = msg-&gt;rcv_cb_svc_time_max;</div><div class="line">        Statistics-&gt;<a class="code" href="structlbm__context__stats__t__stct.html#a7773f35c817502bbb33acac04a197715">rcv_cb_svc_time_mean</a> = msg-&gt;rcv_cb_svc_time_mean;</div><div class="line"></div><div class="line">        lbmmon__umsmon_msg__free_unpacked(lbmmon_msg, NULL);</div><div class="line">        <span class="keywordflow">return</span> (<a class="code" href="lbmmon_8h.html#a57b11ffc78d3df723e3d6f70d400d6fe">LBMMON_FORMAT_DESERIALIZE_OK</a>);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> lbmmon_rcv_topic_format_pb_deserialize(<a class="code" href="structlbmmon__packet__attributes__t__stct.html">lbmmon_packet_attributes_t</a> * Attributes, <span class="keywordtype">size_t</span> * Count, </div><div class="line">        <a class="code" href="structlbm__rcv__topic__stats__t__stct.html">lbm_rcv_topic_stats_t</a> * Statistics, <span class="keyword">const</span> <span class="keywordtype">char</span> * Source,</div><div class="line">        <span class="keywordtype">size_t</span> Length, <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> ModuleID, <span class="keywordtype">void</span> * FormatClientData)</div><div class="line">{</div><div class="line">        <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> modid;</div><div class="line">        lbmmon_format_pb_t * format_options;</div><div class="line">        Lbmmon__UMSMonMsg *lbmmon_msg = NULL;</div><div class="line">        <a class="code" href="struct__Lbmmon____UMSMonMsg____Events____ReceiverTopic.html">Lbmmon__UMSMonMsg__Events__ReceiverTopic</a> *msg = NULL;</div><div class="line">        <span class="keywordtype">size_t</span> idx;</div><div class="line">        <span class="keywordtype">char</span> topic[LBM_MSG_MAX_TOPIC_LEN + 1];</div><div class="line">        <span class="keywordtype">size_t</span> src_count;</div><div class="line"></div><div class="line">        <span class="keywordflow">if</span> ((Count == NULL) || (*Count == 0) || (Statistics == NULL) || (Source == NULL) || </div><div class="line">                (*Source == <span class="charliteral">&#39;\0&#39;</span>) || (Length == 0) || (FormatClientData == NULL))</div><div class="line">        {</div><div class="line">                strncpy(ErrorString, <span class="stringliteral">&quot;Invalid parameter&quot;</span>, <span class="keyword">sizeof</span>(ErrorString));</div><div class="line">                <span class="keywordflow">return</span> (<a class="code" href="lbmmon_8h.html#a5bd70f9862b6a7b177c7c1442c94bde7">LBMMON_FORMAT_DESERIALIZE_FAILURE</a>);</div><div class="line">        }</div><div class="line"></div><div class="line">        modid = <a class="code" href="lbmmon_8h.html#a287312187727602974c1d34fcedfce9d">MODULE_ID</a>(ModuleID);</div><div class="line">        <span class="keywordflow">if</span> (modid != <a class="code" href="lbmmon_8h.html#a337193651e5882ba963aea467f8de94e">LBMMON_FORMAT_PB_MODULE_ID</a>)</div><div class="line">        {</div><div class="line">                snprintf(ErrorString, <span class="keyword">sizeof</span>(ErrorString), <span class="stringliteral">&quot;Invalid module ID %u&quot;</span>, (<span class="keywordtype">unsigned</span>)modid);</div><div class="line">                <span class="keywordflow">return</span> (<a class="code" href="lbmmon_8h.html#a5bd70f9862b6a7b177c7c1442c94bde7">LBMMON_FORMAT_DESERIALIZE_FAILURE</a>);</div><div class="line">        }</div><div class="line"></div><div class="line">        format_options = (lbmmon_format_pb_t *)FormatClientData;</div><div class="line">        <span class="keywordflow">if</span> (format_options-&gt;mPassthrough == <a class="code" href="lbmmon_8h.html#a265a0bad79606bd0882b0eeeae2ad0c0">LBMMON_FORMAT_PASSTHROUGH_ON</a>)</div><div class="line">        {</div><div class="line">                <span class="keywordflow">return</span> (<a class="code" href="lbmmon_8h.html#a4f28d6f6bf8e4830d9e537dbb2318e3f">LBMMON_FORMAT_DESERIALIZE_PASSTHROUGH</a>);</div><div class="line">        }</div><div class="line"></div><div class="line">        lbmmon_msg = lbmmon__umsmon_msg__unpack(NULL, Length, (<a class="code" href="lbm_8h.html#a09c7963deb485135d5bb29c84cd7d3a9">lbm_uint8_t</a> *)Source);</div><div class="line">        <span class="keywordflow">if</span> ((lbmmon_msg == NULL) || (lbmmon_msg-&gt;attributes == NULL) || (lbmmon_msg-&gt;events == NULL) ||</div><div class="line">                (lbmmon_msg-&gt;events-&gt;receiver_topics == NULL) || (lbmmon_msg-&gt;events-&gt;n_receiver_topics != 1))</div><div class="line">        {</div><div class="line">                snprintf(ErrorString, <span class="keyword">sizeof</span>(ErrorString), <span class="stringliteral">&quot;Error unpacking incoming receiver topic stats message\n&quot;</span>);</div><div class="line">                <span class="keywordflow">return</span> (<a class="code" href="lbmmon_8h.html#a5bd70f9862b6a7b177c7c1442c94bde7">LBMMON_FORMAT_DESERIALIZE_FAILURE</a>);</div><div class="line">        }</div><div class="line">        lbmmon_attributes_format_pb_deserialize(Attributes, lbmmon_msg-&gt;attributes);</div><div class="line">        msg = *(lbmmon_msg-&gt;events-&gt;receiver_topics);</div><div class="line">        strncpy(topic, msg-&gt;topic, <span class="keyword">sizeof</span>(topic));</div><div class="line">        src_count = msg-&gt;n_sources;</div><div class="line"></div><div class="line">        <span class="keywordflow">if</span> (*Count &lt; src_count)</div><div class="line">        {</div><div class="line">                <span class="comment">/* Not enough entries. */</span></div><div class="line">                *Count = src_count;</div><div class="line">                <span class="keywordflow">return</span> (<a class="code" href="lbmmon_8h.html#adb899ed41484d347f6f4eb07de61f444">LBMMON_FORMAT_DESERIALIZE_TOO_SMALL</a>);</div><div class="line">        }</div><div class="line">        <span class="keywordflow">if</span> (src_count == 0)</div><div class="line">        {</div><div class="line">                memset((<span class="keywordtype">void</span> *)&amp;(Statistics[0]), 0, <span class="keyword">sizeof</span>(<a class="code" href="structlbm__rcv__topic__stats__t__stct.html">lbm_rcv_topic_stats_t</a>));</div><div class="line">                strncpy(Statistics[0].topic, topic, <span class="keyword">sizeof</span>(Statistics[idx].topic));</div><div class="line">                src_count = 1;</div><div class="line">        } <span class="keywordflow">else</span> {</div><div class="line">                <span class="keywordflow">for</span> (idx = 0; idx &lt; src_count; ++idx)</div><div class="line">                {</div><div class="line">                        <span class="keywordtype">size_t</span> count;</div><div class="line">                        <span class="keywordtype">char</span> * pos;</div><div class="line"></div><div class="line">                        memset((<span class="keywordtype">void</span> *)&amp;(Statistics[idx]), 0, <span class="keyword">sizeof</span>(<a class="code" href="structlbm__rcv__topic__stats__t__stct.html">lbm_rcv_topic_stats_t</a>));</div><div class="line">                        strncpy(Statistics[idx].topic, topic, <span class="keyword">sizeof</span>(Statistics[idx].topic));</div><div class="line">                        Statistics[idx].<a class="code" href="structlbm__rcv__topic__stats__t__stct.html#a068955b59605ff12802ede240e15924b">flags</a> = msg-&gt;sources[idx]-&gt;source_state;</div><div class="line">                        strncpy(Statistics[idx].source, msg-&gt;sources[idx]-&gt;source_string, <span class="keyword">sizeof</span>(Statistics[idx].<a class="code" href="structlbm__rcv__topic__stats__t__stct.html#afff1d2c8a81027a2814bdc472ae9c8d8">source</a>));</div><div class="line">                        pos = msg-&gt;sources[idx]-&gt;otid;</div><div class="line">                        <span class="keywordflow">for</span> (count = 0; count &lt; LBM_OTID_BLOCK_SZ; count++) {</div><div class="line">                                sscanf(pos, <span class="stringliteral">&quot;%2hhx&quot;</span>, &amp;Statistics[idx].otid[count]);</div><div class="line">                                pos += 2;</div><div class="line">                        }</div><div class="line">                        Statistics[idx].<a class="code" href="structlbm__rcv__topic__stats__t__stct.html#a1c7eeb9a981d4be6ab9d989177f7e602">topic_idx</a> = msg-&gt;sources[idx]-&gt;topic_idx;</div><div class="line">                        Statistics[idx].<a class="code" href="structlbm__rcv__topic__stats__t__stct.html#ab9fb3f084e9c637edef9ac4c4630bc75">timestamp_sec</a> = msg-&gt;sources[idx]-&gt;timestamp_sec;</div><div class="line">                        Statistics[idx].<a class="code" href="structlbm__rcv__topic__stats__t__stct.html#a583197a249ff883258ea042e9cafca4a">timestamp_usec</a> = msg-&gt;sources[idx]-&gt;timestamp_usec;</div><div class="line">                }</div><div class="line">        }</div><div class="line">        lbmmon__umsmon_msg__free_unpacked(lbmmon_msg, NULL);</div><div class="line">        *Count = src_count;</div><div class="line">        <span class="keywordflow">return</span> (<a class="code" href="lbmmon_8h.html#a57b11ffc78d3df723e3d6f70d400d6fe">LBMMON_FORMAT_DESERIALIZE_OK</a>);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> lbmmon_wildcard_rcv_format_pb_deserialize(<a class="code" href="structlbmmon__packet__attributes__t__stct.html">lbmmon_packet_attributes_t</a> * Attributes, <a class="code" href="structlbm__wildcard__rcv__stats__t__stct.html">lbm_wildcard_rcv_stats_t</a> * Statistics, </div><div class="line">        <span class="keyword">const</span> <span class="keywordtype">char</span> * Source, <span class="keywordtype">size_t</span> Length, <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> ModuleID, <span class="keywordtype">void</span> * FormatClientData)</div><div class="line">{</div><div class="line">        <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> modid;</div><div class="line">        lbmmon_format_pb_t * format_options;</div><div class="line">        Lbmmon__UMSMonMsg *lbmmon_msg = NULL;</div><div class="line">        <a class="code" href="struct__Lbmmon____UMSMonMsg____Events____WildcardReceiver.html">Lbmmon__UMSMonMsg__Events__WildcardReceiver</a> *msg = NULL;</div><div class="line"></div><div class="line">        <span class="keywordflow">if</span> ((Statistics == NULL) || (Source == NULL) || (*Source == <span class="charliteral">&#39;\0&#39;</span>) || (Length == 0) || (FormatClientData == NULL))</div><div class="line">        {</div><div class="line">                strncpy(ErrorString, <span class="stringliteral">&quot;Invalid parameter&quot;</span>, <span class="keyword">sizeof</span>(ErrorString));</div><div class="line">                <span class="keywordflow">return</span> (<a class="code" href="lbmmon_8h.html#a5bd70f9862b6a7b177c7c1442c94bde7">LBMMON_FORMAT_DESERIALIZE_FAILURE</a>);</div><div class="line">        }</div><div class="line"></div><div class="line">        modid = <a class="code" href="lbmmon_8h.html#a287312187727602974c1d34fcedfce9d">MODULE_ID</a>(ModuleID);</div><div class="line">        <span class="keywordflow">if</span> (modid != <a class="code" href="lbmmon_8h.html#a337193651e5882ba963aea467f8de94e">LBMMON_FORMAT_PB_MODULE_ID</a>)</div><div class="line">        {</div><div class="line">                snprintf(ErrorString, <span class="keyword">sizeof</span>(ErrorString), <span class="stringliteral">&quot;Invalid module ID %u&quot;</span>, (<span class="keywordtype">unsigned</span>)modid);</div><div class="line">                <span class="keywordflow">return</span> (<a class="code" href="lbmmon_8h.html#a5bd70f9862b6a7b177c7c1442c94bde7">LBMMON_FORMAT_DESERIALIZE_FAILURE</a>);</div><div class="line">        }</div><div class="line"></div><div class="line">        format_options = (lbmmon_format_pb_t *)FormatClientData;</div><div class="line">        <span class="keywordflow">if</span> (format_options-&gt;mPassthrough == <a class="code" href="lbmmon_8h.html#a265a0bad79606bd0882b0eeeae2ad0c0">LBMMON_FORMAT_PASSTHROUGH_ON</a>)</div><div class="line">        {</div><div class="line">                <span class="keywordflow">return</span> (<a class="code" href="lbmmon_8h.html#a4f28d6f6bf8e4830d9e537dbb2318e3f">LBMMON_FORMAT_DESERIALIZE_PASSTHROUGH</a>);</div><div class="line">        }</div><div class="line"></div><div class="line">        lbmmon_msg = lbmmon__umsmon_msg__unpack(NULL, Length, (<a class="code" href="lbm_8h.html#a09c7963deb485135d5bb29c84cd7d3a9">lbm_uint8_t</a> *)Source);</div><div class="line">        <span class="keywordflow">if</span> ((lbmmon_msg == NULL) || (lbmmon_msg-&gt;attributes == NULL) || (lbmmon_msg-&gt;events == NULL) ||</div><div class="line">                (lbmmon_msg-&gt;events-&gt;wildcard_receivers == NULL) || (lbmmon_msg-&gt;events-&gt;n_wildcard_receivers != 1))</div><div class="line">        {</div><div class="line">                snprintf(ErrorString, <span class="keyword">sizeof</span>(ErrorString), <span class="stringliteral">&quot;Error unpacking incoming wildcard stats message\n&quot;</span>);</div><div class="line">                <span class="keywordflow">return</span> (<a class="code" href="lbmmon_8h.html#a5bd70f9862b6a7b177c7c1442c94bde7">LBMMON_FORMAT_DESERIALIZE_FAILURE</a>);</div><div class="line">        }</div><div class="line"></div><div class="line">        lbmmon_attributes_format_pb_deserialize(Attributes, lbmmon_msg-&gt;attributes);</div><div class="line">        msg = *(lbmmon_msg-&gt;events-&gt;wildcard_receivers);</div><div class="line">        memset((<span class="keywordtype">void</span> *)Statistics, 0, <span class="keyword">sizeof</span>(<a class="code" href="structlbm__wildcard__rcv__stats__t__stct.html">lbm_wildcard_rcv_stats_t</a>));</div><div class="line">        strncpy(Statistics-&gt;<a class="code" href="structlbm__wildcard__rcv__stats__t__stct.html#a45dcb7dd7131525d0eaa525d013be336">pattern</a>, msg-&gt;pattern, <span class="keyword">sizeof</span>(Statistics-&gt;<a class="code" href="structlbm__wildcard__rcv__stats__t__stct.html#a45dcb7dd7131525d0eaa525d013be336">pattern</a>));</div><div class="line">        Statistics-&gt;<a class="code" href="structlbm__wildcard__rcv__stats__t__stct.html#a013c6df622d0fcc55e426242a3fae1f9">type</a> = (<a class="code" href="lbm_8h.html#a09c7963deb485135d5bb29c84cd7d3a9">lbm_uint8_t</a>)msg-&gt;type;</div><div class="line">        lbmmon__umsmon_msg__free_unpacked(lbmmon_msg, NULL);</div><div class="line">        <span class="keywordflow">return</span> (<a class="code" href="lbmmon_8h.html#a57b11ffc78d3df723e3d6f70d400d6fe">LBMMON_FORMAT_DESERIALIZE_OK</a>);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> lbmmon_store_format_pb_deserialize(<a class="code" href="structlbmmon__packet__attributes__t__stct.html">lbmmon_packet_attributes_t</a> * Attributes, Lbmmon__UMPMonMsg ** StoreMsg,</div><div class="line">        <span class="keyword">const</span> <span class="keywordtype">char</span> * Source, <span class="keywordtype">size_t</span> Length, <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> ModuleID, <span class="keywordtype">void</span> * FormatClientData)</div><div class="line">{</div><div class="line">        Lbmmon__UMPMonMsg *msg = NULL;</div><div class="line">        <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> modid;</div><div class="line">        lbmmon_format_pb_t * format_options;</div><div class="line"></div><div class="line">        <span class="keywordflow">if</span> ((StoreMsg == NULL) || (Source == NULL) || (*Source == <span class="charliteral">&#39;\0&#39;</span>) || (Length == 0) || (FormatClientData == NULL))</div><div class="line">        {</div><div class="line">                strncpy(ErrorString, <span class="stringliteral">&quot;Invalid parameter&quot;</span>, <span class="keyword">sizeof</span>(ErrorString));</div><div class="line">                <span class="keywordflow">return</span> (<a class="code" href="lbmmon_8h.html#a5bd70f9862b6a7b177c7c1442c94bde7">LBMMON_FORMAT_DESERIALIZE_FAILURE</a>);</div><div class="line">        }</div><div class="line"></div><div class="line">        modid = <a class="code" href="lbmmon_8h.html#a287312187727602974c1d34fcedfce9d">MODULE_ID</a>(ModuleID);</div><div class="line">        <span class="keywordflow">if</span> (modid != <a class="code" href="lbmmon_8h.html#a337193651e5882ba963aea467f8de94e">LBMMON_FORMAT_PB_MODULE_ID</a>)</div><div class="line">        {</div><div class="line">                strncpy(ErrorString, <span class="stringliteral">&quot;Invalid module ID&quot;</span>, <span class="keyword">sizeof</span>(ErrorString));</div><div class="line">                <span class="keywordflow">return</span> (<a class="code" href="lbmmon_8h.html#a5bd70f9862b6a7b177c7c1442c94bde7">LBMMON_FORMAT_DESERIALIZE_FAILURE</a>);</div><div class="line">        }</div><div class="line"></div><div class="line">        format_options = (lbmmon_format_pb_t *)FormatClientData;</div><div class="line">        <span class="keywordflow">if</span> (format_options-&gt;mPassthrough == <a class="code" href="lbmmon_8h.html#a265a0bad79606bd0882b0eeeae2ad0c0">LBMMON_FORMAT_PASSTHROUGH_ON</a>)</div><div class="line">        {</div><div class="line">                <span class="keywordflow">return</span> (<a class="code" href="lbmmon_8h.html#a4f28d6f6bf8e4830d9e537dbb2318e3f">LBMMON_FORMAT_DESERIALIZE_PASSTHROUGH</a>);</div><div class="line">        }</div><div class="line"></div><div class="line">        msg = lbmmon__umpmon_msg__unpack(NULL, Length, (<a class="code" href="lbm_8h.html#a09c7963deb485135d5bb29c84cd7d3a9">lbm_uint8_t</a> *)Source); </div><div class="line">        <span class="keywordflow">if</span> (msg == NULL)</div><div class="line">        {</div><div class="line">                snprintf(ErrorString, <span class="keyword">sizeof</span>(ErrorString), <span class="stringliteral">&quot;Error unpacking incoming UME store lbmmon message\n&quot;</span>);</div><div class="line">                <span class="keywordflow">return</span> (<a class="code" href="lbmmon_8h.html#a5bd70f9862b6a7b177c7c1442c94bde7">LBMMON_FORMAT_DESERIALIZE_FAILURE</a>);</div><div class="line">        }</div><div class="line">        lbmmon_attributes_format_pb_deserialize(Attributes, msg-&gt;attributes);</div><div class="line">        *StoreMsg = msg;</div><div class="line">        <span class="keywordflow">return</span> (<a class="code" href="lbmmon_8h.html#a57b11ffc78d3df723e3d6f70d400d6fe">LBMMON_FORMAT_DESERIALIZE_OK</a>);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> lbmmon_store_free_unpacked(Lbmmon__UMPMonMsg * StoreMsg)</div><div class="line">{</div><div class="line">        <span class="keywordflow">if</span> (StoreMsg == NULL)</div><div class="line">        {</div><div class="line">                strncpy(ErrorString, <span class="stringliteral">&quot;Invalid parameter&quot;</span>, <span class="keyword">sizeof</span>(ErrorString));</div><div class="line">                <span class="keywordflow">return</span> (<a class="code" href="lbmmon_8h.html#a5bd70f9862b6a7b177c7c1442c94bde7">LBMMON_FORMAT_DESERIALIZE_FAILURE</a>);</div><div class="line">        }</div><div class="line">        lbmmon__umpmon_msg__free_unpacked(StoreMsg, NULL);</div><div class="line">        <span class="keywordflow">return</span> (<a class="code" href="lbmmon_8h.html#a57b11ffc78d3df723e3d6f70d400d6fe">LBMMON_FORMAT_DESERIALIZE_OK</a>);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> lbmmon_gateway_format_pb_deserialize(<a class="code" href="structlbmmon__packet__attributes__t__stct.html">lbmmon_packet_attributes_t</a> * Attributes, Lbmmon__DROMonMsg ** GatewayMsg,</div><div class="line">        <span class="keyword">const</span> <span class="keywordtype">char</span> * Source, <span class="keywordtype">size_t</span> Length, <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> ModuleID, <span class="keywordtype">void</span> * FormatClientData)</div><div class="line">{</div><div class="line">        Lbmmon__DROMonMsg *msg = NULL;</div><div class="line">        <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> modid;</div><div class="line">        lbmmon_format_pb_t * format_options;</div><div class="line"></div><div class="line">        <span class="keywordflow">if</span> ((GatewayMsg == NULL) || (Source == NULL) || (*Source == <span class="charliteral">&#39;\0&#39;</span>) || (Length == 0) || (FormatClientData == NULL))</div><div class="line">        {</div><div class="line">                strncpy(ErrorString, <span class="stringliteral">&quot;Invalid parameter&quot;</span>, <span class="keyword">sizeof</span>(ErrorString));</div><div class="line">                <span class="keywordflow">return</span> (<a class="code" href="lbmmon_8h.html#a5bd70f9862b6a7b177c7c1442c94bde7">LBMMON_FORMAT_DESERIALIZE_FAILURE</a>);</div><div class="line">        }</div><div class="line"></div><div class="line">        modid = <a class="code" href="lbmmon_8h.html#a287312187727602974c1d34fcedfce9d">MODULE_ID</a>(ModuleID);</div><div class="line">        <span class="keywordflow">if</span> (modid != <a class="code" href="lbmmon_8h.html#a337193651e5882ba963aea467f8de94e">LBMMON_FORMAT_PB_MODULE_ID</a>)</div><div class="line">        {</div><div class="line">                strncpy(ErrorString, <span class="stringliteral">&quot;Invalid module ID&quot;</span>, <span class="keyword">sizeof</span>(ErrorString));</div><div class="line">                <span class="keywordflow">return</span> (<a class="code" href="lbmmon_8h.html#a5bd70f9862b6a7b177c7c1442c94bde7">LBMMON_FORMAT_DESERIALIZE_FAILURE</a>);</div><div class="line">        }</div><div class="line"></div><div class="line">        format_options = (lbmmon_format_pb_t *)FormatClientData;</div><div class="line">        <span class="keywordflow">if</span> (format_options-&gt;mPassthrough == <a class="code" href="lbmmon_8h.html#a265a0bad79606bd0882b0eeeae2ad0c0">LBMMON_FORMAT_PASSTHROUGH_ON</a>)</div><div class="line">        {</div><div class="line">                <span class="keywordflow">return</span> (<a class="code" href="lbmmon_8h.html#a4f28d6f6bf8e4830d9e537dbb2318e3f">LBMMON_FORMAT_DESERIALIZE_PASSTHROUGH</a>);</div><div class="line">        }</div><div class="line"></div><div class="line">        msg = lbmmon__dromon_msg__unpack(NULL, Length, (<a class="code" href="lbm_8h.html#a09c7963deb485135d5bb29c84cd7d3a9">lbm_uint8_t</a> *)Source);</div><div class="line">        <span class="keywordflow">if</span> (msg == NULL)</div><div class="line">        {</div><div class="line">                snprintf(ErrorString, <span class="keyword">sizeof</span>(ErrorString), <span class="stringliteral">&quot;Error unpacking incoming UME gateway lbmmon message\n&quot;</span>);</div><div class="line">                <span class="keywordflow">return</span> (<a class="code" href="lbmmon_8h.html#a5bd70f9862b6a7b177c7c1442c94bde7">LBMMON_FORMAT_DESERIALIZE_FAILURE</a>);</div><div class="line">        }</div><div class="line">        lbmmon_attributes_format_pb_deserialize(Attributes, msg-&gt;attributes);</div><div class="line">        *GatewayMsg = msg;</div><div class="line">        <span class="keywordflow">return</span> (<a class="code" href="lbmmon_8h.html#a57b11ffc78d3df723e3d6f70d400d6fe">LBMMON_FORMAT_DESERIALIZE_OK</a>);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> lbmmon_gateway_free_unpacked(Lbmmon__DROMonMsg * GatewayMsg)</div><div class="line">{</div><div class="line">        <span class="keywordflow">if</span> (GatewayMsg == NULL)</div><div class="line">        {</div><div class="line">                strncpy(ErrorString, <span class="stringliteral">&quot;Invalid parameter&quot;</span>, <span class="keyword">sizeof</span>(ErrorString));</div><div class="line">                <span class="keywordflow">return</span> (<a class="code" href="lbmmon_8h.html#a5bd70f9862b6a7b177c7c1442c94bde7">LBMMON_FORMAT_DESERIALIZE_FAILURE</a>);</div><div class="line">        }</div><div class="line">        lbmmon__dromon_msg__free_unpacked(GatewayMsg, NULL);</div><div class="line">        <span class="keywordflow">return</span> (<a class="code" href="lbmmon_8h.html#a57b11ffc78d3df723e3d6f70d400d6fe">LBMMON_FORMAT_DESERIALIZE_OK</a>);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> lbmmon_format_pb_finish(<span class="keywordtype">void</span> * FormatClientData)</div><div class="line">{</div><div class="line">        <span class="keywordflow">if</span> (FormatClientData != NULL)</div><div class="line">        {</div><div class="line">                lbmmon_format_pb_t * data = (lbmmon_format_pb_t *)FormatClientData;</div><div class="line">                free(data-&gt;filters);</div><div class="line">                free(data);</div><div class="line">        }</div><div class="line">        <span class="keywordflow">return</span> (0);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> * lbmmon_format_pb_errmsg(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">        <span class="keywordflow">return</span> (ErrorString);</div><div class="line">}</div><div class="line"></div></div><!-- fragment --> </div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="lbmmon_examples.html">LBMMON Example source code</a></li><li class="navelem"><a class="el" href="lbmmon_pb_format.html">LBMMON PB format module</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
